function KR(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function fd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zv={exports:{}},vh={},Jv={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nS;function ZR(){if(nS)return an;nS=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function E($,re,Ne){this.props=$,this.context=re,this.refs=b,this.updater=Ne||x}E.prototype.isReactComponent={},E.prototype.setState=function($,re){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,re,"setState")},E.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function S(){}S.prototype=E.prototype;function C($,re,Ne){this.props=$,this.context=re,this.refs=b,this.updater=Ne||x}var P=C.prototype=new S;P.constructor=C,w(P,E.prototype),P.isPureReactComponent=!0;var I=Array.isArray,B=Object.prototype.hasOwnProperty,N={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function H($,re,Ne){var he,Te={},Ie=null,Ce=null;if(re!=null)for(he in re.ref!==void 0&&(Ce=re.ref),re.key!==void 0&&(Ie=""+re.key),re)B.call(re,he)&&!U.hasOwnProperty(he)&&(Te[he]=re[he]);var He=arguments.length-2;if(He===1)Te.children=Ne;else if(1<He){for(var gt=Array(He),Ze=0;Ze<He;Ze++)gt[Ze]=arguments[Ze+2];Te.children=gt}if($&&$.defaultProps)for(he in He=$.defaultProps,He)Te[he]===void 0&&(Te[he]=He[he]);return{$$typeof:n,type:$,key:Ie,ref:Ce,props:Te,_owner:N.current}}function O($,re){return{$$typeof:n,type:$.type,key:re,ref:$.ref,props:$.props,_owner:$._owner}}function D($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function W($){var re={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Ne){return re[Ne]})}var ee=/\/+/g;function ne($,re){return typeof $=="object"&&$!==null&&$.key!=null?W(""+$.key):re.toString(36)}function le($,re,Ne,he,Te){var Ie=typeof $;(Ie==="undefined"||Ie==="boolean")&&($=null);var Ce=!1;if($===null)Ce=!0;else switch(Ie){case"string":case"number":Ce=!0;break;case"object":switch($.$$typeof){case n:case e:Ce=!0}}if(Ce)return Ce=$,Te=Te(Ce),$=he===""?"."+ne(Ce,0):he,I(Te)?(Ne="",$!=null&&(Ne=$.replace(ee,"$&/")+"/"),le(Te,re,Ne,"",function(Ze){return Ze})):Te!=null&&(D(Te)&&(Te=O(Te,Ne+(!Te.key||Ce&&Ce.key===Te.key?"":(""+Te.key).replace(ee,"$&/")+"/")+$)),re.push(Te)),1;if(Ce=0,he=he===""?".":he+":",I($))for(var He=0;He<$.length;He++){Ie=$[He];var gt=he+ne(Ie,He);Ce+=le(Ie,re,Ne,gt,Te)}else if(gt=v($),typeof gt=="function")for($=gt.call($),He=0;!(Ie=$.next()).done;)Ie=Ie.value,gt=he+ne(Ie,He++),Ce+=le(Ie,re,Ne,gt,Te);else if(Ie==="object")throw re=String($),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return Ce}function pe($,re,Ne){if($==null)return $;var he=[],Te=0;return le($,he,"","",function(Ie){return re.call(Ne,Ie,Te++)}),he}function de($){if($._status===-1){var re=$._result;re=re(),re.then(function(Ne){($._status===0||$._status===-1)&&($._status=1,$._result=Ne)},function(Ne){($._status===0||$._status===-1)&&($._status=2,$._result=Ne)}),$._status===-1&&($._status=0,$._result=re)}if($._status===1)return $._result.default;throw $._result}var _e={current:null},F={transition:null},J={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:F,ReactCurrentOwner:N};function Z(){throw Error("act(...) is not supported in production builds of React.")}return an.Children={map:pe,forEach:function($,re,Ne){pe($,function(){re.apply(this,arguments)},Ne)},count:function($){var re=0;return pe($,function(){re++}),re},toArray:function($){return pe($,function(re){return re})||[]},only:function($){if(!D($))throw Error("React.Children.only expected to receive a single React element child.");return $}},an.Component=E,an.Fragment=t,an.Profiler=r,an.PureComponent=C,an.StrictMode=i,an.Suspense=d,an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,an.act=Z,an.cloneElement=function($,re,Ne){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var he=w({},$.props),Te=$.key,Ie=$.ref,Ce=$._owner;if(re!=null){if(re.ref!==void 0&&(Ie=re.ref,Ce=N.current),re.key!==void 0&&(Te=""+re.key),$.type&&$.type.defaultProps)var He=$.type.defaultProps;for(gt in re)B.call(re,gt)&&!U.hasOwnProperty(gt)&&(he[gt]=re[gt]===void 0&&He!==void 0?He[gt]:re[gt])}var gt=arguments.length-2;if(gt===1)he.children=Ne;else if(1<gt){He=Array(gt);for(var Ze=0;Ze<gt;Ze++)He[Ze]=arguments[Ze+2];he.children=He}return{$$typeof:n,type:$.type,key:Te,ref:Ie,props:he,_owner:Ce}},an.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:s,_context:$},$.Consumer=$},an.createElement=H,an.createFactory=function($){var re=H.bind(null,$);return re.type=$,re},an.createRef=function(){return{current:null}},an.forwardRef=function($){return{$$typeof:u,render:$}},an.isValidElement=D,an.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:de}},an.memo=function($,re){return{$$typeof:h,type:$,compare:re===void 0?null:re}},an.startTransition=function($){var re=F.transition;F.transition={};try{$()}finally{F.transition=re}},an.unstable_act=Z,an.useCallback=function($,re){return _e.current.useCallback($,re)},an.useContext=function($){return _e.current.useContext($)},an.useDebugValue=function(){},an.useDeferredValue=function($){return _e.current.useDeferredValue($)},an.useEffect=function($,re){return _e.current.useEffect($,re)},an.useId=function(){return _e.current.useId()},an.useImperativeHandle=function($,re,Ne){return _e.current.useImperativeHandle($,re,Ne)},an.useInsertionEffect=function($,re){return _e.current.useInsertionEffect($,re)},an.useLayoutEffect=function($,re){return _e.current.useLayoutEffect($,re)},an.useMemo=function($,re){return _e.current.useMemo($,re)},an.useReducer=function($,re,Ne){return _e.current.useReducer($,re,Ne)},an.useRef=function($){return _e.current.useRef($)},an.useState=function($){return _e.current.useState($)},an.useSyncExternalStore=function($,re,Ne){return _e.current.useSyncExternalStore($,re,Ne)},an.useTransition=function(){return _e.current.useTransition()},an.version="18.3.1",an}var iS;function F0(){return iS||(iS=1,Jv.exports=ZR()),Jv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS;function JR(){if(rS)return vh;rS=1;var n=F0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var m,g={},v=null,x=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(x=d.ref);for(m in d)i.call(d,m)&&!s.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:u,key:v,ref:x,props:g,_owner:r.current}}return vh.Fragment=t,vh.jsx=a,vh.jsxs=a,vh}var sS;function QR(){return sS||(sS=1,Zv.exports=JR()),Zv.exports}var kn=QR(),V=F0();const te=fd(V),e2=KR({__proto__:null,default:te},[V]);var Nm={},Qv={exports:{}},Xr={},ey={exports:{}},ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS;function t2(){return oS||(oS=1,function(n){function e(F,J){var Z=F.length;F.push(J);e:for(;0<Z;){var $=Z-1>>>1,re=F[$];if(0<r(re,J))F[$]=J,F[Z]=re,Z=$;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var J=F[0],Z=F.pop();if(Z!==J){F[0]=Z;e:for(var $=0,re=F.length,Ne=re>>>1;$<Ne;){var he=2*($+1)-1,Te=F[he],Ie=he+1,Ce=F[Ie];if(0>r(Te,Z))Ie<re&&0>r(Ce,Te)?(F[$]=Ce,F[Ie]=Z,$=Ie):(F[$]=Te,F[he]=Z,$=he);else if(Ie<re&&0>r(Ce,Z))F[$]=Ce,F[Ie]=Z,$=Ie;else break e}}return J}function r(F,J){var Z=F.sortIndex-J.sortIndex;return Z!==0?Z:F.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,v=3,x=!1,w=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(F){for(var J=t(h);J!==null;){if(J.callback===null)i(h);else if(J.startTime<=F)i(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(h)}}function I(F){if(b=!1,P(F),!w)if(t(d)!==null)w=!0,de(B);else{var J=t(h);J!==null&&_e(I,J.startTime-F)}}function B(F,J){w=!1,b&&(b=!1,S(H),H=-1),x=!0;var Z=v;try{for(P(J),g=t(d);g!==null&&(!(g.expirationTime>J)||F&&!W());){var $=g.callback;if(typeof $=="function"){g.callback=null,v=g.priorityLevel;var re=$(g.expirationTime<=J);J=n.unstable_now(),typeof re=="function"?g.callback=re:g===t(d)&&i(d),P(J)}else i(d);g=t(d)}if(g!==null)var Ne=!0;else{var he=t(h);he!==null&&_e(I,he.startTime-J),Ne=!1}return Ne}finally{g=null,v=Z,x=!1}}var N=!1,U=null,H=-1,O=5,D=-1;function W(){return!(n.unstable_now()-D<O)}function ee(){if(U!==null){var F=n.unstable_now();D=F;var J=!0;try{J=U(!0,F)}finally{J?ne():(N=!1,U=null)}}else N=!1}var ne;if(typeof C=="function")ne=function(){C(ee)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,pe=le.port2;le.port1.onmessage=ee,ne=function(){pe.postMessage(null)}}else ne=function(){E(ee,0)};function de(F){U=F,N||(N=!0,ne())}function _e(F,J){H=E(function(){F(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){w||x||(w=!0,de(B))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(F){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var Z=v;v=J;try{return F()}finally{v=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=v;v=F;try{return J()}finally{v=Z}},n.unstable_scheduleCallback=function(F,J,Z){var $=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?$+Z:$):Z=$,F){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Z+re,F={id:m++,callback:J,priorityLevel:F,startTime:Z,expirationTime:re,sortIndex:-1},Z>$?(F.sortIndex=Z,e(h,F),t(d)===null&&F===t(h)&&(b?(S(H),H=-1):b=!0,_e(I,Z-$))):(F.sortIndex=re,e(d,F),w||x||(w=!0,de(B))),F},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(F){var J=v;return function(){var Z=v;v=J;try{return F.apply(this,arguments)}finally{v=Z}}}}(ty)),ty}var aS;function n2(){return aS||(aS=1,ey.exports=t2()),ey.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function i2(){if(lS)return Xr;lS=1;var n=F0(),e=n2();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(r[o]=l,o=0;o<l.length;o++)i.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return d.call(g,o)?!0:d.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function x(o,l,p,_){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return _?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function w(o,l,p,_){if(l===null||typeof l>"u"||x(o,l,p,_))return!0;if(_)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(o,l,p,_,T,R,k){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=_,this.attributeNamespace=T,this.mustUseProperty=p,this.propertyName=o,this.type=l,this.sanitizeURL=R,this.removeEmptyString=k}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){E[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];E[l]=new b(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){E[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){E[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){E[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){E[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){E[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){E[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){E[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function C(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(S,C);E[l]=new b(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(S,C);E[l]=new b(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(S,C);E[l]=new b(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){E[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),E.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){E[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function P(o,l,p,_){var T=E.hasOwnProperty(l)?E[l]:null;(T!==null?T.type!==0:_||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(w(l,p,T,_)&&(p=null),_||T===null?v(l)&&(p===null?o.removeAttribute(l):o.setAttribute(l,""+p)):T.mustUseProperty?o[T.propertyName]=p===null?T.type===3?!1:"":p:(l=T.attributeName,_=T.attributeNamespace,p===null?o.removeAttribute(l):(T=T.type,p=T===3||T===4&&p===!0?"":""+p,_?o.setAttributeNS(_,l,p):o.setAttribute(l,p))))}var I=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),N=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),W=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),F=Symbol.iterator;function J(o){return o===null||typeof o!="object"?null:(o=F&&o[F]||o["@@iterator"],typeof o=="function"?o:null)}var Z=Object.assign,$;function re(o){if($===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);$=l&&l[1]||""}return`
`+$+o}var Ne=!1;function he(o,l){if(!o||Ne)return"";Ne=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(we){var _=we}Reflect.construct(o,[],l)}else{try{l.call()}catch(we){_=we}o.call(l.prototype)}else{try{throw Error()}catch(we){_=we}o()}}catch(we){if(we&&_&&typeof we.stack=="string"){for(var T=we.stack.split(`
`),R=_.stack.split(`
`),k=T.length-1,K=R.length-1;1<=k&&0<=K&&T[k]!==R[K];)K--;for(;1<=k&&0<=K;k--,K--)if(T[k]!==R[K]){if(k!==1||K!==1)do if(k--,K--,0>K||T[k]!==R[K]){var ie=`
`+T[k].replace(" at new "," at ");return o.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",o.displayName)),ie}while(1<=k&&0<=K);break}}}finally{Ne=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?re(o):""}function Te(o){switch(o.tag){case 5:return re(o.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return o=he(o.type,!1),o;case 11:return o=he(o.type.render,!1),o;case 1:return o=he(o.type,!0),o;default:return""}}function Ie(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case U:return"Fragment";case N:return"Portal";case O:return"Profiler";case H:return"StrictMode";case ne:return"Suspense";case le:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case W:return(o.displayName||"Context")+".Consumer";case D:return(o._context.displayName||"Context")+".Provider";case ee:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case pe:return l=o.displayName||null,l!==null?l:Ie(o.type)||"Memo";case de:l=o._payload,o=o._init;try{return Ie(o(l))}catch{}}return null}function Ce(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(l);case 8:return l===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function He(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function gt(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ze(o){var l=gt(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),_=""+o[l];if(!o.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var T=p.get,R=p.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return T.call(this)},set:function(k){_=""+k,R.call(this,k)}}),Object.defineProperty(o,l,{enumerable:p.enumerable}),{getValue:function(){return _},setValue:function(k){_=""+k},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Nt(o){o._valueTracker||(o._valueTracker=Ze(o))}function Oe(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var p=l.getValue(),_="";return o&&(_=gt(o)?o.checked?"true":"false":o.value),o=_,o!==p?(l.setValue(o),!0):!1}function Re(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function j(o,l){var p=l.checked;return Z({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function pt(o,l){var p=l.defaultValue==null?"":l.defaultValue,_=l.checked!=null?l.checked:l.defaultChecked;p=He(l.value!=null?l.value:p),o._wrapperState={initialChecked:_,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ue(o,l){l=l.checked,l!=null&&P(o,"checked",l,!1)}function st(o,l){Ue(o,l);var p=He(l.value),_=l.type;if(p!=null)_==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(_==="submit"||_==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?At(o,l.type,p):l.hasOwnProperty("defaultValue")&&At(o,l.type,He(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Ge(o,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var _=l.type;if(!(_!=="submit"&&_!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,p||l===o.value||(o.value=l),o.defaultValue=l}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function At(o,l,p){(l!=="number"||Re(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var qe=Array.isArray;function X(o,l,p,_){if(o=o.options,l){l={};for(var T=0;T<p.length;T++)l["$"+p[T]]=!0;for(p=0;p<o.length;p++)T=l.hasOwnProperty("$"+o[p].value),o[p].selected!==T&&(o[p].selected=T),T&&_&&(o[p].defaultSelected=!0)}else{for(p=""+He(p),l=null,T=0;T<o.length;T++){if(o[T].value===p){o[T].selected=!0,_&&(o[T].defaultSelected=!0);return}l!==null||o[T].disabled||(l=o[T])}l!==null&&(l.selected=!0)}}function z(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Q(o,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(qe(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}o._wrapperState={initialValue:He(p)}}function me(o,l){var p=He(l.value),_=He(l.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),l.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),_!=null&&(o.defaultValue=""+_)}function Pe(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Ee(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function et(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Ee(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var je,Je=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,_,T){MSApp.execUnsafeLocalFunction(function(){return o(l,p,_,T)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(je=je||document.createElement("div"),je.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=je.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Ft(o,l){if(l){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=l;return}}o.textContent=l}var Fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lt=["Webkit","ms","Moz","O"];Object.keys(Fe).forEach(function(o){lt.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Fe[l]=Fe[o]})});function bt(o,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Fe.hasOwnProperty(o)&&Fe[o]?(""+l).trim():l+"px"}function Rt(o,l){o=o.style;for(var p in l)if(l.hasOwnProperty(p)){var _=p.indexOf("--")===0,T=bt(p,l[p],_);p==="float"&&(p="cssFloat"),_?o.setProperty(p,T):o[p]=T}}var ut=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wt(o,l){if(l){if(ut[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ot(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hn=null;function ae(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Qe=null,be=null,Le=null;function rt(o){if(o=Gs(o)){if(typeof Qe!="function")throw Error(t(280));var l=o.stateNode;l&&(l=Qc(l),Qe(o.stateNode,o.type,l))}}function tt(o){be?Le?Le.push(o):Le=[o]:be=o}function zt(){if(be){var o=be,l=Le;if(Le=be=null,rt(o),l)for(o=0;o<l.length;o++)rt(l[o])}}function Rn(o,l){return o(l)}function Zn(){}var cn=!1;function Vi(o,l,p){if(cn)return o(l,p);cn=!0;try{return Rn(o,l,p)}finally{cn=!1,(be!==null||Le!==null)&&(Zn(),zt())}}function Hi(o,l){var p=o.stateNode;if(p===null)return null;var _=Qc(p);if(_===null)return null;p=_[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(o=o.type,_=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!_;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var $a=!1;if(u)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){$a=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{$a=!1}function gs(o,l,p,_,T,R,k,K,ie){var we=Array.prototype.slice.call(arguments,3);try{l.apply(p,we)}catch(ze){this.onError(ze)}}var ts=!1,$o=null,ns=!1,xo=null,hc={onError:function(o){ts=!0,$o=o}};function Xa(o,l,p,_,T,R,k,K,ie){ts=!1,$o=null,gs.apply(hc,arguments)}function pc(o,l,p,_,T,R,k,K,ie){if(Xa.apply(this,arguments),ts){if(ts){var we=$o;ts=!1,$o=null}else throw Error(t(198));ns||(ns=!0,xo=we)}}function vs(o){var l=o,p=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,l.flags&4098&&(p=l.return),o=l.return;while(o)}return l.tag===3?p:null}function mc(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function gc(o){if(vs(o)!==o)throw Error(t(188))}function vc(o){var l=o.alternate;if(!l){if(l=vs(o),l===null)throw Error(t(188));return l!==o?null:o}for(var p=o,_=l;;){var T=p.return;if(T===null)break;var R=T.alternate;if(R===null){if(_=T.return,_!==null){p=_;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===p)return gc(T),o;if(R===_)return gc(T),l;R=R.sibling}throw Error(t(188))}if(p.return!==_.return)p=T,_=R;else{for(var k=!1,K=T.child;K;){if(K===p){k=!0,p=T,_=R;break}if(K===_){k=!0,_=T,p=R;break}K=K.sibling}if(!k){for(K=R.child;K;){if(K===p){k=!0,p=R,_=T;break}if(K===_){k=!0,_=R,p=T;break}K=K.sibling}if(!k)throw Error(t(189))}}if(p.alternate!==_)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?o:l}function yc(o){return o=vc(o),o!==null?_c(o):null}function _c(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=_c(o);if(l!==null)return l;o=o.sibling}return null}var xc=e.unstable_scheduleCallback,G=e.unstable_cancelCallback,ue=e.unstable_shouldYield,Se=e.unstable_requestPaint,ge=e.unstable_now,fe=e.unstable_getCurrentPriorityLevel,Be=e.unstable_ImmediatePriority,Ke=e.unstable_UserBlockingPriority,at=e.unstable_NormalPriority,dt=e.unstable_LowPriority,Ct=e.unstable_IdlePriority,Tt=null,$e=null;function xt(o){if($e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Tt,o,void 0,(o.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:Yt,nn=Math.log,rn=Math.LN2;function Yt(o){return o>>>=0,o===0?32:31-(nn(o)/rn|0)|0}var _t=64,ln=4194304;function Jt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function yi(o,l){var p=o.pendingLanes;if(p===0)return 0;var _=0,T=o.suspendedLanes,R=o.pingedLanes,k=p&268435455;if(k!==0){var K=k&~T;K!==0?_=Jt(K):(R&=k,R!==0&&(_=Jt(R)))}else k=p&~T,k!==0?_=Jt(k):R!==0&&(_=Jt(R));if(_===0)return 0;if(l!==0&&l!==_&&!(l&T)&&(T=_&-_,R=l&-l,T>=R||T===16&&(R&4194240)!==0))return l;if(_&4&&(_|=p&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=_;0<l;)p=31-kt(l),T=1<<p,_|=o[p],l&=~T;return _}function Os(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oi(o,l){for(var p=o.suspendedLanes,_=o.pingedLanes,T=o.expirationTimes,R=o.pendingLanes;0<R;){var k=31-kt(R),K=1<<k,ie=T[k];ie===-1?(!(K&p)||K&_)&&(T[k]=Os(K,l)):ie<=l&&(o.expiredLanes|=K),R&=~K}}function ys(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function sn(){var o=_t;return _t<<=1,!(_t&4194240)&&(_t=64),o}function Li(o){for(var l=[],p=0;31>p;p++)l.push(o);return l}function ai(o,l,p){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-kt(l),o[l]=p}function _i(o,l){var p=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var _=o.eventTimes;for(o=o.expirationTimes;0<p;){var T=31-kt(p),R=1<<T;l[T]=0,_[T]=-1,o[T]=-1,p&=~R}}function Gn(o,l){var p=o.entangledLanes|=l;for(o=o.entanglements;p;){var _=31-kt(p),T=1<<_;T&l|o[_]&l&&(o[_]|=l),p&=~T}}var on=0;function Qi(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Vl,Md,Hp,Sc,wc,Xo=!1,Mc=[],_s=null,Qt=null,ks=null,jo=new Map,ja=new Map,So=[],wv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ni(o,l){switch(o){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":jo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(l.pointerId)}}function qo(o,l,p,_,T,R){return o===null||o.nativeEvent!==R?(o={blockedOn:l,domEventName:p,eventSystemFlags:_,nativeEvent:R,targetContainers:[T]},l!==null&&(l=Gs(l),l!==null&&Md(l)),o):(o.eventSystemFlags|=_,l=o.targetContainers,T!==null&&l.indexOf(T)===-1&&l.push(T),o)}function Mv(o,l,p,_,T){switch(l){case"focusin":return _s=qo(_s,o,l,p,_,T),!0;case"dragenter":return Qt=qo(Qt,o,l,p,_,T),!0;case"mouseover":return ks=qo(ks,o,l,p,_,T),!0;case"pointerover":var R=T.pointerId;return jo.set(R,qo(jo.get(R)||null,o,l,p,_,T)),!0;case"gotpointercapture":return R=T.pointerId,ja.set(R,qo(ja.get(R)||null,o,l,p,_,T)),!0}return!1}function Ec(o){var l=Co(o.target);if(l!==null){var p=vs(l);if(p!==null){if(l=p.tag,l===13){if(l=mc(p),l!==null){o.blockedOn=l,wc(o.priority,function(){Hp(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function bc(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var p=kr(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var _=new p.constructor(p.type,p);hn=_,p.target.dispatchEvent(_),hn=null}else return l=Gs(p),l!==null&&Md(l),o.blockedOn=p,!1;l.shift()}return!0}function Hl(o,l,p){bc(o)&&p.delete(l)}function xs(){Xo=!1,_s!==null&&bc(_s)&&(_s=null),Qt!==null&&bc(Qt)&&(Qt=null),ks!==null&&bc(ks)&&(ks=null),jo.forEach(Hl),ja.forEach(Hl)}function Wl(o,l){o.blockedOn===l&&(o.blockedOn=null,Xo||(Xo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xs)))}function Gl(o){function l(T){return Wl(T,o)}if(0<Mc.length){Wl(Mc[0],o);for(var p=1;p<Mc.length;p++){var _=Mc[p];_.blockedOn===o&&(_.blockedOn=null)}}for(_s!==null&&Wl(_s,o),Qt!==null&&Wl(Qt,o),ks!==null&&Wl(ks,o),jo.forEach(l),ja.forEach(l),p=0;p<So.length;p++)_=So[p],_.blockedOn===o&&(_.blockedOn=null);for(;0<So.length&&(p=So[0],p.blockedOn===null);)Ec(p),p.blockedOn===null&&So.shift()}var Wi=I.ReactCurrentBatchConfig,Or=!0;function Tc(o,l,p,_){var T=on,R=Wi.transition;Wi.transition=null;try{on=1,Ac(o,l,p,_)}finally{on=T,Wi.transition=R}}function Ed(o,l,p,_){var T=on,R=Wi.transition;Wi.transition=null;try{on=4,Ac(o,l,p,_)}finally{on=T,Wi.transition=R}}function Ac(o,l,p,_){if(Or){var T=kr(o,l,p,_);if(T===null)jc(o,l,_,Cc,p),ni(o,_);else if(Mv(T,o,l,p,_))_.stopPropagation();else if(ni(o,_),l&4&&-1<wv.indexOf(o)){for(;T!==null;){var R=Gs(T);if(R!==null&&Vl(R),R=kr(o,l,p,_),R===null&&jc(o,l,_,Cc,p),R===T)break;T=R}T!==null&&_.stopPropagation()}else jc(o,l,_,null,p)}}var Cc=null;function kr(o,l,p,_){if(Cc=null,o=ae(_),o=Co(o),o!==null)if(l=vs(o),l===null)o=null;else if(p=l.tag,p===13){if(o=mc(l),o!==null)return o;o=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Cc=o,null}function Wp(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fe()){case Be:return 1;case Ke:return 4;case at:case dt:return 16;case Ct:return 536870912;default:return 16}default:return 16}}var is=null,bd=null,er=null;function $l(){if(er)return er;var o,l=bd,p=l.length,_,T="value"in is?is.value:is.textContent,R=T.length;for(o=0;o<p&&l[o]===T[o];o++);var k=p-o;for(_=1;_<=k&&l[p-_]===T[R-_];_++);return er=T.slice(o,1<_?1-_:void 0)}function Yo(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Us(){return!0}function Rc(){return!1}function Gi(o){function l(p,_,T,R,k){this._reactName=p,this._targetInst=T,this.type=_,this.nativeEvent=R,this.target=k,this.currentTarget=null;for(var K in o)o.hasOwnProperty(K)&&(p=o[K],this[K]=p?p(R):R[K]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Us:Rc,this.isPropagationStopped=Rc,this}return Z(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),l}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xl=Gi(Ko),Zo=Z({},Ko,{view:0,detail:0}),qa=Gi(Zo),tr,Ur,Fr,Ya=Z({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Fr&&(Fr&&o.type==="mousemove"?(tr=o.screenX-Fr.screenX,Ur=o.screenY-Fr.screenY):Ur=tr=0,Fr=o),tr)},movementY:function(o){return"movementY"in o?o.movementY:Ur}}),Td=Gi(Ya),Fs=Z({},Ya,{dataTransfer:0}),wo=Gi(Fs),Pc=Z({},Zo,{relatedTarget:0}),Ic=Gi(Pc),Lc=Z({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),Gp=Gi(Lc),$p=Z({},Ko,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Ad=Gi($p),Dc=Z({},Ko,{data:0}),Cd=Gi(Dc),Xp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ka(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Rd[o])?!!l[o]:!1}function Mo(){return Ka}var Nc=Z({},Zo,{key:function(o){if(o.key){var l=Xp[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Yo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?jp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(o){return o.type==="keypress"?Yo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Yo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Oc=Gi(Nc),zr=Z({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mr=Gi(zr),Jo=Z({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),zs=Gi(Jo),Bs=Z({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qo=Gi(Bs),qp=Z({},Ya,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Pd=Gi(qp),Id=[9,13,27,32],$i=u&&"CompositionEvent"in window,xi=null;u&&"documentMode"in document&&(xi=document.documentMode);var Ln=u&&"TextEvent"in window&&!xi,Za=u&&(!$i||xi&&8<xi&&11>=xi),Br=" ",Ld=!1;function Dd(o,l){switch(o){case"keyup":return Id.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Eo=!1;function Yp(o,l){switch(o){case"compositionend":return kc(l);case"keypress":return l.which!==32?null:(Ld=!0,Br);case"textInput":return o=l.data,o===Br&&Ld?null:o;default:return null}}function jl(o,l){if(Eo)return o==="compositionend"||!$i&&Dd(o,l)?(o=$l(),er=bd=is=null,Eo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Za&&l.locale!=="ko"?null:l.data;default:return null}}var Ja={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uc(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Ja[o.type]:l==="textarea"}function Qa(o,l,p,_){tt(_),l=qc(l,"onChange"),0<l.length&&(p=new Xl("onChange","change",null,p,_),o.push({event:p,listeners:l}))}var bo=null,el=null;function Kp(o){rl(o,0)}function Vs(o){var l=$n(o);if(Oe(l))return o}function Zp(o,l){if(o==="change")return l}var tl=!1;if(u){var nr;if(u){var ea="oninput"in document;if(!ea){var ta=document.createElement("div");ta.setAttribute("oninput","return;"),ea=typeof ta.oninput=="function"}nr=ea}else nr=!1;tl=nr&&(!document.documentMode||9<document.documentMode)}function rs(){bo&&(bo.detachEvent("onpropertychange",Fc),el=bo=null)}function Fc(o){if(o.propertyName==="value"&&Vs(el)){var l=[];Qa(l,el,o,ae(o)),Vi(Kp,l)}}function nl(o,l,p){o==="focusin"?(rs(),bo=l,el=p,bo.attachEvent("onpropertychange",Fc)):o==="focusout"&&rs()}function Jp(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Vs(el)}function Nd(o,l){if(o==="click")return Vs(l)}function Fn(o,l){if(o==="input"||o==="change")return Vs(l)}function zc(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var gr=typeof Object.is=="function"?Object.is:zc;function na(o,l){if(gr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var p=Object.keys(o),_=Object.keys(l);if(p.length!==_.length)return!1;for(_=0;_<p.length;_++){var T=p[_];if(!d.call(l,T)||!gr(o[T],l[T]))return!1}return!0}function ql(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function vr(o,l){var p=ql(o);o=0;for(var _;p;){if(p.nodeType===3){if(_=o+p.textContent.length,o<=l&&_>=l)return{node:p,offset:l-o};o=_}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=ql(p)}}function ia(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?ia(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function zn(){for(var o=window,l=Re();l instanceof o.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)o=l.contentWindow;else break;l=Re(o.document)}return l}function li(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function ui(o){var l=zn(),p=o.focusedElem,_=o.selectionRange;if(l!==p&&p&&p.ownerDocument&&ia(p.ownerDocument.documentElement,p)){if(_!==null&&li(p)){if(l=_.start,o=_.end,o===void 0&&(o=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(o,p.value.length);else if(o=(l=p.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var T=p.textContent.length,R=Math.min(_.start,T);_=_.end===void 0?R:Math.min(_.end,T),!o.extend&&R>_&&(T=_,_=R,R=T),T=vr(p,R);var k=vr(p,_);T&&k&&(o.rangeCount!==1||o.anchorNode!==T.node||o.anchorOffset!==T.offset||o.focusNode!==k.node||o.focusOffset!==k.offset)&&(l=l.createRange(),l.setStart(T.node,T.offset),o.removeAllRanges(),R>_?(o.addRange(l),o.extend(k.node,k.offset)):(l.setEnd(k.node,k.offset),o.addRange(l)))}}for(l=[],o=p;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)o=l[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Bc=u&&"documentMode"in document&&11>=document.documentMode,Ss=null,ra=null,Yl=null,ci=!1;function Vc(o,l,p){var _=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;ci||Ss==null||Ss!==Re(_)||(_=Ss,"selectionStart"in _&&li(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Yl&&na(Yl,_)||(Yl=_,_=qc(ra,"onSelect"),0<_.length&&(l=new Xl("onSelect","select",null,l,p),o.push({event:l,listeners:_}),l.target=Ss)))}function il(o,l){var p={};return p[o.toLowerCase()]=l.toLowerCase(),p["Webkit"+o]="webkit"+l,p["Moz"+o]="moz"+l,p}var To={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},ss={},os={};u&&(os=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function ws(o){if(ss[o])return ss[o];if(!To[o])return o;var l=To[o],p;for(p in l)if(l.hasOwnProperty(p)&&p in os)return ss[o]=l[p];return o}var Kl=ws("animationend"),Zl=ws("animationiteration"),Od=ws("animationstart"),kd=ws("transitionend"),Ud=new Map,Fd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(o,l){Ud.set(o,l),s(l,[o])}for(var Hc=0;Hc<Fd.length;Hc++){var Jl=Fd[Hc],Ql=Jl.toLowerCase(),Qp=Jl[0].toUpperCase()+Jl.slice(1);Hs(Ql,"on"+Qp)}Hs(Kl,"onAnimationEnd"),Hs(Zl,"onAnimationIteration"),Hs(Od,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(kd,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function Gc(o,l,p){var _=o.type||"unknown-event";o.currentTarget=p,pc(_,l,void 0,o),o.currentTarget=null}function rl(o,l){l=(l&4)!==0;for(var p=0;p<o.length;p++){var _=o[p],T=_.event;_=_.listeners;e:{var R=void 0;if(l)for(var k=_.length-1;0<=k;k--){var K=_[k],ie=K.instance,we=K.currentTarget;if(K=K.listener,ie!==R&&T.isPropagationStopped())break e;Gc(T,K,we),R=ie}else for(k=0;k<_.length;k++){if(K=_[k],ie=K.instance,we=K.currentTarget,K=K.listener,ie!==R&&T.isPropagationStopped())break e;Gc(T,K,we),R=ie}}}if(ns)throw o=xo,ns=!1,xo=null,o}function En(o,l){var p=l[aa];p===void 0&&(p=l[aa]=new Set);var _=o+"__bubble";p.has(_)||(Xc(l,o,2,!1),p.add(_))}function $c(o,l,p){var _=0;l&&(_|=4),Xc(p,o,_,l)}var eu="_reactListening"+Math.random().toString(36).slice(2);function sl(o){if(!o[eu]){o[eu]=!0,i.forEach(function(p){p!=="selectionchange"&&(Wc.has(p)||$c(p,!1,o),$c(p,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[eu]||(l[eu]=!0,$c("selectionchange",!1,l))}}function Xc(o,l,p,_){switch(Wp(l)){case 1:var T=Tc;break;case 4:T=Ed;break;default:T=Ac}p=T.bind(null,l,p,o),T=void 0,!$a||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(T=!0),_?T!==void 0?o.addEventListener(l,p,{capture:!0,passive:T}):o.addEventListener(l,p,!0):T!==void 0?o.addEventListener(l,p,{passive:T}):o.addEventListener(l,p,!1)}function jc(o,l,p,_,T){var R=_;if(!(l&1)&&!(l&2)&&_!==null)e:for(;;){if(_===null)return;var k=_.tag;if(k===3||k===4){var K=_.stateNode.containerInfo;if(K===T||K.nodeType===8&&K.parentNode===T)break;if(k===4)for(k=_.return;k!==null;){var ie=k.tag;if((ie===3||ie===4)&&(ie=k.stateNode.containerInfo,ie===T||ie.nodeType===8&&ie.parentNode===T))return;k=k.return}for(;K!==null;){if(k=Co(K),k===null)return;if(ie=k.tag,ie===5||ie===6){_=R=k;continue e}K=K.parentNode}}_=_.return}Vi(function(){var we=R,ze=ae(p),Ve=[];e:{var ke=Ud.get(o);if(ke!==void 0){var ft=Xl,yt=o;switch(o){case"keypress":if(Yo(p)===0)break e;case"keydown":case"keyup":ft=Oc;break;case"focusin":yt="focus",ft=Ic;break;case"focusout":yt="blur",ft=Ic;break;case"beforeblur":case"afterblur":ft=Ic;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=zs;break;case Kl:case Zl:case Od:ft=Gp;break;case kd:ft=Qo;break;case"scroll":ft=qa;break;case"wheel":ft=Pd;break;case"copy":case"cut":case"paste":ft=Ad;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=mr}var St=(l&4)!==0,ri=!St&&o==="scroll",ve=St?ke!==null?ke+"Capture":null:ke;St=[];for(var se=we,ye;se!==null;){ye=se;var Xe=ye.stateNode;if(ye.tag===5&&Xe!==null&&(ye=Xe,ve!==null&&(Xe=Hi(se,ve),Xe!=null&&St.push(ol(se,Xe,ye)))),ri)break;se=se.return}0<St.length&&(ke=new ft(ke,yt,null,p,ze),Ve.push({event:ke,listeners:St}))}}if(!(l&7)){e:{if(ke=o==="mouseover"||o==="pointerover",ft=o==="mouseout"||o==="pointerout",ke&&p!==hn&&(yt=p.relatedTarget||p.fromElement)&&(Co(yt)||yt[yr]))break e;if((ft||ke)&&(ke=ze.window===ze?ze:(ke=ze.ownerDocument)?ke.defaultView||ke.parentWindow:window,ft?(yt=p.relatedTarget||p.toElement,ft=we,yt=yt?Co(yt):null,yt!==null&&(ri=vs(yt),yt!==ri||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(ft=null,yt=we),ft!==yt)){if(St=Td,Xe="onMouseLeave",ve="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(St=mr,Xe="onPointerLeave",ve="onPointerEnter",se="pointer"),ri=ft==null?ke:$n(ft),ye=yt==null?ke:$n(yt),ke=new St(Xe,se+"leave",ft,p,ze),ke.target=ri,ke.relatedTarget=ye,Xe=null,Co(ze)===we&&(St=new St(ve,se+"enter",yt,p,ze),St.target=ye,St.relatedTarget=ri,Xe=St),ri=Xe,ft&&yt)t:{for(St=ft,ve=yt,se=0,ye=St;ye;ye=sa(ye))se++;for(ye=0,Xe=ve;Xe;Xe=sa(Xe))ye++;for(;0<se-ye;)St=sa(St),se--;for(;0<ye-se;)ve=sa(ve),ye--;for(;se--;){if(St===ve||ve!==null&&St===ve.alternate)break t;St=sa(St),ve=sa(ve)}St=null}else St=null;ft!==null&&em(Ve,ke,ft,St,!1),yt!==null&&ri!==null&&em(Ve,ri,yt,St,!0)}}e:{if(ke=we?$n(we):window,ft=ke.nodeName&&ke.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ke.type==="file")var Et=Zp;else if(Uc(ke))if(tl)Et=Fn;else{Et=Jp;var It=nl}else(ft=ke.nodeName)&&ft.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(Et=Nd);if(Et&&(Et=Et(o,we))){Qa(Ve,Et,p,ze);break e}It&&It(o,ke,we),o==="focusout"&&(It=ke._wrapperState)&&It.controlled&&ke.type==="number"&&At(ke,"number",ke.value)}switch(It=we?$n(we):window,o){case"focusin":(Uc(It)||It.contentEditable==="true")&&(Ss=It,ra=we,Yl=null);break;case"focusout":Yl=ra=Ss=null;break;case"mousedown":ci=!0;break;case"contextmenu":case"mouseup":case"dragend":ci=!1,Vc(Ve,p,ze);break;case"selectionchange":if(Bc)break;case"keydown":case"keyup":Vc(Ve,p,ze)}var Lt;if($i)e:{switch(o){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else Eo?Dd(o,p)&&(Bt="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Bt="onCompositionStart");Bt&&(Za&&p.locale!=="ko"&&(Eo||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Eo&&(Lt=$l()):(is=ze,bd="value"in is?is.value:is.textContent,Eo=!0)),It=qc(we,Bt),0<It.length&&(Bt=new Cd(Bt,o,null,p,ze),Ve.push({event:Bt,listeners:It}),Lt?Bt.data=Lt:(Lt=kc(p),Lt!==null&&(Bt.data=Lt)))),(Lt=Ln?Yp(o,p):jl(o,p))&&(we=qc(we,"onBeforeInput"),0<we.length&&(ze=new Cd("onBeforeInput","beforeinput",null,p,ze),Ve.push({event:ze,listeners:we}),ze.data=Lt))}rl(Ve,l)})}function ol(o,l,p){return{instance:o,listener:l,currentTarget:p}}function qc(o,l){for(var p=l+"Capture",_=[];o!==null;){var T=o,R=T.stateNode;T.tag===5&&R!==null&&(T=R,R=Hi(o,p),R!=null&&_.unshift(ol(o,R,T)),R=Hi(o,l),R!=null&&_.push(ol(o,R,T))),o=o.return}return _}function sa(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function em(o,l,p,_,T){for(var R=l._reactName,k=[];p!==null&&p!==_;){var K=p,ie=K.alternate,we=K.stateNode;if(ie!==null&&ie===_)break;K.tag===5&&we!==null&&(K=we,T?(ie=Hi(p,R),ie!=null&&k.unshift(ol(p,ie,K))):T||(ie=Hi(p,R),ie!=null&&k.push(ol(p,ie,K)))),p=p.return}k.length!==0&&o.push({event:l,listeners:k})}var Ev=/\r\n?/g,tm=/\u0000|\uFFFD/g;function zd(o){return(typeof o=="string"?o:""+o).replace(Ev,`
`).replace(tm,"")}function tu(o,l,p){if(l=zd(l),zd(o)!==l&&p)throw Error(t(425))}function nu(){}var al=null,Bd=null;function Vd(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Hd=typeof setTimeout=="function"?setTimeout:void 0,Wd=typeof clearTimeout=="function"?clearTimeout:void 0,Yc=typeof Promise=="function"?Promise:void 0,bv=typeof queueMicrotask=="function"?queueMicrotask:typeof Yc<"u"?function(o){return Yc.resolve(null).then(o).catch(nm)}:Hd;function nm(o){setTimeout(function(){throw o})}function Kc(o,l){var p=l,_=0;do{var T=p.nextSibling;if(o.removeChild(p),T&&T.nodeType===8)if(p=T.data,p==="/$"){if(_===0){o.removeChild(T),Gl(l);return}_--}else p!=="$"&&p!=="$?"&&p!=="$!"||_++;p=T}while(p);Gl(l)}function Ws(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function Gd(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return o;l--}else p==="/$"&&l++}o=o.previousSibling}return null}var oa=Math.random().toString(36).slice(2),ii="__reactFiber$"+oa,ll="__reactProps$"+oa,yr="__reactContainer$"+oa,aa="__reactEvents$"+oa,Zc="__reactListeners$"+oa,Jc="__reactHandles$"+oa;function Co(o){var l=o[ii];if(l)return l;for(var p=o.parentNode;p;){if(l=p[yr]||p[ii]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(o=Gd(o);o!==null;){if(p=o[ii])return p;o=Gd(o)}return l}o=p,p=o.parentNode}return null}function Gs(o){return o=o[ii]||o[yr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function $n(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Qc(o){return o[ll]||null}var $d=[],fi=-1;function Bn(o){return{current:o}}function bn(o){0>fi||(o.current=$d[fi],$d[fi]=null,fi--)}function wn(o,l){fi++,$d[fi]=o.current,o.current=l}var $s={},Si=Bn($s),Xi=Bn(!1),Xs=$s;function la(o,l){var p=o.type.contextTypes;if(!p)return $s;var _=o.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===l)return _.__reactInternalMemoizedMaskedChildContext;var T={},R;for(R in p)T[R]=l[R];return _&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=T),T}function Di(o){return o=o.childContextTypes,o!=null}function iu(){bn(Xi),bn(Si)}function Xd(o,l,p){if(Si.current!==$s)throw Error(t(168));wn(Si,l),wn(Xi,p)}function ru(o,l,p){var _=o.stateNode;if(l=l.childContextTypes,typeof _.getChildContext!="function")return p;_=_.getChildContext();for(var T in _)if(!(T in l))throw Error(t(108,Ce(o)||"Unknown",T));return Z({},p,_)}function ua(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||$s,Xs=Si.current,wn(Si,o),wn(Xi,Xi.current),!0}function jd(o,l,p){var _=o.stateNode;if(!_)throw Error(t(169));p?(o=ru(o,l,Xs),_.__reactInternalMemoizedMergedChildContext=o,bn(Xi),bn(Si),wn(Si,o)):bn(Xi),wn(Xi,p)}var as=null,su=!1,ef=!1;function ou(o){as===null?as=[o]:as.push(o)}function im(o){su=!0,ou(o)}function Ms(){if(!ef&&as!==null){ef=!0;var o=0,l=on;try{var p=as;for(on=1;o<p.length;o++){var _=p[o];do _=_(!0);while(_!==null)}as=null,su=!1}catch(T){throw as!==null&&(as=as.slice(o+1)),xc(Be,Ms),T}finally{on=l,ef=!1}}return null}var ca=[],ir=0,tf=null,nf=0,ji=[],di=0,fa=null,Ye=1,Vr="";function js(o,l){ca[ir++]=nf,ca[ir++]=tf,tf=o,nf=l}function qd(o,l,p){ji[di++]=Ye,ji[di++]=Vr,ji[di++]=fa,fa=o;var _=Ye;o=Vr;var T=32-kt(_)-1;_&=~(1<<T),p+=1;var R=32-kt(l)+T;if(30<R){var k=T-T%5;R=(_&(1<<k)-1).toString(32),_>>=k,T-=k,Ye=1<<32-kt(l)+T|p<<T|_,Vr=R+o}else Ye=1<<R|p<<T|_,Vr=o}function Yd(o){o.return!==null&&(js(o,1),qd(o,1,0))}function qs(o){for(;o===tf;)tf=ca[--ir],ca[ir]=null,nf=ca[--ir],ca[ir]=null;for(;o===fa;)fa=ji[--di],ji[di]=null,Vr=ji[--di],ji[di]=null,Ye=ji[--di],ji[di]=null}var wi=null,qi=null,Pn=!1,Hr=null;function Kd(o,l){var p=Cs(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=o,l=o.deletions,l===null?(o.deletions=[p],o.flags|=16):l.push(p)}function Zd(o,l){switch(o.tag){case 5:var p=o.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,wi=o,qi=Ws(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,wi=o,qi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=fa!==null?{id:Ye,overflow:Vr}:null,o.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=Cs(18,null,null,0),p.stateNode=l,p.return=o,o.child=p,wi=o,qi=null,!0):!1;default:return!1}}function rf(o){return(o.mode&1)!==0&&(o.flags&128)===0}function sf(o){if(Pn){var l=qi;if(l){var p=l;if(!Zd(o,l)){if(rf(o))throw Error(t(418));l=Ws(p.nextSibling);var _=wi;l&&Zd(o,l)?Kd(_,p):(o.flags=o.flags&-4097|2,Pn=!1,wi=o)}}else{if(rf(o))throw Error(t(418));o.flags=o.flags&-4097|2,Pn=!1,wi=o}}}function of(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;wi=o}function ul(o){if(o!==wi)return!1;if(!Pn)return of(o),Pn=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Vd(o.type,o.memoizedProps)),l&&(l=qi)){if(rf(o))throw Jd(),Error(t(418));for(;l;)Kd(o,l),l=Ws(l.nextSibling)}if(of(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(l===0){qi=Ws(o.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}o=o.nextSibling}qi=null}}else qi=wi?Ws(o.stateNode.nextSibling):null;return!0}function Jd(){for(var o=qi;o;)o=Ws(o.nextSibling)}function Ro(){qi=wi=null,Pn=!1}function cl(o){Hr===null?Hr=[o]:Hr.push(o)}var Tv=I.ReactCurrentBatchConfig;function au(o,l,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var _=p.stateNode}if(!_)throw Error(t(147,o));var T=_,R=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===R?l.ref:(l=function(k){var K=T.refs;k===null?delete K[R]:K[R]=k},l._stringRef=R,l)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function lu(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function Qd(o){var l=o._init;return l(o._payload)}function eh(o){function l(ve,se){if(o){var ye=ve.deletions;ye===null?(ve.deletions=[se],ve.flags|=16):ye.push(se)}}function p(ve,se){if(!o)return null;for(;se!==null;)l(ve,se),se=se.sibling;return null}function _(ve,se){for(ve=new Map;se!==null;)se.key!==null?ve.set(se.key,se):ve.set(se.index,se),se=se.sibling;return ve}function T(ve,se){return ve=Sl(ve,se),ve.index=0,ve.sibling=null,ve}function R(ve,se,ye){return ve.index=ye,o?(ye=ve.alternate,ye!==null?(ye=ye.index,ye<se?(ve.flags|=2,se):ye):(ve.flags|=2,se)):(ve.flags|=1048576,se)}function k(ve){return o&&ve.alternate===null&&(ve.flags|=2),ve}function K(ve,se,ye,Xe){return se===null||se.tag!==6?(se=$v(ye,ve.mode,Xe),se.return=ve,se):(se=T(se,ye),se.return=ve,se)}function ie(ve,se,ye,Xe){var Et=ye.type;return Et===U?ze(ve,se,ye.props.children,Xe,ye.key):se!==null&&(se.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===de&&Qd(Et)===se.type)?(Xe=T(se,ye.props),Xe.ref=au(ve,se,ye),Xe.return=ve,Xe):(Xe=Tm(ye.type,ye.key,ye.props,null,ve.mode,Xe),Xe.ref=au(ve,se,ye),Xe.return=ve,Xe)}function we(ve,se,ye,Xe){return se===null||se.tag!==4||se.stateNode.containerInfo!==ye.containerInfo||se.stateNode.implementation!==ye.implementation?(se=Xv(ye,ve.mode,Xe),se.return=ve,se):(se=T(se,ye.children||[]),se.return=ve,se)}function ze(ve,se,ye,Xe,Et){return se===null||se.tag!==7?(se=bu(ye,ve.mode,Xe,Et),se.return=ve,se):(se=T(se,ye),se.return=ve,se)}function Ve(ve,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number")return se=$v(""+se,ve.mode,ye),se.return=ve,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case B:return ye=Tm(se.type,se.key,se.props,null,ve.mode,ye),ye.ref=au(ve,null,se),ye.return=ve,ye;case N:return se=Xv(se,ve.mode,ye),se.return=ve,se;case de:var Xe=se._init;return Ve(ve,Xe(se._payload),ye)}if(qe(se)||J(se))return se=bu(se,ve.mode,ye,null),se.return=ve,se;lu(ve,se)}return null}function ke(ve,se,ye,Xe){var Et=se!==null?se.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return Et!==null?null:K(ve,se,""+ye,Xe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case B:return ye.key===Et?ie(ve,se,ye,Xe):null;case N:return ye.key===Et?we(ve,se,ye,Xe):null;case de:return Et=ye._init,ke(ve,se,Et(ye._payload),Xe)}if(qe(ye)||J(ye))return Et!==null?null:ze(ve,se,ye,Xe,null);lu(ve,ye)}return null}function ft(ve,se,ye,Xe,Et){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return ve=ve.get(ye)||null,K(se,ve,""+Xe,Et);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case B:return ve=ve.get(Xe.key===null?ye:Xe.key)||null,ie(se,ve,Xe,Et);case N:return ve=ve.get(Xe.key===null?ye:Xe.key)||null,we(se,ve,Xe,Et);case de:var It=Xe._init;return ft(ve,se,ye,It(Xe._payload),Et)}if(qe(Xe)||J(Xe))return ve=ve.get(ye)||null,ze(se,ve,Xe,Et,null);lu(se,Xe)}return null}function yt(ve,se,ye,Xe){for(var Et=null,It=null,Lt=se,Bt=se=0,Ui=null;Lt!==null&&Bt<ye.length;Bt++){Lt.index>Bt?(Ui=Lt,Lt=null):Ui=Lt.sibling;var _n=ke(ve,Lt,ye[Bt],Xe);if(_n===null){Lt===null&&(Lt=Ui);break}o&&Lt&&_n.alternate===null&&l(ve,Lt),se=R(_n,se,Bt),It===null?Et=_n:It.sibling=_n,It=_n,Lt=Ui}if(Bt===ye.length)return p(ve,Lt),Pn&&js(ve,Bt),Et;if(Lt===null){for(;Bt<ye.length;Bt++)Lt=Ve(ve,ye[Bt],Xe),Lt!==null&&(se=R(Lt,se,Bt),It===null?Et=Lt:It.sibling=Lt,It=Lt);return Pn&&js(ve,Bt),Et}for(Lt=_(ve,Lt);Bt<ye.length;Bt++)Ui=ft(Lt,ve,Bt,ye[Bt],Xe),Ui!==null&&(o&&Ui.alternate!==null&&Lt.delete(Ui.key===null?Bt:Ui.key),se=R(Ui,se,Bt),It===null?Et=Ui:It.sibling=Ui,It=Ui);return o&&Lt.forEach(function(wl){return l(ve,wl)}),Pn&&js(ve,Bt),Et}function St(ve,se,ye,Xe){var Et=J(ye);if(typeof Et!="function")throw Error(t(150));if(ye=Et.call(ye),ye==null)throw Error(t(151));for(var It=Et=null,Lt=se,Bt=se=0,Ui=null,_n=ye.next();Lt!==null&&!_n.done;Bt++,_n=ye.next()){Lt.index>Bt?(Ui=Lt,Lt=null):Ui=Lt.sibling;var wl=ke(ve,Lt,_n.value,Xe);if(wl===null){Lt===null&&(Lt=Ui);break}o&&Lt&&wl.alternate===null&&l(ve,Lt),se=R(wl,se,Bt),It===null?Et=wl:It.sibling=wl,It=wl,Lt=Ui}if(_n.done)return p(ve,Lt),Pn&&js(ve,Bt),Et;if(Lt===null){for(;!_n.done;Bt++,_n=ye.next())_n=Ve(ve,_n.value,Xe),_n!==null&&(se=R(_n,se,Bt),It===null?Et=_n:It.sibling=_n,It=_n);return Pn&&js(ve,Bt),Et}for(Lt=_(ve,Lt);!_n.done;Bt++,_n=ye.next())_n=ft(Lt,ve,Bt,_n.value,Xe),_n!==null&&(o&&_n.alternate!==null&&Lt.delete(_n.key===null?Bt:_n.key),se=R(_n,se,Bt),It===null?Et=_n:It.sibling=_n,It=_n);return o&&Lt.forEach(function(YR){return l(ve,YR)}),Pn&&js(ve,Bt),Et}function ri(ve,se,ye,Xe){if(typeof ye=="object"&&ye!==null&&ye.type===U&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case B:e:{for(var Et=ye.key,It=se;It!==null;){if(It.key===Et){if(Et=ye.type,Et===U){if(It.tag===7){p(ve,It.sibling),se=T(It,ye.props.children),se.return=ve,ve=se;break e}}else if(It.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===de&&Qd(Et)===It.type){p(ve,It.sibling),se=T(It,ye.props),se.ref=au(ve,It,ye),se.return=ve,ve=se;break e}p(ve,It);break}else l(ve,It);It=It.sibling}ye.type===U?(se=bu(ye.props.children,ve.mode,Xe,ye.key),se.return=ve,ve=se):(Xe=Tm(ye.type,ye.key,ye.props,null,ve.mode,Xe),Xe.ref=au(ve,se,ye),Xe.return=ve,ve=Xe)}return k(ve);case N:e:{for(It=ye.key;se!==null;){if(se.key===It)if(se.tag===4&&se.stateNode.containerInfo===ye.containerInfo&&se.stateNode.implementation===ye.implementation){p(ve,se.sibling),se=T(se,ye.children||[]),se.return=ve,ve=se;break e}else{p(ve,se);break}else l(ve,se);se=se.sibling}se=Xv(ye,ve.mode,Xe),se.return=ve,ve=se}return k(ve);case de:return It=ye._init,ri(ve,se,It(ye._payload),Xe)}if(qe(ye))return yt(ve,se,ye,Xe);if(J(ye))return St(ve,se,ye,Xe);lu(ve,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,se!==null&&se.tag===6?(p(ve,se.sibling),se=T(se,ye),se.return=ve,ve=se):(p(ve,se),se=$v(ye,ve.mode,Xe),se.return=ve,ve=se),k(ve)):p(ve,se)}return ri}var da=eh(!0),uu=eh(!1),ha=Bn(null),pa=null,Ys=null,fl=null;function ma(){fl=Ys=pa=null}function cu(o){var l=ha.current;bn(ha),o._currentValue=l}function fu(o,l,p){for(;o!==null;){var _=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,_!==null&&(_.childLanes|=l)):_!==null&&(_.childLanes&l)!==l&&(_.childLanes|=l),o===p)break;o=o.return}}function Po(o,l){pa=o,fl=Ys=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&l&&(Kt=!0),o.firstContext=null)}function _r(o){var l=o._currentValue;if(fl!==o)if(o={context:o,memoizedValue:l,next:null},Ys===null){if(pa===null)throw Error(t(308));Ys=o,pa.dependencies={lanes:0,firstContext:o}}else Ys=Ys.next=o;return l}var Ks=null;function th(o){Ks===null?Ks=[o]:Ks.push(o)}function du(o,l,p,_){var T=l.interleaved;return T===null?(p.next=p,th(l)):(p.next=T.next,T.next=p),l.interleaved=p,ls(o,_)}function ls(o,l){o.lanes|=l;var p=o.alternate;for(p!==null&&(p.lanes|=l),p=o,o=o.return;o!==null;)o.childLanes|=l,p=o.alternate,p!==null&&(p.childLanes|=l),p=o,o=o.return;return p.tag===3?p.stateNode:null}var xn=!1;function Xt(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xn(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Sn(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Dn(o,l,p){var _=o.updateQueue;if(_===null)return null;if(_=_.shared,gn&2){var T=_.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),_.pending=l,ls(o,p)}return T=_.interleaved,T===null?(l.next=l,th(_)):(l.next=T.next,T.next=l),_.interleaved=l,ls(o,p)}function Ni(o,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var _=l.lanes;_&=o.pendingLanes,p|=_,l.lanes=p,Gn(o,p)}}function ga(o,l){var p=o.updateQueue,_=o.alternate;if(_!==null&&(_=_.updateQueue,p===_)){var T=null,R=null;if(p=p.firstBaseUpdate,p!==null){do{var k={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};R===null?T=R=k:R=R.next=k,p=p.next}while(p!==null);R===null?T=R=l:R=R.next=l}else T=R=l;p={baseState:_.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:_.shared,effects:_.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=l:o.next=l,p.lastBaseUpdate=l}function Vn(o,l,p,_){var T=o.updateQueue;xn=!1;var R=T.firstBaseUpdate,k=T.lastBaseUpdate,K=T.shared.pending;if(K!==null){T.shared.pending=null;var ie=K,we=ie.next;ie.next=null,k===null?R=we:k.next=we,k=ie;var ze=o.alternate;ze!==null&&(ze=ze.updateQueue,K=ze.lastBaseUpdate,K!==k&&(K===null?ze.firstBaseUpdate=we:K.next=we,ze.lastBaseUpdate=ie))}if(R!==null){var Ve=T.baseState;k=0,ze=we=ie=null,K=R;do{var ke=K.lane,ft=K.eventTime;if((_&ke)===ke){ze!==null&&(ze=ze.next={eventTime:ft,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var yt=o,St=K;switch(ke=l,ft=p,St.tag){case 1:if(yt=St.payload,typeof yt=="function"){Ve=yt.call(ft,Ve,ke);break e}Ve=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=St.payload,ke=typeof yt=="function"?yt.call(ft,Ve,ke):yt,ke==null)break e;Ve=Z({},Ve,ke);break e;case 2:xn=!0}}K.callback!==null&&K.lane!==0&&(o.flags|=64,ke=T.effects,ke===null?T.effects=[K]:ke.push(K))}else ft={eventTime:ft,lane:ke,tag:K.tag,payload:K.payload,callback:K.callback,next:null},ze===null?(we=ze=ft,ie=Ve):ze=ze.next=ft,k|=ke;if(K=K.next,K===null){if(K=T.shared.pending,K===null)break;ke=K,K=ke.next,ke.next=null,T.lastBaseUpdate=ke,T.shared.pending=null}}while(!0);if(ze===null&&(ie=Ve),T.baseState=ie,T.firstBaseUpdate=we,T.lastBaseUpdate=ze,l=T.shared.interleaved,l!==null){T=l;do k|=T.lane,T=T.next;while(T!==l)}else R===null&&(T.shared.lanes=0);Su|=k,o.lanes=k,o.memoizedState=Ve}}function dl(o,l,p){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var _=o[l],T=_.callback;if(T!==null){if(_.callback=null,_=p,typeof T!="function")throw Error(t(191,T));T.call(_)}}}var Es={},xr=Bn(Es),va=Bn(Es),Zs=Bn(Es);function Jn(o){if(o===Es)throw Error(t(174));return o}function hu(o,l){switch(wn(Zs,l),wn(va,o),wn(xr,Es),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:et(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=et(l,o)}bn(xr),wn(xr,l)}function Io(){bn(xr),bn(va),bn(Zs)}function ya(o){Jn(Zs.current);var l=Jn(xr.current),p=et(l,o.type);l!==p&&(wn(va,o),wn(xr,p))}function hl(o){va.current===o&&(bn(xr),bn(va))}var In=Bn(0);function us(o){for(var l=o;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var pl=[];function bs(){for(var o=0;o<pl.length;o++)pl[o]._workInProgressVersionPrimary=null;pl.length=0}var _a=I.ReactCurrentDispatcher,xa=I.ReactCurrentBatchConfig,Js=0,Tn=null,Hn=null,pn=null,cs=!1,Oi=!1,Lo=0,rr=0;function Mi(){throw Error(t(321))}function pu(o,l){if(l===null)return!1;for(var p=0;p<l.length&&p<o.length;p++)if(!gr(o[p],l[p]))return!1;return!0}function mu(o,l,p,_,T,R){if(Js=R,Tn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,_a.current=o===null||o.memoizedState===null?cm:fm,o=p(_,T),Oi){R=0;do{if(Oi=!1,Lo=0,25<=R)throw Error(t(301));R+=1,pn=Hn=null,l.updateQueue=null,_a.current=dm,o=p(_,T)}while(Oi)}if(_a.current=hf,l=Hn!==null&&Hn.next!==null,Js=0,pn=Hn=Tn=null,cs=!1,l)throw Error(t(300));return o}function nh(){var o=Lo!==0;return Lo=0,o}function Ei(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Tn.memoizedState=pn=o:pn=pn.next=o,pn}function Sr(){if(Hn===null){var o=Tn.alternate;o=o!==null?o.memoizedState:null}else o=Hn.next;var l=pn===null?Tn.memoizedState:pn.next;if(l!==null)pn=l,Hn=o;else{if(o===null)throw Error(t(310));Hn=o,o={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},pn===null?Tn.memoizedState=pn=o:pn=pn.next=o}return pn}function ml(o,l){return typeof l=="function"?l(o):l}function gu(o){var l=Sr(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var _=Hn,T=_.baseQueue,R=p.pending;if(R!==null){if(T!==null){var k=T.next;T.next=R.next,R.next=k}_.baseQueue=T=R,p.pending=null}if(T!==null){R=T.next,_=_.baseState;var K=k=null,ie=null,we=R;do{var ze=we.lane;if((Js&ze)===ze)ie!==null&&(ie=ie.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),_=we.hasEagerState?we.eagerState:o(_,we.action);else{var Ve={lane:ze,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};ie===null?(K=ie=Ve,k=_):ie=ie.next=Ve,Tn.lanes|=ze,Su|=ze}we=we.next}while(we!==null&&we!==R);ie===null?k=_:ie.next=K,gr(_,l.memoizedState)||(Kt=!0),l.memoizedState=_,l.baseState=k,l.baseQueue=ie,p.lastRenderedState=_}if(o=p.interleaved,o!==null){T=o;do R=T.lane,Tn.lanes|=R,Su|=R,T=T.next;while(T!==o)}else T===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function Qs(o){var l=Sr(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var _=p.dispatch,T=p.pending,R=l.memoizedState;if(T!==null){p.pending=null;var k=T=T.next;do R=o(R,k.action),k=k.next;while(k!==T);gr(R,l.memoizedState)||(Kt=!0),l.memoizedState=R,l.baseQueue===null&&(l.baseState=R),p.lastRenderedState=R}return[R,_]}function ih(){}function rh(o,l){var p=Tn,_=Sr(),T=l(),R=!gr(_.memoizedState,T);if(R&&(_.memoizedState=T,Kt=!0),_=_.queue,ah(rm.bind(null,p,_,o),[o]),_.getSnapshot!==l||R||pn!==null&&pn.memoizedState.tag&1){if(p.flags|=2048,fs(9,vu.bind(null,p,_,T,l),void 0,null),ki===null)throw Error(t(349));Js&30||af(p,l,T)}return T}function af(o,l,p){o.flags|=16384,o={getSnapshot:l,value:p},l=Tn.updateQueue,l===null?(l={lastEffect:null,stores:null},Tn.updateQueue=l,l.stores=[o]):(p=l.stores,p===null?l.stores=[o]:p.push(o))}function vu(o,l,p,_){l.value=p,l.getSnapshot=_,sm(l)&&sh(o)}function rm(o,l,p){return p(function(){sm(l)&&sh(o)})}function sm(o){var l=o.getSnapshot;o=o.value;try{var p=l();return!gr(o,p)}catch{return!0}}function sh(o){var l=ls(o,1);l!==null&&ro(l,o,1,-1)}function oh(o){var l=Ei();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:o},l.queue=o,o=o.dispatch=Sa.bind(null,Tn,o),[l.memoizedState,o]}function fs(o,l,p,_){return o={tag:o,create:l,destroy:p,deps:_,next:null},l=Tn.updateQueue,l===null?(l={lastEffect:null,stores:null},Tn.updateQueue=l,l.lastEffect=o.next=o):(p=l.lastEffect,p===null?l.lastEffect=o.next=o:(_=p.next,p.next=o,o.next=_,l.lastEffect=o)),o}function om(){return Sr().memoizedState}function Ts(o,l,p,_){var T=Ei();Tn.flags|=o,T.memoizedState=fs(1|l,p,void 0,_===void 0?null:_)}function yu(o,l,p,_){var T=Sr();_=_===void 0?null:_;var R=void 0;if(Hn!==null){var k=Hn.memoizedState;if(R=k.destroy,_!==null&&pu(_,k.deps)){T.memoizedState=fs(l,p,R,_);return}}Tn.flags|=o,T.memoizedState=fs(1|l,p,R,_)}function Yi(o,l){return Ts(8390656,8,o,l)}function ah(o,l){return yu(2048,8,o,l)}function lh(o,l){return yu(4,2,o,l)}function am(o,l){return yu(4,4,o,l)}function lm(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function uh(o,l,p){return p=p!=null?p.concat([o]):null,yu(4,4,lm.bind(null,l,o),p)}function lf(){}function um(o,l){var p=Sr();l=l===void 0?null:l;var _=p.memoizedState;return _!==null&&l!==null&&pu(l,_[1])?_[0]:(p.memoizedState=[o,l],o)}function wr(o,l){var p=Sr();l=l===void 0?null:l;var _=p.memoizedState;return _!==null&&l!==null&&pu(l,_[1])?_[0]:(o=o(),p.memoizedState=[o,l],o)}function uf(o,l,p){return Js&21?(gr(p,l)||(p=sn(),Tn.lanes|=p,Su|=p,o.baseState=!0),l):(o.baseState&&(o.baseState=!1,Kt=!0),o.memoizedState=p)}function Av(o,l){var p=on;on=p!==0&&4>p?p:4,o(!0);var _=xa.transition;xa.transition={};try{o(!1),l()}finally{on=p,xa.transition=_}}function eo(){return Sr().memoizedState}function cf(o,l,p){var _=_l(o);if(p={lane:_,action:p,hasEagerState:!1,eagerState:null,next:null},_u(o))ff(l,p);else if(p=du(o,l,p,_),p!==null){var T=Er();ro(p,o,_,T),df(p,l,_)}}function Sa(o,l,p){var _=_l(o),T={lane:_,action:p,hasEagerState:!1,eagerState:null,next:null};if(_u(o))ff(l,T);else{var R=o.alternate;if(o.lanes===0&&(R===null||R.lanes===0)&&(R=l.lastRenderedReducer,R!==null))try{var k=l.lastRenderedState,K=R(k,p);if(T.hasEagerState=!0,T.eagerState=K,gr(K,k)){var ie=l.interleaved;ie===null?(T.next=T,th(l)):(T.next=ie.next,ie.next=T),l.interleaved=T;return}}catch{}finally{}p=du(o,l,T,_),p!==null&&(T=Er(),ro(p,o,_,T),df(p,l,_))}}function _u(o){var l=o.alternate;return o===Tn||l!==null&&l===Tn}function ff(o,l){Oi=cs=!0;var p=o.pending;p===null?l.next=l:(l.next=p.next,p.next=l),o.pending=l}function df(o,l,p){if(p&4194240){var _=l.lanes;_&=o.pendingLanes,p|=_,l.lanes=p,Gn(o,p)}}var hf={readContext:_r,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},cm={readContext:_r,useCallback:function(o,l){return Ei().memoizedState=[o,l===void 0?null:l],o},useContext:_r,useEffect:Yi,useImperativeHandle:function(o,l,p){return p=p!=null?p.concat([o]):null,Ts(4194308,4,lm.bind(null,l,o),p)},useLayoutEffect:function(o,l){return Ts(4194308,4,o,l)},useInsertionEffect:function(o,l){return Ts(4,2,o,l)},useMemo:function(o,l){var p=Ei();return l=l===void 0?null:l,o=o(),p.memoizedState=[o,l],o},useReducer:function(o,l,p){var _=Ei();return l=p!==void 0?p(l):l,_.memoizedState=_.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},_.queue=o,o=o.dispatch=cf.bind(null,Tn,o),[_.memoizedState,o]},useRef:function(o){var l=Ei();return o={current:o},l.memoizedState=o},useState:oh,useDebugValue:lf,useDeferredValue:function(o){return Ei().memoizedState=o},useTransition:function(){var o=oh(!1),l=o[0];return o=Av.bind(null,o[1]),Ei().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,p){var _=Tn,T=Ei();if(Pn){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),ki===null)throw Error(t(349));Js&30||af(_,l,p)}T.memoizedState=p;var R={value:p,getSnapshot:l};return T.queue=R,Yi(rm.bind(null,_,R,o),[o]),_.flags|=2048,fs(9,vu.bind(null,_,R,p,l),void 0,null),p},useId:function(){var o=Ei(),l=ki.identifierPrefix;if(Pn){var p=Vr,_=Ye;p=(_&~(1<<32-kt(_)-1)).toString(32)+p,l=":"+l+"R"+p,p=Lo++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=rr++,l=":"+l+"r"+p.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},fm={readContext:_r,useCallback:um,useContext:_r,useEffect:ah,useImperativeHandle:uh,useInsertionEffect:lh,useLayoutEffect:am,useMemo:wr,useReducer:gu,useRef:om,useState:function(){return gu(ml)},useDebugValue:lf,useDeferredValue:function(o){var l=Sr();return uf(l,Hn.memoizedState,o)},useTransition:function(){var o=gu(ml)[0],l=Sr().memoizedState;return[o,l]},useMutableSource:ih,useSyncExternalStore:rh,useId:eo,unstable_isNewReconciler:!1},dm={readContext:_r,useCallback:um,useContext:_r,useEffect:ah,useImperativeHandle:uh,useInsertionEffect:lh,useLayoutEffect:am,useMemo:wr,useReducer:Qs,useRef:om,useState:function(){return Qs(ml)},useDebugValue:lf,useDeferredValue:function(o){var l=Sr();return Hn===null?l.memoizedState=o:uf(l,Hn.memoizedState,o)},useTransition:function(){var o=Qs(ml)[0],l=Sr().memoizedState;return[o,l]},useMutableSource:ih,useSyncExternalStore:rh,useId:eo,unstable_isNewReconciler:!1};function Wr(o,l){if(o&&o.defaultProps){l=Z({},l),o=o.defaultProps;for(var p in o)l[p]===void 0&&(l[p]=o[p]);return l}return l}function xu(o,l,p,_){l=o.memoizedState,p=p(_,l),p=p==null?l:Z({},l,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var pf={isMounted:function(o){return(o=o._reactInternals)?vs(o)===o:!1},enqueueSetState:function(o,l,p){o=o._reactInternals;var _=Er(),T=_l(o),R=Sn(_,T);R.payload=l,p!=null&&(R.callback=p),l=Dn(o,R,T),l!==null&&(ro(l,o,T,_),Ni(l,o,T))},enqueueReplaceState:function(o,l,p){o=o._reactInternals;var _=Er(),T=_l(o),R=Sn(_,T);R.tag=1,R.payload=l,p!=null&&(R.callback=p),l=Dn(o,R,T),l!==null&&(ro(l,o,T,_),Ni(l,o,T))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var p=Er(),_=_l(o),T=Sn(p,_);T.tag=2,l!=null&&(T.callback=l),l=Dn(o,T,_),l!==null&&(ro(l,o,_,p),Ni(l,o,_))}};function hm(o,l,p,_,T,R,k){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(_,R,k):l.prototype&&l.prototype.isPureReactComponent?!na(p,_)||!na(T,R):!0}function c(o,l,p){var _=!1,T=$s,R=l.contextType;return typeof R=="object"&&R!==null?R=_r(R):(T=Di(l)?Xs:Si.current,_=l.contextTypes,R=(_=_!=null)?la(o,T):$s),l=new l(p,R),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=pf,o.stateNode=l,l._reactInternals=o,_&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=T,o.__reactInternalMemoizedMaskedChildContext=R),l}function f(o,l,p,_){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,_),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,_),l.state!==o&&pf.enqueueReplaceState(l,l.state,null)}function y(o,l,p,_){var T=o.stateNode;T.props=p,T.state=o.memoizedState,T.refs={},Xt(o);var R=l.contextType;typeof R=="object"&&R!==null?T.context=_r(R):(R=Di(l)?Xs:Si.current,T.context=la(o,R)),T.state=o.memoizedState,R=l.getDerivedStateFromProps,typeof R=="function"&&(xu(o,l,R,p),T.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(l=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),l!==T.state&&pf.enqueueReplaceState(T,T.state,null),Vn(o,p,T,_),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308)}function M(o,l){try{var p="",_=l;do p+=Te(_),_=_.return;while(_);var T=p}catch(R){T=`
Error generating stack: `+R.message+`
`+R.stack}return{value:o,source:l,stack:T,digest:null}}function A(o,l,p){return{value:o,source:null,stack:p??null,digest:l??null}}function L(o,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var Y=typeof WeakMap=="function"?WeakMap:Map;function oe(o,l,p){p=Sn(-1,p),p.tag=3,p.payload={element:null};var _=l.value;return p.callback=function(){xm||(xm=!0,Uv=_),L(o,l)},p}function Ae(o,l,p){p=Sn(-1,p),p.tag=3;var _=o.type.getDerivedStateFromError;if(typeof _=="function"){var T=l.value;p.payload=function(){return _(T)},p.callback=function(){L(o,l)}}var R=o.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(p.callback=function(){L(o,l),typeof _!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var k=l.stack;this.componentDidCatch(l.value,{componentStack:k!==null?k:""})}),p}function We(o,l,p){var _=o.pingCache;if(_===null){_=o.pingCache=new Y;var T=new Set;_.set(l,T)}else T=_.get(l),T===void 0&&(T=new Set,_.set(l,T));T.has(p)||(T.add(p),o=FR.bind(null,o,l,p),l.then(o,o))}function ht(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Vt(o,l,p,_,T){return o.mode&1?(o.flags|=65536,o.lanes=T,o):(o===l?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=Sn(-1,1),l.tag=2,Dn(p,l,1))),p.lanes|=1),o)}var Pt=I.ReactCurrentOwner,Kt=!1;function ot(o,l,p,_){l.child=o===null?uu(l,null,p,_):da(l,o.child,p,_)}function bi(o,l,p,_,T){p=p.render;var R=l.ref;return Po(l,T),_=mu(o,l,p,_,R,T),p=nh(),o!==null&&!Kt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~T,wa(o,l,T)):(Pn&&p&&Yd(l),l.flags|=1,ot(o,l,_,T),l.child)}function Mr(o,l,p,_,T){if(o===null){var R=p.type;return typeof R=="function"&&!Gv(R)&&R.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=R,xe(o,l,R,_,T)):(o=Tm(p.type,null,_,l,l.mode,T),o.ref=l.ref,o.return=l,l.child=o)}if(R=o.child,!(o.lanes&T)){var k=R.memoizedProps;if(p=p.compare,p=p!==null?p:na,p(k,_)&&o.ref===l.ref)return wa(o,l,T)}return l.flags|=1,o=Sl(R,_),o.ref=l.ref,o.return=l,l.child=o}function xe(o,l,p,_,T){if(o!==null){var R=o.memoizedProps;if(na(R,_)&&o.ref===l.ref)if(Kt=!1,l.pendingProps=_=R,(o.lanes&T)!==0)o.flags&131072&&(Kt=!0);else return l.lanes=o.lanes,wa(o,l,T)}return nt(o,l,p,_,T)}function ce(o,l,p){var _=l.pendingProps,T=_.children,R=o!==null?o.memoizedState:null;if(_.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},wn(gf,ds),ds|=p;else{if(!(p&1073741824))return o=R!==null?R.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,wn(gf,ds),ds|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=R!==null?R.baseLanes:p,wn(gf,ds),ds|=_}else R!==null?(_=R.baseLanes|p,l.memoizedState=null):_=p,wn(gf,ds),ds|=_;return ot(o,l,T,p),l.child}function Me(o,l){var p=l.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function nt(o,l,p,_,T){var R=Di(p)?Xs:Si.current;return R=la(l,R),Po(l,T),p=mu(o,l,p,_,R,T),_=nh(),o!==null&&!Kt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~T,wa(o,l,T)):(Pn&&_&&Yd(l),l.flags|=1,ot(o,l,p,T),l.child)}function wt(o,l,p,_,T){if(Di(p)){var R=!0;ua(l)}else R=!1;if(Po(l,T),l.stateNode===null)mm(o,l),c(l,p,_),y(l,p,_,T),_=!0;else if(o===null){var k=l.stateNode,K=l.memoizedProps;k.props=K;var ie=k.context,we=p.contextType;typeof we=="object"&&we!==null?we=_r(we):(we=Di(p)?Xs:Si.current,we=la(l,we));var ze=p.getDerivedStateFromProps,Ve=typeof ze=="function"||typeof k.getSnapshotBeforeUpdate=="function";Ve||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(K!==_||ie!==we)&&f(l,k,_,we),xn=!1;var ke=l.memoizedState;k.state=ke,Vn(l,_,k,T),ie=l.memoizedState,K!==_||ke!==ie||Xi.current||xn?(typeof ze=="function"&&(xu(l,p,ze,_),ie=l.memoizedState),(K=xn||hm(l,p,K,_,ke,ie,we))?(Ve||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(l.flags|=4194308)):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=_,l.memoizedState=ie),k.props=_,k.state=ie,k.context=we,_=K):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),_=!1)}else{k=l.stateNode,Xn(o,l),K=l.memoizedProps,we=l.type===l.elementType?K:Wr(l.type,K),k.props=we,Ve=l.pendingProps,ke=k.context,ie=p.contextType,typeof ie=="object"&&ie!==null?ie=_r(ie):(ie=Di(p)?Xs:Si.current,ie=la(l,ie));var ft=p.getDerivedStateFromProps;(ze=typeof ft=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(K!==Ve||ke!==ie)&&f(l,k,_,ie),xn=!1,ke=l.memoizedState,k.state=ke,Vn(l,_,k,T);var yt=l.memoizedState;K!==Ve||ke!==yt||Xi.current||xn?(typeof ft=="function"&&(xu(l,p,ft,_),yt=l.memoizedState),(we=xn||hm(l,p,we,_,ke,yt,ie)||!1)?(ze||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(_,yt,ie),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(_,yt,ie)),typeof k.componentDidUpdate=="function"&&(l.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof k.componentDidUpdate!="function"||K===o.memoizedProps&&ke===o.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&ke===o.memoizedState||(l.flags|=1024),l.memoizedProps=_,l.memoizedState=yt),k.props=_,k.state=yt,k.context=ie,_=we):(typeof k.componentDidUpdate!="function"||K===o.memoizedProps&&ke===o.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&ke===o.memoizedState||(l.flags|=1024),_=!1)}return Gt(o,l,p,_,R,T)}function Gt(o,l,p,_,T,R){Me(o,l);var k=(l.flags&128)!==0;if(!_&&!k)return T&&jd(l,p,!1),wa(o,l,R);_=l.stateNode,Pt.current=l;var K=k&&typeof p.getDerivedStateFromError!="function"?null:_.render();return l.flags|=1,o!==null&&k?(l.child=da(l,o.child,null,R),l.child=da(l,null,K,R)):ot(o,l,K,R),l.memoizedState=_.state,T&&jd(l,p,!0),l.child}function Ht(o){var l=o.stateNode;l.pendingContext?Xd(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Xd(o,l.context,!1),hu(o,l.containerInfo)}function dn(o,l,p,_,T){return Ro(),cl(T),l.flags|=256,ot(o,l,p,_),l.child}var Qn={dehydrated:null,treeContext:null,retryLane:0};function fn(o){return{baseLanes:o,cachePool:null,transitions:null}}function to(o,l,p){var _=l.pendingProps,T=In.current,R=!1,k=(l.flags&128)!==0,K;if((K=k)||(K=o!==null&&o.memoizedState===null?!1:(T&2)!==0),K?(R=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(T|=1),wn(In,T&1),o===null)return sf(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(l.mode&1?o.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(k=_.children,o=_.fallback,R?(_=l.mode,R=l.child,k={mode:"hidden",children:k},!(_&1)&&R!==null?(R.childLanes=0,R.pendingProps=k):R=Am(k,_,0,null),o=bu(o,_,p,null),R.return=l,o.return=l,R.sibling=o,l.child=R,l.child.memoizedState=fn(p),l.memoizedState=Qn,o):ch(l,k));if(T=o.memoizedState,T!==null&&(K=T.dehydrated,K!==null))return TR(o,l,k,_,K,T,p);if(R){R=_.fallback,k=l.mode,T=o.child,K=T.sibling;var ie={mode:"hidden",children:_.children};return!(k&1)&&l.child!==T?(_=l.child,_.childLanes=0,_.pendingProps=ie,l.deletions=null):(_=Sl(T,ie),_.subtreeFlags=T.subtreeFlags&14680064),K!==null?R=Sl(K,R):(R=bu(R,k,p,null),R.flags|=2),R.return=l,_.return=l,_.sibling=R,l.child=_,_=R,R=l.child,k=o.child.memoizedState,k=k===null?fn(p):{baseLanes:k.baseLanes|p,cachePool:null,transitions:k.transitions},R.memoizedState=k,R.childLanes=o.childLanes&~p,l.memoizedState=Qn,_}return R=o.child,o=R.sibling,_=Sl(R,{mode:"visible",children:_.children}),!(l.mode&1)&&(_.lanes=p),_.return=l,_.sibling=null,o!==null&&(p=l.deletions,p===null?(l.deletions=[o],l.flags|=16):p.push(o)),l.child=_,l.memoizedState=null,_}function ch(o,l){return l=Am({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function pm(o,l,p,_){return _!==null&&cl(_),da(l,o.child,null,p),o=ch(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function TR(o,l,p,_,T,R,k){if(p)return l.flags&256?(l.flags&=-257,_=A(Error(t(422))),pm(o,l,k,_)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(R=_.fallback,T=l.mode,_=Am({mode:"visible",children:_.children},T,0,null),R=bu(R,T,k,null),R.flags|=2,_.return=l,R.return=l,_.sibling=R,l.child=_,l.mode&1&&da(l,o.child,null,k),l.child.memoizedState=fn(k),l.memoizedState=Qn,R);if(!(l.mode&1))return pm(o,l,k,null);if(T.data==="$!"){if(_=T.nextSibling&&T.nextSibling.dataset,_)var K=_.dgst;return _=K,R=Error(t(419)),_=A(R,_,void 0),pm(o,l,k,_)}if(K=(k&o.childLanes)!==0,Kt||K){if(_=ki,_!==null){switch(k&-k){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=T&(_.suspendedLanes|k)?0:T,T!==0&&T!==R.retryLane&&(R.retryLane=T,ls(o,T),ro(_,o,T,-1))}return Wv(),_=A(Error(t(421))),pm(o,l,k,_)}return T.data==="$?"?(l.flags|=128,l.child=o.child,l=zR.bind(null,o),T._reactRetry=l,null):(o=R.treeContext,qi=Ws(T.nextSibling),wi=l,Pn=!0,Hr=null,o!==null&&(ji[di++]=Ye,ji[di++]=Vr,ji[di++]=fa,Ye=o.id,Vr=o.overflow,fa=l),l=ch(l,_.children),l.flags|=4096,l)}function b1(o,l,p){o.lanes|=l;var _=o.alternate;_!==null&&(_.lanes|=l),fu(o.return,l,p)}function Cv(o,l,p,_,T){var R=o.memoizedState;R===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:_,tail:p,tailMode:T}:(R.isBackwards=l,R.rendering=null,R.renderingStartTime=0,R.last=_,R.tail=p,R.tailMode=T)}function T1(o,l,p){var _=l.pendingProps,T=_.revealOrder,R=_.tail;if(ot(o,l,_.children,p),_=In.current,_&2)_=_&1|2,l.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&b1(o,p,l);else if(o.tag===19)b1(o,p,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}_&=1}if(wn(In,_),!(l.mode&1))l.memoizedState=null;else switch(T){case"forwards":for(p=l.child,T=null;p!==null;)o=p.alternate,o!==null&&us(o)===null&&(T=p),p=p.sibling;p=T,p===null?(T=l.child,l.child=null):(T=p.sibling,p.sibling=null),Cv(l,!1,T,p,R);break;case"backwards":for(p=null,T=l.child,l.child=null;T!==null;){if(o=T.alternate,o!==null&&us(o)===null){l.child=T;break}o=T.sibling,T.sibling=p,p=T,T=o}Cv(l,!0,p,null,R);break;case"together":Cv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function mm(o,l){!(l.mode&1)&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function wa(o,l,p){if(o!==null&&(l.dependencies=o.dependencies),Su|=l.lanes,!(p&l.childLanes))return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,p=Sl(o,o.pendingProps),l.child=p,p.return=l;o.sibling!==null;)o=o.sibling,p=p.sibling=Sl(o,o.pendingProps),p.return=l;p.sibling=null}return l.child}function AR(o,l,p){switch(l.tag){case 3:Ht(l),Ro();break;case 5:ya(l);break;case 1:Di(l.type)&&ua(l);break;case 4:hu(l,l.stateNode.containerInfo);break;case 10:var _=l.type._context,T=l.memoizedProps.value;wn(ha,_._currentValue),_._currentValue=T;break;case 13:if(_=l.memoizedState,_!==null)return _.dehydrated!==null?(wn(In,In.current&1),l.flags|=128,null):p&l.child.childLanes?to(o,l,p):(wn(In,In.current&1),o=wa(o,l,p),o!==null?o.sibling:null);wn(In,In.current&1);break;case 19:if(_=(p&l.childLanes)!==0,o.flags&128){if(_)return T1(o,l,p);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),wn(In,In.current),_)break;return null;case 22:case 23:return l.lanes=0,ce(o,l,p)}return wa(o,l,p)}var A1,Rv,C1,R1;A1=function(o,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Rv=function(){},C1=function(o,l,p,_){var T=o.memoizedProps;if(T!==_){o=l.stateNode,Jn(xr.current);var R=null;switch(p){case"input":T=j(o,T),_=j(o,_),R=[];break;case"select":T=Z({},T,{value:void 0}),_=Z({},_,{value:void 0}),R=[];break;case"textarea":T=z(o,T),_=z(o,_),R=[];break;default:typeof T.onClick!="function"&&typeof _.onClick=="function"&&(o.onclick=nu)}Wt(p,_);var k;p=null;for(we in T)if(!_.hasOwnProperty(we)&&T.hasOwnProperty(we)&&T[we]!=null)if(we==="style"){var K=T[we];for(k in K)K.hasOwnProperty(k)&&(p||(p={}),p[k]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(r.hasOwnProperty(we)?R||(R=[]):(R=R||[]).push(we,null));for(we in _){var ie=_[we];if(K=T!=null?T[we]:void 0,_.hasOwnProperty(we)&&ie!==K&&(ie!=null||K!=null))if(we==="style")if(K){for(k in K)!K.hasOwnProperty(k)||ie&&ie.hasOwnProperty(k)||(p||(p={}),p[k]="");for(k in ie)ie.hasOwnProperty(k)&&K[k]!==ie[k]&&(p||(p={}),p[k]=ie[k])}else p||(R||(R=[]),R.push(we,p)),p=ie;else we==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,K=K?K.__html:void 0,ie!=null&&K!==ie&&(R=R||[]).push(we,ie)):we==="children"?typeof ie!="string"&&typeof ie!="number"||(R=R||[]).push(we,""+ie):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(r.hasOwnProperty(we)?(ie!=null&&we==="onScroll"&&En("scroll",o),R||K===ie||(R=[])):(R=R||[]).push(we,ie))}p&&(R=R||[]).push("style",p);var we=R;(l.updateQueue=we)&&(l.flags|=4)}},R1=function(o,l,p,_){p!==_&&(l.flags|=4)};function fh(o,l){if(!Pn)switch(o.tailMode){case"hidden":l=o.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:_.sibling=null}}function sr(o){var l=o.alternate!==null&&o.alternate.child===o.child,p=0,_=0;if(l)for(var T=o.child;T!==null;)p|=T.lanes|T.childLanes,_|=T.subtreeFlags&14680064,_|=T.flags&14680064,T.return=o,T=T.sibling;else for(T=o.child;T!==null;)p|=T.lanes|T.childLanes,_|=T.subtreeFlags,_|=T.flags,T.return=o,T=T.sibling;return o.subtreeFlags|=_,o.childLanes=p,l}function CR(o,l,p){var _=l.pendingProps;switch(qs(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(l),null;case 1:return Di(l.type)&&iu(),sr(l),null;case 3:return _=l.stateNode,Io(),bn(Xi),bn(Si),bs(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(o===null||o.child===null)&&(ul(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,Hr!==null&&(Bv(Hr),Hr=null))),Rv(o,l),sr(l),null;case 5:hl(l);var T=Jn(Zs.current);if(p=l.type,o!==null&&l.stateNode!=null)C1(o,l,p,_,T),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!_){if(l.stateNode===null)throw Error(t(166));return sr(l),null}if(o=Jn(xr.current),ul(l)){_=l.stateNode,p=l.type;var R=l.memoizedProps;switch(_[ii]=l,_[ll]=R,o=(l.mode&1)!==0,p){case"dialog":En("cancel",_),En("close",_);break;case"iframe":case"object":case"embed":En("load",_);break;case"video":case"audio":for(T=0;T<Ao.length;T++)En(Ao[T],_);break;case"source":En("error",_);break;case"img":case"image":case"link":En("error",_),En("load",_);break;case"details":En("toggle",_);break;case"input":pt(_,R),En("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!R.multiple},En("invalid",_);break;case"textarea":Q(_,R),En("invalid",_)}Wt(p,R),T=null;for(var k in R)if(R.hasOwnProperty(k)){var K=R[k];k==="children"?typeof K=="string"?_.textContent!==K&&(R.suppressHydrationWarning!==!0&&tu(_.textContent,K,o),T=["children",K]):typeof K=="number"&&_.textContent!==""+K&&(R.suppressHydrationWarning!==!0&&tu(_.textContent,K,o),T=["children",""+K]):r.hasOwnProperty(k)&&K!=null&&k==="onScroll"&&En("scroll",_)}switch(p){case"input":Nt(_),Ge(_,R,!0);break;case"textarea":Nt(_),Pe(_);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(_.onclick=nu)}_=T,l.updateQueue=_,_!==null&&(l.flags|=4)}else{k=T.nodeType===9?T:T.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ee(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=k.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof _.is=="string"?o=k.createElement(p,{is:_.is}):(o=k.createElement(p),p==="select"&&(k=o,_.multiple?k.multiple=!0:_.size&&(k.size=_.size))):o=k.createElementNS(o,p),o[ii]=l,o[ll]=_,A1(o,l,!1,!1),l.stateNode=o;e:{switch(k=Ot(p,_),p){case"dialog":En("cancel",o),En("close",o),T=_;break;case"iframe":case"object":case"embed":En("load",o),T=_;break;case"video":case"audio":for(T=0;T<Ao.length;T++)En(Ao[T],o);T=_;break;case"source":En("error",o),T=_;break;case"img":case"image":case"link":En("error",o),En("load",o),T=_;break;case"details":En("toggle",o),T=_;break;case"input":pt(o,_),T=j(o,_),En("invalid",o);break;case"option":T=_;break;case"select":o._wrapperState={wasMultiple:!!_.multiple},T=Z({},_,{value:void 0}),En("invalid",o);break;case"textarea":Q(o,_),T=z(o,_),En("invalid",o);break;default:T=_}Wt(p,T),K=T;for(R in K)if(K.hasOwnProperty(R)){var ie=K[R];R==="style"?Rt(o,ie):R==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&Je(o,ie)):R==="children"?typeof ie=="string"?(p!=="textarea"||ie!=="")&&Ft(o,ie):typeof ie=="number"&&Ft(o,""+ie):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(r.hasOwnProperty(R)?ie!=null&&R==="onScroll"&&En("scroll",o):ie!=null&&P(o,R,ie,k))}switch(p){case"input":Nt(o),Ge(o,_,!1);break;case"textarea":Nt(o),Pe(o);break;case"option":_.value!=null&&o.setAttribute("value",""+He(_.value));break;case"select":o.multiple=!!_.multiple,R=_.value,R!=null?X(o,!!_.multiple,R,!1):_.defaultValue!=null&&X(o,!!_.multiple,_.defaultValue,!0);break;default:typeof T.onClick=="function"&&(o.onclick=nu)}switch(p){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return sr(l),null;case 6:if(o&&l.stateNode!=null)R1(o,l,o.memoizedProps,_);else{if(typeof _!="string"&&l.stateNode===null)throw Error(t(166));if(p=Jn(Zs.current),Jn(xr.current),ul(l)){if(_=l.stateNode,p=l.memoizedProps,_[ii]=l,(R=_.nodeValue!==p)&&(o=wi,o!==null))switch(o.tag){case 3:tu(_.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&tu(_.nodeValue,p,(o.mode&1)!==0)}R&&(l.flags|=4)}else _=(p.nodeType===9?p:p.ownerDocument).createTextNode(_),_[ii]=l,l.stateNode=_}return sr(l),null;case 13:if(bn(In),_=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Pn&&qi!==null&&l.mode&1&&!(l.flags&128))Jd(),Ro(),l.flags|=98560,R=!1;else if(R=ul(l),_!==null&&_.dehydrated!==null){if(o===null){if(!R)throw Error(t(318));if(R=l.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(t(317));R[ii]=l}else Ro(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;sr(l),R=!1}else Hr!==null&&(Bv(Hr),Hr=null),R=!0;if(!R)return l.flags&65536?l:null}return l.flags&128?(l.lanes=p,l):(_=_!==null,_!==(o!==null&&o.memoizedState!==null)&&_&&(l.child.flags|=8192,l.mode&1&&(o===null||In.current&1?Ti===0&&(Ti=3):Wv())),l.updateQueue!==null&&(l.flags|=4),sr(l),null);case 4:return Io(),Rv(o,l),o===null&&sl(l.stateNode.containerInfo),sr(l),null;case 10:return cu(l.type._context),sr(l),null;case 17:return Di(l.type)&&iu(),sr(l),null;case 19:if(bn(In),R=l.memoizedState,R===null)return sr(l),null;if(_=(l.flags&128)!==0,k=R.rendering,k===null)if(_)fh(R,!1);else{if(Ti!==0||o!==null&&o.flags&128)for(o=l.child;o!==null;){if(k=us(o),k!==null){for(l.flags|=128,fh(R,!1),_=k.updateQueue,_!==null&&(l.updateQueue=_,l.flags|=4),l.subtreeFlags=0,_=p,p=l.child;p!==null;)R=p,o=_,R.flags&=14680066,k=R.alternate,k===null?(R.childLanes=0,R.lanes=o,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=k.childLanes,R.lanes=k.lanes,R.child=k.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=k.memoizedProps,R.memoizedState=k.memoizedState,R.updateQueue=k.updateQueue,R.type=k.type,o=k.dependencies,R.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return wn(In,In.current&1|2),l.child}o=o.sibling}R.tail!==null&&ge()>vf&&(l.flags|=128,_=!0,fh(R,!1),l.lanes=4194304)}else{if(!_)if(o=us(k),o!==null){if(l.flags|=128,_=!0,p=o.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),fh(R,!0),R.tail===null&&R.tailMode==="hidden"&&!k.alternate&&!Pn)return sr(l),null}else 2*ge()-R.renderingStartTime>vf&&p!==1073741824&&(l.flags|=128,_=!0,fh(R,!1),l.lanes=4194304);R.isBackwards?(k.sibling=l.child,l.child=k):(p=R.last,p!==null?p.sibling=k:l.child=k,R.last=k)}return R.tail!==null?(l=R.tail,R.rendering=l,R.tail=l.sibling,R.renderingStartTime=ge(),l.sibling=null,p=In.current,wn(In,_?p&1|2:p&1),l):(sr(l),null);case 22:case 23:return Hv(),_=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==_&&(l.flags|=8192),_&&l.mode&1?ds&1073741824&&(sr(l),l.subtreeFlags&6&&(l.flags|=8192)):sr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function RR(o,l){switch(qs(l),l.tag){case 1:return Di(l.type)&&iu(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Io(),bn(Xi),bn(Si),bs(),o=l.flags,o&65536&&!(o&128)?(l.flags=o&-65537|128,l):null;case 5:return hl(l),null;case 13:if(bn(In),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Ro()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return bn(In),null;case 4:return Io(),null;case 10:return cu(l.type._context),null;case 22:case 23:return Hv(),null;case 24:return null;default:return null}}var gm=!1,or=!1,PR=typeof WeakSet=="function"?WeakSet:Set,mt=null;function mf(o,l){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(_){ei(o,l,_)}else p.current=null}function Pv(o,l,p){try{p()}catch(_){ei(o,l,_)}}var P1=!1;function IR(o,l){if(al=Or,o=zn(),li(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var _=p.getSelection&&p.getSelection();if(_&&_.rangeCount!==0){p=_.anchorNode;var T=_.anchorOffset,R=_.focusNode;_=_.focusOffset;try{p.nodeType,R.nodeType}catch{p=null;break e}var k=0,K=-1,ie=-1,we=0,ze=0,Ve=o,ke=null;t:for(;;){for(var ft;Ve!==p||T!==0&&Ve.nodeType!==3||(K=k+T),Ve!==R||_!==0&&Ve.nodeType!==3||(ie=k+_),Ve.nodeType===3&&(k+=Ve.nodeValue.length),(ft=Ve.firstChild)!==null;)ke=Ve,Ve=ft;for(;;){if(Ve===o)break t;if(ke===p&&++we===T&&(K=k),ke===R&&++ze===_&&(ie=k),(ft=Ve.nextSibling)!==null)break;Ve=ke,ke=Ve.parentNode}Ve=ft}p=K===-1||ie===-1?null:{start:K,end:ie}}else p=null}p=p||{start:0,end:0}}else p=null;for(Bd={focusedElem:o,selectionRange:p},Or=!1,mt=l;mt!==null;)if(l=mt,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,mt=o;else for(;mt!==null;){l=mt;try{var yt=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var St=yt.memoizedProps,ri=yt.memoizedState,ve=l.stateNode,se=ve.getSnapshotBeforeUpdate(l.elementType===l.type?St:Wr(l.type,St),ri);ve.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var ye=l.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Xe){ei(l,l.return,Xe)}if(o=l.sibling,o!==null){o.return=l.return,mt=o;break}mt=l.return}return yt=P1,P1=!1,yt}function dh(o,l,p){var _=l.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var T=_=_.next;do{if((T.tag&o)===o){var R=T.destroy;T.destroy=void 0,R!==void 0&&Pv(l,p,R)}T=T.next}while(T!==_)}}function vm(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&o)===o){var _=p.create;p.destroy=_()}p=p.next}while(p!==l)}}function Iv(o){var l=o.ref;if(l!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof l=="function"?l(o):l.current=o}}function I1(o){var l=o.alternate;l!==null&&(o.alternate=null,I1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[ii],delete l[ll],delete l[aa],delete l[Zc],delete l[Jc])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function L1(o){return o.tag===5||o.tag===3||o.tag===4}function D1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||L1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Lv(o,l,p){var _=o.tag;if(_===5||_===6)o=o.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(o,l):p.insertBefore(o,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(o,p)):(l=p,l.appendChild(o)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=nu));else if(_!==4&&(o=o.child,o!==null))for(Lv(o,l,p),o=o.sibling;o!==null;)Lv(o,l,p),o=o.sibling}function Dv(o,l,p){var _=o.tag;if(_===5||_===6)o=o.stateNode,l?p.insertBefore(o,l):p.appendChild(o);else if(_!==4&&(o=o.child,o!==null))for(Dv(o,l,p),o=o.sibling;o!==null;)Dv(o,l,p),o=o.sibling}var Ki=null,no=!1;function gl(o,l,p){for(p=p.child;p!==null;)N1(o,l,p),p=p.sibling}function N1(o,l,p){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Tt,p)}catch{}switch(p.tag){case 5:or||mf(p,l);case 6:var _=Ki,T=no;Ki=null,gl(o,l,p),Ki=_,no=T,Ki!==null&&(no?(o=Ki,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):Ki.removeChild(p.stateNode));break;case 18:Ki!==null&&(no?(o=Ki,p=p.stateNode,o.nodeType===8?Kc(o.parentNode,p):o.nodeType===1&&Kc(o,p),Gl(o)):Kc(Ki,p.stateNode));break;case 4:_=Ki,T=no,Ki=p.stateNode.containerInfo,no=!0,gl(o,l,p),Ki=_,no=T;break;case 0:case 11:case 14:case 15:if(!or&&(_=p.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){T=_=_.next;do{var R=T,k=R.destroy;R=R.tag,k!==void 0&&(R&2||R&4)&&Pv(p,l,k),T=T.next}while(T!==_)}gl(o,l,p);break;case 1:if(!or&&(mf(p,l),_=p.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=p.memoizedProps,_.state=p.memoizedState,_.componentWillUnmount()}catch(K){ei(p,l,K)}gl(o,l,p);break;case 21:gl(o,l,p);break;case 22:p.mode&1?(or=(_=or)||p.memoizedState!==null,gl(o,l,p),or=_):gl(o,l,p);break;default:gl(o,l,p)}}function O1(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new PR),l.forEach(function(_){var T=BR.bind(null,o,_);p.has(_)||(p.add(_),_.then(T,T))})}}function io(o,l){var p=l.deletions;if(p!==null)for(var _=0;_<p.length;_++){var T=p[_];try{var R=o,k=l,K=k;e:for(;K!==null;){switch(K.tag){case 5:Ki=K.stateNode,no=!1;break e;case 3:Ki=K.stateNode.containerInfo,no=!0;break e;case 4:Ki=K.stateNode.containerInfo,no=!0;break e}K=K.return}if(Ki===null)throw Error(t(160));N1(R,k,T),Ki=null,no=!1;var ie=T.alternate;ie!==null&&(ie.return=null),T.return=null}catch(we){ei(T,l,we)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)k1(l,o),l=l.sibling}function k1(o,l){var p=o.alternate,_=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(io(l,o),Do(o),_&4){try{dh(3,o,o.return),vm(3,o)}catch(St){ei(o,o.return,St)}try{dh(5,o,o.return)}catch(St){ei(o,o.return,St)}}break;case 1:io(l,o),Do(o),_&512&&p!==null&&mf(p,p.return);break;case 5:if(io(l,o),Do(o),_&512&&p!==null&&mf(p,p.return),o.flags&32){var T=o.stateNode;try{Ft(T,"")}catch(St){ei(o,o.return,St)}}if(_&4&&(T=o.stateNode,T!=null)){var R=o.memoizedProps,k=p!==null?p.memoizedProps:R,K=o.type,ie=o.updateQueue;if(o.updateQueue=null,ie!==null)try{K==="input"&&R.type==="radio"&&R.name!=null&&Ue(T,R),Ot(K,k);var we=Ot(K,R);for(k=0;k<ie.length;k+=2){var ze=ie[k],Ve=ie[k+1];ze==="style"?Rt(T,Ve):ze==="dangerouslySetInnerHTML"?Je(T,Ve):ze==="children"?Ft(T,Ve):P(T,ze,Ve,we)}switch(K){case"input":st(T,R);break;case"textarea":me(T,R);break;case"select":var ke=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!R.multiple;var ft=R.value;ft!=null?X(T,!!R.multiple,ft,!1):ke!==!!R.multiple&&(R.defaultValue!=null?X(T,!!R.multiple,R.defaultValue,!0):X(T,!!R.multiple,R.multiple?[]:"",!1))}T[ll]=R}catch(St){ei(o,o.return,St)}}break;case 6:if(io(l,o),Do(o),_&4){if(o.stateNode===null)throw Error(t(162));T=o.stateNode,R=o.memoizedProps;try{T.nodeValue=R}catch(St){ei(o,o.return,St)}}break;case 3:if(io(l,o),Do(o),_&4&&p!==null&&p.memoizedState.isDehydrated)try{Gl(l.containerInfo)}catch(St){ei(o,o.return,St)}break;case 4:io(l,o),Do(o);break;case 13:io(l,o),Do(o),T=o.child,T.flags&8192&&(R=T.memoizedState!==null,T.stateNode.isHidden=R,!R||T.alternate!==null&&T.alternate.memoizedState!==null||(kv=ge())),_&4&&O1(o);break;case 22:if(ze=p!==null&&p.memoizedState!==null,o.mode&1?(or=(we=or)||ze,io(l,o),or=we):io(l,o),Do(o),_&8192){if(we=o.memoizedState!==null,(o.stateNode.isHidden=we)&&!ze&&o.mode&1)for(mt=o,ze=o.child;ze!==null;){for(Ve=mt=ze;mt!==null;){switch(ke=mt,ft=ke.child,ke.tag){case 0:case 11:case 14:case 15:dh(4,ke,ke.return);break;case 1:mf(ke,ke.return);var yt=ke.stateNode;if(typeof yt.componentWillUnmount=="function"){_=ke,p=ke.return;try{l=_,yt.props=l.memoizedProps,yt.state=l.memoizedState,yt.componentWillUnmount()}catch(St){ei(_,p,St)}}break;case 5:mf(ke,ke.return);break;case 22:if(ke.memoizedState!==null){z1(Ve);continue}}ft!==null?(ft.return=ke,mt=ft):z1(Ve)}ze=ze.sibling}e:for(ze=null,Ve=o;;){if(Ve.tag===5){if(ze===null){ze=Ve;try{T=Ve.stateNode,we?(R=T.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(K=Ve.stateNode,ie=Ve.memoizedProps.style,k=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,K.style.display=bt("display",k))}catch(St){ei(o,o.return,St)}}}else if(Ve.tag===6){if(ze===null)try{Ve.stateNode.nodeValue=we?"":Ve.memoizedProps}catch(St){ei(o,o.return,St)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===o)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===o)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===o)break e;ze===Ve&&(ze=null),Ve=Ve.return}ze===Ve&&(ze=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:io(l,o),Do(o),_&4&&O1(o);break;case 21:break;default:io(l,o),Do(o)}}function Do(o){var l=o.flags;if(l&2){try{e:{for(var p=o.return;p!==null;){if(L1(p)){var _=p;break e}p=p.return}throw Error(t(160))}switch(_.tag){case 5:var T=_.stateNode;_.flags&32&&(Ft(T,""),_.flags&=-33);var R=D1(o);Dv(o,R,T);break;case 3:case 4:var k=_.stateNode.containerInfo,K=D1(o);Lv(o,K,k);break;default:throw Error(t(161))}}catch(ie){ei(o,o.return,ie)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function LR(o,l,p){mt=o,U1(o)}function U1(o,l,p){for(var _=(o.mode&1)!==0;mt!==null;){var T=mt,R=T.child;if(T.tag===22&&_){var k=T.memoizedState!==null||gm;if(!k){var K=T.alternate,ie=K!==null&&K.memoizedState!==null||or;K=gm;var we=or;if(gm=k,(or=ie)&&!we)for(mt=T;mt!==null;)k=mt,ie=k.child,k.tag===22&&k.memoizedState!==null?B1(T):ie!==null?(ie.return=k,mt=ie):B1(T);for(;R!==null;)mt=R,U1(R),R=R.sibling;mt=T,gm=K,or=we}F1(o)}else T.subtreeFlags&8772&&R!==null?(R.return=T,mt=R):F1(o)}}function F1(o){for(;mt!==null;){var l=mt;if(l.flags&8772){var p=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:or||vm(5,l);break;case 1:var _=l.stateNode;if(l.flags&4&&!or)if(p===null)_.componentDidMount();else{var T=l.elementType===l.type?p.memoizedProps:Wr(l.type,p.memoizedProps);_.componentDidUpdate(T,p.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var R=l.updateQueue;R!==null&&dl(l,R,_);break;case 3:var k=l.updateQueue;if(k!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}dl(l,k,p)}break;case 5:var K=l.stateNode;if(p===null&&l.flags&4){p=K;var ie=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&p.focus();break;case"img":ie.src&&(p.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var we=l.alternate;if(we!==null){var ze=we.memoizedState;if(ze!==null){var Ve=ze.dehydrated;Ve!==null&&Gl(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}or||l.flags&512&&Iv(l)}catch(ke){ei(l,l.return,ke)}}if(l===o){mt=null;break}if(p=l.sibling,p!==null){p.return=l.return,mt=p;break}mt=l.return}}function z1(o){for(;mt!==null;){var l=mt;if(l===o){mt=null;break}var p=l.sibling;if(p!==null){p.return=l.return,mt=p;break}mt=l.return}}function B1(o){for(;mt!==null;){var l=mt;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{vm(4,l)}catch(ie){ei(l,p,ie)}break;case 1:var _=l.stateNode;if(typeof _.componentDidMount=="function"){var T=l.return;try{_.componentDidMount()}catch(ie){ei(l,T,ie)}}var R=l.return;try{Iv(l)}catch(ie){ei(l,R,ie)}break;case 5:var k=l.return;try{Iv(l)}catch(ie){ei(l,k,ie)}}}catch(ie){ei(l,l.return,ie)}if(l===o){mt=null;break}var K=l.sibling;if(K!==null){K.return=l.return,mt=K;break}mt=l.return}}var DR=Math.ceil,ym=I.ReactCurrentDispatcher,Nv=I.ReactCurrentOwner,As=I.ReactCurrentBatchConfig,gn=0,ki=null,hi=null,Zi=0,ds=0,gf=Bn(0),Ti=0,hh=null,Su=0,_m=0,Ov=0,ph=null,Gr=null,kv=0,vf=1/0,Ma=null,xm=!1,Uv=null,vl=null,Sm=!1,yl=null,wm=0,mh=0,Fv=null,Mm=-1,Em=0;function Er(){return gn&6?ge():Mm!==-1?Mm:Mm=ge()}function _l(o){return o.mode&1?gn&2&&Zi!==0?Zi&-Zi:Tv.transition!==null?(Em===0&&(Em=sn()),Em):(o=on,o!==0||(o=window.event,o=o===void 0?16:Wp(o.type)),o):1}function ro(o,l,p,_){if(50<mh)throw mh=0,Fv=null,Error(t(185));ai(o,p,_),(!(gn&2)||o!==ki)&&(o===ki&&(!(gn&2)&&(_m|=p),Ti===4&&xl(o,Zi)),$r(o,_),p===1&&gn===0&&!(l.mode&1)&&(vf=ge()+500,su&&Ms()))}function $r(o,l){var p=o.callbackNode;oi(o,l);var _=yi(o,o===ki?Zi:0);if(_===0)p!==null&&G(p),o.callbackNode=null,o.callbackPriority=0;else if(l=_&-_,o.callbackPriority!==l){if(p!=null&&G(p),l===1)o.tag===0?im(H1.bind(null,o)):ou(H1.bind(null,o)),bv(function(){!(gn&6)&&Ms()}),p=null;else{switch(Qi(_)){case 1:p=Be;break;case 4:p=Ke;break;case 16:p=at;break;case 536870912:p=Ct;break;default:p=at}p=K1(p,V1.bind(null,o))}o.callbackPriority=l,o.callbackNode=p}}function V1(o,l){if(Mm=-1,Em=0,gn&6)throw Error(t(327));var p=o.callbackNode;if(yf()&&o.callbackNode!==p)return null;var _=yi(o,o===ki?Zi:0);if(_===0)return null;if(_&30||_&o.expiredLanes||l)l=bm(o,_);else{l=_;var T=gn;gn|=2;var R=G1();(ki!==o||Zi!==l)&&(Ma=null,vf=ge()+500,Mu(o,l));do try{kR();break}catch(K){W1(o,K)}while(!0);ma(),ym.current=R,gn=T,hi!==null?l=0:(ki=null,Zi=0,l=Ti)}if(l!==0){if(l===2&&(T=ys(o),T!==0&&(_=T,l=zv(o,T))),l===1)throw p=hh,Mu(o,0),xl(o,_),$r(o,ge()),p;if(l===6)xl(o,_);else{if(T=o.current.alternate,!(_&30)&&!NR(T)&&(l=bm(o,_),l===2&&(R=ys(o),R!==0&&(_=R,l=zv(o,R))),l===1))throw p=hh,Mu(o,0),xl(o,_),$r(o,ge()),p;switch(o.finishedWork=T,o.finishedLanes=_,l){case 0:case 1:throw Error(t(345));case 2:Eu(o,Gr,Ma);break;case 3:if(xl(o,_),(_&130023424)===_&&(l=kv+500-ge(),10<l)){if(yi(o,0)!==0)break;if(T=o.suspendedLanes,(T&_)!==_){Er(),o.pingedLanes|=o.suspendedLanes&T;break}o.timeoutHandle=Hd(Eu.bind(null,o,Gr,Ma),l);break}Eu(o,Gr,Ma);break;case 4:if(xl(o,_),(_&4194240)===_)break;for(l=o.eventTimes,T=-1;0<_;){var k=31-kt(_);R=1<<k,k=l[k],k>T&&(T=k),_&=~R}if(_=T,_=ge()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*DR(_/1960))-_,10<_){o.timeoutHandle=Hd(Eu.bind(null,o,Gr,Ma),_);break}Eu(o,Gr,Ma);break;case 5:Eu(o,Gr,Ma);break;default:throw Error(t(329))}}}return $r(o,ge()),o.callbackNode===p?V1.bind(null,o):null}function zv(o,l){var p=ph;return o.current.memoizedState.isDehydrated&&(Mu(o,l).flags|=256),o=bm(o,l),o!==2&&(l=Gr,Gr=p,l!==null&&Bv(l)),o}function Bv(o){Gr===null?Gr=o:Gr.push.apply(Gr,o)}function NR(o){for(var l=o;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var _=0;_<p.length;_++){var T=p[_],R=T.getSnapshot;T=T.value;try{if(!gr(R(),T))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function xl(o,l){for(l&=~Ov,l&=~_m,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var p=31-kt(l),_=1<<p;o[p]=-1,l&=~_}}function H1(o){if(gn&6)throw Error(t(327));yf();var l=yi(o,0);if(!(l&1))return $r(o,ge()),null;var p=bm(o,l);if(o.tag!==0&&p===2){var _=ys(o);_!==0&&(l=_,p=zv(o,_))}if(p===1)throw p=hh,Mu(o,0),xl(o,l),$r(o,ge()),p;if(p===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Eu(o,Gr,Ma),$r(o,ge()),null}function Vv(o,l){var p=gn;gn|=1;try{return o(l)}finally{gn=p,gn===0&&(vf=ge()+500,su&&Ms())}}function wu(o){yl!==null&&yl.tag===0&&!(gn&6)&&yf();var l=gn;gn|=1;var p=As.transition,_=on;try{if(As.transition=null,on=1,o)return o()}finally{on=_,As.transition=p,gn=l,!(gn&6)&&Ms()}}function Hv(){ds=gf.current,bn(gf)}function Mu(o,l){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,Wd(p)),hi!==null)for(p=hi.return;p!==null;){var _=p;switch(qs(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&iu();break;case 3:Io(),bn(Xi),bn(Si),bs();break;case 5:hl(_);break;case 4:Io();break;case 13:bn(In);break;case 19:bn(In);break;case 10:cu(_.type._context);break;case 22:case 23:Hv()}p=p.return}if(ki=o,hi=o=Sl(o.current,null),Zi=ds=l,Ti=0,hh=null,Ov=_m=Su=0,Gr=ph=null,Ks!==null){for(l=0;l<Ks.length;l++)if(p=Ks[l],_=p.interleaved,_!==null){p.interleaved=null;var T=_.next,R=p.pending;if(R!==null){var k=R.next;R.next=T,_.next=k}p.pending=_}Ks=null}return o}function W1(o,l){do{var p=hi;try{if(ma(),_a.current=hf,cs){for(var _=Tn.memoizedState;_!==null;){var T=_.queue;T!==null&&(T.pending=null),_=_.next}cs=!1}if(Js=0,pn=Hn=Tn=null,Oi=!1,Lo=0,Nv.current=null,p===null||p.return===null){Ti=1,hh=l,hi=null;break}e:{var R=o,k=p.return,K=p,ie=l;if(l=Zi,K.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var we=ie,ze=K,Ve=ze.tag;if(!(ze.mode&1)&&(Ve===0||Ve===11||Ve===15)){var ke=ze.alternate;ke?(ze.updateQueue=ke.updateQueue,ze.memoizedState=ke.memoizedState,ze.lanes=ke.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var ft=ht(k);if(ft!==null){ft.flags&=-257,Vt(ft,k,K,R,l),ft.mode&1&&We(R,we,l),l=ft,ie=we;var yt=l.updateQueue;if(yt===null){var St=new Set;St.add(ie),l.updateQueue=St}else yt.add(ie);break e}else{if(!(l&1)){We(R,we,l),Wv();break e}ie=Error(t(426))}}else if(Pn&&K.mode&1){var ri=ht(k);if(ri!==null){!(ri.flags&65536)&&(ri.flags|=256),Vt(ri,k,K,R,l),cl(M(ie,K));break e}}R=ie=M(ie,K),Ti!==4&&(Ti=2),ph===null?ph=[R]:ph.push(R),R=k;do{switch(R.tag){case 3:R.flags|=65536,l&=-l,R.lanes|=l;var ve=oe(R,ie,l);ga(R,ve);break e;case 1:K=ie;var se=R.type,ye=R.stateNode;if(!(R.flags&128)&&(typeof se.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(vl===null||!vl.has(ye)))){R.flags|=65536,l&=-l,R.lanes|=l;var Xe=Ae(R,K,l);ga(R,Xe);break e}}R=R.return}while(R!==null)}X1(p)}catch(Et){l=Et,hi===p&&p!==null&&(hi=p=p.return);continue}break}while(!0)}function G1(){var o=ym.current;return ym.current=hf,o===null?hf:o}function Wv(){(Ti===0||Ti===3||Ti===2)&&(Ti=4),ki===null||!(Su&268435455)&&!(_m&268435455)||xl(ki,Zi)}function bm(o,l){var p=gn;gn|=2;var _=G1();(ki!==o||Zi!==l)&&(Ma=null,Mu(o,l));do try{OR();break}catch(T){W1(o,T)}while(!0);if(ma(),gn=p,ym.current=_,hi!==null)throw Error(t(261));return ki=null,Zi=0,Ti}function OR(){for(;hi!==null;)$1(hi)}function kR(){for(;hi!==null&&!ue();)$1(hi)}function $1(o){var l=Y1(o.alternate,o,ds);o.memoizedProps=o.pendingProps,l===null?X1(o):hi=l,Nv.current=null}function X1(o){var l=o;do{var p=l.alternate;if(o=l.return,l.flags&32768){if(p=RR(p,l),p!==null){p.flags&=32767,hi=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Ti=6,hi=null;return}}else if(p=CR(p,l,ds),p!==null){hi=p;return}if(l=l.sibling,l!==null){hi=l;return}hi=l=o}while(l!==null);Ti===0&&(Ti=5)}function Eu(o,l,p){var _=on,T=As.transition;try{As.transition=null,on=1,UR(o,l,p,_)}finally{As.transition=T,on=_}return null}function UR(o,l,p,_){do yf();while(yl!==null);if(gn&6)throw Error(t(327));p=o.finishedWork;var T=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var R=p.lanes|p.childLanes;if(_i(o,R),o===ki&&(hi=ki=null,Zi=0),!(p.subtreeFlags&2064)&&!(p.flags&2064)||Sm||(Sm=!0,K1(at,function(){return yf(),null})),R=(p.flags&15990)!==0,p.subtreeFlags&15990||R){R=As.transition,As.transition=null;var k=on;on=1;var K=gn;gn|=4,Nv.current=null,IR(o,p),k1(p,o),ui(Bd),Or=!!al,Bd=al=null,o.current=p,LR(p),Se(),gn=K,on=k,As.transition=R}else o.current=p;if(Sm&&(Sm=!1,yl=o,wm=T),R=o.pendingLanes,R===0&&(vl=null),xt(p.stateNode),$r(o,ge()),l!==null)for(_=o.onRecoverableError,p=0;p<l.length;p++)T=l[p],_(T.value,{componentStack:T.stack,digest:T.digest});if(xm)throw xm=!1,o=Uv,Uv=null,o;return wm&1&&o.tag!==0&&yf(),R=o.pendingLanes,R&1?o===Fv?mh++:(mh=0,Fv=o):mh=0,Ms(),null}function yf(){if(yl!==null){var o=Qi(wm),l=As.transition,p=on;try{if(As.transition=null,on=16>o?16:o,yl===null)var _=!1;else{if(o=yl,yl=null,wm=0,gn&6)throw Error(t(331));var T=gn;for(gn|=4,mt=o.current;mt!==null;){var R=mt,k=R.child;if(mt.flags&16){var K=R.deletions;if(K!==null){for(var ie=0;ie<K.length;ie++){var we=K[ie];for(mt=we;mt!==null;){var ze=mt;switch(ze.tag){case 0:case 11:case 15:dh(8,ze,R)}var Ve=ze.child;if(Ve!==null)Ve.return=ze,mt=Ve;else for(;mt!==null;){ze=mt;var ke=ze.sibling,ft=ze.return;if(I1(ze),ze===we){mt=null;break}if(ke!==null){ke.return=ft,mt=ke;break}mt=ft}}}var yt=R.alternate;if(yt!==null){var St=yt.child;if(St!==null){yt.child=null;do{var ri=St.sibling;St.sibling=null,St=ri}while(St!==null)}}mt=R}}if(R.subtreeFlags&2064&&k!==null)k.return=R,mt=k;else e:for(;mt!==null;){if(R=mt,R.flags&2048)switch(R.tag){case 0:case 11:case 15:dh(9,R,R.return)}var ve=R.sibling;if(ve!==null){ve.return=R.return,mt=ve;break e}mt=R.return}}var se=o.current;for(mt=se;mt!==null;){k=mt;var ye=k.child;if(k.subtreeFlags&2064&&ye!==null)ye.return=k,mt=ye;else e:for(k=se;mt!==null;){if(K=mt,K.flags&2048)try{switch(K.tag){case 0:case 11:case 15:vm(9,K)}}catch(Et){ei(K,K.return,Et)}if(K===k){mt=null;break e}var Xe=K.sibling;if(Xe!==null){Xe.return=K.return,mt=Xe;break e}mt=K.return}}if(gn=T,Ms(),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Tt,o)}catch{}_=!0}return _}finally{on=p,As.transition=l}}return!1}function j1(o,l,p){l=M(p,l),l=oe(o,l,1),o=Dn(o,l,1),l=Er(),o!==null&&(ai(o,1,l),$r(o,l))}function ei(o,l,p){if(o.tag===3)j1(o,o,p);else for(;l!==null;){if(l.tag===3){j1(l,o,p);break}else if(l.tag===1){var _=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(vl===null||!vl.has(_))){o=M(p,o),o=Ae(l,o,1),l=Dn(l,o,1),o=Er(),l!==null&&(ai(l,1,o),$r(l,o));break}}l=l.return}}function FR(o,l,p){var _=o.pingCache;_!==null&&_.delete(l),l=Er(),o.pingedLanes|=o.suspendedLanes&p,ki===o&&(Zi&p)===p&&(Ti===4||Ti===3&&(Zi&130023424)===Zi&&500>ge()-kv?Mu(o,0):Ov|=p),$r(o,l)}function q1(o,l){l===0&&(o.mode&1?(l=ln,ln<<=1,!(ln&130023424)&&(ln=4194304)):l=1);var p=Er();o=ls(o,l),o!==null&&(ai(o,l,p),$r(o,p))}function zR(o){var l=o.memoizedState,p=0;l!==null&&(p=l.retryLane),q1(o,p)}function BR(o,l){var p=0;switch(o.tag){case 13:var _=o.stateNode,T=o.memoizedState;T!==null&&(p=T.retryLane);break;case 19:_=o.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(l),q1(o,p)}var Y1;Y1=function(o,l,p){if(o!==null)if(o.memoizedProps!==l.pendingProps||Xi.current)Kt=!0;else{if(!(o.lanes&p)&&!(l.flags&128))return Kt=!1,AR(o,l,p);Kt=!!(o.flags&131072)}else Kt=!1,Pn&&l.flags&1048576&&qd(l,nf,l.index);switch(l.lanes=0,l.tag){case 2:var _=l.type;mm(o,l),o=l.pendingProps;var T=la(l,Si.current);Po(l,p),T=mu(null,l,_,o,T,p);var R=nh();return l.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Di(_)?(R=!0,ua(l)):R=!1,l.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Xt(l),T.updater=pf,l.stateNode=T,T._reactInternals=l,y(l,_,o,p),l=Gt(null,l,_,!0,R,p)):(l.tag=0,Pn&&R&&Yd(l),ot(null,l,T,p),l=l.child),l;case 16:_=l.elementType;e:{switch(mm(o,l),o=l.pendingProps,T=_._init,_=T(_._payload),l.type=_,T=l.tag=HR(_),o=Wr(_,o),T){case 0:l=nt(null,l,_,o,p);break e;case 1:l=wt(null,l,_,o,p);break e;case 11:l=bi(null,l,_,o,p);break e;case 14:l=Mr(null,l,_,Wr(_.type,o),p);break e}throw Error(t(306,_,""))}return l;case 0:return _=l.type,T=l.pendingProps,T=l.elementType===_?T:Wr(_,T),nt(o,l,_,T,p);case 1:return _=l.type,T=l.pendingProps,T=l.elementType===_?T:Wr(_,T),wt(o,l,_,T,p);case 3:e:{if(Ht(l),o===null)throw Error(t(387));_=l.pendingProps,R=l.memoizedState,T=R.element,Xn(o,l),Vn(l,_,null,p);var k=l.memoizedState;if(_=k.element,R.isDehydrated)if(R={element:_,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},l.updateQueue.baseState=R,l.memoizedState=R,l.flags&256){T=M(Error(t(423)),l),l=dn(o,l,_,p,T);break e}else if(_!==T){T=M(Error(t(424)),l),l=dn(o,l,_,p,T);break e}else for(qi=Ws(l.stateNode.containerInfo.firstChild),wi=l,Pn=!0,Hr=null,p=uu(l,null,_,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ro(),_===T){l=wa(o,l,p);break e}ot(o,l,_,p)}l=l.child}return l;case 5:return ya(l),o===null&&sf(l),_=l.type,T=l.pendingProps,R=o!==null?o.memoizedProps:null,k=T.children,Vd(_,T)?k=null:R!==null&&Vd(_,R)&&(l.flags|=32),Me(o,l),ot(o,l,k,p),l.child;case 6:return o===null&&sf(l),null;case 13:return to(o,l,p);case 4:return hu(l,l.stateNode.containerInfo),_=l.pendingProps,o===null?l.child=da(l,null,_,p):ot(o,l,_,p),l.child;case 11:return _=l.type,T=l.pendingProps,T=l.elementType===_?T:Wr(_,T),bi(o,l,_,T,p);case 7:return ot(o,l,l.pendingProps,p),l.child;case 8:return ot(o,l,l.pendingProps.children,p),l.child;case 12:return ot(o,l,l.pendingProps.children,p),l.child;case 10:e:{if(_=l.type._context,T=l.pendingProps,R=l.memoizedProps,k=T.value,wn(ha,_._currentValue),_._currentValue=k,R!==null)if(gr(R.value,k)){if(R.children===T.children&&!Xi.current){l=wa(o,l,p);break e}}else for(R=l.child,R!==null&&(R.return=l);R!==null;){var K=R.dependencies;if(K!==null){k=R.child;for(var ie=K.firstContext;ie!==null;){if(ie.context===_){if(R.tag===1){ie=Sn(-1,p&-p),ie.tag=2;var we=R.updateQueue;if(we!==null){we=we.shared;var ze=we.pending;ze===null?ie.next=ie:(ie.next=ze.next,ze.next=ie),we.pending=ie}}R.lanes|=p,ie=R.alternate,ie!==null&&(ie.lanes|=p),fu(R.return,p,l),K.lanes|=p;break}ie=ie.next}}else if(R.tag===10)k=R.type===l.type?null:R.child;else if(R.tag===18){if(k=R.return,k===null)throw Error(t(341));k.lanes|=p,K=k.alternate,K!==null&&(K.lanes|=p),fu(k,p,l),k=R.sibling}else k=R.child;if(k!==null)k.return=R;else for(k=R;k!==null;){if(k===l){k=null;break}if(R=k.sibling,R!==null){R.return=k.return,k=R;break}k=k.return}R=k}ot(o,l,T.children,p),l=l.child}return l;case 9:return T=l.type,_=l.pendingProps.children,Po(l,p),T=_r(T),_=_(T),l.flags|=1,ot(o,l,_,p),l.child;case 14:return _=l.type,T=Wr(_,l.pendingProps),T=Wr(_.type,T),Mr(o,l,_,T,p);case 15:return xe(o,l,l.type,l.pendingProps,p);case 17:return _=l.type,T=l.pendingProps,T=l.elementType===_?T:Wr(_,T),mm(o,l),l.tag=1,Di(_)?(o=!0,ua(l)):o=!1,Po(l,p),c(l,_,T),y(l,_,T,p),Gt(null,l,_,!0,o,p);case 19:return T1(o,l,p);case 22:return ce(o,l,p)}throw Error(t(156,l.tag))};function K1(o,l){return xc(o,l)}function VR(o,l,p,_){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(o,l,p,_){return new VR(o,l,p,_)}function Gv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function HR(o){if(typeof o=="function")return Gv(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ee)return 11;if(o===pe)return 14}return 2}function Sl(o,l){var p=o.alternate;return p===null?(p=Cs(o.tag,l,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=l,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,l=o.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function Tm(o,l,p,_,T,R){var k=2;if(_=o,typeof o=="function")Gv(o)&&(k=1);else if(typeof o=="string")k=5;else e:switch(o){case U:return bu(p.children,T,R,l);case H:k=8,T|=8;break;case O:return o=Cs(12,p,l,T|2),o.elementType=O,o.lanes=R,o;case ne:return o=Cs(13,p,l,T),o.elementType=ne,o.lanes=R,o;case le:return o=Cs(19,p,l,T),o.elementType=le,o.lanes=R,o;case _e:return Am(p,T,R,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case D:k=10;break e;case W:k=9;break e;case ee:k=11;break e;case pe:k=14;break e;case de:k=16,_=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Cs(k,p,l,T),l.elementType=o,l.type=_,l.lanes=R,l}function bu(o,l,p,_){return o=Cs(7,o,_,l),o.lanes=p,o}function Am(o,l,p,_){return o=Cs(22,o,_,l),o.elementType=_e,o.lanes=p,o.stateNode={isHidden:!1},o}function $v(o,l,p){return o=Cs(6,o,null,l),o.lanes=p,o}function Xv(o,l,p){return l=Cs(4,o.children!==null?o.children:[],o.key,l),l.lanes=p,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function WR(o,l,p,_,T){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Li(0),this.expirationTimes=Li(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.identifierPrefix=_,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function jv(o,l,p,_,T,R,k,K,ie){return o=new WR(o,l,p,K,ie),l===1?(l=1,R===!0&&(l|=8)):l=0,R=Cs(3,null,null,l),o.current=R,R.stateNode=o,R.memoizedState={element:_,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xt(R),o}function GR(o,l,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:_==null?null:""+_,children:o,containerInfo:l,implementation:p}}function Z1(o){if(!o)return $s;o=o._reactInternals;e:{if(vs(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Di(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var p=o.type;if(Di(p))return ru(o,p,l)}return l}function J1(o,l,p,_,T,R,k,K,ie){return o=jv(p,_,!0,o,T,R,k,K,ie),o.context=Z1(null),p=o.current,_=Er(),T=_l(p),R=Sn(_,T),R.callback=l??null,Dn(p,R,T),o.current.lanes=T,ai(o,T,_),$r(o,_),o}function Cm(o,l,p,_){var T=l.current,R=Er(),k=_l(T);return p=Z1(p),l.context===null?l.context=p:l.pendingContext=p,l=Sn(R,k),l.payload={element:o},_=_===void 0?null:_,_!==null&&(l.callback=_),o=Dn(T,l,k),o!==null&&(ro(o,T,k,R),Ni(o,T,k)),k}function Rm(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Q1(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<l?p:l}}function qv(o,l){Q1(o,l),(o=o.alternate)&&Q1(o,l)}function $R(){return null}var eS=typeof reportError=="function"?reportError:function(o){console.error(o)};function Yv(o){this._internalRoot=o}Pm.prototype.render=Yv.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Cm(o,l,null,null)},Pm.prototype.unmount=Yv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;wu(function(){Cm(null,o,null,null)}),l[yr]=null}};function Pm(o){this._internalRoot=o}Pm.prototype.unstable_scheduleHydration=function(o){if(o){var l=Sc();o={blockedOn:null,target:o,priority:l};for(var p=0;p<So.length&&l!==0&&l<So[p].priority;p++);So.splice(p,0,o),p===0&&Ec(o)}};function Kv(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Im(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function tS(){}function XR(o,l,p,_,T){if(T){if(typeof _=="function"){var R=_;_=function(){var we=Rm(k);R.call(we)}}var k=J1(l,_,o,0,null,!1,!1,"",tS);return o._reactRootContainer=k,o[yr]=k.current,sl(o.nodeType===8?o.parentNode:o),wu(),k}for(;T=o.lastChild;)o.removeChild(T);if(typeof _=="function"){var K=_;_=function(){var we=Rm(ie);K.call(we)}}var ie=jv(o,0,!1,null,null,!1,!1,"",tS);return o._reactRootContainer=ie,o[yr]=ie.current,sl(o.nodeType===8?o.parentNode:o),wu(function(){Cm(l,ie,p,_)}),ie}function Lm(o,l,p,_,T){var R=p._reactRootContainer;if(R){var k=R;if(typeof T=="function"){var K=T;T=function(){var ie=Rm(k);K.call(ie)}}Cm(l,k,o,T)}else k=XR(p,l,o,T,_);return Rm(k)}Vl=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var p=Jt(l.pendingLanes);p!==0&&(Gn(l,p|1),$r(l,ge()),!(gn&6)&&(vf=ge()+500,Ms()))}break;case 13:wu(function(){var _=ls(o,1);if(_!==null){var T=Er();ro(_,o,1,T)}}),qv(o,1)}},Md=function(o){if(o.tag===13){var l=ls(o,134217728);if(l!==null){var p=Er();ro(l,o,134217728,p)}qv(o,134217728)}},Hp=function(o){if(o.tag===13){var l=_l(o),p=ls(o,l);if(p!==null){var _=Er();ro(p,o,l,_)}qv(o,l)}},Sc=function(){return on},wc=function(o,l){var p=on;try{return on=o,l()}finally{on=p}},Qe=function(o,l,p){switch(l){case"input":if(st(o,p),l=p.name,p.type==="radio"&&l!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var _=p[l];if(_!==o&&_.form===o.form){var T=Qc(_);if(!T)throw Error(t(90));Oe(_),st(_,T)}}}break;case"textarea":me(o,p);break;case"select":l=p.value,l!=null&&X(o,!!p.multiple,l,!1)}},Rn=Vv,Zn=wu;var jR={usingClientEntryPoint:!1,Events:[Gs,$n,Qc,tt,zt,Vv]},gh={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qR={bundleType:gh.bundleType,version:gh.version,rendererPackageName:gh.rendererPackageName,rendererConfig:gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=yc(o),o===null?null:o.stateNode},findFiberByHostInstance:gh.findFiberByHostInstance||$R,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dm.isDisabled&&Dm.supportsFiber)try{Tt=Dm.inject(qR),$e=Dm}catch{}}return Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jR,Xr.createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kv(l))throw Error(t(200));return GR(o,l,null,p)},Xr.createRoot=function(o,l){if(!Kv(o))throw Error(t(299));var p=!1,_="",T=eS;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=jv(o,1,!1,null,null,p,!1,_,T),o[yr]=l.current,sl(o.nodeType===8?o.parentNode:o),new Yv(l)},Xr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=yc(l),o=o===null?null:o.stateNode,o},Xr.flushSync=function(o){return wu(o)},Xr.hydrate=function(o,l,p){if(!Im(l))throw Error(t(200));return Lm(null,o,l,!0,p)},Xr.hydrateRoot=function(o,l,p){if(!Kv(o))throw Error(t(405));var _=p!=null&&p.hydratedSources||null,T=!1,R="",k=eS;if(p!=null&&(p.unstable_strictMode===!0&&(T=!0),p.identifierPrefix!==void 0&&(R=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),l=J1(l,null,o,1,p??null,T,!1,R,k),o[yr]=l.current,sl(o),_)for(o=0;o<_.length;o++)p=_[o],T=p._getVersion,T=T(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,T]:l.mutableSourceEagerHydrationData.push(p,T);return new Pm(l)},Xr.render=function(o,l,p){if(!Im(l))throw Error(t(200));return Lm(null,o,l,!1,p)},Xr.unmountComponentAtNode=function(o){if(!Im(o))throw Error(t(40));return o._reactRootContainer?(wu(function(){Lm(null,null,o,!1,function(){o._reactRootContainer=null,o[yr]=null})}),!0):!1},Xr.unstable_batchedUpdates=Vv,Xr.unstable_renderSubtreeIntoContainer=function(o,l,p,_){if(!Im(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Lm(o,l,p,!1,_)},Xr.version="18.3.1-next-f1338f8080-20240426",Xr}var uS;function Tb(){if(uS)return Qv.exports;uS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qv.exports=i2(),Qv.exports}var cS;function r2(){if(cS)return Nm;cS=1;var n=Tb();return Nm.createRoot=n.createRoot,Nm.hydrateRoot=n.hydrateRoot,Nm}var s2=r2();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const z0="173",o2={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a2={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ab=0,N_=1,Cb=2,l2=3,Rb=0,B0=1,Gh=2,uo=3,za=0,Lr=1,Oo=2,ka=0,Yu=1,O_=2,k_=3,U_=4,Pb=5,Dl=100,Ib=101,Lb=102,Db=103,Nb=104,Ob=200,kb=201,Ub=202,Fb=203,Bg=204,Vg=205,zb=206,Bb=207,Vb=208,Hb=209,Wb=210,Gb=211,$b=212,Xb=213,jb=214,Hg=0,Wg=1,Gg=2,nc=3,$g=4,Xg=5,jg=6,qg=7,Mp=0,qb=1,Yb=2,Uo=0,Kb=1,Zb=2,Jb=3,xx=4,Qb=5,eT=6,tT=7,F_="attached",nT="detached",V0=300,Ba=301,Nl=302,rp=303,sp=304,dd=306,op=1e3,Ls=1001,ap=1002,Ji=1003,Sx=1004,u2=1004,qf=1005,c2=1005,Ai=1006,$h=1007,f2=1007,ko=1008,d2=1008,ho=1009,wx=1010,Mx=1011,rd=1012,H0=1013,Va=1014,Zr=1015,hd=1016,W0=1017,G0=1018,ic=1020,Ex=35902,bx=1021,Tx=1022,cr=1023,Ax=1024,Cx=1025,Ku=1026,rc=1027,$0=1028,Ep=1029,Rx=1030,X0=1031,h2=1032,j0=1033,Xh=33776,jh=33777,qh=33778,Yh=33779,Yg=35840,Kg=35841,Zg=35842,Jg=35843,Qg=36196,e0=37492,t0=37496,n0=37808,i0=37809,r0=37810,s0=37811,o0=37812,a0=37813,l0=37814,u0=37815,c0=37816,f0=37817,d0=37818,h0=37819,p0=37820,m0=37821,Kh=36492,g0=36494,v0=36495,Px=36283,y0=36284,_0=36285,x0=36286,iT=2200,rT=2201,sT=2202,lp=2300,S0=2301,Og=2302,Gu=2400,$u=2401,up=2402,q0=2500,Ix=2501,p2=0,m2=1,g2=2,oT=3200,aT=3201,v2=3202,y2=3203,Ul=0,lT=1,La="",Rr="srgb",sc="srgb-linear",cp="linear",Mn="srgb",_2=0,Bu=7680,x2=7681,S2=7682,w2=7683,M2=34055,E2=34056,b2=5386,T2=512,A2=513,C2=514,R2=515,P2=516,I2=517,L2=518,z_=519,uT=512,cT=513,fT=514,Lx=515,dT=516,hT=517,pT=518,mT=519,fp=35044,D2=35048,N2=35040,O2=35045,k2=35049,U2=35041,F2=35046,z2=35050,B2=35042,V2="100",B_="300 es",fo=2e3,dp=2001,H2={COMPUTE:"compute",RENDER:"render"};class Wo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const ar=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fS=1234567;const Zu=Math.PI/180,sd=180/Math.PI;function ms(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ar[n&255]+ar[n>>8&255]+ar[n>>16&255]+ar[n>>24&255]+"-"+ar[e&255]+ar[e>>8&255]+"-"+ar[e>>16&15|64]+ar[e>>24&255]+"-"+ar[t&63|128]+ar[t>>8&255]+"-"+ar[t>>16&255]+ar[t>>24&255]+ar[i&255]+ar[i>>8&255]+ar[i>>16&255]+ar[i>>24&255]).toLowerCase()}function $t(n,e,t){return Math.max(e,Math.min(t,n))}function Dx(n,e){return(n%e+e)%e}function W2(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function G2(n,e,t){return n!==e?(t-n)/(e-n):0}function Zh(n,e,t){return(1-t)*n+t*e}function $2(n,e,t,i){return Zh(n,e,1-Math.exp(-t*i))}function X2(n,e=1){return e-Math.abs(Dx(n,e*2)-e)}function j2(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function q2(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Y2(n,e){return n+Math.floor(Math.random()*(e-n+1))}function K2(n,e){return n+Math.random()*(e-n)}function Z2(n){return n*(.5-Math.random())}function J2(n){n!==void 0&&(fS=n);let e=fS+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Q2(n){return n*Zu}function eP(n){return n*sd}function tP(n){return(n&n-1)===0&&n!==0}function nP(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function iP(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function rP(n,e,t,i,r){const s=Math.cos,a=Math.sin,u=s(t/2),d=a(t/2),h=s((e+i)/2),m=a((e+i)/2),g=s((e-i)/2),v=a((e-i)/2),x=s((i-e)/2),w=a((i-e)/2);switch(r){case"XYX":n.set(u*m,d*g,d*v,u*h);break;case"YZY":n.set(d*v,u*m,d*g,u*h);break;case"ZXZ":n.set(d*g,d*v,u*m,u*h);break;case"XZX":n.set(u*m,d*w,d*x,u*h);break;case"YXY":n.set(d*x,u*m,d*w,u*h);break;case"ZYZ":n.set(d*w,d*x,u*m,u*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Pr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Zt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const sP={DEG2RAD:Zu,RAD2DEG:sd,generateUUID:ms,clamp:$t,euclideanModulo:Dx,mapLinear:W2,inverseLerp:G2,lerp:Zh,damp:$2,pingpong:X2,smoothstep:j2,smootherstep:q2,randInt:Y2,randFloat:K2,randFloatSpread:Z2,seededRandom:J2,degToRad:Q2,radToDeg:eP,isPowerOfTwo:tP,ceilPowerOfTwo:nP,floorPowerOfTwo:iP,setQuaternionFromProperEuler:rP,normalize:Zt,denormalize:Pr};class De{constructor(e=0,t=0){De.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar($t(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($t(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jt{constructor(e,t,i,r,s,a,u,d,h){jt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,u,d,h)}set(e,t,i,r,s,a,u,d,h){const m=this.elements;return m[0]=e,m[1]=r,m[2]=u,m[3]=t,m[4]=s,m[5]=d,m[6]=i,m[7]=a,m[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],u=i[3],d=i[6],h=i[1],m=i[4],g=i[7],v=i[2],x=i[5],w=i[8],b=r[0],E=r[3],S=r[6],C=r[1],P=r[4],I=r[7],B=r[2],N=r[5],U=r[8];return s[0]=a*b+u*C+d*B,s[3]=a*E+u*P+d*N,s[6]=a*S+u*I+d*U,s[1]=h*b+m*C+g*B,s[4]=h*E+m*P+g*N,s[7]=h*S+m*I+g*U,s[2]=v*b+x*C+w*B,s[5]=v*E+x*P+w*N,s[8]=v*S+x*I+w*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],u=e[5],d=e[6],h=e[7],m=e[8];return t*a*m-t*u*h-i*s*m+i*u*d+r*s*h-r*a*d}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],u=e[5],d=e[6],h=e[7],m=e[8],g=m*a-u*h,v=u*d-m*s,x=h*s-a*d,w=t*g+i*v+r*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/w;return e[0]=g*b,e[1]=(r*h-m*i)*b,e[2]=(u*i-r*a)*b,e[3]=v*b,e[4]=(m*t-r*d)*b,e[5]=(r*s-u*t)*b,e[6]=x*b,e[7]=(i*d-h*t)*b,e[8]=(a*t-i*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,u){const d=Math.cos(s),h=Math.sin(s);return this.set(i*d,i*h,-i*(d*a+h*u)+a+e,-r*h,r*d,-r*(-h*a+d*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(ny.makeScale(e,t)),this}rotate(e){return this.premultiply(ny.makeRotation(-e)),this}translate(e,t){return this.premultiply(ny.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ny=new jt;function gT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const oP={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Yf(n,e){return new oP[n](e)}function hp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function vT(){const n=hp("canvas");return n.style.display="block",n}const dS={};function $f(n){n in dS||(dS[n]=!0,console.warn(n))}function aP(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function lP(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function uP(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const hS=new jt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),pS=new jt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function cP(){const n={enabled:!0,workingColorSpace:sc,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Mn&&(r.r=Ua(r.r),r.g=Ua(r.g),r.b=Ua(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Mn&&(r.r=td(r.r),r.g=td(r.g),r.b=td(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===La?cp:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[sc]:{primaries:e,whitePoint:i,transfer:cp,toXYZ:hS,fromXYZ:pS,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Rr},outputColorSpaceConfig:{drawingBufferColorSpace:Rr}},[Rr]:{primaries:e,whitePoint:i,transfer:Mn,toXYZ:hS,fromXYZ:pS,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Rr}}}),n}const mn=cP();function Ua(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function td(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let _f;class yT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{_f===void 0&&(_f=hp("canvas")),_f.width=e.width,_f.height=e.height;const i=_f.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=_f}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=hp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Ua(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ua(t[i]/255)*255):t[i]=Ua(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let fP=0;class Xu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fP++}),this.uuid=ms(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,u=r.length;a<u;a++)r[a].isDataTexture?s.push(iy(r[a].image)):s.push(iy(r[a]))}else s=iy(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function iy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?yT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let dP=0;class Wn extends Wo{constructor(e=Wn.DEFAULT_IMAGE,t=Wn.DEFAULT_MAPPING,i=Ls,r=Ls,s=Ai,a=ko,u=cr,d=ho,h=Wn.DEFAULT_ANISOTROPY,m=La){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dP++}),this.uuid=ms(),this.name="",this.source=new Xu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=u,this.internalFormat=null,this.type=d,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==V0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case op:e.x=e.x-Math.floor(e.x);break;case Ls:e.x=e.x<0?0:1;break;case ap:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case op:e.y=e.y-Math.floor(e.y);break;case Ls:e.y=e.y<0?0:1;break;case ap:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Wn.DEFAULT_IMAGE=null;Wn.DEFAULT_MAPPING=V0;Wn.DEFAULT_ANISOTROPY=1;class un{constructor(e=0,t=0,i=0,r=1){un.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const d=e.elements,h=d[0],m=d[4],g=d[8],v=d[1],x=d[5],w=d[9],b=d[2],E=d[6],S=d[10];if(Math.abs(m-v)<.01&&Math.abs(g-b)<.01&&Math.abs(w-E)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+b)<.1&&Math.abs(w+E)<.1&&Math.abs(h+x+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(h+1)/2,I=(x+1)/2,B=(S+1)/2,N=(m+v)/4,U=(g+b)/4,H=(w+E)/4;return P>I&&P>B?P<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(P),r=N/i,s=U/i):I>B?I<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(I),i=N/r,s=H/r):B<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(B),i=U/s,r=H/s),this.set(i,r,s,t),this}let C=Math.sqrt((E-w)*(E-w)+(g-b)*(g-b)+(v-m)*(v-m));return Math.abs(C)<.001&&(C=1),this.x=(E-w)/C,this.y=(g-b)/C,this.z=(v-m)/C,this.w=Math.acos((h+x+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this.z=$t(this.z,e.z,t.z),this.w=$t(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this.z=$t(this.z,e,t),this.w=$t(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar($t(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Y0 extends Wo{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new un(0,0,e,t),this.scissorTest=!1,this.viewport=new un(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ai,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Wn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let u=0;u<a;u++)this.textures[u]=s.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new Xu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Vo extends Y0{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class bp extends Wn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ji,this.minFilter=Ji,this.wrapR=Ls,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class hP extends Vo{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new bp(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class K0 extends Wn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ji,this.minFilter=Ji,this.wrapR=Ls,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pP extends Vo{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new K0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ri{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,u){let d=i[r+0],h=i[r+1],m=i[r+2],g=i[r+3];const v=s[a+0],x=s[a+1],w=s[a+2],b=s[a+3];if(u===0){e[t+0]=d,e[t+1]=h,e[t+2]=m,e[t+3]=g;return}if(u===1){e[t+0]=v,e[t+1]=x,e[t+2]=w,e[t+3]=b;return}if(g!==b||d!==v||h!==x||m!==w){let E=1-u;const S=d*v+h*x+m*w+g*b,C=S>=0?1:-1,P=1-S*S;if(P>Number.EPSILON){const B=Math.sqrt(P),N=Math.atan2(B,S*C);E=Math.sin(E*N)/B,u=Math.sin(u*N)/B}const I=u*C;if(d=d*E+v*I,h=h*E+x*I,m=m*E+w*I,g=g*E+b*I,E===1-u){const B=1/Math.sqrt(d*d+h*h+m*m+g*g);d*=B,h*=B,m*=B,g*=B}}e[t]=d,e[t+1]=h,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,s,a){const u=i[r],d=i[r+1],h=i[r+2],m=i[r+3],g=s[a],v=s[a+1],x=s[a+2],w=s[a+3];return e[t]=u*w+m*g+d*x-h*v,e[t+1]=d*w+m*v+h*g-u*x,e[t+2]=h*w+m*x+u*v-d*g,e[t+3]=m*w-u*g-d*v-h*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,u=Math.cos,d=Math.sin,h=u(i/2),m=u(r/2),g=u(s/2),v=d(i/2),x=d(r/2),w=d(s/2);switch(a){case"XYZ":this._x=v*m*g+h*x*w,this._y=h*x*g-v*m*w,this._z=h*m*w+v*x*g,this._w=h*m*g-v*x*w;break;case"YXZ":this._x=v*m*g+h*x*w,this._y=h*x*g-v*m*w,this._z=h*m*w-v*x*g,this._w=h*m*g+v*x*w;break;case"ZXY":this._x=v*m*g-h*x*w,this._y=h*x*g+v*m*w,this._z=h*m*w+v*x*g,this._w=h*m*g-v*x*w;break;case"ZYX":this._x=v*m*g-h*x*w,this._y=h*x*g+v*m*w,this._z=h*m*w-v*x*g,this._w=h*m*g+v*x*w;break;case"YZX":this._x=v*m*g+h*x*w,this._y=h*x*g+v*m*w,this._z=h*m*w-v*x*g,this._w=h*m*g-v*x*w;break;case"XZY":this._x=v*m*g-h*x*w,this._y=h*x*g-v*m*w,this._z=h*m*w+v*x*g,this._w=h*m*g+v*x*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],u=t[5],d=t[9],h=t[2],m=t[6],g=t[10],v=i+u+g;if(v>0){const x=.5/Math.sqrt(v+1);this._w=.25/x,this._x=(m-d)*x,this._y=(s-h)*x,this._z=(a-r)*x}else if(i>u&&i>g){const x=2*Math.sqrt(1+i-u-g);this._w=(m-d)/x,this._x=.25*x,this._y=(r+a)/x,this._z=(s+h)/x}else if(u>g){const x=2*Math.sqrt(1+u-i-g);this._w=(s-h)/x,this._x=(r+a)/x,this._y=.25*x,this._z=(d+m)/x}else{const x=2*Math.sqrt(1+g-i-u);this._w=(a-r)/x,this._x=(s+h)/x,this._y=(d+m)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($t(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,u=t._x,d=t._y,h=t._z,m=t._w;return this._x=i*m+a*u+r*h-s*d,this._y=r*m+a*d+s*u-i*h,this._z=s*m+a*h+i*d-r*u,this._w=a*m-i*u-r*d-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let u=a*e._w+i*e._x+r*e._y+s*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const d=1-u*u;if(d<=Number.EPSILON){const x=1-t;return this._w=x*a+t*this._w,this._x=x*i+t*this._x,this._y=x*r+t*this._y,this._z=x*s+t*this._z,this.normalize(),this}const h=Math.sqrt(d),m=Math.atan2(h,u),g=Math.sin((1-t)*m)/h,v=Math.sin(t*m)/h;return this._w=a*g+this._w*v,this._x=i*g+this._x*v,this._y=r*g+this._y*v,this._z=s*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,t=0,i=0){q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,u=e.z,d=e.w,h=2*(a*r-u*i),m=2*(u*t-s*r),g=2*(s*i-a*t);return this.x=t+d*h+a*g-u*m,this.y=i+d*m+u*h-s*g,this.z=r+d*g+s*m-a*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this.z=$t(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this.z=$t(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar($t(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,u=t.y,d=t.z;return this.x=r*d-s*u,this.y=s*a-i*d,this.z=i*u-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return ry.copy(this).projectOnVector(e),this.sub(ry)}reflect(e){return this.sub(ry.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($t(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ry=new q,mS=new Ri;class Dr{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(so.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(so.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=so.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,u=s.count;a<u;a++)e.isMesh===!0?e.getVertexPosition(a,so):so.fromBufferAttribute(s,a),so.applyMatrix4(e.matrixWorld),this.expandByPoint(so);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Om.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Om.copy(i.boundingBox)),Om.applyMatrix4(e.matrixWorld),this.union(Om)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,so),so.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yh),km.subVectors(this.max,yh),xf.subVectors(e.a,yh),Sf.subVectors(e.b,yh),wf.subVectors(e.c,yh),Ml.subVectors(Sf,xf),El.subVectors(wf,Sf),Tu.subVectors(xf,wf);let t=[0,-Ml.z,Ml.y,0,-El.z,El.y,0,-Tu.z,Tu.y,Ml.z,0,-Ml.x,El.z,0,-El.x,Tu.z,0,-Tu.x,-Ml.y,Ml.x,0,-El.y,El.x,0,-Tu.y,Tu.x,0];return!sy(t,xf,Sf,wf,km)||(t=[1,0,0,0,1,0,0,0,1],!sy(t,xf,Sf,wf,km))?!1:(Um.crossVectors(Ml,El),t=[Um.x,Um.y,Um.z],sy(t,xf,Sf,wf,km))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,so).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(so).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ea[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ea[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ea[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ea[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ea[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ea[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ea[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ea[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ea),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ea=[new q,new q,new q,new q,new q,new q,new q,new q],so=new q,Om=new Dr,xf=new q,Sf=new q,wf=new q,Ml=new q,El=new q,Tu=new q,yh=new q,km=new q,Um=new q,Au=new q;function sy(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Au.fromArray(n,s);const u=r.x*Math.abs(Au.x)+r.y*Math.abs(Au.y)+r.z*Math.abs(Au.z),d=e.dot(Au),h=t.dot(Au),m=i.dot(Au);if(Math.max(-Math.max(d,h,m),Math.min(d,h,m))>u)return!1}return!0}const mP=new Dr,_h=new q,oy=new q;class dr{constructor(e=new q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):mP.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_h.subVectors(e,this.center);const t=_h.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(_h,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(oy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_h.copy(e.center).add(oy)),this.expandByPoint(_h.copy(e.center).sub(oy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ba=new q,ay=new q,Fm=new q,bl=new q,ly=new q,zm=new q,uy=new q;class pd{constructor(e=new q,t=new q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ba)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ba.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ba.copy(this.origin).addScaledVector(this.direction,t),ba.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){ay.copy(e).add(t).multiplyScalar(.5),Fm.copy(t).sub(e).normalize(),bl.copy(this.origin).sub(ay);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Fm),u=bl.dot(this.direction),d=-bl.dot(Fm),h=bl.lengthSq(),m=Math.abs(1-a*a);let g,v,x,w;if(m>0)if(g=a*d-u,v=a*u-d,w=s*m,g>=0)if(v>=-w)if(v<=w){const b=1/m;g*=b,v*=b,x=g*(g+a*v+2*u)+v*(a*g+v+2*d)+h}else v=s,g=Math.max(0,-(a*v+u)),x=-g*g+v*(v+2*d)+h;else v=-s,g=Math.max(0,-(a*v+u)),x=-g*g+v*(v+2*d)+h;else v<=-w?(g=Math.max(0,-(-a*s+u)),v=g>0?-s:Math.min(Math.max(-s,-d),s),x=-g*g+v*(v+2*d)+h):v<=w?(g=0,v=Math.min(Math.max(-s,-d),s),x=v*(v+2*d)+h):(g=Math.max(0,-(a*s+u)),v=g>0?s:Math.min(Math.max(-s,-d),s),x=-g*g+v*(v+2*d)+h);else v=a>0?-s:s,g=Math.max(0,-(a*v+u)),x=-g*g+v*(v+2*d)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(ay).addScaledVector(Fm,v),x}intersectSphere(e,t){ba.subVectors(e.center,this.origin);const i=ba.dot(this.direction),r=ba.dot(ba)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),u=i-a,d=i+a;return d<0?null:u<0?this.at(d,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,u,d;const h=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return h>=0?(i=(e.min.x-v.x)*h,r=(e.max.x-v.x)*h):(i=(e.max.x-v.x)*h,r=(e.min.x-v.x)*h),m>=0?(s=(e.min.y-v.y)*m,a=(e.max.y-v.y)*m):(s=(e.max.y-v.y)*m,a=(e.min.y-v.y)*m),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),g>=0?(u=(e.min.z-v.z)*g,d=(e.max.z-v.z)*g):(u=(e.max.z-v.z)*g,d=(e.min.z-v.z)*g),i>d||u>r)||((u>i||i!==i)&&(i=u),(d<r||r!==r)&&(r=d),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ba)!==null}intersectTriangle(e,t,i,r,s){ly.subVectors(t,e),zm.subVectors(i,e),uy.crossVectors(ly,zm);let a=this.direction.dot(uy),u;if(a>0){if(r)return null;u=1}else if(a<0)u=-1,a=-a;else return null;bl.subVectors(this.origin,e);const d=u*this.direction.dot(zm.crossVectors(bl,zm));if(d<0)return null;const h=u*this.direction.dot(ly.cross(bl));if(h<0||d+h>a)return null;const m=-u*bl.dot(uy);return m<0?null:this.at(m/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ut{constructor(e,t,i,r,s,a,u,d,h,m,g,v,x,w,b,E){Ut.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,u,d,h,m,g,v,x,w,b,E)}set(e,t,i,r,s,a,u,d,h,m,g,v,x,w,b,E){const S=this.elements;return S[0]=e,S[4]=t,S[8]=i,S[12]=r,S[1]=s,S[5]=a,S[9]=u,S[13]=d,S[2]=h,S[6]=m,S[10]=g,S[14]=v,S[3]=x,S[7]=w,S[11]=b,S[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ut().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Mf.setFromMatrixColumn(e,0).length(),s=1/Mf.setFromMatrixColumn(e,1).length(),a=1/Mf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),u=Math.sin(i),d=Math.cos(r),h=Math.sin(r),m=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const v=a*m,x=a*g,w=u*m,b=u*g;t[0]=d*m,t[4]=-d*g,t[8]=h,t[1]=x+w*h,t[5]=v-b*h,t[9]=-u*d,t[2]=b-v*h,t[6]=w+x*h,t[10]=a*d}else if(e.order==="YXZ"){const v=d*m,x=d*g,w=h*m,b=h*g;t[0]=v+b*u,t[4]=w*u-x,t[8]=a*h,t[1]=a*g,t[5]=a*m,t[9]=-u,t[2]=x*u-w,t[6]=b+v*u,t[10]=a*d}else if(e.order==="ZXY"){const v=d*m,x=d*g,w=h*m,b=h*g;t[0]=v-b*u,t[4]=-a*g,t[8]=w+x*u,t[1]=x+w*u,t[5]=a*m,t[9]=b-v*u,t[2]=-a*h,t[6]=u,t[10]=a*d}else if(e.order==="ZYX"){const v=a*m,x=a*g,w=u*m,b=u*g;t[0]=d*m,t[4]=w*h-x,t[8]=v*h+b,t[1]=d*g,t[5]=b*h+v,t[9]=x*h-w,t[2]=-h,t[6]=u*d,t[10]=a*d}else if(e.order==="YZX"){const v=a*d,x=a*h,w=u*d,b=u*h;t[0]=d*m,t[4]=b-v*g,t[8]=w*g+x,t[1]=g,t[5]=a*m,t[9]=-u*m,t[2]=-h*m,t[6]=x*g+w,t[10]=v-b*g}else if(e.order==="XZY"){const v=a*d,x=a*h,w=u*d,b=u*h;t[0]=d*m,t[4]=-g,t[8]=h*m,t[1]=v*g+b,t[5]=a*m,t[9]=x*g-w,t[2]=w*g-x,t[6]=u*m,t[10]=b*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gP,e,vP)}lookAt(e,t,i){const r=this.elements;return hs.subVectors(e,t),hs.lengthSq()===0&&(hs.z=1),hs.normalize(),Tl.crossVectors(i,hs),Tl.lengthSq()===0&&(Math.abs(i.z)===1?hs.x+=1e-4:hs.z+=1e-4,hs.normalize(),Tl.crossVectors(i,hs)),Tl.normalize(),Bm.crossVectors(hs,Tl),r[0]=Tl.x,r[4]=Bm.x,r[8]=hs.x,r[1]=Tl.y,r[5]=Bm.y,r[9]=hs.y,r[2]=Tl.z,r[6]=Bm.z,r[10]=hs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],u=i[4],d=i[8],h=i[12],m=i[1],g=i[5],v=i[9],x=i[13],w=i[2],b=i[6],E=i[10],S=i[14],C=i[3],P=i[7],I=i[11],B=i[15],N=r[0],U=r[4],H=r[8],O=r[12],D=r[1],W=r[5],ee=r[9],ne=r[13],le=r[2],pe=r[6],de=r[10],_e=r[14],F=r[3],J=r[7],Z=r[11],$=r[15];return s[0]=a*N+u*D+d*le+h*F,s[4]=a*U+u*W+d*pe+h*J,s[8]=a*H+u*ee+d*de+h*Z,s[12]=a*O+u*ne+d*_e+h*$,s[1]=m*N+g*D+v*le+x*F,s[5]=m*U+g*W+v*pe+x*J,s[9]=m*H+g*ee+v*de+x*Z,s[13]=m*O+g*ne+v*_e+x*$,s[2]=w*N+b*D+E*le+S*F,s[6]=w*U+b*W+E*pe+S*J,s[10]=w*H+b*ee+E*de+S*Z,s[14]=w*O+b*ne+E*_e+S*$,s[3]=C*N+P*D+I*le+B*F,s[7]=C*U+P*W+I*pe+B*J,s[11]=C*H+P*ee+I*de+B*Z,s[15]=C*O+P*ne+I*_e+B*$,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],u=e[5],d=e[9],h=e[13],m=e[2],g=e[6],v=e[10],x=e[14],w=e[3],b=e[7],E=e[11],S=e[15];return w*(+s*d*g-r*h*g-s*u*v+i*h*v+r*u*x-i*d*x)+b*(+t*d*x-t*h*v+s*a*v-r*a*x+r*h*m-s*d*m)+E*(+t*h*g-t*u*x-s*a*g+i*a*x+s*u*m-i*h*m)+S*(-r*u*m-t*d*g+t*u*v+r*a*g-i*a*v+i*d*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],u=e[5],d=e[6],h=e[7],m=e[8],g=e[9],v=e[10],x=e[11],w=e[12],b=e[13],E=e[14],S=e[15],C=g*E*h-b*v*h+b*d*x-u*E*x-g*d*S+u*v*S,P=w*v*h-m*E*h-w*d*x+a*E*x+m*d*S-a*v*S,I=m*b*h-w*g*h+w*u*x-a*b*x-m*u*S+a*g*S,B=w*g*d-m*b*d-w*u*v+a*b*v+m*u*E-a*g*E,N=t*C+i*P+r*I+s*B;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/N;return e[0]=C*U,e[1]=(b*v*s-g*E*s-b*r*x+i*E*x+g*r*S-i*v*S)*U,e[2]=(u*E*s-b*d*s+b*r*h-i*E*h-u*r*S+i*d*S)*U,e[3]=(g*d*s-u*v*s-g*r*h+i*v*h+u*r*x-i*d*x)*U,e[4]=P*U,e[5]=(m*E*s-w*v*s+w*r*x-t*E*x-m*r*S+t*v*S)*U,e[6]=(w*d*s-a*E*s-w*r*h+t*E*h+a*r*S-t*d*S)*U,e[7]=(a*v*s-m*d*s+m*r*h-t*v*h-a*r*x+t*d*x)*U,e[8]=I*U,e[9]=(w*g*s-m*b*s-w*i*x+t*b*x+m*i*S-t*g*S)*U,e[10]=(a*b*s-w*u*s+w*i*h-t*b*h-a*i*S+t*u*S)*U,e[11]=(m*u*s-a*g*s-m*i*h+t*g*h+a*i*x-t*u*x)*U,e[12]=B*U,e[13]=(m*b*r-w*g*r+w*i*v-t*b*v-m*i*E+t*g*E)*U,e[14]=(w*u*r-a*b*r-w*i*d+t*b*d+a*i*E-t*u*E)*U,e[15]=(a*g*r-m*u*r+m*i*d-t*g*d-a*i*v+t*u*v)*U,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,u=e.y,d=e.z,h=s*a,m=s*u;return this.set(h*a+i,h*u-r*d,h*d+r*u,0,h*u+r*d,m*u+i,m*d-r*a,0,h*d-r*u,m*d+r*a,s*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,u=t._z,d=t._w,h=s+s,m=a+a,g=u+u,v=s*h,x=s*m,w=s*g,b=a*m,E=a*g,S=u*g,C=d*h,P=d*m,I=d*g,B=i.x,N=i.y,U=i.z;return r[0]=(1-(b+S))*B,r[1]=(x+I)*B,r[2]=(w-P)*B,r[3]=0,r[4]=(x-I)*N,r[5]=(1-(v+S))*N,r[6]=(E+C)*N,r[7]=0,r[8]=(w+P)*U,r[9]=(E-C)*U,r[10]=(1-(v+b))*U,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Mf.set(r[0],r[1],r[2]).length();const a=Mf.set(r[4],r[5],r[6]).length(),u=Mf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],oo.copy(this);const h=1/s,m=1/a,g=1/u;return oo.elements[0]*=h,oo.elements[1]*=h,oo.elements[2]*=h,oo.elements[4]*=m,oo.elements[5]*=m,oo.elements[6]*=m,oo.elements[8]*=g,oo.elements[9]*=g,oo.elements[10]*=g,t.setFromRotationMatrix(oo),i.x=s,i.y=a,i.z=u,this}makePerspective(e,t,i,r,s,a,u=fo){const d=this.elements,h=2*s/(t-e),m=2*s/(i-r),g=(t+e)/(t-e),v=(i+r)/(i-r);let x,w;if(u===fo)x=-(a+s)/(a-s),w=-2*a*s/(a-s);else if(u===dp)x=-a/(a-s),w=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return d[0]=h,d[4]=0,d[8]=g,d[12]=0,d[1]=0,d[5]=m,d[9]=v,d[13]=0,d[2]=0,d[6]=0,d[10]=x,d[14]=w,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,i,r,s,a,u=fo){const d=this.elements,h=1/(t-e),m=1/(i-r),g=1/(a-s),v=(t+e)*h,x=(i+r)*m;let w,b;if(u===fo)w=(a+s)*g,b=-2*g;else if(u===dp)w=s*g,b=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return d[0]=2*h,d[4]=0,d[8]=0,d[12]=-v,d[1]=0,d[5]=2*m,d[9]=0,d[13]=-x,d[2]=0,d[6]=0,d[10]=b,d[14]=-w,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Mf=new q,oo=new Ut,gP=new q(0,0,0),vP=new q(1,1,1),Tl=new q,Bm=new q,hs=new q,gS=new Ut,vS=new Ri;class Qr{constructor(e=0,t=0,i=0,r=Qr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],u=r[8],d=r[1],h=r[5],m=r[9],g=r[2],v=r[6],x=r[10];switch(t){case"XYZ":this._y=Math.asin($t(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,x),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(v,h),this._z=0);break;case"YXZ":this._x=Math.asin(-$t(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,x),this._z=Math.atan2(d,h)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin($t(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,x),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-$t(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,x),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin($t(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-m,h),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(u,x));break;case"XZY":this._z=Math.asin(-$t(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,h),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-m,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return gS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return vS.setFromEuler(this),this.setFromQuaternion(vS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Qr.DEFAULT_ORDER="XYZ";class Ju{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let yP=0;const yS=new q,Ef=new Ri,Ta=new Ut,Vm=new q,xh=new q,_P=new q,xP=new Ri,_S=new q(1,0,0),xS=new q(0,1,0),SS=new q(0,0,1),wS={type:"added"},SP={type:"removed"},bf={type:"childadded",child:null},cy={type:"childremoved",child:null};class yn extends Wo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yP++}),this.uuid=ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yn.DEFAULT_UP.clone();const e=new q,t=new Qr,i=new Ri,r=new q(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ut},normalMatrix:{value:new jt}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=yn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ju,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ef.setFromAxisAngle(e,t),this.quaternion.multiply(Ef),this}rotateOnWorldAxis(e,t){return Ef.setFromAxisAngle(e,t),this.quaternion.premultiply(Ef),this}rotateX(e){return this.rotateOnAxis(_S,e)}rotateY(e){return this.rotateOnAxis(xS,e)}rotateZ(e){return this.rotateOnAxis(SS,e)}translateOnAxis(e,t){return yS.copy(e).applyQuaternion(this.quaternion),this.position.add(yS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_S,e)}translateY(e){return this.translateOnAxis(xS,e)}translateZ(e){return this.translateOnAxis(SS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ta.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Vm.copy(e):Vm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),xh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ta.lookAt(xh,Vm,this.up):Ta.lookAt(Vm,xh,this.up),this.quaternion.setFromRotationMatrix(Ta),r&&(Ta.extractRotation(r.matrixWorld),Ef.setFromRotationMatrix(Ta),this.quaternion.premultiply(Ef.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(wS),bf.child=e,this.dispatchEvent(bf),bf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(SP),cy.child=e,this.dispatchEvent(cy),cy.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ta.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ta.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ta),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(wS),bf.child=e,this.dispatchEvent(bf),bf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xh,e,_P),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xh,xP,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let h=0,m=d.length;h<m;h++){const g=d[h];s(e.shapes,g)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,h=this.material.length;d<h;d++)u.push(s(e.materials,this.material[d]));r.material=u}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let u=0;u<this.children.length;u++)r.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];r.animations.push(s(e.animations,d))}}if(t){const u=a(e.geometries),d=a(e.materials),h=a(e.textures),m=a(e.images),g=a(e.shapes),v=a(e.skeletons),x=a(e.animations),w=a(e.nodes);u.length>0&&(i.geometries=u),d.length>0&&(i.materials=d),h.length>0&&(i.textures=h),m.length>0&&(i.images=m),g.length>0&&(i.shapes=g),v.length>0&&(i.skeletons=v),x.length>0&&(i.animations=x),w.length>0&&(i.nodes=w)}return i.object=r,i;function a(u){const d=[];for(const h in u){const m=u[h];delete m.metadata,d.push(m)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}yn.DEFAULT_UP=new q(0,1,0);yn.DEFAULT_MATRIX_AUTO_UPDATE=!0;yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ao=new q,Aa=new q,fy=new q,Ca=new q,Tf=new q,Af=new q,MS=new q,dy=new q,hy=new q,py=new q,my=new un,gy=new un,vy=new un;class Kr{constructor(e=new q,t=new q,i=new q){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ao.subVectors(e,t),r.cross(ao);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ao.subVectors(r,t),Aa.subVectors(i,t),fy.subVectors(e,t);const a=ao.dot(ao),u=ao.dot(Aa),d=ao.dot(fy),h=Aa.dot(Aa),m=Aa.dot(fy),g=a*h-u*u;if(g===0)return s.set(0,0,0),null;const v=1/g,x=(h*d-u*m)*v,w=(a*m-u*d)*v;return s.set(1-x-w,w,x)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ca)===null?!1:Ca.x>=0&&Ca.y>=0&&Ca.x+Ca.y<=1}static getInterpolation(e,t,i,r,s,a,u,d){return this.getBarycoord(e,t,i,r,Ca)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(s,Ca.x),d.addScaledVector(a,Ca.y),d.addScaledVector(u,Ca.z),d)}static getInterpolatedAttribute(e,t,i,r,s,a){return my.setScalar(0),gy.setScalar(0),vy.setScalar(0),my.fromBufferAttribute(e,t),gy.fromBufferAttribute(e,i),vy.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(my,s.x),a.addScaledVector(gy,s.y),a.addScaledVector(vy,s.z),a}static isFrontFacing(e,t,i,r){return ao.subVectors(i,t),Aa.subVectors(e,t),ao.cross(Aa).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ao.subVectors(this.c,this.b),Aa.subVectors(this.a,this.b),ao.cross(Aa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Kr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Kr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Kr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Kr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Kr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,u;Tf.subVectors(r,i),Af.subVectors(s,i),dy.subVectors(e,i);const d=Tf.dot(dy),h=Af.dot(dy);if(d<=0&&h<=0)return t.copy(i);hy.subVectors(e,r);const m=Tf.dot(hy),g=Af.dot(hy);if(m>=0&&g<=m)return t.copy(r);const v=d*g-m*h;if(v<=0&&d>=0&&m<=0)return a=d/(d-m),t.copy(i).addScaledVector(Tf,a);py.subVectors(e,s);const x=Tf.dot(py),w=Af.dot(py);if(w>=0&&x<=w)return t.copy(s);const b=x*h-d*w;if(b<=0&&h>=0&&w<=0)return u=h/(h-w),t.copy(i).addScaledVector(Af,u);const E=m*w-x*g;if(E<=0&&g-m>=0&&x-w>=0)return MS.subVectors(s,r),u=(g-m)/(g-m+(x-w)),t.copy(r).addScaledVector(MS,u);const S=1/(E+b+v);return a=b*S,u=v*S,t.copy(i).addScaledVector(Tf,a).addScaledVector(Af,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _T={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Al={h:0,s:0,l:0},Hm={h:0,s:0,l:0};function yy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let ct=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Rr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,mn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=mn.workingColorSpace){return this.r=e,this.g=t,this.b=i,mn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=mn.workingColorSpace){if(e=Dx(e,1),t=$t(t,0,1),i=$t(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=yy(a,s,e+1/3),this.g=yy(a,s,e),this.b=yy(a,s,e-1/3)}return mn.toWorkingColorSpace(this,r),this}setStyle(e,t=Rr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],u=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Rr){const i=_T[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ua(e.r),this.g=Ua(e.g),this.b=Ua(e.b),this}copyLinearToSRGB(e){return this.r=td(e.r),this.g=td(e.g),this.b=td(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Rr){return mn.fromWorkingColorSpace(lr.copy(this),e),Math.round($t(lr.r*255,0,255))*65536+Math.round($t(lr.g*255,0,255))*256+Math.round($t(lr.b*255,0,255))}getHexString(e=Rr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=mn.workingColorSpace){mn.fromWorkingColorSpace(lr.copy(this),t);const i=lr.r,r=lr.g,s=lr.b,a=Math.max(i,r,s),u=Math.min(i,r,s);let d,h;const m=(u+a)/2;if(u===a)d=0,h=0;else{const g=a-u;switch(h=m<=.5?g/(a+u):g/(2-a-u),a){case i:d=(r-s)/g+(r<s?6:0);break;case r:d=(s-i)/g+2;break;case s:d=(i-r)/g+4;break}d/=6}return e.h=d,e.s=h,e.l=m,e}getRGB(e,t=mn.workingColorSpace){return mn.fromWorkingColorSpace(lr.copy(this),t),e.r=lr.r,e.g=lr.g,e.b=lr.b,e}getStyle(e=Rr){mn.fromWorkingColorSpace(lr.copy(this),e);const t=lr.r,i=lr.g,r=lr.b;return e!==Rr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Al),this.setHSL(Al.h+e,Al.s+t,Al.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Al),e.getHSL(Hm);const i=Zh(Al.h,Hm.h,t),r=Zh(Al.s,Hm.s,t),s=Zh(Al.l,Hm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const lr=new ct;ct.NAMES=_T;let wP=0;class hr extends Wo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wP++}),this.uuid=ms(),this.name="",this.type="Material",this.blending=Yu,this.side=za,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Bg,this.blendDst=Vg,this.blendEquation=Dl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ct(0,0,0),this.blendAlpha=0,this.depthFunc=nc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=z_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bu,this.stencilZFail=Bu,this.stencilZPass=Bu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Yu&&(i.blending=this.blending),this.side!==za&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Bg&&(i.blendSrc=this.blendSrc),this.blendDst!==Vg&&(i.blendDst=this.blendDst),this.blendEquation!==Dl&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==nc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==z_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Bu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Bu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const u in s){const d=s[u];delete d.metadata,a.push(d)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Fl extends hr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qr,this.combine=Mp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Da=MP();function MP(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let d=0;d<256;++d){const h=d-127;h<-27?(i[d]=0,i[d|256]=32768,r[d]=24,r[d|256]=24):h<-14?(i[d]=1024>>-h-14,i[d|256]=1024>>-h-14|32768,r[d]=-h-1,r[d|256]=-h-1):h<=15?(i[d]=h+15<<10,i[d|256]=h+15<<10|32768,r[d]=13,r[d|256]=13):h<128?(i[d]=31744,i[d|256]=64512,r[d]=24,r[d|256]=24):(i[d]=31744,i[d|256]=64512,r[d]=13,r[d|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),u=new Uint32Array(64);for(let d=1;d<1024;++d){let h=d<<13,m=0;for(;!(h&8388608);)h<<=1,m-=8388608;h&=-8388609,m+=947912704,s[d]=h|m}for(let d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)a[d]=d<<23;a[31]=1199570944,a[32]=2147483648;for(let d=33;d<63;++d)a[d]=2147483648+(d-32<<23);a[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(u[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:u}}function qr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=$t(n,-65504,65504),Da.floatView[0]=n;const e=Da.uint32View[0],t=e>>23&511;return Da.baseTable[t]+((e&8388607)>>Da.shiftTable[t])}function Vh(n){const e=n>>10;return Da.uint32View[0]=Da.mantissaTable[Da.offsetTable[e]+(n&1023)]+Da.exponentTable[e],Da.floatView[0]}const EP={toHalfFloat:qr,fromHalfFloat:Vh},pi=new q,Wm=new De;let bP=0;class Cn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:bP++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=fp,this.updateRanges=[],this.gpuType=Zr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Wm.fromBufferAttribute(this,t),Wm.applyMatrix3(e),this.setXY(t,Wm.x,Wm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)pi.fromBufferAttribute(this,t),pi.applyMatrix3(e),this.setXYZ(t,pi.x,pi.y,pi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)pi.fromBufferAttribute(this,t),pi.applyMatrix4(e),this.setXYZ(t,pi.x,pi.y,pi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)pi.fromBufferAttribute(this,t),pi.applyNormalMatrix(e),this.setXYZ(t,pi.x,pi.y,pi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)pi.fromBufferAttribute(this,t),pi.transformDirection(e),this.setXYZ(t,pi.x,pi.y,pi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Pr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array),r=Zt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array),r=Zt(r,this.array),s=Zt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==fp&&(e.usage=this.usage),e}}class TP extends Cn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class AP extends Cn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class CP extends Cn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class RP extends Cn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Nx extends Cn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class PP extends Cn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Ox extends Cn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class IP extends Cn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Vh(this.array[e*this.itemSize]);return this.normalized&&(t=Pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize]=qr(t),this}getY(e){let t=Vh(this.array[e*this.itemSize+1]);return this.normalized&&(t=Pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+1]=qr(t),this}getZ(e){let t=Vh(this.array[e*this.itemSize+2]);return this.normalized&&(t=Pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+2]=qr(t),this}getW(e){let t=Vh(this.array[e*this.itemSize+3]);return this.normalized&&(t=Pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+3]=qr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array)),this.array[e+0]=qr(t),this.array[e+1]=qr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array),r=Zt(r,this.array)),this.array[e+0]=qr(t),this.array[e+1]=qr(i),this.array[e+2]=qr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array),r=Zt(r,this.array),s=Zt(s,this.array)),this.array[e+0]=qr(t),this.array[e+1]=qr(i),this.array[e+2]=qr(r),this.array[e+3]=qr(s),this}}class Mt extends Cn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let LP=0;const Rs=new Ut,_y=new yn,Cf=new q,ps=new Dr,Sh=new Dr,Fi=new q;class tn extends Wo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:LP++}),this.uuid=ms(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(gT(e)?Ox:Nx)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new jt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Rs.makeRotationFromQuaternion(e),this.applyMatrix4(Rs),this}rotateX(e){return Rs.makeRotationX(e),this.applyMatrix4(Rs),this}rotateY(e){return Rs.makeRotationY(e),this.applyMatrix4(Rs),this}rotateZ(e){return Rs.makeRotationZ(e),this.applyMatrix4(Rs),this}translate(e,t,i){return Rs.makeTranslation(e,t,i),this.applyMatrix4(Rs),this}scale(e,t,i){return Rs.makeScale(e,t,i),this.applyMatrix4(Rs),this}lookAt(e){return _y.lookAt(e),_y.updateMatrix(),this.applyMatrix4(_y.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cf).negate(),this.translate(Cf.x,Cf.y,Cf.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Mt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ps.setFromBufferAttribute(s),this.morphTargetsRelative?(Fi.addVectors(this.boundingBox.min,ps.min),this.boundingBox.expandByPoint(Fi),Fi.addVectors(this.boundingBox.max,ps.max),this.boundingBox.expandByPoint(Fi)):(this.boundingBox.expandByPoint(ps.min),this.boundingBox.expandByPoint(ps.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new q,1/0);return}if(e){const i=this.boundingSphere.center;if(ps.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const u=t[s];Sh.setFromBufferAttribute(u),this.morphTargetsRelative?(Fi.addVectors(ps.min,Sh.min),ps.expandByPoint(Fi),Fi.addVectors(ps.max,Sh.max),ps.expandByPoint(Fi)):(ps.expandByPoint(Sh.min),ps.expandByPoint(Sh.max))}ps.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Fi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Fi));if(t)for(let s=0,a=t.length;s<a;s++){const u=t[s],d=this.morphTargetsRelative;for(let h=0,m=u.count;h<m;h++)Fi.fromBufferAttribute(u,h),d&&(Cf.fromBufferAttribute(e,h),Fi.add(Cf)),r=Math.max(r,i.distanceToSquared(Fi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Cn(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),u=[],d=[];for(let H=0;H<i.count;H++)u[H]=new q,d[H]=new q;const h=new q,m=new q,g=new q,v=new De,x=new De,w=new De,b=new q,E=new q;function S(H,O,D){h.fromBufferAttribute(i,H),m.fromBufferAttribute(i,O),g.fromBufferAttribute(i,D),v.fromBufferAttribute(s,H),x.fromBufferAttribute(s,O),w.fromBufferAttribute(s,D),m.sub(h),g.sub(h),x.sub(v),w.sub(v);const W=1/(x.x*w.y-w.x*x.y);isFinite(W)&&(b.copy(m).multiplyScalar(w.y).addScaledVector(g,-x.y).multiplyScalar(W),E.copy(g).multiplyScalar(x.x).addScaledVector(m,-w.x).multiplyScalar(W),u[H].add(b),u[O].add(b),u[D].add(b),d[H].add(E),d[O].add(E),d[D].add(E))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let H=0,O=C.length;H<O;++H){const D=C[H],W=D.start,ee=D.count;for(let ne=W,le=W+ee;ne<le;ne+=3)S(e.getX(ne+0),e.getX(ne+1),e.getX(ne+2))}const P=new q,I=new q,B=new q,N=new q;function U(H){B.fromBufferAttribute(r,H),N.copy(B);const O=u[H];P.copy(O),P.sub(B.multiplyScalar(B.dot(O))).normalize(),I.crossVectors(N,O);const W=I.dot(d[H])<0?-1:1;a.setXYZW(H,P.x,P.y,P.z,W)}for(let H=0,O=C.length;H<O;++H){const D=C[H],W=D.start,ee=D.count;for(let ne=W,le=W+ee;ne<le;ne+=3)U(e.getX(ne+0)),U(e.getX(ne+1)),U(e.getX(ne+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Cn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,x=i.count;v<x;v++)i.setXYZ(v,0,0,0);const r=new q,s=new q,a=new q,u=new q,d=new q,h=new q,m=new q,g=new q;if(e)for(let v=0,x=e.count;v<x;v+=3){const w=e.getX(v+0),b=e.getX(v+1),E=e.getX(v+2);r.fromBufferAttribute(t,w),s.fromBufferAttribute(t,b),a.fromBufferAttribute(t,E),m.subVectors(a,s),g.subVectors(r,s),m.cross(g),u.fromBufferAttribute(i,w),d.fromBufferAttribute(i,b),h.fromBufferAttribute(i,E),u.add(m),d.add(m),h.add(m),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(b,d.x,d.y,d.z),i.setXYZ(E,h.x,h.y,h.z)}else for(let v=0,x=t.count;v<x;v+=3)r.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),m.subVectors(a,s),g.subVectors(r,s),m.cross(g),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Fi.fromBufferAttribute(e,t),Fi.normalize(),e.setXYZ(t,Fi.x,Fi.y,Fi.z)}toNonIndexed(){function e(u,d){const h=u.array,m=u.itemSize,g=u.normalized,v=new h.constructor(d.length*m);let x=0,w=0;for(let b=0,E=d.length;b<E;b++){u.isInterleavedBufferAttribute?x=d[b]*u.data.stride+u.offset:x=d[b]*m;for(let S=0;S<m;S++)v[w++]=h[x++]}return new Cn(v,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new tn,i=this.index.array,r=this.attributes;for(const u in r){const d=r[u],h=e(d,i);t.setAttribute(u,h)}const s=this.morphAttributes;for(const u in s){const d=[],h=s[u];for(let m=0,g=h.length;m<g;m++){const v=h[m],x=e(v,i);d.push(x)}t.morphAttributes[u]=d}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let u=0,d=a.length;u<d;u++){const h=a[u];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const h in d)d[h]!==void 0&&(e[h]=d[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const h=i[d];e.data.attributes[d]=h.toJSON(e.data)}const r={};let s=!1;for(const d in this.morphAttributes){const h=this.morphAttributes[d],m=[];for(let g=0,v=h.length;g<v;g++){const x=h[g];m.push(x.toJSON(e.data))}m.length>0&&(r[d]=m,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const h in r){const m=r[h];this.setAttribute(h,m.clone(t))}const s=e.morphAttributes;for(const h in s){const m=[],g=s[h];for(let v=0,x=g.length;v<x;v++)m.push(g[v].clone(t));this.morphAttributes[h]=m}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,m=a.length;h<m;h++){const g=a[h];this.addGroup(g.start,g.count,g.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ES=new Ut,Cu=new pd,Gm=new dr,bS=new q,$m=new q,Xm=new q,jm=new q,xy=new q,qm=new q,TS=new q,Ym=new q;class mi extends yn{constructor(e=new tn,t=new Fl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const u=this.morphTargetInfluences;if(s&&u){qm.set(0,0,0);for(let d=0,h=s.length;d<h;d++){const m=u[d],g=s[d];m!==0&&(xy.fromBufferAttribute(g,e),a?qm.addScaledVector(xy,m):qm.addScaledVector(xy.sub(t),m))}t.add(qm)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Gm.copy(i.boundingSphere),Gm.applyMatrix4(s),Cu.copy(e.ray).recast(e.near),!(Gm.containsPoint(Cu.origin)===!1&&(Cu.intersectSphere(Gm,bS)===null||Cu.origin.distanceToSquared(bS)>(e.far-e.near)**2))&&(ES.copy(s).invert(),Cu.copy(e.ray).applyMatrix4(ES),!(i.boundingBox!==null&&Cu.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Cu)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,u=s.index,d=s.attributes.position,h=s.attributes.uv,m=s.attributes.uv1,g=s.attributes.normal,v=s.groups,x=s.drawRange;if(u!==null)if(Array.isArray(a))for(let w=0,b=v.length;w<b;w++){const E=v[w],S=a[E.materialIndex],C=Math.max(E.start,x.start),P=Math.min(u.count,Math.min(E.start+E.count,x.start+x.count));for(let I=C,B=P;I<B;I+=3){const N=u.getX(I),U=u.getX(I+1),H=u.getX(I+2);r=Km(this,S,e,i,h,m,g,N,U,H),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const w=Math.max(0,x.start),b=Math.min(u.count,x.start+x.count);for(let E=w,S=b;E<S;E+=3){const C=u.getX(E),P=u.getX(E+1),I=u.getX(E+2);r=Km(this,a,e,i,h,m,g,C,P,I),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}else if(d!==void 0)if(Array.isArray(a))for(let w=0,b=v.length;w<b;w++){const E=v[w],S=a[E.materialIndex],C=Math.max(E.start,x.start),P=Math.min(d.count,Math.min(E.start+E.count,x.start+x.count));for(let I=C,B=P;I<B;I+=3){const N=I,U=I+1,H=I+2;r=Km(this,S,e,i,h,m,g,N,U,H),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const w=Math.max(0,x.start),b=Math.min(d.count,x.start+x.count);for(let E=w,S=b;E<S;E+=3){const C=E,P=E+1,I=E+2;r=Km(this,a,e,i,h,m,g,C,P,I),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}}}function DP(n,e,t,i,r,s,a,u){let d;if(e.side===Lr?d=i.intersectTriangle(a,s,r,!0,u):d=i.intersectTriangle(r,s,a,e.side===za,u),d===null)return null;Ym.copy(u),Ym.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(Ym);return h<t.near||h>t.far?null:{distance:h,point:Ym.clone(),object:n}}function Km(n,e,t,i,r,s,a,u,d,h){n.getVertexPosition(u,$m),n.getVertexPosition(d,Xm),n.getVertexPosition(h,jm);const m=DP(n,e,t,i,$m,Xm,jm,TS);if(m){const g=new q;Kr.getBarycoord(TS,$m,Xm,jm,g),r&&(m.uv=Kr.getInterpolatedAttribute(r,u,d,h,g,new De)),s&&(m.uv1=Kr.getInterpolatedAttribute(s,u,d,h,g,new De)),a&&(m.normal=Kr.getInterpolatedAttribute(a,u,d,h,g,new q),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const v={a:u,b:d,c:h,normal:new q,materialIndex:0};Kr.getNormal($m,Xm,jm,v.normal),m.face=v,m.barycoord=g}return m}class cc extends tn{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const u=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const d=[],h=[],m=[],g=[];let v=0,x=0;w("z","y","x",-1,-1,i,t,e,a,s,0),w("z","y","x",1,-1,i,t,-e,a,s,1),w("x","z","y",1,1,e,i,t,r,a,2),w("x","z","y",1,-1,e,i,-t,r,a,3),w("x","y","z",1,-1,e,t,i,r,s,4),w("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(d),this.setAttribute("position",new Mt(h,3)),this.setAttribute("normal",new Mt(m,3)),this.setAttribute("uv",new Mt(g,2));function w(b,E,S,C,P,I,B,N,U,H,O){const D=I/U,W=B/H,ee=I/2,ne=B/2,le=N/2,pe=U+1,de=H+1;let _e=0,F=0;const J=new q;for(let Z=0;Z<de;Z++){const $=Z*W-ne;for(let re=0;re<pe;re++){const Ne=re*D-ee;J[b]=Ne*C,J[E]=$*P,J[S]=le,h.push(J.x,J.y,J.z),J[b]=0,J[E]=0,J[S]=N>0?1:-1,m.push(J.x,J.y,J.z),g.push(re/U),g.push(1-Z/H),_e+=1}}for(let Z=0;Z<H;Z++)for(let $=0;$<U;$++){const re=v+$+pe*Z,Ne=v+$+pe*(Z+1),he=v+($+1)+pe*(Z+1),Te=v+($+1)+pe*Z;d.push(re,Ne,Te),d.push(Ne,he,Te),F+=6}u.addGroup(x,F,O),x+=F,v+=_e}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function od(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ar(n){const e={};for(let t=0;t<n.length;t++){const i=od(n[t]);for(const r in i)e[r]=i[r]}return e}function NP(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function xT(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:mn.workingColorSpace}const ST={clone:od,merge:Ar};var OP=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,kP=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class po extends hr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=OP,this.fragmentShader=kP,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=od(e.uniforms),this.uniformsGroups=NP(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Tp extends yn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut,this.projectionMatrixInverse=new Ut,this.coordinateSystem=fo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Cl=new q,AS=new De,CS=new De;class Bi extends Tp{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=sd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Zu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return sd*2*Math.atan(Math.tan(Zu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Cl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Cl.x,Cl.y).multiplyScalar(-e/Cl.z),Cl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Cl.x,Cl.y).multiplyScalar(-e/Cl.z)}getViewSize(e,t){return this.getViewBounds(e,AS,CS),t.subVectors(CS,AS)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Zu*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const d=a.fullWidth,h=a.fullHeight;s+=a.offsetX*r/d,t-=a.offsetY*i/h,r*=a.width/d,i*=a.height/h}const u=this.filmOffset;u!==0&&(s+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Rf=-90,Pf=1;class wT extends yn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Bi(Rf,Pf,e,t);r.layers=this.layers,this.add(r);const s=new Bi(Rf,Pf,e,t);s.layers=this.layers,this.add(s);const a=new Bi(Rf,Pf,e,t);a.layers=this.layers,this.add(a);const u=new Bi(Rf,Pf,e,t);u.layers=this.layers,this.add(u);const d=new Bi(Rf,Pf,e,t);d.layers=this.layers,this.add(d);const h=new Bi(Rf,Pf,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,u,d]=t;for(const h of t)this.remove(h);if(e===fo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===dp)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,u,d,h,m]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),w=e.xr.enabled;e.xr.enabled=!1;const b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,u),e.setRenderTarget(i,3,r),e.render(t,d),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=b,e.setRenderTarget(i,5,r),e.render(t,m),e.setRenderTarget(g,v,x),e.xr.enabled=w,i.texture.needsPMREMUpdate=!0}}class Ap extends Wn{constructor(e,t,i,r,s,a,u,d,h,m){e=e!==void 0?e:[],t=t!==void 0?t:Ba,super(e,t,i,r,s,a,u,d,h,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class MT extends Vo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Ap(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ai}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new cc(5,5,5),s=new po({name:"CubemapFromEquirect",uniforms:od(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Lr,blending:ka});s.uniforms.tEquirect.value=t;const a=new mi(r,s),u=t.minFilter;return t.minFilter===ko&&(t.minFilter=Ai),new wT(1,10,this).update(e,a),t.minFilter=u,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class Kf extends yn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const UP={type:"move"};class kg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const u=this._targetRay,d=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const b of e.hand.values()){const E=t.getJointPose(b,i),S=this._getHandJoint(h,b);E!==null&&(S.matrix.fromArray(E.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=E.radius),S.visible=E!==null}const m=h.joints["index-finger-tip"],g=h.joints["thumb-tip"],v=m.position.distanceTo(g.position),x=.02,w=.005;h.inputState.pinching&&v>x+w?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=x-w&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(UP)))}return u!==null&&(u.visible=r!==null),d!==null&&(d.visible=s!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Kf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Z0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ct(e),this.density=t}clone(){return new Z0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class J0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ct(e),this.near=t,this.far=i}clone(){return new J0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class kx extends yn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Qr,this.environmentIntensity=1,this.environmentRotation=new Qr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Q0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=fp,this.updateRanges=[],this.version=0,this.uuid=ms()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const br=new q;class oc{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)br.fromBufferAttribute(this,t),br.applyMatrix4(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.applyNormalMatrix(e),this.setXYZ(t,br.x,br.y,br.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.transformDirection(e),this.setXYZ(t,br.x,br.y,br.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Pr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Zt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Pr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Pr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Pr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Pr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array),r=Zt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zt(t,this.array),i=Zt(i,this.array),r=Zt(r,this.array),s=Zt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Cn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new oc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ux extends hr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ct(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let If;const wh=new q,Lf=new q,Df=new q,Nf=new De,Mh=new De,ET=new Ut,Zm=new q,Eh=new q,Jm=new q,RS=new De,Sy=new De,PS=new De;class bT extends yn{constructor(e=new Ux){if(super(),this.isSprite=!0,this.type="Sprite",If===void 0){If=new tn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Q0(t,5);If.setIndex([0,1,2,0,2,3]),If.setAttribute("position",new oc(i,3,0,!1)),If.setAttribute("uv",new oc(i,2,3,!1))}this.geometry=If,this.material=e,this.center=new De(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Lf.setFromMatrixScale(this.matrixWorld),ET.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Df.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Lf.multiplyScalar(-Df.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;Qm(Zm.set(-.5,-.5,0),Df,a,Lf,r,s),Qm(Eh.set(.5,-.5,0),Df,a,Lf,r,s),Qm(Jm.set(.5,.5,0),Df,a,Lf,r,s),RS.set(0,0),Sy.set(1,0),PS.set(1,1);let u=e.ray.intersectTriangle(Zm,Eh,Jm,!1,wh);if(u===null&&(Qm(Eh.set(-.5,.5,0),Df,a,Lf,r,s),Sy.set(0,1),u=e.ray.intersectTriangle(Zm,Jm,Eh,!1,wh),u===null))return;const d=e.ray.origin.distanceTo(wh);d<e.near||d>e.far||t.push({distance:d,point:wh.clone(),uv:Kr.getInterpolation(wh,Zm,Eh,Jm,RS,Sy,PS,new De),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Qm(n,e,t,i,r,s){Nf.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Mh.x=s*Nf.x-r*Nf.y,Mh.y=r*Nf.x+s*Nf.y):Mh.copy(Nf),n.copy(e),n.x+=Mh.x,n.y+=Mh.y,n.applyMatrix4(ET)}const eg=new q,IS=new q;class TT extends yn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){eg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(eg);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){eg.setFromMatrixPosition(e.matrixWorld),IS.setFromMatrixPosition(this.matrixWorld);const i=eg.distanceTo(IS)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const LS=new q,DS=new un,NS=new un,FP=new q,OS=new Ut,tg=new q,wy=new dr,kS=new Ut,My=new pd;class AT extends mi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=F_,this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Dr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,tg),this.boundingBox.expandByPoint(tg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new dr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,tg),this.boundingSphere.expandByPoint(tg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),wy.copy(this.boundingSphere),wy.applyMatrix4(r),e.ray.intersectsSphere(wy)!==!1&&(kS.copy(r).invert(),My.copy(e.ray).applyMatrix4(kS),!(this.boundingBox!==null&&My.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,My)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new un,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===F_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nT?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;DS.fromBufferAttribute(r.attributes.skinIndex,e),NS.fromBufferAttribute(r.attributes.skinWeight,e),LS.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=NS.getComponent(s);if(a!==0){const u=DS.getComponent(s);OS.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(FP.copy(LS).applyMatrix4(OS),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Fx extends yn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fo extends Wn{constructor(e=null,t=1,i=1,r,s,a,u,d,h=Ji,m=Ji,g,v){super(null,a,u,d,h,m,r,s,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const US=new Ut,zP=new Ut;class ev{constructor(e=[],t=[]){this.uuid=ms(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ut)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ut;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const u=e[s]?e[s].matrixWorld:zP;US.multiplyMatrices(u,t[s]),US.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new ev(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Fo(t,e,e,cr,Zr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Fx),this.bones.push(a),this.boneInverses.push(new Ut().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const u=i[r];e.boneInverses.push(u.toArray())}return e}}class ad extends Cn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Of=new Ut,FS=new Ut,ng=[],zS=new Dr,BP=new Ut,bh=new mi,Th=new dr;class CT extends mi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ad(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,BP)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Dr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Of),zS.copy(e.boundingBox).applyMatrix4(Of),this.boundingBox.union(zS)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new dr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Of),Th.copy(e.boundingSphere).applyMatrix4(Of),this.boundingSphere.union(Th)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,a=e*s+1;for(let u=0;u<i.length;u++)i[u]=r[a+u]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(bh.geometry=this.geometry,bh.material=this.material,bh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Th.copy(this.boundingSphere),Th.applyMatrix4(i),e.ray.intersectsSphere(Th)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Of),FS.multiplyMatrices(i,Of),bh.matrixWorld=FS,bh.raycast(e,ng);for(let a=0,u=ng.length;a<u;a++){const d=ng[a];d.instanceId=s,d.object=this,t.push(d)}ng.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ad(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Fo(new Float32Array(r*this.count),r,this.count,$0,Zr));const s=this.morphTexture.source.data.data;let a=0;for(let h=0;h<i.length;h++)a+=i[h];const u=this.geometry.morphTargetsRelative?1:1-a,d=r*e;s[d]=u,s.set(i,d+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const Ey=new q,VP=new q,HP=new jt;class Ll{constructor(e=new q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Ey.subVectors(i,t).cross(VP.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Ey),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||HP.getNormalMatrix(e),r=this.coplanarPoint(Ey).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ru=new dr,ig=new q;class Cp{constructor(e=new Ll,t=new Ll,i=new Ll,r=new Ll,s=new Ll,a=new Ll){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(r),u[4].copy(s),u[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=fo){const i=this.planes,r=e.elements,s=r[0],a=r[1],u=r[2],d=r[3],h=r[4],m=r[5],g=r[6],v=r[7],x=r[8],w=r[9],b=r[10],E=r[11],S=r[12],C=r[13],P=r[14],I=r[15];if(i[0].setComponents(d-s,v-h,E-x,I-S).normalize(),i[1].setComponents(d+s,v+h,E+x,I+S).normalize(),i[2].setComponents(d+a,v+m,E+w,I+C).normalize(),i[3].setComponents(d-a,v-m,E-w,I-C).normalize(),i[4].setComponents(d-u,v-g,E-b,I-P).normalize(),t===fo)i[5].setComponents(d+u,v+g,E+b,I+P).normalize();else if(t===dp)i[5].setComponents(u,g,b,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ru.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ru.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ru)}intersectsSprite(e){return Ru.center.set(0,0,0),Ru.radius=.7071067811865476,Ru.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ru)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(ig.x=r.normal.x>0?e.max.x:e.min.x,ig.y=r.normal.y>0?e.max.y:e.min.y,ig.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ig)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function by(n,e){return n-e}function WP(n,e){return n.z-e.z}function GP(n,e){return e.z-n.z}class $P{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const u=s[this.index];a.push(u),this.index++,u.start=e,u.count=t,u.z=i,u.index=r}reset(){this.list.length=0,this.index=0}}const jr=new Ut,XP=new ct(1,1,1),Ty=new Cp,rg=new Dr,Pu=new dr,Ah=new q,BS=new q,jP=new q,Ay=new $P,ur=new mi,sg=[];function qP(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Iu(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class RT extends mi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new tn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Fo(t,e,e,cr,Zr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Fo(t,e,e,Ep,Va);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Fo(t,e,e,cr,Zr);i.colorSpace=mn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:u,itemSize:d,normalized:h}=a,m=new u.constructor(i*d),g=new Cn(m,d,h);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Cn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Dr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,jr),this.getBoundingBoxAt(s,rg).applyMatrix4(jr),e.union(rg)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,jr),this.getBoundingSphereAt(s,Pu).applyMatrix4(jr),e.union(Pu)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(by),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;jr.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(XP.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?a.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(by),d=this._availableGeometryIds.shift(),s[d]=r):(d=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(d,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=t.getIndex(),u=this._geometryInfo[e];if(r&&a.count>u.reservedIndexCount||t.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=u.vertexStart,h=u.reservedVertexCount;u.vertexCount=t.getAttribute("position").count;for(const m in i.attributes){const g=t.getAttribute(m),v=i.getAttribute(m);qP(g,v,d);const x=g.itemSize;for(let w=g.count,b=h;w<b;w++){const E=d+w;for(let S=0;S<x;S++)v.setComponent(E,S,0)}v.needsUpdate=!0,v.addUpdateRange(d*x,h*x)}if(r){const m=u.indexStart,g=u.reservedIndexCount;u.indexCount=t.getIndex().count;for(let v=0;v<a.count;v++)s.setX(m+v,d+a.getX(v));for(let v=a.count,x=g;v<x;v++)s.setX(m+v,d);s.needsUpdate=!0,s.addUpdateRange(m,u.reservedIndexCount)}return u.start=r?u.indexStart:u.vertexStart,u.count=r?u.indexCount:u.vertexCount,u.boundingBox=null,t.boundingBox!==null&&(u.boundingBox=t.boundingBox.clone()),u.boundingSphere=null,t.boundingSphere!==null&&(u.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((a,u)=>u).sort((a,u)=>i[a].vertexStart-i[u].vertexStart),s=this.geometry;for(let a=0,u=i.length;a<u;a++){const d=r[a],h=i[d];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=h,x=s.index,w=x.array,b=e-g;for(let E=m;E<m+v;E++)w[E]=w[E]+b;x.array.copyWithin(t,m,m+v),x.addUpdateRange(t,v),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=h,v=s.attributes;for(const x in v){const w=v[x],{array:b,itemSize:E}=w;b.copyWithin(e*E,m*E,(m+g)*E),w.addUpdateRange(e*E,g*E)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Dr,a=i.index,u=i.attributes.position;for(let d=r.start,h=r.start+r.count;d<h;d++){let m=d;a&&(m=a.getX(m)),s.expandByPoint(Ah.fromBufferAttribute(u,m))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new dr;this.getBoundingBoxAt(e,rg),rg.getCenter(s.center);const a=i.index,u=i.attributes.position;let d=0;for(let h=r.start,m=r.start+r.count;h<m;h++){let g=h;a&&(g=a.getX(g)),Ah.fromBufferAttribute(u,g),d=Math.max(d,s.center.distanceToSquared(Ah))}s.radius=Math.sqrt(d),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(by);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Iu(this._multiDrawCounts,r),Iu(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,u=this._matricesTexture,d=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Iu(a.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),Iu(u.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Iu(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...i.map(u=>u.vertexStart+u.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new tn,this._initializeGeometry(s));const a=this.geometry;s.index&&Iu(s.index.array,a.index.array);for(const u in s.attributes)Iu(s.attributes[u].array,a.attributes[u].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;ur.material=this.material,ur.geometry.index=a.index,ur.geometry.attributes=a.attributes,ur.geometry.boundingBox===null&&(ur.geometry.boundingBox=new Dr),ur.geometry.boundingSphere===null&&(ur.geometry.boundingSphere=new dr);for(let u=0,d=i.length;u<d;u++){if(!i[u].visible||!i[u].active)continue;const h=i[u].geometryIndex,m=r[h];ur.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(u,ur.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,ur.geometry.boundingBox),this.getBoundingSphereAt(h,ur.geometry.boundingSphere),ur.raycast(e,sg);for(let g=0,v=sg.length;g<v;g++){const x=sg[g];x.object=this,x.batchId=u,t.push(x)}sg.length=0}ur.material=null,ur.geometry.index=null,ur.geometry.attributes={},ur.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),u=a===null?1:a.array.BYTES_PER_ELEMENT,d=this._instanceInfo,h=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,x=this._indirectTexture,w=x.image.data;v&&(jr.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Ty.setFromProjectionMatrix(jr,e.coordinateSystem));let b=0;if(this.sortObjects){jr.copy(this.matrixWorld).invert(),Ah.setFromMatrixPosition(i.matrixWorld).applyMatrix4(jr),BS.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(jr);for(let C=0,P=d.length;C<P;C++)if(d[C].visible&&d[C].active){const I=d[C].geometryIndex;this.getMatrixAt(C,jr),this.getBoundingSphereAt(I,Pu).applyMatrix4(jr);let B=!1;if(v&&(B=!Ty.intersectsSphere(Pu)),!B){const N=g[I],U=jP.subVectors(Pu.center,Ah).dot(BS);Ay.push(N.start,N.count,U,C)}}const E=Ay.list,S=this.customSort;S===null?E.sort(s.transparent?GP:WP):S.call(this,E,i);for(let C=0,P=E.length;C<P;C++){const I=E[C];h[b]=I.start*u,m[b]=I.count,w[b]=I.index,b++}Ay.reset()}else for(let E=0,S=d.length;E<S;E++)if(d[E].visible&&d[E].active){const C=d[E].geometryIndex;let P=!1;if(v&&(this.getMatrixAt(E,jr),this.getBoundingSphereAt(C,Pu).applyMatrix4(jr),P=!Ty.intersectsSphere(Pu)),!P){const I=g[C];h[b]=I.start*u,m[b]=I.count,w[b]=E,b++}}x.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class Nr extends hr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ct(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const w0=new q,M0=new q,VS=new Ut,Ch=new pd,og=new dr,Cy=new q,HS=new q;class Ol extends yn{constructor(e=new tn,t=new Nr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)w0.fromBufferAttribute(t,r-1),M0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=w0.distanceTo(M0);e.setAttribute("lineDistance",new Mt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),og.copy(i.boundingSphere),og.applyMatrix4(r),og.radius+=s,e.ray.intersectsSphere(og)===!1)return;VS.copy(r).invert(),Ch.copy(e.ray).applyMatrix4(VS);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,h=this.isLineSegments?2:1,m=i.index,v=i.attributes.position;if(m!==null){const x=Math.max(0,a.start),w=Math.min(m.count,a.start+a.count);for(let b=x,E=w-1;b<E;b+=h){const S=m.getX(b),C=m.getX(b+1),P=ag(this,e,Ch,d,S,C,b);P&&t.push(P)}if(this.isLineLoop){const b=m.getX(w-1),E=m.getX(x),S=ag(this,e,Ch,d,b,E,w-1);S&&t.push(S)}}else{const x=Math.max(0,a.start),w=Math.min(v.count,a.start+a.count);for(let b=x,E=w-1;b<E;b+=h){const S=ag(this,e,Ch,d,b,b+1,b);S&&t.push(S)}if(this.isLineLoop){const b=ag(this,e,Ch,d,w-1,x,w-1);b&&t.push(b)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}function ag(n,e,t,i,r,s,a){const u=n.geometry.attributes.position;if(w0.fromBufferAttribute(u,r),M0.fromBufferAttribute(u,s),t.distanceSqToSegment(w0,M0,Cy,HS)>i)return;Cy.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(Cy);if(!(h<e.near||h>e.far))return{distance:h,point:HS.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const WS=new q,GS=new q;class Go extends Ol{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)WS.fromBufferAttribute(t,r),GS.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+WS.distanceTo(GS);e.setAttribute("lineDistance",new Mt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class PT extends Ol{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class zx extends hr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ct(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $S=new Ut,V_=new pd,lg=new dr,ug=new q;class IT extends yn{constructor(e=new tn,t=new zx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),lg.copy(i.boundingSphere),lg.applyMatrix4(r),lg.radius+=s,e.ray.intersectsSphere(lg)===!1)return;$S.copy(r).invert(),V_.copy(e.ray).applyMatrix4($S);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,h=i.index,g=i.attributes.position;if(h!==null){const v=Math.max(0,a.start),x=Math.min(h.count,a.start+a.count);for(let w=v,b=x;w<b;w++){const E=h.getX(w);ug.fromBufferAttribute(g,E),XS(ug,E,d,r,e,t,this)}}else{const v=Math.max(0,a.start),x=Math.min(g.count,a.start+a.count);for(let w=v,b=x;w<b;w++)ug.fromBufferAttribute(g,w),XS(ug,w,d,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}function XS(n,e,t,i,r,s,a){const u=V_.distanceSqToPoint(n);if(u<t){const d=new q;V_.closestPointToPoint(n,d),d.applyMatrix4(i);const h=r.ray.origin.distanceTo(d);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(u),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class LT extends Wn{constructor(e,t,i,r,s,a,u,d,h){super(e,t,i,r,s,a,u,d,h),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Ai,this.magFilter=s!==void 0?s:Ai,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class YP extends LT{constructor(e,t,i,r,s,a,u,d){super({},e,t,i,r,s,a,u,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class KP extends Wn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ji,this.minFilter=Ji,this.generateMipmaps=!1,this.needsUpdate=!0}}class tv extends Wn{constructor(e,t,i,r,s,a,u,d,h,m,g,v){super(null,a,u,d,h,m,r,s,g,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ZP extends tv{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ls,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class JP extends tv{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ba),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class QP extends Wn{constructor(e,t,i,r,s,a,u,d,h){super(e,t,i,r,s,a,u,d,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Bx extends Wn{constructor(e,t,i,r,s,a,u,d,h,m=Ku){if(m!==Ku&&m!==rc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===Ku&&(i=Va),i===void 0&&m===rc&&(i=ic),super(null,r,s,a,u,d,m,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:Ji,this.minFilter=d!==void 0?d:Ji,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class go{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let u=0,d=s-1,h;for(;u<=d;)if(r=Math.floor(u+(d-u)/2),h=i[r]-a,h<0)u=r+1;else if(h>0)d=r-1;else{d=r;break}if(r=d,i[r]===a)return r/(s-1);const m=i[r],v=i[r+1]-m,x=(a-m)/v;return(r+x)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),u=this.getPoint(s),d=t||(a.isVector2?new De:new q);return d.copy(u).sub(a).normalize(),d}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new q,r=[],s=[],a=[],u=new q,d=new Ut;for(let x=0;x<=e;x++){const w=x/e;r[x]=this.getTangentAt(w,new q)}s[0]=new q,a[0]=new q;let h=Number.MAX_VALUE;const m=Math.abs(r[0].x),g=Math.abs(r[0].y),v=Math.abs(r[0].z);m<=h&&(h=m,i.set(1,0,0)),g<=h&&(h=g,i.set(0,1,0)),v<=h&&i.set(0,0,1),u.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],u),a[0].crossVectors(r[0],s[0]);for(let x=1;x<=e;x++){if(s[x]=s[x-1].clone(),a[x]=a[x-1].clone(),u.crossVectors(r[x-1],r[x]),u.length()>Number.EPSILON){u.normalize();const w=Math.acos($t(r[x-1].dot(r[x]),-1,1));s[x].applyMatrix4(d.makeRotationAxis(u,w))}a[x].crossVectors(r[x],s[x])}if(t===!0){let x=Math.acos($t(s[0].dot(s[e]),-1,1));x/=e,r[0].dot(u.crossVectors(s[0],s[e]))>0&&(x=-x);for(let w=1;w<=e;w++)s[w].applyMatrix4(d.makeRotationAxis(r[w],x*w)),a[w].crossVectors(r[w],s[w])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class nv extends go{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,u=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=u,this.aRotation=d}getPoint(e,t=new De){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const u=this.aStartAngle+e*s;let d=this.aX+this.xRadius*Math.cos(u),h=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=d-this.aX,x=h-this.aY;d=v*m-x*g+this.aX,h=v*g+x*m+this.aY}return i.set(d,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class DT extends nv{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Vx(){let n=0,e=0,t=0,i=0;function r(s,a,u,d){n=s,e=u,t=-3*s+3*a-2*u-d,i=2*s-2*a+u+d}return{initCatmullRom:function(s,a,u,d,h){r(a,u,h*(u-s),h*(d-a))},initNonuniformCatmullRom:function(s,a,u,d,h,m,g){let v=(a-s)/h-(u-s)/(h+m)+(u-a)/m,x=(u-a)/m-(d-a)/(m+g)+(d-u)/g;v*=m,x*=m,r(a,u,v,x)},calc:function(s){const a=s*s,u=a*s;return n+e*s+t*a+i*u}}}const cg=new q,Ry=new Vx,Py=new Vx,Iy=new Vx;class NT extends go{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new q){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let u=Math.floor(a),d=a-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s)+1)*s:d===0&&u===s-1&&(u=s-2,d=1);let h,m;this.closed||u>0?h=r[(u-1)%s]:(cg.subVectors(r[0],r[1]).add(r[0]),h=cg);const g=r[u%s],v=r[(u+1)%s];if(this.closed||u+2<s?m=r[(u+2)%s]:(cg.subVectors(r[s-1],r[s-2]).add(r[s-1]),m=cg),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let w=Math.pow(h.distanceToSquared(g),x),b=Math.pow(g.distanceToSquared(v),x),E=Math.pow(v.distanceToSquared(m),x);b<1e-4&&(b=1),w<1e-4&&(w=b),E<1e-4&&(E=b),Ry.initNonuniformCatmullRom(h.x,g.x,v.x,m.x,w,b,E),Py.initNonuniformCatmullRom(h.y,g.y,v.y,m.y,w,b,E),Iy.initNonuniformCatmullRom(h.z,g.z,v.z,m.z,w,b,E)}else this.curveType==="catmullrom"&&(Ry.initCatmullRom(h.x,g.x,v.x,m.x,this.tension),Py.initCatmullRom(h.y,g.y,v.y,m.y,this.tension),Iy.initCatmullRom(h.z,g.z,v.z,m.z,this.tension));return i.set(Ry.calc(d),Py.calc(d),Iy.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new q().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function jS(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,u=n*n,d=n*u;return(2*t-2*i+s+a)*d+(-3*t+3*i-2*s-a)*u+s*n+t}function eI(n,e){const t=1-n;return t*t*e}function tI(n,e){return 2*(1-n)*n*e}function nI(n,e){return n*n*e}function Jh(n,e,t,i){return eI(n,e)+tI(n,t)+nI(n,i)}function iI(n,e){const t=1-n;return t*t*t*e}function rI(n,e){const t=1-n;return 3*t*t*n*e}function sI(n,e){return 3*(1-n)*n*n*e}function oI(n,e){return n*n*n*e}function Qh(n,e,t,i,r){return iI(n,e)+rI(n,t)+sI(n,i)+oI(n,r)}class Hx extends go{constructor(e=new De,t=new De,i=new De,r=new De){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new De){const i=t,r=this.v0,s=this.v1,a=this.v2,u=this.v3;return i.set(Qh(e,r.x,s.x,a.x,u.x),Qh(e,r.y,s.y,a.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class OT extends go{constructor(e=new q,t=new q,i=new q,r=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new q){const i=t,r=this.v0,s=this.v1,a=this.v2,u=this.v3;return i.set(Qh(e,r.x,s.x,a.x,u.x),Qh(e,r.y,s.y,a.y,u.y),Qh(e,r.z,s.z,a.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Wx extends go{constructor(e=new De,t=new De){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new De){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new De){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kT extends go{constructor(e=new q,t=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new q){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gx extends go{constructor(e=new De,t=new De,i=new De){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new De){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Jh(e,r.x,s.x,a.x),Jh(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $x extends go{constructor(e=new q,t=new q,i=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new q){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Jh(e,r.x,s.x,a.x),Jh(e,r.y,s.y,a.y),Jh(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Xx extends go{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new De){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),u=s-a,d=r[a===0?a:a-1],h=r[a],m=r[a>r.length-2?r.length-1:a+1],g=r[a>r.length-3?r.length-1:a+2];return i.set(jS(u,d.x,h.x,m.x,g.x),jS(u,d.y,h.y,m.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new De().fromArray(r))}return this}}var E0=Object.freeze({__proto__:null,ArcCurve:DT,CatmullRomCurve3:NT,CubicBezierCurve:Hx,CubicBezierCurve3:OT,EllipseCurve:nv,LineCurve:Wx,LineCurve3:kT,QuadraticBezierCurve:Gx,QuadraticBezierCurve3:$x,SplineCurve:Xx});class UT extends go{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new E0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,u=this.curves[s],d=u.getLength(),h=d===0?0:1-a/d;return u.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],u=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,d=a.getPoints(u);for(let h=0;h<d.length;h++){const m=d[h];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new E0[r.type]().fromJSON(r))}return this}}class pp extends UT{constructor(e){super(),this.type="Path",this.currentPoint=new De,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Wx(this.currentPoint.clone(),new De(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Gx(this.currentPoint.clone(),new De(e,t),new De(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const u=new Hx(this.currentPoint.clone(),new De(e,t),new De(i,r),new De(s,a));return this.curves.push(u),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Xx(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+u,t+d,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,u,d){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+h,t+m,i,r,s,a,u,d),this}absellipse(e,t,i,r,s,a,u,d){const h=new nv(e,t,i,r,s,a,u,d);if(this.curves.length>0){const g=h.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(h);const m=h.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Rp extends tn{constructor(e=[new De(0,-.5),new De(.5,0),new De(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=$t(r,0,Math.PI*2);const s=[],a=[],u=[],d=[],h=[],m=1/t,g=new q,v=new De,x=new q,w=new q,b=new q;let E=0,S=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:E=e[C+1].x-e[C].x,S=e[C+1].y-e[C].y,x.x=S*1,x.y=-E,x.z=S*0,b.copy(x),x.normalize(),d.push(x.x,x.y,x.z);break;case e.length-1:d.push(b.x,b.y,b.z);break;default:E=e[C+1].x-e[C].x,S=e[C+1].y-e[C].y,x.x=S*1,x.y=-E,x.z=S*0,w.copy(x),x.x+=b.x,x.y+=b.y,x.z+=b.z,x.normalize(),d.push(x.x,x.y,x.z),b.copy(w)}for(let C=0;C<=t;C++){const P=i+C*m*r,I=Math.sin(P),B=Math.cos(P);for(let N=0;N<=e.length-1;N++){g.x=e[N].x*I,g.y=e[N].y,g.z=e[N].x*B,a.push(g.x,g.y,g.z),v.x=C/t,v.y=N/(e.length-1),u.push(v.x,v.y);const U=d[3*N+0]*I,H=d[3*N+1],O=d[3*N+0]*B;h.push(U,H,O)}}for(let C=0;C<t;C++)for(let P=0;P<e.length-1;P++){const I=P+C*e.length,B=I,N=I+e.length,U=I+e.length+1,H=I+1;s.push(B,N,H),s.push(U,H,N)}this.setIndex(s),this.setAttribute("position",new Mt(a,3)),this.setAttribute("uv",new Mt(u,2)),this.setAttribute("normal",new Mt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rp(e.points,e.segments,e.phiStart,e.phiLength)}}class iv extends Rp{constructor(e=1,t=1,i=4,r=8){const s=new pp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new iv(e.radius,e.length,e.capSegments,e.radialSegments)}}class rv extends tn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],u=[],d=[],h=new q,m=new De;a.push(0,0,0),u.push(0,0,1),d.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const x=i+g/t*r;h.x=e*Math.cos(x),h.y=e*Math.sin(x),a.push(h.x,h.y,h.z),u.push(0,0,1),m.x=(a[v]/e+1)/2,m.y=(a[v+1]/e+1)/2,d.push(m.x,m.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Mt(a,3)),this.setAttribute("normal",new Mt(u,3)),this.setAttribute("uv",new Mt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class md extends tn{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:u,thetaLength:d};const h=this;r=Math.floor(r),s=Math.floor(s);const m=[],g=[],v=[],x=[];let w=0;const b=[],E=i/2;let S=0;C(),a===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(m),this.setAttribute("position",new Mt(g,3)),this.setAttribute("normal",new Mt(v,3)),this.setAttribute("uv",new Mt(x,2));function C(){const I=new q,B=new q;let N=0;const U=(t-e)/i;for(let H=0;H<=s;H++){const O=[],D=H/s,W=D*(t-e)+e;for(let ee=0;ee<=r;ee++){const ne=ee/r,le=ne*d+u,pe=Math.sin(le),de=Math.cos(le);B.x=W*pe,B.y=-D*i+E,B.z=W*de,g.push(B.x,B.y,B.z),I.set(pe,U,de).normalize(),v.push(I.x,I.y,I.z),x.push(ne,1-D),O.push(w++)}b.push(O)}for(let H=0;H<r;H++)for(let O=0;O<s;O++){const D=b[O][H],W=b[O+1][H],ee=b[O+1][H+1],ne=b[O][H+1];(e>0||O!==0)&&(m.push(D,W,ne),N+=3),(t>0||O!==s-1)&&(m.push(W,ee,ne),N+=3)}h.addGroup(S,N,0),S+=N}function P(I){const B=w,N=new De,U=new q;let H=0;const O=I===!0?e:t,D=I===!0?1:-1;for(let ee=1;ee<=r;ee++)g.push(0,E*D,0),v.push(0,D,0),x.push(.5,.5),w++;const W=w;for(let ee=0;ee<=r;ee++){const le=ee/r*d+u,pe=Math.cos(le),de=Math.sin(le);U.x=O*de,U.y=E*D,U.z=O*pe,g.push(U.x,U.y,U.z),v.push(0,D,0),N.x=pe*.5+.5,N.y=de*.5*D+.5,x.push(N.x,N.y),w++}for(let ee=0;ee<r;ee++){const ne=B+ee,le=W+ee;I===!0?m.push(le,le+1,ne):m.push(le+1,le,ne),H+=3}h.addGroup(S,H,I===!0?1:2),S+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new md(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sv extends md{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,u=Math.PI*2){super(0,e,t,i,r,s,a,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:u}}static fromJSON(e){return new sv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zl extends tn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];u(r),h(i),m(),this.setAttribute("position",new Mt(s,3)),this.setAttribute("normal",new Mt(s.slice(),3)),this.setAttribute("uv",new Mt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function u(C){const P=new q,I=new q,B=new q;for(let N=0;N<t.length;N+=3)x(t[N+0],P),x(t[N+1],I),x(t[N+2],B),d(P,I,B,C)}function d(C,P,I,B){const N=B+1,U=[];for(let H=0;H<=N;H++){U[H]=[];const O=C.clone().lerp(I,H/N),D=P.clone().lerp(I,H/N),W=N-H;for(let ee=0;ee<=W;ee++)ee===0&&H===N?U[H][ee]=O:U[H][ee]=O.clone().lerp(D,ee/W)}for(let H=0;H<N;H++)for(let O=0;O<2*(N-H)-1;O++){const D=Math.floor(O/2);O%2===0?(v(U[H][D+1]),v(U[H+1][D]),v(U[H][D])):(v(U[H][D+1]),v(U[H+1][D+1]),v(U[H+1][D]))}}function h(C){const P=new q;for(let I=0;I<s.length;I+=3)P.x=s[I+0],P.y=s[I+1],P.z=s[I+2],P.normalize().multiplyScalar(C),s[I+0]=P.x,s[I+1]=P.y,s[I+2]=P.z}function m(){const C=new q;for(let P=0;P<s.length;P+=3){C.x=s[P+0],C.y=s[P+1],C.z=s[P+2];const I=E(C)/2/Math.PI+.5,B=S(C)/Math.PI+.5;a.push(I,1-B)}w(),g()}function g(){for(let C=0;C<a.length;C+=6){const P=a[C+0],I=a[C+2],B=a[C+4],N=Math.max(P,I,B),U=Math.min(P,I,B);N>.9&&U<.1&&(P<.2&&(a[C+0]+=1),I<.2&&(a[C+2]+=1),B<.2&&(a[C+4]+=1))}}function v(C){s.push(C.x,C.y,C.z)}function x(C,P){const I=C*3;P.x=e[I+0],P.y=e[I+1],P.z=e[I+2]}function w(){const C=new q,P=new q,I=new q,B=new q,N=new De,U=new De,H=new De;for(let O=0,D=0;O<s.length;O+=9,D+=6){C.set(s[O+0],s[O+1],s[O+2]),P.set(s[O+3],s[O+4],s[O+5]),I.set(s[O+6],s[O+7],s[O+8]),N.set(a[D+0],a[D+1]),U.set(a[D+2],a[D+3]),H.set(a[D+4],a[D+5]),B.copy(C).add(P).add(I).divideScalar(3);const W=E(B);b(N,D+0,C,W),b(U,D+2,P,W),b(H,D+4,I,W)}}function b(C,P,I,B){B<0&&C.x===1&&(a[P]=C.x-1),I.x===0&&I.z===0&&(a[P]=B/2/Math.PI+.5)}function E(C){return Math.atan2(C.z,-C.x)}function S(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zl(e.vertices,e.indices,e.radius,e.details)}}class ov extends zl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ov(e.radius,e.detail)}}const fg=new q,dg=new q,Ly=new q,hg=new Kr;class FT extends tn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Zu*t),a=e.getIndex(),u=e.getAttribute("position"),d=a?a.count:u.count,h=[0,0,0],m=["a","b","c"],g=new Array(3),v={},x=[];for(let w=0;w<d;w+=3){a?(h[0]=a.getX(w),h[1]=a.getX(w+1),h[2]=a.getX(w+2)):(h[0]=w,h[1]=w+1,h[2]=w+2);const{a:b,b:E,c:S}=hg;if(b.fromBufferAttribute(u,h[0]),E.fromBufferAttribute(u,h[1]),S.fromBufferAttribute(u,h[2]),hg.getNormal(Ly),g[0]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,g[1]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,g[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let C=0;C<3;C++){const P=(C+1)%3,I=g[C],B=g[P],N=hg[m[C]],U=hg[m[P]],H=`${I}_${B}`,O=`${B}_${I}`;O in v&&v[O]?(Ly.dot(v[O].normal)<=s&&(x.push(N.x,N.y,N.z),x.push(U.x,U.y,U.z)),v[O]=null):H in v||(v[H]={index0:h[C],index1:h[P],normal:Ly.clone()})}}for(const w in v)if(v[w]){const{index0:b,index1:E}=v[w];fg.fromBufferAttribute(u,b),dg.fromBufferAttribute(u,E),x.push(fg.x,fg.y,fg.z),x.push(dg.x,dg.y,dg.z)}this.setAttribute("position",new Mt(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Qu extends pp{constructor(e){super(e),this.uuid=ms(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new pp().fromJSON(r))}return this}}const aI={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=zT(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let u,d,h,m,g,v,x;if(i&&(s=dI(n,e,s,t)),n.length>80*t){u=h=n[0],d=m=n[1];for(let w=t;w<r;w+=t)g=n[w],v=n[w+1],g<u&&(u=g),v<d&&(d=v),g>h&&(h=g),v>m&&(m=v);x=Math.max(h-u,m-d),x=x!==0?32767/x:0}return mp(s,a,t,u,d,x,0),a}};function zT(n,e,t,i,r){let s,a;if(r===MI(n,e,t,i)>0)for(s=e;s<t;s+=i)a=qS(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=qS(s,n[s],n[s+1],a);return a&&av(a,a.next)&&(vp(a),a=a.next),a}function ac(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(av(t,t.next)||Yn(t.prev,t,t.next)===0)){if(vp(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function mp(n,e,t,i,r,s,a){if(!n)return;!a&&s&&vI(n,i,r,s);let u=n,d,h;for(;n.prev!==n.next;){if(d=n.prev,h=n.next,s?uI(n,i,r,s):lI(n)){e.push(d.i/t|0),e.push(n.i/t|0),e.push(h.i/t|0),vp(n),n=h.next,u=h.next;continue}if(n=h,n===u){a?a===1?(n=cI(ac(n),e,t),mp(n,e,t,i,r,s,2)):a===2&&fI(n,e,t,i,r,s):mp(ac(n),e,t,i,r,s,1);break}}}function lI(n){const e=n.prev,t=n,i=n.next;if(Yn(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,u=e.y,d=t.y,h=i.y,m=r<s?r<a?r:a:s<a?s:a,g=u<d?u<h?u:h:d<h?d:h,v=r>s?r>a?r:a:s>a?s:a,x=u>d?u>h?u:h:d>h?d:h;let w=i.next;for(;w!==e;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=x&&Zf(r,u,s,d,a,h,w.x,w.y)&&Yn(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function uI(n,e,t,i){const r=n.prev,s=n,a=n.next;if(Yn(r,s,a)>=0)return!1;const u=r.x,d=s.x,h=a.x,m=r.y,g=s.y,v=a.y,x=u<d?u<h?u:h:d<h?d:h,w=m<g?m<v?m:v:g<v?g:v,b=u>d?u>h?u:h:d>h?d:h,E=m>g?m>v?m:v:g>v?g:v,S=H_(x,w,e,t,i),C=H_(b,E,e,t,i);let P=n.prevZ,I=n.nextZ;for(;P&&P.z>=S&&I&&I.z<=C;){if(P.x>=x&&P.x<=b&&P.y>=w&&P.y<=E&&P!==r&&P!==a&&Zf(u,m,d,g,h,v,P.x,P.y)&&Yn(P.prev,P,P.next)>=0||(P=P.prevZ,I.x>=x&&I.x<=b&&I.y>=w&&I.y<=E&&I!==r&&I!==a&&Zf(u,m,d,g,h,v,I.x,I.y)&&Yn(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;P&&P.z>=S;){if(P.x>=x&&P.x<=b&&P.y>=w&&P.y<=E&&P!==r&&P!==a&&Zf(u,m,d,g,h,v,P.x,P.y)&&Yn(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;I&&I.z<=C;){if(I.x>=x&&I.x<=b&&I.y>=w&&I.y<=E&&I!==r&&I!==a&&Zf(u,m,d,g,h,v,I.x,I.y)&&Yn(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function cI(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!av(r,s)&&BT(r,i,i.next,s)&&gp(r,s)&&gp(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),vp(i),vp(i.next),i=n=s),i=i.next}while(i!==n);return ac(i)}function fI(n,e,t,i,r,s){let a=n;do{let u=a.next.next;for(;u!==a.prev;){if(a.i!==u.i&&xI(a,u)){let d=VT(a,u);a=ac(a,a.next),d=ac(d,d.next),mp(a,e,t,i,r,s,0),mp(d,e,t,i,r,s,0);return}u=u.next}a=a.next}while(a!==n)}function dI(n,e,t,i){const r=[];let s,a,u,d,h;for(s=0,a=e.length;s<a;s++)u=e[s]*i,d=s<a-1?e[s+1]*i:n.length,h=zT(n,u,d,i,!1),h===h.next&&(h.steiner=!0),r.push(_I(h));for(r.sort(hI),s=0;s<r.length;s++)t=pI(r[s],t);return t}function hI(n,e){return n.x-e.x}function pI(n,e){const t=mI(n,e);if(!t)return e;const i=VT(t,n);return ac(i,i.next),ac(t,t.next)}function mI(n,e){let t=e,i=-1/0,r;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const v=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=s&&v>i&&(i=v,r=t.x<t.next.x?t:t.next,v===s))return r}t=t.next}while(t!==e);if(!r)return null;const u=r,d=r.x,h=r.y;let m=1/0,g;t=r;do s>=t.x&&t.x>=d&&s!==t.x&&Zf(a<h?s:i,a,d,h,a<h?i:s,a,t.x,t.y)&&(g=Math.abs(a-t.y)/(s-t.x),gp(t,n)&&(g<m||g===m&&(t.x>r.x||t.x===r.x&&gI(r,t)))&&(r=t,m=g)),t=t.next;while(t!==u);return r}function gI(n,e){return Yn(n.prev,n,e.prev)<0&&Yn(e.next,n,n.next)<0}function vI(n,e,t,i){let r=n;do r.z===0&&(r.z=H_(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,yI(r)}function yI(n){let e,t,i,r,s,a,u,d,h=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,u=0,e=0;e<h&&(u++,i=i.nextZ,!!i);e++);for(d=h;u>0||d>0&&i;)u!==0&&(d===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,u--):(r=i,i=i.nextZ,d--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,h*=2}while(a>1);return n}function H_(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function _I(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Zf(n,e,t,i,r,s,a,u){return(r-a)*(e-u)>=(n-a)*(s-u)&&(n-a)*(i-u)>=(t-a)*(e-u)&&(t-a)*(s-u)>=(r-a)*(i-u)}function xI(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!SI(n,e)&&(gp(n,e)&&gp(e,n)&&wI(n,e)&&(Yn(n.prev,n,e.prev)||Yn(n,e.prev,e))||av(n,e)&&Yn(n.prev,n,n.next)>0&&Yn(e.prev,e,e.next)>0)}function Yn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function av(n,e){return n.x===e.x&&n.y===e.y}function BT(n,e,t,i){const r=mg(Yn(n,e,t)),s=mg(Yn(n,e,i)),a=mg(Yn(t,i,n)),u=mg(Yn(t,i,e));return!!(r!==s&&a!==u||r===0&&pg(n,t,e)||s===0&&pg(n,i,e)||a===0&&pg(t,n,i)||u===0&&pg(t,e,i))}function pg(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function mg(n){return n>0?1:n<0?-1:0}function SI(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&BT(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function gp(n,e){return Yn(n.prev,n,n.next)<0?Yn(n,e,n.next)>=0&&Yn(n,n.prev,e)>=0:Yn(n,e,n.prev)<0||Yn(n,n.next,e)<0}function wI(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function VT(n,e){const t=new W_(n.i,n.x,n.y),i=new W_(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function qS(n,e,t,i){const r=new W_(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function vp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function W_(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function MI(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class zo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return zo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];YS(e),KS(i,e);let a=e.length;t.forEach(YS);for(let d=0;d<t.length;d++)r.push(a),a+=t[d].length,KS(i,t[d]);const u=aI.triangulate(i,r);for(let d=0;d<u.length;d+=3)s.push(u.slice(d,d+3));return s}}function YS(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function KS(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class lv extends tn{constructor(e=new Qu([new De(.5,.5),new De(-.5,.5),new De(-.5,-.5),new De(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let u=0,d=e.length;u<d;u++){const h=e[u];a(h)}this.setAttribute("position",new Mt(r,3)),this.setAttribute("uv",new Mt(s,2)),this.computeVertexNormals();function a(u){const d=[],h=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,w=t.bevelSize!==void 0?t.bevelSize:x-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:EI;let P,I=!1,B,N,U,H;S&&(P=S.getSpacedPoints(m),I=!0,v=!1,B=S.computeFrenetFrames(m,!1),N=new q,U=new q,H=new q),v||(E=0,x=0,w=0,b=0);const O=u.extractPoints(h);let D=O.shape;const W=O.holes;if(!zo.isClockWise(D)){D=D.reverse();for(let Oe=0,Re=W.length;Oe<Re;Oe++){const j=W[Oe];zo.isClockWise(j)&&(W[Oe]=j.reverse())}}const ne=zo.triangulateShape(D,W),le=D;for(let Oe=0,Re=W.length;Oe<Re;Oe++){const j=W[Oe];D=D.concat(j)}function pe(Oe,Re,j){return Re||console.error("THREE.ExtrudeGeometry: vec does not exist"),Oe.clone().addScaledVector(Re,j)}const de=D.length,_e=ne.length;function F(Oe,Re,j){let pt,Ue,st;const Ge=Oe.x-Re.x,At=Oe.y-Re.y,qe=j.x-Oe.x,X=j.y-Oe.y,z=Ge*Ge+At*At,Q=Ge*X-At*qe;if(Math.abs(Q)>Number.EPSILON){const me=Math.sqrt(z),Pe=Math.sqrt(qe*qe+X*X),Ee=Re.x-At/me,et=Re.y+Ge/me,je=j.x-X/Pe,Je=j.y+qe/Pe,Ft=((je-Ee)*X-(Je-et)*qe)/(Ge*X-At*qe);pt=Ee+Ge*Ft-Oe.x,Ue=et+At*Ft-Oe.y;const Fe=pt*pt+Ue*Ue;if(Fe<=2)return new De(pt,Ue);st=Math.sqrt(Fe/2)}else{let me=!1;Ge>Number.EPSILON?qe>Number.EPSILON&&(me=!0):Ge<-Number.EPSILON?qe<-Number.EPSILON&&(me=!0):Math.sign(At)===Math.sign(X)&&(me=!0),me?(pt=-At,Ue=Ge,st=Math.sqrt(z)):(pt=Ge,Ue=At,st=Math.sqrt(z/2))}return new De(pt/st,Ue/st)}const J=[];for(let Oe=0,Re=le.length,j=Re-1,pt=Oe+1;Oe<Re;Oe++,j++,pt++)j===Re&&(j=0),pt===Re&&(pt=0),J[Oe]=F(le[Oe],le[j],le[pt]);const Z=[];let $,re=J.concat();for(let Oe=0,Re=W.length;Oe<Re;Oe++){const j=W[Oe];$=[];for(let pt=0,Ue=j.length,st=Ue-1,Ge=pt+1;pt<Ue;pt++,st++,Ge++)st===Ue&&(st=0),Ge===Ue&&(Ge=0),$[pt]=F(j[pt],j[st],j[Ge]);Z.push($),re=re.concat($)}for(let Oe=0;Oe<E;Oe++){const Re=Oe/E,j=x*Math.cos(Re*Math.PI/2),pt=w*Math.sin(Re*Math.PI/2)+b;for(let Ue=0,st=le.length;Ue<st;Ue++){const Ge=pe(le[Ue],J[Ue],pt);Ce(Ge.x,Ge.y,-j)}for(let Ue=0,st=W.length;Ue<st;Ue++){const Ge=W[Ue];$=Z[Ue];for(let At=0,qe=Ge.length;At<qe;At++){const X=pe(Ge[At],$[At],pt);Ce(X.x,X.y,-j)}}}const Ne=w+b;for(let Oe=0;Oe<de;Oe++){const Re=v?pe(D[Oe],re[Oe],Ne):D[Oe];I?(U.copy(B.normals[0]).multiplyScalar(Re.x),N.copy(B.binormals[0]).multiplyScalar(Re.y),H.copy(P[0]).add(U).add(N),Ce(H.x,H.y,H.z)):Ce(Re.x,Re.y,0)}for(let Oe=1;Oe<=m;Oe++)for(let Re=0;Re<de;Re++){const j=v?pe(D[Re],re[Re],Ne):D[Re];I?(U.copy(B.normals[Oe]).multiplyScalar(j.x),N.copy(B.binormals[Oe]).multiplyScalar(j.y),H.copy(P[Oe]).add(U).add(N),Ce(H.x,H.y,H.z)):Ce(j.x,j.y,g/m*Oe)}for(let Oe=E-1;Oe>=0;Oe--){const Re=Oe/E,j=x*Math.cos(Re*Math.PI/2),pt=w*Math.sin(Re*Math.PI/2)+b;for(let Ue=0,st=le.length;Ue<st;Ue++){const Ge=pe(le[Ue],J[Ue],pt);Ce(Ge.x,Ge.y,g+j)}for(let Ue=0,st=W.length;Ue<st;Ue++){const Ge=W[Ue];$=Z[Ue];for(let At=0,qe=Ge.length;At<qe;At++){const X=pe(Ge[At],$[At],pt);I?Ce(X.x,X.y+P[m-1].y,P[m-1].x+j):Ce(X.x,X.y,g+j)}}}he(),Te();function he(){const Oe=r.length/3;if(v){let Re=0,j=de*Re;for(let pt=0;pt<_e;pt++){const Ue=ne[pt];He(Ue[2]+j,Ue[1]+j,Ue[0]+j)}Re=m+E*2,j=de*Re;for(let pt=0;pt<_e;pt++){const Ue=ne[pt];He(Ue[0]+j,Ue[1]+j,Ue[2]+j)}}else{for(let Re=0;Re<_e;Re++){const j=ne[Re];He(j[2],j[1],j[0])}for(let Re=0;Re<_e;Re++){const j=ne[Re];He(j[0]+de*m,j[1]+de*m,j[2]+de*m)}}i.addGroup(Oe,r.length/3-Oe,0)}function Te(){const Oe=r.length/3;let Re=0;Ie(le,Re),Re+=le.length;for(let j=0,pt=W.length;j<pt;j++){const Ue=W[j];Ie(Ue,Re),Re+=Ue.length}i.addGroup(Oe,r.length/3-Oe,1)}function Ie(Oe,Re){let j=Oe.length;for(;--j>=0;){const pt=j;let Ue=j-1;Ue<0&&(Ue=Oe.length-1);for(let st=0,Ge=m+E*2;st<Ge;st++){const At=de*st,qe=de*(st+1),X=Re+pt+At,z=Re+Ue+At,Q=Re+Ue+qe,me=Re+pt+qe;gt(X,z,Q,me)}}}function Ce(Oe,Re,j){d.push(Oe),d.push(Re),d.push(j)}function He(Oe,Re,j){Ze(Oe),Ze(Re),Ze(j);const pt=r.length/3,Ue=C.generateTopUV(i,r,pt-3,pt-2,pt-1);Nt(Ue[0]),Nt(Ue[1]),Nt(Ue[2])}function gt(Oe,Re,j,pt){Ze(Oe),Ze(Re),Ze(pt),Ze(Re),Ze(j),Ze(pt);const Ue=r.length/3,st=C.generateSideWallUV(i,r,Ue-6,Ue-3,Ue-2,Ue-1);Nt(st[0]),Nt(st[1]),Nt(st[3]),Nt(st[1]),Nt(st[2]),Nt(st[3])}function Ze(Oe){r.push(d[Oe*3+0]),r.push(d[Oe*3+1]),r.push(d[Oe*3+2])}function Nt(Oe){s.push(Oe.x),s.push(Oe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return bI(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const u=t[e.shapes[s]];i.push(u)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new E0[r.type]().fromJSON(r)),new lv(i,e.options)}}const EI={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],u=e[i*3],d=e[i*3+1],h=e[r*3],m=e[r*3+1];return[new De(s,a),new De(u,d),new De(h,m)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],u=e[t*3+1],d=e[t*3+2],h=e[i*3],m=e[i*3+1],g=e[i*3+2],v=e[r*3],x=e[r*3+1],w=e[r*3+2],b=e[s*3],E=e[s*3+1],S=e[s*3+2];return Math.abs(u-m)<Math.abs(a-h)?[new De(a,1-d),new De(h,1-g),new De(v,1-w),new De(b,1-S)]:[new De(u,1-d),new De(m,1-g),new De(x,1-w),new De(E,1-S)]}};function bI(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class uv extends zl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uv(e.radius,e.detail)}}class Pp extends zl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pp(e.radius,e.detail)}}class gd extends tn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,u=Math.floor(i),d=Math.floor(r),h=u+1,m=d+1,g=e/u,v=t/d,x=[],w=[],b=[],E=[];for(let S=0;S<m;S++){const C=S*v-a;for(let P=0;P<h;P++){const I=P*g-s;w.push(I,-C,0),b.push(0,0,1),E.push(P/u),E.push(1-S/d)}}for(let S=0;S<d;S++)for(let C=0;C<u;C++){const P=C+h*S,I=C+h*(S+1),B=C+1+h*(S+1),N=C+1+h*S;x.push(P,I,N),x.push(I,B,N)}this.setIndex(x),this.setAttribute("position",new Mt(w,3)),this.setAttribute("normal",new Mt(b,3)),this.setAttribute("uv",new Mt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gd(e.width,e.height,e.widthSegments,e.heightSegments)}}class cv extends tn{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const u=[],d=[],h=[],m=[];let g=e;const v=(t-e)/r,x=new q,w=new De;for(let b=0;b<=r;b++){for(let E=0;E<=i;E++){const S=s+E/i*a;x.x=g*Math.cos(S),x.y=g*Math.sin(S),d.push(x.x,x.y,x.z),h.push(0,0,1),w.x=(x.x/t+1)/2,w.y=(x.y/t+1)/2,m.push(w.x,w.y)}g+=v}for(let b=0;b<r;b++){const E=b*(i+1);for(let S=0;S<i;S++){const C=S+E,P=C,I=C+i+1,B=C+i+2,N=C+1;u.push(P,I,N),u.push(I,B,N)}}this.setIndex(u),this.setAttribute("position",new Mt(d,3)),this.setAttribute("normal",new Mt(h,3)),this.setAttribute("uv",new Mt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class fv extends tn{constructor(e=new Qu([new De(0,.5),new De(-.5,-.5),new De(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let u=0,d=0;if(Array.isArray(e)===!1)h(e);else for(let m=0;m<e.length;m++)h(e[m]),this.addGroup(u,d,m),u+=d,d=0;this.setIndex(i),this.setAttribute("position",new Mt(r,3)),this.setAttribute("normal",new Mt(s,3)),this.setAttribute("uv",new Mt(a,2));function h(m){const g=r.length/3,v=m.extractPoints(t);let x=v.shape;const w=v.holes;zo.isClockWise(x)===!1&&(x=x.reverse());for(let E=0,S=w.length;E<S;E++){const C=w[E];zo.isClockWise(C)===!0&&(w[E]=C.reverse())}const b=zo.triangulateShape(x,w);for(let E=0,S=w.length;E<S;E++){const C=w[E];x=x.concat(C)}for(let E=0,S=x.length;E<S;E++){const C=x[E];r.push(C.x,C.y,0),s.push(0,0,1),a.push(C.x,C.y)}for(let E=0,S=b.length;E<S;E++){const C=b[E],P=C[0]+g,I=C[1]+g,B=C[2]+g;i.push(P,I,B),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return TI(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new fv(i,e.curveSegments)}}function TI(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Ip extends tn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(a+u,Math.PI);let h=0;const m=[],g=new q,v=new q,x=[],w=[],b=[],E=[];for(let S=0;S<=i;S++){const C=[],P=S/i;let I=0;S===0&&a===0?I=.5/t:S===i&&d===Math.PI&&(I=-.5/t);for(let B=0;B<=t;B++){const N=B/t;g.x=-e*Math.cos(r+N*s)*Math.sin(a+P*u),g.y=e*Math.cos(a+P*u),g.z=e*Math.sin(r+N*s)*Math.sin(a+P*u),w.push(g.x,g.y,g.z),v.copy(g).normalize(),b.push(v.x,v.y,v.z),E.push(N+I,1-P),C.push(h++)}m.push(C)}for(let S=0;S<i;S++)for(let C=0;C<t;C++){const P=m[S][C+1],I=m[S][C],B=m[S+1][C],N=m[S+1][C+1];(S!==0||a>0)&&x.push(P,I,N),(S!==i-1||d<Math.PI)&&x.push(I,B,N)}this.setIndex(x),this.setAttribute("position",new Mt(w,3)),this.setAttribute("normal",new Mt(b,3)),this.setAttribute("uv",new Mt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ip(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class dv extends zl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dv(e.radius,e.detail)}}class hv extends tn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],u=[],d=[],h=[],m=new q,g=new q,v=new q;for(let x=0;x<=i;x++)for(let w=0;w<=r;w++){const b=w/r*s,E=x/i*Math.PI*2;g.x=(e+t*Math.cos(E))*Math.cos(b),g.y=(e+t*Math.cos(E))*Math.sin(b),g.z=t*Math.sin(E),u.push(g.x,g.y,g.z),m.x=e*Math.cos(b),m.y=e*Math.sin(b),v.subVectors(g,m).normalize(),d.push(v.x,v.y,v.z),h.push(w/r),h.push(x/i)}for(let x=1;x<=i;x++)for(let w=1;w<=r;w++){const b=(r+1)*x+w-1,E=(r+1)*(x-1)+w-1,S=(r+1)*(x-1)+w,C=(r+1)*x+w;a.push(b,E,C),a.push(E,S,C)}this.setIndex(a),this.setAttribute("position",new Mt(u,3)),this.setAttribute("normal",new Mt(d,3)),this.setAttribute("uv",new Mt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class pv extends tn{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const u=[],d=[],h=[],m=[],g=new q,v=new q,x=new q,w=new q,b=new q,E=new q,S=new q;for(let P=0;P<=i;++P){const I=P/i*s*Math.PI*2;C(I,s,a,e,x),C(I+.01,s,a,e,w),E.subVectors(w,x),S.addVectors(w,x),b.crossVectors(E,S),S.crossVectors(b,E),b.normalize(),S.normalize();for(let B=0;B<=r;++B){const N=B/r*Math.PI*2,U=-t*Math.cos(N),H=t*Math.sin(N);g.x=x.x+(U*S.x+H*b.x),g.y=x.y+(U*S.y+H*b.y),g.z=x.z+(U*S.z+H*b.z),d.push(g.x,g.y,g.z),v.subVectors(g,x).normalize(),h.push(v.x,v.y,v.z),m.push(P/i),m.push(B/r)}}for(let P=1;P<=i;P++)for(let I=1;I<=r;I++){const B=(r+1)*(P-1)+(I-1),N=(r+1)*P+(I-1),U=(r+1)*P+I,H=(r+1)*(P-1)+I;u.push(B,N,H),u.push(N,U,H)}this.setIndex(u),this.setAttribute("position",new Mt(d,3)),this.setAttribute("normal",new Mt(h,3)),this.setAttribute("uv",new Mt(m,2));function C(P,I,B,N,U){const H=Math.cos(P),O=Math.sin(P),D=B/I*P,W=Math.cos(D);U.x=N*(2+W)*.5*H,U.y=N*(2+W)*O*.5,U.z=N*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class mv extends tn{constructor(e=new $x(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const u=new q,d=new q,h=new De;let m=new q;const g=[],v=[],x=[],w=[];b(),this.setIndex(w),this.setAttribute("position",new Mt(g,3)),this.setAttribute("normal",new Mt(v,3)),this.setAttribute("uv",new Mt(x,2));function b(){for(let P=0;P<t;P++)E(P);E(s===!1?t:0),C(),S()}function E(P){m=e.getPointAt(P/t,m);const I=a.normals[P],B=a.binormals[P];for(let N=0;N<=r;N++){const U=N/r*Math.PI*2,H=Math.sin(U),O=-Math.cos(U);d.x=O*I.x+H*B.x,d.y=O*I.y+H*B.y,d.z=O*I.z+H*B.z,d.normalize(),v.push(d.x,d.y,d.z),u.x=m.x+i*d.x,u.y=m.y+i*d.y,u.z=m.z+i*d.z,g.push(u.x,u.y,u.z)}}function S(){for(let P=1;P<=t;P++)for(let I=1;I<=r;I++){const B=(r+1)*(P-1)+(I-1),N=(r+1)*P+(I-1),U=(r+1)*P+I,H=(r+1)*(P-1)+I;w.push(B,N,H),w.push(N,U,H)}}function C(){for(let P=0;P<=t;P++)for(let I=0;I<=r;I++)h.x=P/t,h.y=I/r,x.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new mv(new E0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class HT extends tn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new q,s=new q;if(e.index!==null){const a=e.attributes.position,u=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:u.count,materialIndex:0}]);for(let h=0,m=d.length;h<m;++h){const g=d[h],v=g.start,x=g.count;for(let w=v,b=v+x;w<b;w+=3)for(let E=0;E<3;E++){const S=u.getX(w+E),C=u.getX(w+(E+1)%3);r.fromBufferAttribute(a,S),s.fromBufferAttribute(a,C),ZS(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let u=0,d=a.count/3;u<d;u++)for(let h=0;h<3;h++){const m=3*u+h,g=3*u+(h+1)%3;r.fromBufferAttribute(a,m),s.fromBufferAttribute(a,g),ZS(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Mt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ZS(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var JS=Object.freeze({__proto__:null,BoxGeometry:cc,CapsuleGeometry:iv,CircleGeometry:rv,ConeGeometry:sv,CylinderGeometry:md,DodecahedronGeometry:ov,EdgesGeometry:FT,ExtrudeGeometry:lv,IcosahedronGeometry:uv,LatheGeometry:Rp,OctahedronGeometry:Pp,PlaneGeometry:gd,PolyhedronGeometry:zl,RingGeometry:cv,ShapeGeometry:fv,SphereGeometry:Ip,TetrahedronGeometry:dv,TorusGeometry:hv,TorusKnotGeometry:pv,TubeGeometry:mv,WireframeGeometry:HT});class WT extends hr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ct(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class GT extends po{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class jx extends hr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ct(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ul,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $T extends jx{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new De(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $t(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ct(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ct(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ct(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class XT extends hr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ct(16777215),this.specular=new ct(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ul,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qr,this.combine=Mp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jT extends hr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ct(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ul,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qT extends hr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ul,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class YT extends hr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ul,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qr,this.combine=Mp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qx extends hr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=oT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Yx extends hr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class KT extends hr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ct(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ul,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZT extends Nr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ju(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function JT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function QT(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function G_(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const u=t[s]*e;for(let d=0;d!==e;++d)r[a++]=n[u+d]}return r}function Kx(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function AI(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let d=0;d<s.tracks.length;++d){const h=s.tracks[d],m=h.getValueSize(),g=[],v=[];for(let x=0;x<h.times.length;++x){const w=h.times[x]*r;if(!(w<t||w>=i)){g.push(h.times[x]);for(let b=0;b<m;++b)v.push(h.values[x*m+b])}}g.length!==0&&(h.times=ju(g,h.times.constructor),h.values=ju(v,h.values.constructor),a.push(h))}s.tracks=a;let u=1/0;for(let d=0;d<s.tracks.length;++d)u>s.tracks[d].times[0]&&(u=s.tracks[d].times[0]);for(let d=0;d<s.tracks.length;++d)s.tracks[d].shift(-1*u);return s.resetDuration(),s}function CI(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const u=t.tracks[a],d=u.ValueTypeName;if(d==="bool"||d==="string")continue;const h=n.tracks.find(function(S){return S.name===u.name&&S.ValueTypeName===d});if(h===void 0)continue;let m=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const x=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=x/3);const w=u.times.length-1;let b;if(s<=u.times[0]){const S=m,C=g-m;b=u.values.slice(S,C)}else if(s>=u.times[w]){const S=w*g+m,C=S+g-m;b=u.values.slice(S,C)}else{const S=u.createInterpolant(),C=m,P=g-m;S.evaluate(s),b=S.resultBuffer.slice(C,P)}d==="quaternion"&&new Ri().fromArray(b).normalize().conjugate().toArray(b);const E=h.times.length;for(let S=0;S<E;++S){const C=S*x+v;if(d==="quaternion")Ri.multiplyQuaternionsFlat(h.values,C,b,0,h.values,C);else{const P=x-v*2;for(let I=0;I<P;++I)h.values[C+I]-=b[I]}}}return n.blendMode=Ix,n}const RI={convertArray:ju,isTypedArray:JT,getKeyframeOrder:QT,sortedArray:G_,flattenJSON:Kx,subclip:AI,makeClipAdditive:CI};class Lp{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let u=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const u=t[1];e<u&&(i=2,s=u);for(let d=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const u=i+a>>>1;e<t[u]?a=u:i=u+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class eA extends Lp{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Gu,endingEnd:Gu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,u=r[s],d=r[a];if(u===void 0)switch(this.getSettings_().endingStart){case $u:s=e,u=2*t-i;break;case up:s=r.length-2,u=t+r[s]-r[s+1];break;default:s=e,u=i}if(d===void 0)switch(this.getSettings_().endingEnd){case $u:a=e,d=2*i-t;break;case up:a=1,d=i+r[1]-r[0];break;default:a=e-1,d=t}const h=(i-t)*.5,m=this.valueSize;this._weightPrev=h/(t-u),this._weightNext=h/(d-i),this._offsetPrev=s*m,this._offsetNext=a*m}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,u=this.valueSize,d=e*u,h=d-u,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,x=this._weightNext,w=(i-t)/(r-t),b=w*w,E=b*w,S=-v*E+2*v*b-v*w,C=(1+v)*E+(-1.5-2*v)*b+(-.5+v)*w+1,P=(-1-x)*E+(1.5+x)*b+.5*w,I=x*E-x*b;for(let B=0;B!==u;++B)s[B]=S*a[m+B]+C*a[h+B]+P*a[d+B]+I*a[g+B];return s}}class Zx extends Lp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,u=this.valueSize,d=e*u,h=d-u,m=(i-t)/(r-t),g=1-m;for(let v=0;v!==u;++v)s[v]=a[h+v]*g+a[d+v]*m;return s}}class tA extends Lp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class vo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ju(t,this.TimeBufferType),this.values=ju(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:ju(e.times,Array),values:ju(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new tA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Zx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new eA(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case lp:t=this.InterpolantFactoryMethodDiscrete;break;case S0:t=this.InterpolantFactoryMethodLinear;break;case Og:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lp;case this.InterpolantFactoryMethodLinear:return S0;case this.InterpolantFactoryMethodSmooth:return Og}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const u=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*u,a*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let u=0;u!==s;u++){const d=i[u];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,d),e=!1;break}if(a!==null&&a>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,d,a),e=!1;break}a=d}if(r!==void 0&&JT(r))for(let u=0,d=r.length;u!==d;++u){const h=r[u];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Og,s=e.length-1;let a=1;for(let u=1;u<s;++u){let d=!1;const h=e[u],m=e[u+1];if(h!==m&&(u!==1||h!==e[0]))if(r)d=!0;else{const g=u*i,v=g-i,x=g+i;for(let w=0;w!==i;++w){const b=t[g+w];if(b!==t[v+w]||b!==t[x+w]){d=!0;break}}}if(d){if(u!==a){e[a]=e[u];const g=u*i,v=a*i;for(let x=0;x!==i;++x)t[v+x]=t[g+x]}++a}}if(s>0){e[a]=e[s];for(let u=s*i,d=a*i,h=0;h!==i;++h)t[d+h]=t[u+h];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}vo.prototype.TimeBufferType=Float32Array;vo.prototype.ValueBufferType=Float32Array;vo.prototype.DefaultInterpolation=S0;class fc extends vo{constructor(e,t,i){super(e,t,i)}}fc.prototype.ValueTypeName="bool";fc.prototype.ValueBufferType=Array;fc.prototype.DefaultInterpolation=lp;fc.prototype.InterpolantFactoryMethodLinear=void 0;fc.prototype.InterpolantFactoryMethodSmooth=void 0;class Jx extends vo{}Jx.prototype.ValueTypeName="color";class yp extends vo{}yp.prototype.ValueTypeName="number";class nA extends Lp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,u=this.valueSize,d=(i-t)/(r-t);let h=e*u;for(let m=h+u;h!==m;h+=4)Ri.slerpFlat(s,0,a,h-u,a,h,d);return s}}class Dp extends vo{InterpolantFactoryMethodLinear(e){return new nA(this.times,this.values,this.getValueSize(),e)}}Dp.prototype.ValueTypeName="quaternion";Dp.prototype.InterpolantFactoryMethodSmooth=void 0;class dc extends vo{constructor(e,t,i){super(e,t,i)}}dc.prototype.ValueTypeName="string";dc.prototype.ValueBufferType=Array;dc.prototype.DefaultInterpolation=lp;dc.prototype.InterpolantFactoryMethodLinear=void 0;dc.prototype.InterpolantFactoryMethodSmooth=void 0;class _p extends vo{}_p.prototype.ValueTypeName="vector";class xp{constructor(e="",t=-1,i=[],r=q0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ms(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,u=i.length;a!==u;++a)t.push(II(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(vo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let u=0;u<s;u++){let d=[],h=[];d.push((u+s-1)%s,u,(u+1)%s),h.push(0,1,0);const m=QT(d);d=G_(d,1,m),h=G_(h,1,m),!r&&d[0]===0&&(d.push(s),h.push(h[0])),a.push(new yp(".morphTargetInfluences["+t[u].name+"]",d,h).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let u=0,d=e.length;u<d;u++){const h=e[u],m=h.name.match(s);if(m&&m.length>1){const g=m[1];let v=r[g];v||(r[g]=v=[]),v.push(h)}}const a=[];for(const u in r)a.push(this.CreateFromMorphTargetSequence(u,r[u],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,v,x,w,b){if(x.length!==0){const E=[],S=[];Kx(x,E,S,w),E.length!==0&&b.push(new g(v,E,S))}},r=[],s=e.name||"default",a=e.fps||30,u=e.blendMode;let d=e.length||-1;const h=e.hierarchy||[];for(let g=0;g<h.length;g++){const v=h[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const x={};let w;for(w=0;w<v.length;w++)if(v[w].morphTargets)for(let b=0;b<v[w].morphTargets.length;b++)x[v[w].morphTargets[b]]=-1;for(const b in x){const E=[],S=[];for(let C=0;C!==v[w].morphTargets.length;++C){const P=v[w];E.push(P.time),S.push(P.morphTarget===b?1:0)}r.push(new yp(".morphTargetInfluence["+b+"]",E,S))}d=x.length*a}else{const x=".bones["+t[g].name+"]";i(_p,x+".position",v,"pos",r),i(Dp,x+".quaternion",v,"rot",r),i(_p,x+".scale",v,"scl",r)}}return r.length===0?null:new this(s,d,r,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function PI(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yp;case"vector":case"vector2":case"vector3":case"vector4":return _p;case"color":return Jx;case"quaternion":return Dp;case"bool":case"boolean":return fc;case"string":return dc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function II(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=PI(n.type);if(n.times===void 0){const t=[],i=[];Kx(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Oa={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Qx{constructor(e,t,i){const r=this;let s=!1,a=0,u=0,d;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){u++,s===!1&&r.onStart!==void 0&&r.onStart(m,a,u),s=!0},this.itemEnd=function(m){a++,r.onProgress!==void 0&&r.onProgress(m,a,u),a===u&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return d?d(m):m},this.setURLModifier=function(m){return d=m,this},this.addHandler=function(m,g){return h.push(m,g),this},this.removeHandler=function(m){const g=h.indexOf(m);return g!==-1&&h.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=h.length;g<v;g+=2){const x=h[g],w=h[g+1];if(x.global&&(x.lastIndex=0),x.test(m))return w}return null}}}const iA=new Qx;class es{constructor(e){this.manager=e!==void 0?e:iA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}es.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ra={};class LI extends Error{constructor(e,t){super(e),this.response=t}}class Ha extends es{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Oa.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ra[e]!==void 0){Ra[e].push({onLoad:t,onProgress:i,onError:r});return}Ra[e]=[],Ra[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,d=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const m=Ra[e],g=h.body.getReader(),v=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),x=v?parseInt(v):0,w=x!==0;let b=0;const E=new ReadableStream({start(S){C();function C(){g.read().then(({done:P,value:I})=>{if(P)S.close();else{b+=I.byteLength;const B=new ProgressEvent("progress",{lengthComputable:w,loaded:b,total:x});for(let N=0,U=m.length;N<U;N++){const H=m[N];H.onProgress&&H.onProgress(B)}S.enqueue(I),C()}},P=>{S.error(P)})}}});return new Response(E)}else throw new LI(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(d){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return h.json();default:if(u===void 0)return h.text();{const g=/charset="?([^;"\s]*)"?/i.exec(u),v=g&&g[1]?g[1].toLowerCase():void 0,x=new TextDecoder(v);return h.arrayBuffer().then(w=>x.decode(w))}}}).then(h=>{Oa.add(e,h);const m=Ra[e];delete Ra[e];for(let g=0,v=m.length;g<v;g++){const x=m[g];x.onLoad&&x.onLoad(h)}}).catch(h=>{const m=Ra[e];if(m===void 0)throw this.manager.itemError(e),h;delete Ra[e];for(let g=0,v=m.length;g<v;g++){const x=m[g];x.onError&&x.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class DI extends es{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ha(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=xp.parse(e[i]);t.push(r)}return t}}class NI extends es{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],u=new tv,d=new Ha(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(s.withCredentials);let h=0;function m(g){d.load(e[g],function(v){const x=s.parse(v,!0);a[g]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},h+=1,h===6&&(x.mipmapCount===1&&(u.minFilter=Ai),u.image=a,u.format=x.format,u.needsUpdate=!0,t&&t(u))},i,r)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)m(g);else d.load(e,function(g){const v=s.parse(g,!0);if(v.isCubemap){const x=v.mipmaps.length/v.mipmapCount;for(let w=0;w<x;w++){a[w]={mipmaps:[]};for(let b=0;b<v.mipmapCount;b++)a[w].mipmaps.push(v.mipmaps[w*v.mipmapCount+b]),a[w].format=v.format,a[w].width=v.width,a[w].height=v.height}u.image=a}else u.image.width=v.width,u.image.height=v.height,u.mipmaps=v.mipmaps;v.mipmapCount===1&&(u.minFilter=Ai),u.format=v.format,u.needsUpdate=!0,t&&t(u)},i,r);return u}}class Sp extends es{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Oa.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const u=hp("img");function d(){m(),Oa.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(g){m(),r&&r(g),s.manager.itemError(e),s.manager.itemEnd(e)}function m(){u.removeEventListener("load",d,!1),u.removeEventListener("error",h,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),s.manager.itemStart(e),u.src=e,u}}class OI extends es{constructor(e){super(e)}load(e,t,i,r){const s=new Ap;s.colorSpace=Rr;const a=new Sp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let u=0;function d(h){a.load(e[h],function(m){s.images[h]=m,u++,u===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let h=0;h<e.length;++h)d(h);return s}}class kI extends es{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Fo,u=new Ha(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(s.withCredentials),u.load(e,function(d){let h;try{h=s.parse(d)}catch(m){if(r!==void 0)r(m);else{console.error(m);return}}h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:Ls,a.wrapT=h.wrapT!==void 0?h.wrapT:Ls,a.magFilter=h.magFilter!==void 0?h.magFilter:Ai,a.minFilter=h.minFilter!==void 0?h.minFilter:Ai,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(a.colorSpace=h.colorSpace),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=ko),h.mipmapCount===1&&(a.minFilter=Ai),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h)},i,r),a}}class ld extends es{constructor(e){super(e)}load(e,t,i,r){const s=new Wn,a=new Sp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(u){s.image=u,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Bl extends yn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ct(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class rA extends Bl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ct(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Dy=new Ut,QS=new q,ew=new q;class e1{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new De(512,512),this.map=null,this.mapPass=null,this.matrix=new Ut,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cp,this._frameExtents=new De(1,1),this._viewportCount=1,this._viewports=[new un(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;QS.setFromMatrixPosition(e.matrixWorld),t.position.copy(QS),ew.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ew),t.updateMatrixWorld(),Dy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Dy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class UI extends e1{constructor(){super(new Bi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=sd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class sA extends Bl{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new UI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tw=new Ut,Rh=new q,Ny=new q;class FI extends e1{constructor(){super(new Bi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new De(4,2),this._viewportCount=6,this._viewports=[new un(2,1,1,1),new un(0,1,1,1),new un(3,1,1,1),new un(1,1,1,1),new un(3,0,1,1),new un(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Rh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Rh),Ny.copy(i.position),Ny.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Ny),i.updateMatrixWorld(),r.makeTranslation(-Rh.x,-Rh.y,-Rh.z),tw.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tw)}}class oA extends Bl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new FI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Np extends Tp{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,u=r+t,d=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,a=s+h*this.view.width,u-=m*this.view.offsetY,d=u-m*this.view.height}this.projectionMatrix.makeOrthographic(s,a,u,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class zI extends e1{constructor(){super(new Np(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class aA extends Bl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.shadow=new zI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class lA extends Bl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class uA extends Bl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class cA{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class fA extends Bl{constructor(e=new cA,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class gv extends es{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new Ha(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ct().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new ct().setHex(a.value);break;case"v2":r.uniforms[s].value=new De().fromArray(a.value);break;case"v3":r.uniforms[s].value=new q().fromArray(a.value);break;case"v4":r.uniforms[s].value=new un().fromArray(a.value);break;case"m3":r.uniforms[s].value=new jt().fromArray(a.value);break;case"m4":r.uniforms[s].value=new Ut().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new De().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new De().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return gv.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:WT,SpriteMaterial:Ux,RawShaderMaterial:GT,ShaderMaterial:po,PointsMaterial:zx,MeshPhysicalMaterial:$T,MeshStandardMaterial:jx,MeshPhongMaterial:XT,MeshToonMaterial:jT,MeshNormalMaterial:qT,MeshLambertMaterial:YT,MeshDepthMaterial:qx,MeshDistanceMaterial:Yx,MeshBasicMaterial:Fl,MeshMatcapMaterial:KT,LineDashedMaterial:ZT,LineBasicMaterial:Nr,Material:hr};return new t[e]}}class $_{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class dA extends tn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hA extends es{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ha(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(x,w){if(t[w]!==void 0)return t[w];const E=x.interleavedBuffers[w],S=s(x,E.buffer),C=Yf(E.type,S),P=new Q0(C,E.stride);return P.uuid=E.uuid,t[w]=P,P}function s(x,w){if(i[w]!==void 0)return i[w];const E=x.arrayBuffers[w],S=new Uint32Array(E).buffer;return i[w]=S,S}const a=e.isInstancedBufferGeometry?new dA:new tn,u=e.data.index;if(u!==void 0){const x=Yf(u.type,u.array);a.setIndex(new Cn(x,1))}const d=e.data.attributes;for(const x in d){const w=d[x];let b;if(w.isInterleavedBufferAttribute){const E=r(e.data,w.data);b=new oc(E,w.itemSize,w.offset,w.normalized)}else{const E=Yf(w.type,w.array),S=w.isInstancedBufferAttribute?ad:Cn;b=new S(E,w.itemSize,w.normalized)}w.name!==void 0&&(b.name=w.name),w.usage!==void 0&&b.setUsage(w.usage),a.setAttribute(x,b)}const h=e.data.morphAttributes;if(h)for(const x in h){const w=h[x],b=[];for(let E=0,S=w.length;E<S;E++){const C=w[E];let P;if(C.isInterleavedBufferAttribute){const I=r(e.data,C.data);P=new oc(I,C.itemSize,C.offset,C.normalized)}else{const I=Yf(C.type,C.array);P=new Cn(I,C.itemSize,C.normalized)}C.name!==void 0&&(P.name=C.name),b.push(P)}a.morphAttributes[x]=b}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let x=0,w=g.length;x!==w;++x){const b=g[x];a.addGroup(b.start,b.count,b.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const x=new q;v.center!==void 0&&x.fromArray(v.center),a.boundingSphere=new dr(x,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class BI extends es{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?$_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const u=new Ha(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){let h=null;try{h=JSON.parse(d)}catch(g){r!==void 0&&r(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?$_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ha(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),u=JSON.parse(a),d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),u=this.parseTextures(e.textures,a),d=this.parseMaterials(e.materials,u),h=this.parseObject(e.object,s,d,u,i),m=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,m),this.bindLightTargets(h),t!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),u=this.parseMaterials(e.materials,a),d=this.parseObject(e.object,r,u,a,t),h=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,h),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Qu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const u=new ev().fromJSON(e[s],r);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new hA;for(let s=0,a=e.length;s<a;s++){let u;const d=e[s];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=r.parse(d);break;default:d.type in JS?u=JS[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),d.userData!==void 0&&(u.userData=d.userData),i[d.uuid]=u}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new gv;s.setTextures(t);for(let a=0,u=e.length;a<u;a++){const d=e[a];i[d.uuid]===void 0&&(i[d.uuid]=s.parse(d)),r[d.uuid]=i[d.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=xp.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(d){return i.manager.itemStart(d),s.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function u(d){if(typeof d=="string"){const h=d,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return a(m)}else return d.data?{data:Yf(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new Qx(t);s=new Sp(d),s.setCrossOrigin(this.crossOrigin);for(let h=0,m=e.length;h<m;h++){const g=e[h],v=g.url;if(Array.isArray(v)){const x=[];for(let w=0,b=v.length;w<b;w++){const E=v[w],S=u(E);S!==null&&(S instanceof HTMLImageElement?x.push(S):x.push(new Fo(S.data,S.width,S.height)))}r[g.uuid]=new Xu(x)}else{const x=u(g.url);r[g.uuid]=new Xu(x)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const u=a,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await r.loadAsync(d)}else return a.data?{data:Yf(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new Sp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,u=e.length;a<u;a++){const d=e[a],h=d.url;if(Array.isArray(h)){const m=[];for(let g=0,v=h.length;g<v;g++){const x=h[g],w=await s(x);w!==null&&(w instanceof HTMLImageElement?m.push(w):m.push(new Fo(w.data,w.width,w.height)))}i[d.uuid]=new Xu(m)}else{const m=await s(d.url);i[d.uuid]=new Xu(m)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const u=e[s];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const d=t[u.image],h=d.data;let m;Array.isArray(h)?(m=new Ap,h.length===6&&(m.needsUpdate=!0)):(h&&h.data?m=new Fo:m=new Wn,h&&(m.needsUpdate=!0)),m.source=d,m.uuid=u.uuid,u.name!==void 0&&(m.name=u.name),u.mapping!==void 0&&(m.mapping=i(u.mapping,VI)),u.channel!==void 0&&(m.channel=u.channel),u.offset!==void 0&&m.offset.fromArray(u.offset),u.repeat!==void 0&&m.repeat.fromArray(u.repeat),u.center!==void 0&&m.center.fromArray(u.center),u.rotation!==void 0&&(m.rotation=u.rotation),u.wrap!==void 0&&(m.wrapS=i(u.wrap[0],nw),m.wrapT=i(u.wrap[1],nw)),u.format!==void 0&&(m.format=u.format),u.internalFormat!==void 0&&(m.internalFormat=u.internalFormat),u.type!==void 0&&(m.type=u.type),u.colorSpace!==void 0&&(m.colorSpace=u.colorSpace),u.minFilter!==void 0&&(m.minFilter=i(u.minFilter,iw)),u.magFilter!==void 0&&(m.magFilter=i(u.magFilter,iw)),u.anisotropy!==void 0&&(m.anisotropy=u.anisotropy),u.flipY!==void 0&&(m.flipY=u.flipY),u.generateMipmaps!==void 0&&(m.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(m.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(m.compareFunction=u.compareFunction),u.userData!==void 0&&(m.userData=u.userData),r[u.uuid]=m}return r}parseObject(e,t,i,r,s){let a;function u(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function d(v){if(v!==void 0){if(Array.isArray(v)){const x=[];for(let w=0,b=v.length;w<b;w++){const E=v[w];i[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),x.push(i[E])}return x}return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),i[v]}}function h(v){return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),r[v]}let m,g;switch(e.type){case"Scene":a=new kx,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new ct(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new J0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Z0(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Bi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Np(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new lA(e.color,e.intensity);break;case"DirectionalLight":a=new aA(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new oA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new uA(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new sA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new rA(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new fA().fromJSON(e);break;case"SkinnedMesh":m=u(e.geometry),g=d(e.material),a=new AT(m,g),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":m=u(e.geometry),g=d(e.material),a=new mi(m,g);break;case"InstancedMesh":m=u(e.geometry),g=d(e.material);const v=e.count,x=e.instanceMatrix,w=e.instanceColor;a=new CT(m,g,v),a.instanceMatrix=new ad(new Float32Array(x.array),16),w!==void 0&&(a.instanceColor=new ad(new Float32Array(w.array),w.itemSize));break;case"BatchedMesh":m=u(e.geometry),g=d(e.material),a=new RT(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(b=>{const E=new Dr;E.min.fromArray(b.boxMin),E.max.fromArray(b.boxMax);const S=new dr;return S.radius=b.sphereRadius,S.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:E,sphereInitialized:b.sphereInitialized,sphere:S}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=h(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=h(e.colorsTexture.uuid));break;case"LOD":a=new TT;break;case"Line":a=new Ol(u(e.geometry),d(e.material));break;case"LineLoop":a=new PT(u(e.geometry),d(e.material));break;case"LineSegments":a=new Go(u(e.geometry),d(e.material));break;case"PointCloud":case"Points":a=new IT(u(e.geometry),d(e.material));break;case"Sprite":a=new bT(d(e.material));break;case"Group":a=new Kf;break;case"Bone":a=new Fx;break;default:a=new yn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let x=0;x<v.length;x++)a.add(this.parseObject(v[x],t,i,r,s))}if(e.animations!==void 0){const v=e.animations;for(let x=0;x<v.length;x++){const w=v[x];a.animations.push(s[w])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let x=0;x<v.length;x++){const w=v[x],b=a.getObjectByProperty("uuid",w.object);b!==void 0&&a.addLevel(b,w.distance,w.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new yn}})}}const VI={UVMapping:V0,CubeReflectionMapping:Ba,CubeRefractionMapping:Nl,EquirectangularReflectionMapping:rp,EquirectangularRefractionMapping:sp,CubeUVReflectionMapping:dd},nw={RepeatWrapping:op,ClampToEdgeWrapping:Ls,MirroredRepeatWrapping:ap},iw={NearestFilter:Ji,NearestMipmapNearestFilter:Sx,NearestMipmapLinearFilter:qf,LinearFilter:Ai,LinearMipmapNearestFilter:$h,LinearMipmapLinearFilter:ko};class HI extends es{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Oa.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{r&&r(h)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const d=fetch(e,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return Oa.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),Oa.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Oa.add(e,d),s.manager.itemStart(e)}}let gg;class t1{static getContext(){return gg===void 0&&(gg=new(window.AudioContext||window.webkitAudioContext)),gg}static setContext(e){gg=e}}class WI extends es{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ha(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(d){try{const h=d.slice(0);t1.getContext().decodeAudioData(h,function(g){t(g)}).catch(u)}catch(h){u(h)}},i,r);function u(d){r?r(d):console.error(d),s.manager.itemError(e)}}}const rw=new Ut,sw=new Ut,Lu=new Ut;class GI{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Bi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Bi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Lu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(Zu*t.fov*.5)/t.zoom;let u,d;sw.elements[12]=-r,rw.elements[12]=r,u=-a*t.aspect+s,d=a*t.aspect+s,Lu.elements[0]=2*t.near/(d-u),Lu.elements[8]=(d+u)/(d-u),this.cameraL.projectionMatrix.copy(Lu),u=-a*t.aspect-s,d=a*t.aspect-s,Lu.elements[0]=2*t.near/(d-u),Lu.elements[8]=(d+u)/(d-u),this.cameraR.projectionMatrix.copy(Lu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(sw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(rw)}}class pA extends Bi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class n1{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ow(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ow();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ow(){return performance.now()}const Du=new q,aw=new Ri,$I=new q,Nu=new q;class XI extends yn{constructor(){super(),this.type="AudioListener",this.context=t1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new n1}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Du,aw,$I),Nu.set(0,0,-1).applyQuaternion(aw),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Du.x,r),t.positionY.linearRampToValueAtTime(Du.y,r),t.positionZ.linearRampToValueAtTime(Du.z,r),t.forwardX.linearRampToValueAtTime(Nu.x,r),t.forwardY.linearRampToValueAtTime(Nu.y,r),t.forwardZ.linearRampToValueAtTime(Nu.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Du.x,Du.y,Du.z),t.setOrientation(Nu.x,Nu.y,Nu.z,i.x,i.y,i.z)}}class mA extends yn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Ou=new q,lw=new Ri,jI=new q,ku=new q;class qI extends mA{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ou,lw,jI),ku.set(0,0,1).applyQuaternion(lw);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ou.x,i),t.positionY.linearRampToValueAtTime(Ou.y,i),t.positionZ.linearRampToValueAtTime(Ou.z,i),t.orientationX.linearRampToValueAtTime(ku.x,i),t.orientationY.linearRampToValueAtTime(ku.y,i),t.orientationZ.linearRampToValueAtTime(ku.z,i)}else t.setPosition(Ou.x,Ou.y,Ou.z),t.setOrientation(ku.x,ku.y,ku.z)}}class YI{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class gA{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let u=0;u!==r;++u)i[s+u]=i[u];a=t}else{a+=t;const u=t/a;this._mixBufferRegion(i,s,0,u,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const d=t*this._origIndex;this._mixBufferRegion(i,r,d,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let d=t,h=t+t;d!==h;++d)if(i[d]!==i[d+t]){u.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Ri.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;Ri.multiplyQuaternionsFlat(e,a,e,t,e,i),Ri.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let u=0;u!==s;++u){const d=t+u;e[d]=e[d]*a+e[i+u]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const u=t+a;e[u]=e[u]+e[i+a]*r}}}const i1="\\[\\]\\.:\\/",KI=new RegExp("["+i1+"]","g"),r1="[^"+i1+"]",ZI="[^"+i1.replace("\\.","")+"]",JI=/((?:WC+[\/:])*)/.source.replace("WC",r1),QI=/(WCOD+)?/.source.replace("WCOD",ZI),e3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",r1),t3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",r1),n3=new RegExp("^"+JI+QI+e3+t3+"$"),i3=["material","materials","bones","map"];class r3{constructor(e,t,i){const r=i||vn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class vn{constructor(e,t,i){this.path=t,this.parsedPath=i||vn.parseTrackName(t),this.node=vn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new vn.Composite(e,t,i):new vn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(KI,"")}static parseTrackName(e){const t=n3.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);i3.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const u=s[a];if(u.name===t||u.uuid===t)return u;const d=i(u.children);if(d)return d}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=vn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===h){h=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[r];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(d=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vn.Composite=r3;vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vn.prototype.GetterByBindingType=[vn.prototype._getValue_direct,vn.prototype._getValue_array,vn.prototype._getValue_arrayElement,vn.prototype._getValue_toArray];vn.prototype.SetterByBindingTypeAndVersioning=[[vn.prototype._setValue_direct,vn.prototype._setValue_direct_setNeedsUpdate,vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_array,vn.prototype._setValue_array_setNeedsUpdate,vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_arrayElement,vn.prototype._setValue_arrayElement_setNeedsUpdate,vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_fromArray,vn.prototype._setValue_fromArray_setNeedsUpdate,vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class s3{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ms(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let u,d=e.length,h=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],x=v.uuid;let w=t[x];if(w===void 0){w=d++,t[x]=w,e.push(v);for(let b=0,E=a;b!==E;++b)s[b].push(new vn(v,i[b],r[b]))}else if(w<h){u=e[w];const b=--h,E=e[b];t[E.uuid]=w,e[w]=E,t[x]=b,e[b]=v;for(let S=0,C=a;S!==C;++S){const P=s[S],I=P[b];let B=P[w];P[w]=I,B===void 0&&(B=new vn(v,i[S],r[S])),P[b]=B}}else e[w]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,u=arguments.length;a!==u;++a){const d=arguments[a],h=d.uuid,m=t[h];if(m!==void 0&&m>=s){const g=s++,v=e[g];t[v.uuid]=m,e[m]=v,t[h]=g,e[g]=d;for(let x=0,w=r;x!==w;++x){const b=i[x],E=b[g],S=b[m];b[m]=E,b[g]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],m=h.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<s){const v=--s,x=e[v],w=--a,b=e[w];t[x.uuid]=g,e[g]=x,t[b.uuid]=v,e[v]=b,e.pop();for(let E=0,S=r;E!==S;++E){const C=i[E],P=C[v],I=C[w];C[g]=P,C[v]=I,C.pop()}}else{const v=--a,x=e[v];v>0&&(t[x.uuid]=g),e[g]=x,e.pop();for(let w=0,b=r;w!==b;++w){const E=i[w];E[g]=E[v],E.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,u=this._parsedPaths,d=this._objects,h=d.length,m=this.nCachedObjects_,g=new Array(h);r=s.length,i[e]=r,a.push(e),u.push(t),s.push(g);for(let v=m,x=d.length;v!==x;++v){const w=d[v];g[v]=new vn(w,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,u=a.length-1,d=a[u],h=e[u];t[h]=i,a[i]=d,a.pop(),s[i]=s[u],s.pop(),r[i]=r[u],r.pop()}}}class vA{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,u=new Array(a),d={endingStart:Gu,endingEnd:Gu};for(let h=0;h!==a;++h){const m=s[h].createInterpolant(null);u[h]=m,m.settings=d}this._interpolantSettings=d,this._interpolants=u,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,u=r/s;e.warp(1,a,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=r._lendControlInterpolant(),this._timeScaleInterpolant=u);const d=u.parameterPositions,h=u.sampleValues;return d[0]=s,d[1]=s+i,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const d=(e-s)*i;d<0||i===0?t=0:(this._startTime=null,t=i*d)}t*=this._updateTimeScale(e);const a=this._updateTime(t),u=this._updateWeight(e);if(u>0){const d=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case Ix:for(let m=0,g=d.length;m!==g;++m)d[m].evaluate(a),h[m].accumulateAdditive(u);break;case q0:default:for(let m=0,g=d.length;m!==g;++m)d[m].evaluate(a),h[m].accumulate(r,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===sT;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===iT){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const u=Math.floor(r/t);r-=t*u,s+=Math.abs(u);const d=this.repetitions-s;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=$u,r.endingEnd=$u):(e?r.endingStart=this.zeroSlopeAtStart?$u:Gu:r.endingStart=up,t?r.endingEnd=this.zeroSlopeAtEnd?$u:Gu:r.endingEnd=up)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const u=a.parameterPositions,d=a.sampleValues;return u[0]=s,d[0]=t,u[1]=s+e,d[1]=i,this}}const o3=new Float32Array(1);class a3 extends Wo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,u=e._interpolants,d=i.uuid,h=this._bindingsByRootAndName;let m=h[d];m===void 0&&(m={},h[d]=m);for(let g=0;g!==s;++g){const v=r[g],x=v.name;let w=m[x];if(w!==void 0)++w.referenceCount,a[g]=w;else{if(w=a[g],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,d,x));continue}const b=t&&t._propertyBindings[g].binding.parsedPath;w=new gA(vn.create(i,x,b),v.ValueTypeName,v.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,d,x),a[g]=w}u[g].resultBuffer=w.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const u=a.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,u=a[s],d=u.knownActions,h=d[d.length-1],m=e._byClipCacheIndex;h._byClipCacheIndex=m,d[m]=h,d.pop(),e._byClipCacheIndex=null;const g=u.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],d.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,u=a[r],d=t[t.length-1],h=e._cacheIndex;d._cacheIndex=h,t[h]=d,t.pop(),delete u[s],Object.keys(u).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Zx(new Float32Array(2),new Float32Array(2),1,o3),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?xp.findByName(r,e):e;const u=a!==null?a.uuid:e,d=this._actionsByClip[u];let h=null;if(i===void 0&&(a!==null?i=a.blendMode:i=q0),d!==void 0){const g=d.actionByRoot[s];if(g!==void 0&&g.blendMode===i)return g;h=d.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const m=new vA(this,a,t,i);return this._bindAction(m,h),this._addInactiveAction(m,u,s),m}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?xp.findByName(i,e):e,a=s?s.uuid:e,u=this._actionsByClip[a];return u!==void 0&&u.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,s,a);const u=this._bindings,d=this._nActiveBindings;for(let h=0;h!==d;++h)u[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let u=0,d=a.length;u!==d;++u){const h=a[u];this._deactivateAction(h);const m=h._cacheIndex,g=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const u=i[a].actionByRoot,d=u[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const u=s[a];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class l3 extends Y0{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new K0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class u3 extends Y0{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new bp(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class s1{constructor(e){this.value=e}clone(){return new s1(this.value.clone===void 0?this.value:this.value.clone())}}let c3=0;class f3 extends Wo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:c3++}),this.name="",this.usage=fp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class d3 extends Q0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class h3{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const uw=new Ut;class yA{constructor(e,t,i=0,r=1/0){this.ray=new pd(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ju,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return uw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(uw),this}intersectObject(e,t=!0,i=[]){return X_(e,this,i,t),i.sort(cw),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)X_(e[r],this,i,t);return i.sort(cw),i}}function cw(n,e){return n.distance-e.distance}function X_(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let a=0,u=s.length;a<u;a++)X_(s[a],e,t,!0)}}class _A{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=$t(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos($t(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class p3{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class o1{constructor(e,t,i,r){o1.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const fw=new De;class m3{constructor(e=new De(1/0,1/0),t=new De(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=fw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fw).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const dw=new q,vg=new q;class g3{constructor(e=new q,t=new q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){dw.subVectors(e,this.start),vg.subVectors(this.end,this.start);const i=vg.dot(vg);let s=vg.dot(dw)/i;return t&&(s=$t(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const hw=new q;class v3 extends yn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new tn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,u=1,d=32;a<d;a++,u++){const h=a/d*Math.PI*2,m=u/d*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new Mt(r,3));const s=new Nr({fog:!1,toneMapped:!1});this.cone=new Go(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),hw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(hw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Rl=new q,yg=new Ut,Oy=new Ut;class y3 extends Go{constructor(e){const t=xA(e),i=new tn,r=[],s=[],a=new ct(0,0,1),u=new ct(0,1,0);for(let h=0;h<t.length;h++){const m=t[h];m.parent&&m.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(u.r,u.g,u.b))}i.setAttribute("position",new Mt(r,3)),i.setAttribute("color",new Mt(s,3));const d=new Nr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Oy.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const u=t[s];u.parent&&u.parent.isBone&&(yg.multiplyMatrices(Oy,u.matrixWorld),Rl.setFromMatrixPosition(yg),r.setXYZ(a,Rl.x,Rl.y,Rl.z),yg.multiplyMatrices(Oy,u.parent.matrixWorld),Rl.setFromMatrixPosition(yg),r.setXYZ(a+1,Rl.x,Rl.y,Rl.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function xA(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,xA(n.children[t]));return e}class _3 extends mi{constructor(e,t,i){const r=new Ip(t,4,2),s=new Fl({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const x3=new q,pw=new ct,mw=new ct;class S3 extends yn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Pp(t);r.rotateY(Math.PI*.5),this.material=new Fl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Cn(a,3)),this.add(new mi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");pw.copy(this.light.color),mw.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?pw:mw;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(x3.setFromMatrixPosition(this.light.matrixWorld).negate())}}class w3 extends Go{constructor(e=10,t=10,i=4473924,r=8947848){i=new ct(i),r=new ct(r);const s=t/2,a=e/t,u=e/2,d=[],h=[];for(let v=0,x=0,w=-u;v<=t;v++,w+=a){d.push(-u,0,w,u,0,w),d.push(w,0,-u,w,0,u);const b=v===s?i:r;b.toArray(h,x),x+=3,b.toArray(h,x),x+=3,b.toArray(h,x),x+=3,b.toArray(h,x),x+=3}const m=new tn;m.setAttribute("position",new Mt(d,3)),m.setAttribute("color",new Mt(h,3));const g=new Nr({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class M3 extends Go{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new ct(s),a=new ct(a);const u=[],d=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),x=Math.sin(v)*e,w=Math.cos(v)*e;u.push(0,0,0),u.push(x,0,w);const b=g&1?s:a;d.push(b.r,b.g,b.b),d.push(b.r,b.g,b.b)}for(let g=0;g<i;g++){const v=g&1?s:a,x=e-e/i*g;for(let w=0;w<r;w++){let b=w/r*(Math.PI*2),E=Math.sin(b)*x,S=Math.cos(b)*x;u.push(E,0,S),d.push(v.r,v.g,v.b),b=(w+1)/r*(Math.PI*2),E=Math.sin(b)*x,S=Math.cos(b)*x,u.push(E,0,S),d.push(v.r,v.g,v.b)}}const h=new tn;h.setAttribute("position",new Mt(u,3)),h.setAttribute("color",new Mt(d,3));const m=new Nr({vertexColors:!0,toneMapped:!1});super(h,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const gw=new q,_g=new q,vw=new q;class E3 extends yn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new tn;r.setAttribute("position",new Mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Nr({fog:!1,toneMapped:!1});this.lightPlane=new Ol(r,s),this.add(this.lightPlane),r=new tn,r.setAttribute("position",new Mt([0,0,0,0,0,1],3)),this.targetLine=new Ol(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),gw.setFromMatrixPosition(this.light.matrixWorld),_g.setFromMatrixPosition(this.light.target.matrixWorld),vw.subVectors(_g,gw),this.lightPlane.lookAt(_g),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_g),this.targetLine.scale.z=vw.length()}}const xg=new q,ti=new Tp;class b3 extends Go{constructor(e){const t=new tn,i=new Nr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(w,b){d(w),d(b)}function d(w){r.push(0,0,0),s.push(0,0,0),a[w]===void 0&&(a[w]=[]),a[w].push(r.length/3-1)}t.setAttribute("position",new Mt(r,3)),t.setAttribute("color",new Mt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new ct(16755200),m=new ct(16711680),g=new ct(43775),v=new ct(16777215),x=new ct(3355443);this.setColors(h,m,g,v,x)}setColors(e,t,i,r,s){const u=this.geometry.getAttribute("color");u.setXYZ(0,e.r,e.g,e.b),u.setXYZ(1,e.r,e.g,e.b),u.setXYZ(2,e.r,e.g,e.b),u.setXYZ(3,e.r,e.g,e.b),u.setXYZ(4,e.r,e.g,e.b),u.setXYZ(5,e.r,e.g,e.b),u.setXYZ(6,e.r,e.g,e.b),u.setXYZ(7,e.r,e.g,e.b),u.setXYZ(8,e.r,e.g,e.b),u.setXYZ(9,e.r,e.g,e.b),u.setXYZ(10,e.r,e.g,e.b),u.setXYZ(11,e.r,e.g,e.b),u.setXYZ(12,e.r,e.g,e.b),u.setXYZ(13,e.r,e.g,e.b),u.setXYZ(14,e.r,e.g,e.b),u.setXYZ(15,e.r,e.g,e.b),u.setXYZ(16,e.r,e.g,e.b),u.setXYZ(17,e.r,e.g,e.b),u.setXYZ(18,e.r,e.g,e.b),u.setXYZ(19,e.r,e.g,e.b),u.setXYZ(20,e.r,e.g,e.b),u.setXYZ(21,e.r,e.g,e.b),u.setXYZ(22,e.r,e.g,e.b),u.setXYZ(23,e.r,e.g,e.b),u.setXYZ(24,t.r,t.g,t.b),u.setXYZ(25,t.r,t.g,t.b),u.setXYZ(26,t.r,t.g,t.b),u.setXYZ(27,t.r,t.g,t.b),u.setXYZ(28,t.r,t.g,t.b),u.setXYZ(29,t.r,t.g,t.b),u.setXYZ(30,t.r,t.g,t.b),u.setXYZ(31,t.r,t.g,t.b),u.setXYZ(32,i.r,i.g,i.b),u.setXYZ(33,i.r,i.g,i.b),u.setXYZ(34,i.r,i.g,i.b),u.setXYZ(35,i.r,i.g,i.b),u.setXYZ(36,i.r,i.g,i.b),u.setXYZ(37,i.r,i.g,i.b),u.setXYZ(38,r.r,r.g,r.b),u.setXYZ(39,r.r,r.g,r.b),u.setXYZ(40,s.r,s.g,s.b),u.setXYZ(41,s.r,s.g,s.b),u.setXYZ(42,s.r,s.g,s.b),u.setXYZ(43,s.r,s.g,s.b),u.setXYZ(44,s.r,s.g,s.b),u.setXYZ(45,s.r,s.g,s.b),u.setXYZ(46,s.r,s.g,s.b),u.setXYZ(47,s.r,s.g,s.b),u.setXYZ(48,s.r,s.g,s.b),u.setXYZ(49,s.r,s.g,s.b),u.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;ti.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===fo?-1:0;si("c",t,e,ti,0,0,s),si("t",t,e,ti,0,0,1),si("n1",t,e,ti,-1,-1,s),si("n2",t,e,ti,i,-1,s),si("n3",t,e,ti,-1,r,s),si("n4",t,e,ti,i,r,s),si("f1",t,e,ti,-1,-1,1),si("f2",t,e,ti,i,-1,1),si("f3",t,e,ti,-1,r,1),si("f4",t,e,ti,i,r,1),si("u1",t,e,ti,i*.7,r*1.1,s),si("u2",t,e,ti,-1*.7,r*1.1,s),si("u3",t,e,ti,0,r*2,s),si("cf1",t,e,ti,-1,0,1),si("cf2",t,e,ti,i,0,1),si("cf3",t,e,ti,0,-1,1),si("cf4",t,e,ti,0,r,1),si("cn1",t,e,ti,-1,0,s),si("cn2",t,e,ti,i,0,s),si("cn3",t,e,ti,0,-1,s),si("cn4",t,e,ti,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function si(n,e,t,i,r,s,a){xg.set(r,s,a).unproject(i);const u=e[n];if(u!==void 0){const d=t.getAttribute("position");for(let h=0,m=u.length;h<m;h++)d.setXYZ(u[h],xg.x,xg.y,xg.z)}}const Sg=new Dr;class T3 extends Go{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new tn;s.setIndex(new Cn(i,1)),s.setAttribute("position",new Cn(r,3)),super(s,new Nr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Sg.setFromObject(this.object),Sg.isEmpty())return;const t=Sg.min,i=Sg.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class A3 extends Go{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new tn;s.setIndex(new Cn(i,1)),s.setAttribute("position",new Mt(r,3)),super(s,new Nr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class C3 extends Ol{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new tn;a.setAttribute("position",new Mt(s,3)),a.computeBoundingSphere(),super(a,new Nr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new tn;d.setAttribute("position",new Mt(u,3)),d.computeBoundingSphere(),this.add(new mi(d,new Fl({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const yw=new q;let wg,ky;class R3 extends yn{constructor(e=new q(0,0,1),t=new q(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",wg===void 0&&(wg=new tn,wg.setAttribute("position",new Mt([0,0,0,0,1,0],3)),ky=new md(0,.5,1,5,1),ky.translate(0,-.5,0)),this.position.copy(t),this.line=new Ol(wg,new Nr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mi(ky,new Fl({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{yw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(yw,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class P3 extends Go{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new tn;r.setAttribute("position",new Mt(t,3)),r.setAttribute("color",new Mt(i,3));const s=new Nr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ct,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class I3{constructor(){this.type="ShapePath",this.color=new ct,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new pp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const C=[];for(let P=0,I=S.length;P<I;P++){const B=S[P],N=new Qu;N.curves=B.curves,C.push(N)}return C}function i(S,C){const P=C.length;let I=!1;for(let B=P-1,N=0;N<P;B=N++){let U=C[B],H=C[N],O=H.x-U.x,D=H.y-U.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(U=C[N],O=-O,H=C[B],D=-D),S.y<U.y||S.y>H.y)continue;if(S.y===U.y){if(S.x===U.x)return!0}else{const W=D*(S.x-U.x)-O*(S.y-U.y);if(W===0)return!0;if(W<0)continue;I=!I}}else{if(S.y!==U.y)continue;if(H.x<=S.x&&S.x<=U.x||U.x<=S.x&&S.x<=H.x)return!0}}return I}const r=zo.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,u,d;const h=[];if(s.length===1)return u=s[0],d=new Qu,d.curves=u.curves,h.push(d),h;let m=!r(s[0].getPoints());m=e?!m:m;const g=[],v=[];let x=[],w=0,b;v[w]=void 0,x[w]=[];for(let S=0,C=s.length;S<C;S++)u=s[S],b=u.getPoints(),a=r(b),a=e?!a:a,a?(!m&&v[w]&&w++,v[w]={s:new Qu,p:b},v[w].s.curves=u.curves,m&&w++,x[w]=[]):x[w].push({h:u,p:b[0]});if(!v[0])return t(s);if(v.length>1){let S=!1,C=0;for(let P=0,I=v.length;P<I;P++)g[P]=[];for(let P=0,I=v.length;P<I;P++){const B=x[P];for(let N=0;N<B.length;N++){const U=B[N];let H=!0;for(let O=0;O<v.length;O++)i(U.p,v[O].p)&&(P!==O&&C++,H?(H=!1,g[O].push(U)):S=!0);H&&g[P].push(U)}}C>0&&S===!1&&(x=g)}let E;for(let S=0,C=v.length;S<C;S++){d=v[S].s,h.push(d),E=x[S];for(let P=0,I=E.length;P<I;P++)d.holes.push(E[P].h)}return h}}class L3 extends Wo{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function D3(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function N3(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function O3(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function j_(n,e,t,i){const r=k3(i);switch(t){case bx:return n*e;case Ax:return n*e;case Cx:return n*e*2;case $0:return n*e/r.components*r.byteLength;case Ep:return n*e/r.components*r.byteLength;case Rx:return n*e*2/r.components*r.byteLength;case X0:return n*e*2/r.components*r.byteLength;case Tx:return n*e*3/r.components*r.byteLength;case cr:return n*e*4/r.components*r.byteLength;case j0:return n*e*4/r.components*r.byteLength;case Xh:case jh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case qh:case Yh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Kg:case Jg:return Math.max(n,16)*Math.max(e,8)/4;case Yg:case Zg:return Math.max(n,8)*Math.max(e,8)/2;case Qg:case e0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case t0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case n0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case i0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case r0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case s0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case o0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case a0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case l0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case u0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case c0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case f0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case d0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case h0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case p0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case m0:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Kh:case g0:case v0:return Math.ceil(n/4)*Math.ceil(e/4)*16;case Px:case y0:return Math.ceil(n/4)*Math.ceil(e/4)*8;case _0:case x0:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function k3(n){switch(n){case ho:case wx:return{byteLength:1,components:1};case rd:case Mx:case hd:return{byteLength:2,components:1};case W0:case G0:return{byteLength:2,components:4};case Va:case H0:case Zr:return{byteLength:4,components:1};case Ex:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const U3={contain:D3,cover:N3,fill:O3,getByteLength:j_};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:z0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=z0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function SA(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function F3(n){const e=new WeakMap;function t(u,d){const h=u.array,m=u.usage,g=h.byteLength,v=n.createBuffer();n.bindBuffer(d,v),n.bufferData(d,h,m),u.onUploadCallback();let x;if(h instanceof Float32Array)x=n.FLOAT;else if(h instanceof Uint16Array)u.isFloat16BufferAttribute?x=n.HALF_FLOAT:x=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)x=n.SHORT;else if(h instanceof Uint32Array)x=n.UNSIGNED_INT;else if(h instanceof Int32Array)x=n.INT;else if(h instanceof Int8Array)x=n.BYTE;else if(h instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:x,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:g}}function i(u,d,h){const m=d.array,g=d.updateRanges;if(n.bindBuffer(h,u),g.length===0)n.bufferSubData(h,0,m);else{g.sort((x,w)=>x.start-w.start);let v=0;for(let x=1;x<g.length;x++){const w=g[v],b=g[x];b.start<=w.start+w.count+1?w.count=Math.max(w.count,b.start+b.count-w.start):(++v,g[v]=b)}g.length=v+1;for(let x=0,w=g.length;x<w;x++){const b=g[x];n.bufferSubData(h,b.start*m.BYTES_PER_ELEMENT,m,b.start,b.count)}d.clearUpdateRanges()}d.onUploadCallback()}function r(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=e.get(u);d&&(n.deleteBuffer(d.buffer),e.delete(u))}function a(u,d){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const m=e.get(u);(!m||m.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const h=e.get(u);if(h===void 0)e.set(u,t(u,d));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(h.buffer,u,d),h.version=u.version}}return{get:r,remove:s,update:a}}var z3=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,B3=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,V3=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,H3=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,W3=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,G3=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$3=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,X3=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,j3=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,q3=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Y3=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,K3=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Z3=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,J3=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Q3=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,eL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,tL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,nL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,iL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,sL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,oL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,aL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,lL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cL=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fL=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,dL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,hL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,pL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,mL="gl_FragColor = linearToOutputTexel( gl_FragColor );",gL=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,vL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_L=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,SL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ML=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,EL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,bL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,TL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,AL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,CL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,RL=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,PL=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,IL=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,LL=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,DL=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,NL=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,OL=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,kL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,UL=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,FL=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zL=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,BL=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,VL=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,HL=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WL=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,GL=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,$L=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,XL=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,jL=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qL=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,YL=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,KL=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ZL=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,JL=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,QL=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,eD=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,tD=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,nD=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,iD=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oD=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,aD=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,uD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,cD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,fD=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,dD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,hD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pD=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vD=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yD=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_D=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,xD=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,SD=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wD=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,MD=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ED=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,bD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,TD=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,AD=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,CD=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,RD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,PD=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ID=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,LD=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,DD=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,ND=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,OD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,UD=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const FD=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zD=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VD=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,WD=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$D=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,XD=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,jD=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,qD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,YD=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KD=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ZD=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,QD=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eN=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tN=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nN=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,iN=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rN=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,sN=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,oN=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aN=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lN=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uN=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cN=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fN=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dN=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,hN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pN=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mN=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gN=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,en={alphahash_fragment:z3,alphahash_pars_fragment:B3,alphamap_fragment:V3,alphamap_pars_fragment:H3,alphatest_fragment:W3,alphatest_pars_fragment:G3,aomap_fragment:$3,aomap_pars_fragment:X3,batching_pars_vertex:j3,batching_vertex:q3,begin_vertex:Y3,beginnormal_vertex:K3,bsdfs:Z3,iridescence_fragment:J3,bumpmap_pars_fragment:Q3,clipping_planes_fragment:eL,clipping_planes_pars_fragment:tL,clipping_planes_pars_vertex:nL,clipping_planes_vertex:iL,color_fragment:rL,color_pars_fragment:sL,color_pars_vertex:oL,color_vertex:aL,common:lL,cube_uv_reflection_fragment:uL,defaultnormal_vertex:cL,displacementmap_pars_vertex:fL,displacementmap_vertex:dL,emissivemap_fragment:hL,emissivemap_pars_fragment:pL,colorspace_fragment:mL,colorspace_pars_fragment:gL,envmap_fragment:vL,envmap_common_pars_fragment:yL,envmap_pars_fragment:_L,envmap_pars_vertex:xL,envmap_physical_pars_fragment:IL,envmap_vertex:SL,fog_vertex:wL,fog_pars_vertex:ML,fog_fragment:EL,fog_pars_fragment:bL,gradientmap_pars_fragment:TL,lightmap_pars_fragment:AL,lights_lambert_fragment:CL,lights_lambert_pars_fragment:RL,lights_pars_begin:PL,lights_toon_fragment:LL,lights_toon_pars_fragment:DL,lights_phong_fragment:NL,lights_phong_pars_fragment:OL,lights_physical_fragment:kL,lights_physical_pars_fragment:UL,lights_fragment_begin:FL,lights_fragment_maps:zL,lights_fragment_end:BL,logdepthbuf_fragment:VL,logdepthbuf_pars_fragment:HL,logdepthbuf_pars_vertex:WL,logdepthbuf_vertex:GL,map_fragment:$L,map_pars_fragment:XL,map_particle_fragment:jL,map_particle_pars_fragment:qL,metalnessmap_fragment:YL,metalnessmap_pars_fragment:KL,morphinstance_vertex:ZL,morphcolor_vertex:JL,morphnormal_vertex:QL,morphtarget_pars_vertex:eD,morphtarget_vertex:tD,normal_fragment_begin:nD,normal_fragment_maps:iD,normal_pars_fragment:rD,normal_pars_vertex:sD,normal_vertex:oD,normalmap_pars_fragment:aD,clearcoat_normal_fragment_begin:lD,clearcoat_normal_fragment_maps:uD,clearcoat_pars_fragment:cD,iridescence_pars_fragment:fD,opaque_fragment:dD,packing:hD,premultiplied_alpha_fragment:pD,project_vertex:mD,dithering_fragment:gD,dithering_pars_fragment:vD,roughnessmap_fragment:yD,roughnessmap_pars_fragment:_D,shadowmap_pars_fragment:xD,shadowmap_pars_vertex:SD,shadowmap_vertex:wD,shadowmask_pars_fragment:MD,skinbase_vertex:ED,skinning_pars_vertex:bD,skinning_vertex:TD,skinnormal_vertex:AD,specularmap_fragment:CD,specularmap_pars_fragment:RD,tonemapping_fragment:PD,tonemapping_pars_fragment:ID,transmission_fragment:LD,transmission_pars_fragment:DD,uv_pars_fragment:ND,uv_pars_vertex:OD,uv_vertex:kD,worldpos_vertex:UD,background_vert:FD,background_frag:zD,backgroundCube_vert:BD,backgroundCube_frag:VD,cube_vert:HD,cube_frag:WD,depth_vert:GD,depth_frag:$D,distanceRGBA_vert:XD,distanceRGBA_frag:jD,equirect_vert:qD,equirect_frag:YD,linedashed_vert:KD,linedashed_frag:ZD,meshbasic_vert:JD,meshbasic_frag:QD,meshlambert_vert:eN,meshlambert_frag:tN,meshmatcap_vert:nN,meshmatcap_frag:iN,meshnormal_vert:rN,meshnormal_frag:sN,meshphong_vert:oN,meshphong_frag:aN,meshphysical_vert:lN,meshphysical_frag:uN,meshtoon_vert:cN,meshtoon_frag:fN,points_vert:dN,points_frag:hN,shadow_vert:pN,shadow_frag:mN,sprite_vert:gN,sprite_frag:vN},it={common:{diffuse:{value:new ct(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jt},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jt}},envmap:{envMap:{value:null},envMapRotation:{value:new jt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jt},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ct(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ct(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0},uvTransform:{value:new jt}},sprite:{diffuse:{value:new ct(16777215)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jt},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0}}},co={basic:{uniforms:Ar([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:en.meshbasic_vert,fragmentShader:en.meshbasic_frag},lambert:{uniforms:Ar([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new ct(0)}}]),vertexShader:en.meshlambert_vert,fragmentShader:en.meshlambert_frag},phong:{uniforms:Ar([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new ct(0)},specular:{value:new ct(1118481)},shininess:{value:30}}]),vertexShader:en.meshphong_vert,fragmentShader:en.meshphong_frag},standard:{uniforms:Ar([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new ct(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:en.meshphysical_vert,fragmentShader:en.meshphysical_frag},toon:{uniforms:Ar([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new ct(0)}}]),vertexShader:en.meshtoon_vert,fragmentShader:en.meshtoon_frag},matcap:{uniforms:Ar([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:en.meshmatcap_vert,fragmentShader:en.meshmatcap_frag},points:{uniforms:Ar([it.points,it.fog]),vertexShader:en.points_vert,fragmentShader:en.points_frag},dashed:{uniforms:Ar([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:en.linedashed_vert,fragmentShader:en.linedashed_frag},depth:{uniforms:Ar([it.common,it.displacementmap]),vertexShader:en.depth_vert,fragmentShader:en.depth_frag},normal:{uniforms:Ar([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:en.meshnormal_vert,fragmentShader:en.meshnormal_frag},sprite:{uniforms:Ar([it.sprite,it.fog]),vertexShader:en.sprite_vert,fragmentShader:en.sprite_frag},background:{uniforms:{uvTransform:{value:new jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:en.background_vert,fragmentShader:en.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new jt}},vertexShader:en.backgroundCube_vert,fragmentShader:en.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:en.cube_vert,fragmentShader:en.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:en.equirect_vert,fragmentShader:en.equirect_frag},distanceRGBA:{uniforms:Ar([it.common,it.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:en.distanceRGBA_vert,fragmentShader:en.distanceRGBA_frag},shadow:{uniforms:Ar([it.lights,it.fog,{color:{value:new ct(0)},opacity:{value:1}}]),vertexShader:en.shadow_vert,fragmentShader:en.shadow_frag}};co.physical={uniforms:Ar([co.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jt},clearcoatNormalScale:{value:new De(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jt},sheen:{value:0},sheenColor:{value:new ct(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jt},transmissionSamplerSize:{value:new De},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jt},attenuationDistance:{value:0},attenuationColor:{value:new ct(0)},specularColor:{value:new ct(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jt},anisotropyVector:{value:new De},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jt}}]),vertexShader:en.meshphysical_vert,fragmentShader:en.meshphysical_frag};const Mg={r:0,b:0,g:0},Uu=new Qr,yN=new Ut;function _N(n,e,t,i,r,s,a){const u=new ct(0);let d=s===!0?0:1,h,m,g=null,v=0,x=null;function w(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function b(P){let I=!1;const B=w(P);B===null?S(u,d):B&&B.isColor&&(S(B,1),I=!0);const N=n.xr.getEnvironmentBlendMode();N==="additive"?i.buffers.color.setClear(0,0,0,1,a):N==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||I)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function E(P,I){const B=w(I);B&&(B.isCubeTexture||B.mapping===dd)?(m===void 0&&(m=new mi(new cc(1,1,1),new po({name:"BackgroundCubeMaterial",uniforms:od(co.backgroundCube.uniforms),vertexShader:co.backgroundCube.vertexShader,fragmentShader:co.backgroundCube.fragmentShader,side:Lr,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(N,U,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),Uu.copy(I.backgroundRotation),Uu.x*=-1,Uu.y*=-1,Uu.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(Uu.y*=-1,Uu.z*=-1),m.material.uniforms.envMap.value=B,m.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(yN.makeRotationFromEuler(Uu)),m.material.toneMapped=mn.getTransfer(B.colorSpace)!==Mn,(g!==B||v!==B.version||x!==n.toneMapping)&&(m.material.needsUpdate=!0,g=B,v=B.version,x=n.toneMapping),m.layers.enableAll(),P.unshift(m,m.geometry,m.material,0,0,null)):B&&B.isTexture&&(h===void 0&&(h=new mi(new gd(2,2),new po({name:"BackgroundMaterial",uniforms:od(co.background.uniforms),vertexShader:co.background.vertexShader,fragmentShader:co.background.fragmentShader,side:za,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=B,h.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,h.material.toneMapped=mn.getTransfer(B.colorSpace)!==Mn,B.matrixAutoUpdate===!0&&B.updateMatrix(),h.material.uniforms.uvTransform.value.copy(B.matrix),(g!==B||v!==B.version||x!==n.toneMapping)&&(h.material.needsUpdate=!0,g=B,v=B.version,x=n.toneMapping),h.layers.enableAll(),P.unshift(h,h.geometry,h.material,0,0,null))}function S(P,I){P.getRGB(Mg,xT(n)),i.buffers.color.setClear(Mg.r,Mg.g,Mg.b,I,a)}function C(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return u},setClearColor:function(P,I=1){u.set(P),d=I,S(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(P){d=P,S(u,d)},render:b,addToRenderList:E,dispose:C}}function xN(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null);let s=r,a=!1;function u(D,W,ee,ne,le){let pe=!1;const de=g(ne,ee,W);s!==de&&(s=de,h(s.object)),pe=x(D,ne,ee,le),pe&&w(D,ne,ee,le),le!==null&&e.update(le,n.ELEMENT_ARRAY_BUFFER),(pe||a)&&(a=!1,I(D,W,ee,ne),le!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(le).buffer))}function d(){return n.createVertexArray()}function h(D){return n.bindVertexArray(D)}function m(D){return n.deleteVertexArray(D)}function g(D,W,ee){const ne=ee.wireframe===!0;let le=i[D.id];le===void 0&&(le={},i[D.id]=le);let pe=le[W.id];pe===void 0&&(pe={},le[W.id]=pe);let de=pe[ne];return de===void 0&&(de=v(d()),pe[ne]=de),de}function v(D){const W=[],ee=[],ne=[];for(let le=0;le<t;le++)W[le]=0,ee[le]=0,ne[le]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:ee,attributeDivisors:ne,object:D,attributes:{},index:null}}function x(D,W,ee,ne){const le=s.attributes,pe=W.attributes;let de=0;const _e=ee.getAttributes();for(const F in _e)if(_e[F].location>=0){const Z=le[F];let $=pe[F];if($===void 0&&(F==="instanceMatrix"&&D.instanceMatrix&&($=D.instanceMatrix),F==="instanceColor"&&D.instanceColor&&($=D.instanceColor)),Z===void 0||Z.attribute!==$||$&&Z.data!==$.data)return!0;de++}return s.attributesNum!==de||s.index!==ne}function w(D,W,ee,ne){const le={},pe=W.attributes;let de=0;const _e=ee.getAttributes();for(const F in _e)if(_e[F].location>=0){let Z=pe[F];Z===void 0&&(F==="instanceMatrix"&&D.instanceMatrix&&(Z=D.instanceMatrix),F==="instanceColor"&&D.instanceColor&&(Z=D.instanceColor));const $={};$.attribute=Z,Z&&Z.data&&($.data=Z.data),le[F]=$,de++}s.attributes=le,s.attributesNum=de,s.index=ne}function b(){const D=s.newAttributes;for(let W=0,ee=D.length;W<ee;W++)D[W]=0}function E(D){S(D,0)}function S(D,W){const ee=s.newAttributes,ne=s.enabledAttributes,le=s.attributeDivisors;ee[D]=1,ne[D]===0&&(n.enableVertexAttribArray(D),ne[D]=1),le[D]!==W&&(n.vertexAttribDivisor(D,W),le[D]=W)}function C(){const D=s.newAttributes,W=s.enabledAttributes;for(let ee=0,ne=W.length;ee<ne;ee++)W[ee]!==D[ee]&&(n.disableVertexAttribArray(ee),W[ee]=0)}function P(D,W,ee,ne,le,pe,de){de===!0?n.vertexAttribIPointer(D,W,ee,le,pe):n.vertexAttribPointer(D,W,ee,ne,le,pe)}function I(D,W,ee,ne){b();const le=ne.attributes,pe=ee.getAttributes(),de=W.defaultAttributeValues;for(const _e in pe){const F=pe[_e];if(F.location>=0){let J=le[_e];if(J===void 0&&(_e==="instanceMatrix"&&D.instanceMatrix&&(J=D.instanceMatrix),_e==="instanceColor"&&D.instanceColor&&(J=D.instanceColor)),J!==void 0){const Z=J.normalized,$=J.itemSize,re=e.get(J);if(re===void 0)continue;const Ne=re.buffer,he=re.type,Te=re.bytesPerElement,Ie=he===n.INT||he===n.UNSIGNED_INT||J.gpuType===H0;if(J.isInterleavedBufferAttribute){const Ce=J.data,He=Ce.stride,gt=J.offset;if(Ce.isInstancedInterleavedBuffer){for(let Ze=0;Ze<F.locationSize;Ze++)S(F.location+Ze,Ce.meshPerAttribute);D.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=Ce.meshPerAttribute*Ce.count)}else for(let Ze=0;Ze<F.locationSize;Ze++)E(F.location+Ze);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let Ze=0;Ze<F.locationSize;Ze++)P(F.location+Ze,$/F.locationSize,he,Z,He*Te,(gt+$/F.locationSize*Ze)*Te,Ie)}else{if(J.isInstancedBufferAttribute){for(let Ce=0;Ce<F.locationSize;Ce++)S(F.location+Ce,J.meshPerAttribute);D.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let Ce=0;Ce<F.locationSize;Ce++)E(F.location+Ce);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let Ce=0;Ce<F.locationSize;Ce++)P(F.location+Ce,$/F.locationSize,he,Z,$*Te,$/F.locationSize*Ce*Te,Ie)}}else if(de!==void 0){const Z=de[_e];if(Z!==void 0)switch(Z.length){case 2:n.vertexAttrib2fv(F.location,Z);break;case 3:n.vertexAttrib3fv(F.location,Z);break;case 4:n.vertexAttrib4fv(F.location,Z);break;default:n.vertexAttrib1fv(F.location,Z)}}}}C()}function B(){H();for(const D in i){const W=i[D];for(const ee in W){const ne=W[ee];for(const le in ne)m(ne[le].object),delete ne[le];delete W[ee]}delete i[D]}}function N(D){if(i[D.id]===void 0)return;const W=i[D.id];for(const ee in W){const ne=W[ee];for(const le in ne)m(ne[le].object),delete ne[le];delete W[ee]}delete i[D.id]}function U(D){for(const W in i){const ee=i[W];if(ee[D.id]===void 0)continue;const ne=ee[D.id];for(const le in ne)m(ne[le].object),delete ne[le];delete ee[D.id]}}function H(){O(),a=!0,s!==r&&(s=r,h(s.object))}function O(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:u,reset:H,resetDefaultState:O,dispose:B,releaseStatesOfGeometry:N,releaseStatesOfProgram:U,initAttributes:b,enableAttribute:E,disableUnusedAttributes:C}}function SN(n,e,t){let i;function r(h){i=h}function s(h,m){n.drawArrays(i,h,m),t.update(m,i,1)}function a(h,m,g){g!==0&&(n.drawArraysInstanced(i,h,m,g),t.update(m,i,g))}function u(h,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,h,0,m,0,g);let x=0;for(let w=0;w<g;w++)x+=m[w];t.update(x,i,1)}function d(h,m,g,v){if(g===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let w=0;w<h.length;w++)a(h[w],m[w],v[w]);else{x.multiDrawArraysInstancedWEBGL(i,h,0,m,0,v,0,g);let w=0;for(let b=0;b<g;b++)w+=m[b]*v[b];t.update(w,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function wN(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const U=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(U){return!(U!==cr&&i.convert(U)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(U){const H=U===hd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(U!==ho&&i.convert(U)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&U!==Zr&&!H)}function d(U){if(U==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";U="mediump"}return U==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const m=d(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const g=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),x=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),E=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),P=n.getParameter(n.MAX_VARYING_VECTORS),I=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),B=w>0,N=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:d,textureFormatReadable:a,textureTypeReadable:u,precision:h,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:x,maxVertexTextures:w,maxTextureSize:b,maxCubemapSize:E,maxAttributes:S,maxVertexUniforms:C,maxVaryings:P,maxFragmentUniforms:I,vertexTextures:B,maxSamples:N}}function MN(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Ll,u=new jt,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const x=g.length!==0||v||i!==0||r;return r=v,i=g.length,x},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,v){t=m(g,v,0)},this.setState=function(g,v,x){const w=g.clippingPlanes,b=g.clipIntersection,E=g.clipShadows,S=n.get(g);if(!r||w===null||w.length===0||s&&!E)s?m(null):h();else{const C=s?0:i,P=C*4;let I=S.clippingState||null;d.value=I,I=m(w,v,P,x);for(let B=0;B!==P;++B)I[B]=t[B];S.clippingState=I,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=C}};function h(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(g,v,x,w){const b=g!==null?g.length:0;let E=null;if(b!==0){if(E=d.value,w!==!0||E===null){const S=x+b*4,C=v.matrixWorldInverse;u.getNormalMatrix(C),(E===null||E.length<S)&&(E=new Float32Array(S));for(let P=0,I=x;P!==b;++P,I+=4)a.copy(g[P]).applyMatrix4(C,u),a.normal.toArray(E,I),E[I+3]=a.constant}d.value=E,d.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,E}}function EN(n){let e=new WeakMap;function t(a,u){return u===rp?a.mapping=Ba:u===sp&&(a.mapping=Nl),a}function i(a){if(a&&a.isTexture){const u=a.mapping;if(u===rp||u===sp)if(e.has(a)){const d=e.get(a).texture;return t(d,a.mapping)}else{const d=a.image;if(d&&d.height>0){const h=new MT(d.height);return h.fromEquirectangularTexture(n,a),e.set(a,h),a.addEventListener("dispose",r),t(h.texture,a.mapping)}else return null}}return a}function r(a){const u=a.target;u.removeEventListener("dispose",r);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Jf=4,_w=[.125,.215,.35,.446,.526,.582],Wu=20,Uy=new Np,xw=new ct;let Fy=null,zy=0,By=0,Vy=!1;const Vu=(1+Math.sqrt(5))/2,kf=1/Vu,Sw=[new q(-Vu,kf,0),new q(Vu,kf,0),new q(-kf,0,Vu),new q(kf,0,Vu),new q(0,Vu,-kf),new q(0,Vu,kf),new q(-1,1,-1),new q(1,1,-1),new q(-1,1,1),new q(1,1,1)];class q_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Fy=this._renderer.getRenderTarget(),zy=this._renderer.getActiveCubeFace(),By=this._renderer.getActiveMipmapLevel(),Vy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Ew(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Mw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Fy,zy,By),this._renderer.xr.enabled=Vy,e.scissorTest=!1,Eg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ba||e.mapping===Nl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Fy=this._renderer.getRenderTarget(),zy=this._renderer.getActiveCubeFace(),By=this._renderer.getActiveMipmapLevel(),Vy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ai,minFilter:Ai,generateMipmaps:!1,type:hd,format:cr,colorSpace:sc,depthBuffer:!1},r=ww(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ww(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bN(s)),this._blurMaterial=TN(s,e,t)}return r}_compileMaterial(e){const t=new mi(this._lodPlanes[0],e);this._renderer.compile(t,Uy)}_sceneToCubeUV(e,t,i,r){const u=new Bi(90,1,t,i),d=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],m=this._renderer,g=m.autoClear,v=m.toneMapping;m.getClearColor(xw),m.toneMapping=Uo,m.autoClear=!1;const x=new Fl({name:"PMREM.Background",side:Lr,depthWrite:!1,depthTest:!1}),w=new mi(new cc,x);let b=!1;const E=e.background;E?E.isColor&&(x.color.copy(E),e.background=null,b=!0):(x.color.copy(xw),b=!0);for(let S=0;S<6;S++){const C=S%3;C===0?(u.up.set(0,d[S],0),u.lookAt(h[S],0,0)):C===1?(u.up.set(0,0,d[S]),u.lookAt(0,h[S],0)):(u.up.set(0,d[S],0),u.lookAt(0,0,h[S]));const P=this._cubeSize;Eg(r,C*P,S>2?P:0,P,P),m.setRenderTarget(r),b&&m.render(w,u),m.render(e,u)}w.geometry.dispose(),w.material.dispose(),m.toneMapping=v,m.autoClear=g,e.background=E}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ba||e.mapping===Nl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Ew()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Mw());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new mi(this._lodPlanes[0],s),u=s.uniforms;u.envMap.value=e;const d=this._cubeSize;Eg(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(a,Uy)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),u=Sw[(r-s-1)%Sw.length];this._blur(e,s-1,s,a,u)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,u){const d=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new mi(this._lodPlanes[r],h),v=h.uniforms,x=this._sizeLods[i]-1,w=isFinite(s)?Math.PI/(2*x):2*Math.PI/(2*Wu-1),b=s/w,E=isFinite(s)?1+Math.floor(m*b):Wu;E>Wu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Wu}`);const S=[];let C=0;for(let U=0;U<Wu;++U){const H=U/b,O=Math.exp(-H*H/2);S.push(O),U===0?C+=O:U<E&&(C+=2*O)}for(let U=0;U<S.length;U++)S[U]=S[U]/C;v.envMap.value=e.texture,v.samples.value=E,v.weights.value=S,v.latitudinal.value=a==="latitudinal",u&&(v.poleAxis.value=u);const{_lodMax:P}=this;v.dTheta.value=w,v.mipInt.value=P-i;const I=this._sizeLods[r],B=3*I*(r>P-Jf?r-P+Jf:0),N=4*(this._cubeSize-I);Eg(t,B,N,3*I,2*I),d.setRenderTarget(t),d.render(g,Uy)}}function bN(n){const e=[],t=[],i=[];let r=n;const s=n-Jf+1+_w.length;for(let a=0;a<s;a++){const u=Math.pow(2,r);t.push(u);let d=1/u;a>n-Jf?d=_w[a-n+Jf-1]:a===0&&(d=0),i.push(d);const h=1/(u-2),m=-h,g=1+h,v=[m,m,g,m,g,g,m,m,g,g,m,g],x=6,w=6,b=3,E=2,S=1,C=new Float32Array(b*w*x),P=new Float32Array(E*w*x),I=new Float32Array(S*w*x);for(let N=0;N<x;N++){const U=N%3*2/3-1,H=N>2?0:-1,O=[U,H,0,U+2/3,H,0,U+2/3,H+1,0,U,H,0,U+2/3,H+1,0,U,H+1,0];C.set(O,b*w*N),P.set(v,E*w*N);const D=[N,N,N,N,N,N];I.set(D,S*w*N)}const B=new tn;B.setAttribute("position",new Cn(C,b)),B.setAttribute("uv",new Cn(P,E)),B.setAttribute("faceIndex",new Cn(I,S)),e.push(B),r>Jf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function ww(n,e,t){const i=new Vo(n,e,t);return i.texture.mapping=dd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Eg(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function TN(n,e,t){const i=new Float32Array(Wu),r=new q(0,1,0);return new po({name:"SphericalGaussianBlur",defines:{n:Wu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:a1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ka,depthTest:!1,depthWrite:!1})}function Mw(){return new po({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:a1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ka,depthTest:!1,depthWrite:!1})}function Ew(){return new po({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:a1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ka,depthTest:!1,depthWrite:!1})}function a1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function AN(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const d=u.mapping,h=d===rp||d===sp,m=d===Ba||d===Nl;if(h||m){let g=e.get(u);const v=g!==void 0?g.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==v)return t===null&&(t=new q_(n)),g=h?t.fromEquirectangular(u,g):t.fromCubemap(u,g),g.texture.pmremVersion=u.pmremVersion,e.set(u,g),g.texture;if(g!==void 0)return g.texture;{const x=u.image;return h&&x&&x.height>0||m&&x&&r(x)?(t===null&&(t=new q_(n)),g=h?t.fromEquirectangular(u):t.fromCubemap(u),g.texture.pmremVersion=u.pmremVersion,e.set(u,g),u.addEventListener("dispose",s),g.texture):null}}}return u}function r(u){let d=0;const h=6;for(let m=0;m<h;m++)u[m]!==void 0&&d++;return d===h}function s(u){const d=u.target;d.removeEventListener("dispose",s);const h=e.get(d);h!==void 0&&(e.delete(d),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function CN(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&$f("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function RN(n,e,t,i){const r={},s=new WeakMap;function a(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const w in v.attributes)e.remove(v.attributes[w]);v.removeEventListener("dispose",a),delete r[v.id];const x=s.get(v);x&&(e.remove(x),s.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function u(g,v){return r[v.id]===!0||(v.addEventListener("dispose",a),r[v.id]=!0,t.memory.geometries++),v}function d(g){const v=g.attributes;for(const x in v)e.update(v[x],n.ARRAY_BUFFER)}function h(g){const v=[],x=g.index,w=g.attributes.position;let b=0;if(x!==null){const C=x.array;b=x.version;for(let P=0,I=C.length;P<I;P+=3){const B=C[P+0],N=C[P+1],U=C[P+2];v.push(B,N,N,U,U,B)}}else if(w!==void 0){const C=w.array;b=w.version;for(let P=0,I=C.length/3-1;P<I;P+=3){const B=P+0,N=P+1,U=P+2;v.push(B,N,N,U,U,B)}}else return;const E=new(gT(v)?Ox:Nx)(v,1);E.version=b;const S=s.get(g);S&&e.remove(S),s.set(g,E)}function m(g){const v=s.get(g);if(v){const x=g.index;x!==null&&v.version<x.version&&h(g)}else h(g);return s.get(g)}return{get:u,update:d,getWireframeAttribute:m}}function PN(n,e,t){let i;function r(v){i=v}let s,a;function u(v){s=v.type,a=v.bytesPerElement}function d(v,x){n.drawElements(i,x,s,v*a),t.update(x,i,1)}function h(v,x,w){w!==0&&(n.drawElementsInstanced(i,x,s,v*a,w),t.update(x,i,w))}function m(v,x,w){if(w===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,s,v,0,w);let E=0;for(let S=0;S<w;S++)E+=x[S];t.update(E,i,1)}function g(v,x,w,b){if(w===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let S=0;S<v.length;S++)h(v[S]/a,x[S],b[S]);else{E.multiDrawElementsInstancedWEBGL(i,x,0,s,v,0,b,0,w);let S=0;for(let C=0;C<w;C++)S+=x[C]*b[C];t.update(S,i,1)}}this.setMode=r,this.setIndex=u,this.render=d,this.renderInstances=h,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function IN(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,u){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=u*(s/3);break;case n.LINES:t.lines+=u*(s/2);break;case n.LINE_STRIP:t.lines+=u*(s-1);break;case n.LINE_LOOP:t.lines+=u*s;break;case n.POINTS:t.points+=u*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function LN(n,e,t){const i=new WeakMap,r=new un;function s(a,u,d){const h=a.morphTargetInfluences,m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=m!==void 0?m.length:0;let v=i.get(u);if(v===void 0||v.count!==g){let D=function(){H.dispose(),i.delete(u),u.removeEventListener("dispose",D)};var x=D;v!==void 0&&v.texture.dispose();const w=u.morphAttributes.position!==void 0,b=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],P=u.morphAttributes.color||[];let I=0;w===!0&&(I=1),b===!0&&(I=2),E===!0&&(I=3);let B=u.attributes.position.count*I,N=1;B>e.maxTextureSize&&(N=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const U=new Float32Array(B*N*4*g),H=new bp(U,B,N,g);H.type=Zr,H.needsUpdate=!0;const O=I*4;for(let W=0;W<g;W++){const ee=S[W],ne=C[W],le=P[W],pe=B*N*4*W;for(let de=0;de<ee.count;de++){const _e=de*O;w===!0&&(r.fromBufferAttribute(ee,de),U[pe+_e+0]=r.x,U[pe+_e+1]=r.y,U[pe+_e+2]=r.z,U[pe+_e+3]=0),b===!0&&(r.fromBufferAttribute(ne,de),U[pe+_e+4]=r.x,U[pe+_e+5]=r.y,U[pe+_e+6]=r.z,U[pe+_e+7]=0),E===!0&&(r.fromBufferAttribute(le,de),U[pe+_e+8]=r.x,U[pe+_e+9]=r.y,U[pe+_e+10]=r.z,U[pe+_e+11]=le.itemSize===4?r.w:1)}}v={count:g,texture:H,size:new De(B,N)},i.set(u,v),u.addEventListener("dispose",D)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let w=0;for(let E=0;E<h.length;E++)w+=h[E];const b=u.morphTargetsRelative?1:1-w;d.getUniforms().setValue(n,"morphTargetBaseInfluence",b),d.getUniforms().setValue(n,"morphTargetInfluences",h)}d.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:s}}function DN(n,e,t,i){let r=new WeakMap;function s(d){const h=i.render.frame,m=d.geometry,g=e.get(d,m);if(r.get(g)!==h&&(e.update(g),r.set(g,h)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),r.get(d)!==h&&(t.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,n.ARRAY_BUFFER),r.set(d,h))),d.isSkinnedMesh){const v=d.skeleton;r.get(v)!==h&&(v.update(),r.set(v,h))}return g}function a(){r=new WeakMap}function u(d){const h=d.target;h.removeEventListener("dispose",u),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:a}}const wA=new Wn,bw=new Bx(1,1),MA=new bp,EA=new K0,bA=new Ap,Tw=[],Aw=[],Cw=new Float32Array(16),Rw=new Float32Array(9),Pw=new Float32Array(4);function vd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Tw[r];if(s===void 0&&(s=new Float32Array(r),Tw[r]=s),e!==0){i.toArray(s,0);for(let a=1,u=0;a!==e;++a)u+=t,n[a].toArray(s,u)}return s}function Pi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ii(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function vv(n,e){let t=Aw[e];t===void 0&&(t=new Int32Array(e),Aw[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function NN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function ON(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2fv(this.addr,e),Ii(t,e)}}function kN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pi(t,e))return;n.uniform3fv(this.addr,e),Ii(t,e)}}function UN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4fv(this.addr,e),Ii(t,e)}}function FN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ii(t,e)}else{if(Pi(t,i))return;Pw.set(i),n.uniformMatrix2fv(this.addr,!1,Pw),Ii(t,i)}}function zN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ii(t,e)}else{if(Pi(t,i))return;Rw.set(i),n.uniformMatrix3fv(this.addr,!1,Rw),Ii(t,i)}}function BN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ii(t,e)}else{if(Pi(t,i))return;Cw.set(i),n.uniformMatrix4fv(this.addr,!1,Cw),Ii(t,i)}}function VN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function HN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2iv(this.addr,e),Ii(t,e)}}function WN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pi(t,e))return;n.uniform3iv(this.addr,e),Ii(t,e)}}function GN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4iv(this.addr,e),Ii(t,e)}}function $N(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function XN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2uiv(this.addr,e),Ii(t,e)}}function jN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pi(t,e))return;n.uniform3uiv(this.addr,e),Ii(t,e)}}function qN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4uiv(this.addr,e),Ii(t,e)}}function YN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(bw.compareFunction=Lx,s=bw):s=wA,t.setTexture2D(e||s,r)}function KN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||EA,r)}function ZN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||bA,r)}function JN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||MA,r)}function QN(n){switch(n){case 5126:return NN;case 35664:return ON;case 35665:return kN;case 35666:return UN;case 35674:return FN;case 35675:return zN;case 35676:return BN;case 5124:case 35670:return VN;case 35667:case 35671:return HN;case 35668:case 35672:return WN;case 35669:case 35673:return GN;case 5125:return $N;case 36294:return XN;case 36295:return jN;case 36296:return qN;case 35678:case 36198:case 36298:case 36306:case 35682:return YN;case 35679:case 36299:case 36307:return KN;case 35680:case 36300:case 36308:case 36293:return ZN;case 36289:case 36303:case 36311:case 36292:return JN}}function eO(n,e){n.uniform1fv(this.addr,e)}function tO(n,e){const t=vd(e,this.size,2);n.uniform2fv(this.addr,t)}function nO(n,e){const t=vd(e,this.size,3);n.uniform3fv(this.addr,t)}function iO(n,e){const t=vd(e,this.size,4);n.uniform4fv(this.addr,t)}function rO(n,e){const t=vd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function sO(n,e){const t=vd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function oO(n,e){const t=vd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function aO(n,e){n.uniform1iv(this.addr,e)}function lO(n,e){n.uniform2iv(this.addr,e)}function uO(n,e){n.uniform3iv(this.addr,e)}function cO(n,e){n.uniform4iv(this.addr,e)}function fO(n,e){n.uniform1uiv(this.addr,e)}function dO(n,e){n.uniform2uiv(this.addr,e)}function hO(n,e){n.uniform3uiv(this.addr,e)}function pO(n,e){n.uniform4uiv(this.addr,e)}function mO(n,e,t){const i=this.cache,r=e.length,s=vv(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ii(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||wA,s[a])}function gO(n,e,t){const i=this.cache,r=e.length,s=vv(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ii(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||EA,s[a])}function vO(n,e,t){const i=this.cache,r=e.length,s=vv(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ii(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||bA,s[a])}function yO(n,e,t){const i=this.cache,r=e.length,s=vv(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ii(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||MA,s[a])}function _O(n){switch(n){case 5126:return eO;case 35664:return tO;case 35665:return nO;case 35666:return iO;case 35674:return rO;case 35675:return sO;case 35676:return oO;case 5124:case 35670:return aO;case 35667:case 35671:return lO;case 35668:case 35672:return uO;case 35669:case 35673:return cO;case 5125:return fO;case 36294:return dO;case 36295:return hO;case 36296:return pO;case 35678:case 36198:case 36298:case 36306:case 35682:return mO;case 35679:case 36299:case 36307:return gO;case 35680:case 36300:case 36308:case 36293:return vO;case 36289:case 36303:case 36311:case 36292:return yO}}class xO{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=QN(t.type)}}class SO{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=_O(t.type)}}class wO{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const u=r[s];u.setValue(e,t[u.id],i)}}}const Hy=/(\w+)(\])?(\[|\.)?/g;function Iw(n,e){n.seq.push(e),n.map[e.id]=e}function MO(n,e,t){const i=n.name,r=i.length;for(Hy.lastIndex=0;;){const s=Hy.exec(i),a=Hy.lastIndex;let u=s[1];const d=s[2]==="]",h=s[3];if(d&&(u=u|0),h===void 0||h==="["&&a+2===r){Iw(t,h===void 0?new xO(u,n,e):new SO(u,n,e));break}else{let g=t.map[u];g===void 0&&(g=new wO(u),Iw(t,g)),t=g}}}class Ug{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);MO(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const u=t[s],d=i[u.id];d.needsUpdate!==!1&&u.setValue(e,d.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function Lw(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const EO=37297;let bO=0;function TO(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const u=a+1;i.push(`${u===e?">":" "} ${u}: ${t[a]}`)}return i.join(`
`)}const Dw=new jt;function AO(n){mn._getMatrix(Dw,mn.workingColorSpace,n);const e=`mat3( ${Dw.elements.map(t=>t.toFixed(4))} )`;switch(mn.getTransfer(n)){case cp:return[e,"LinearTransferOETF"];case Mn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Nw(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+TO(n.getShaderSource(e),a)}else return r}function CO(n,e){const t=AO(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function RO(n,e){let t;switch(e){case Kb:t="Linear";break;case Zb:t="Reinhard";break;case Jb:t="Cineon";break;case xx:t="ACESFilmic";break;case eT:t="AgX";break;case tT:t="Neutral";break;case Qb:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const bg=new q;function PO(){mn.getLuminanceCoefficients(bg);const n=bg.x.toFixed(4),e=bg.y.toFixed(4),t=bg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function IO(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Hh).join(`
`)}function LO(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function DO(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let u=1;s.type===n.FLOAT_MAT2&&(u=2),s.type===n.FLOAT_MAT3&&(u=3),s.type===n.FLOAT_MAT4&&(u=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:u}}return t}function Hh(n){return n!==""}function Ow(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kw(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const NO=/^[ \t]*#include +<([\w\d./]+)>/gm;function Y_(n){return n.replace(NO,kO)}const OO=new Map;function kO(n,e){let t=en[e];if(t===void 0){const i=OO.get(e);if(i!==void 0)t=en[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Y_(t)}const UO=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Uw(n){return n.replace(UO,FO)}function FO(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Fw(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function zO(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===B0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Gh?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===uo&&(e="SHADOWMAP_TYPE_VSM"),e}function BO(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ba:case Nl:e="ENVMAP_TYPE_CUBE";break;case dd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function VO(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Nl:e="ENVMAP_MODE_REFRACTION";break}return e}function HO(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Mp:e="ENVMAP_BLENDING_MULTIPLY";break;case qb:e="ENVMAP_BLENDING_MIX";break;case Yb:e="ENVMAP_BLENDING_ADD";break}return e}function WO(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function GO(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,u=t.fragmentShader;const d=zO(t),h=BO(t),m=VO(t),g=HO(t),v=WO(t),x=IO(t),w=LO(s),b=r.createProgram();let E,S,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Hh).join(`
`),E.length>0&&(E+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Hh).join(`
`),S.length>0&&(S+=`
`)):(E=[Fw(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Hh).join(`
`),S=[Fw(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Uo?"#define TONE_MAPPING":"",t.toneMapping!==Uo?en.tonemapping_pars_fragment:"",t.toneMapping!==Uo?RO("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",en.colorspace_pars_fragment,CO("linearToOutputTexel",t.outputColorSpace),PO(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Hh).join(`
`)),a=Y_(a),a=Ow(a,t),a=kw(a,t),u=Y_(u),u=Ow(u,t),u=kw(u,t),a=Uw(a),u=Uw(u),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,E=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,S=["#define varying in",t.glslVersion===B_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===B_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const P=C+E+a,I=C+S+u,B=Lw(r,r.VERTEX_SHADER,P),N=Lw(r,r.FRAGMENT_SHADER,I);r.attachShader(b,B),r.attachShader(b,N),t.index0AttributeName!==void 0?r.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function U(W){if(n.debug.checkShaderErrors){const ee=r.getProgramInfoLog(b).trim(),ne=r.getShaderInfoLog(B).trim(),le=r.getShaderInfoLog(N).trim();let pe=!0,de=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(pe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,B,N);else{const _e=Nw(r,B,"vertex"),F=Nw(r,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+ee+`
`+_e+`
`+F)}else ee!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(ne===""||le==="")&&(de=!1);de&&(W.diagnostics={runnable:pe,programLog:ee,vertexShader:{log:ne,prefix:E},fragmentShader:{log:le,prefix:S}})}r.deleteShader(B),r.deleteShader(N),H=new Ug(r,b),O=DO(r,b)}let H;this.getUniforms=function(){return H===void 0&&U(this),H};let O;this.getAttributes=function(){return O===void 0&&U(this),O};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(b,EO)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=bO++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=B,this.fragmentShader=N,this}let $O=0;class XO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new jO(e),t.set(e,i)),i}}class jO{constructor(e){this.id=$O++,this.code=e,this.usedTimes=0}}function qO(n,e,t,i,r,s,a){const u=new Ju,d=new XO,h=new Set,m=[],g=r.logarithmicDepthBuffer,v=r.vertexTextures;let x=r.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(O){return h.add(O),O===0?"uv":`uv${O}`}function E(O,D,W,ee,ne){const le=ee.fog,pe=ne.geometry,de=O.isMeshStandardMaterial?ee.environment:null,_e=(O.isMeshStandardMaterial?t:e).get(O.envMap||de),F=_e&&_e.mapping===dd?_e.image.height:null,J=w[O.type];O.precision!==null&&(x=r.getMaxPrecision(O.precision),x!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",x,"instead."));const Z=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,$=Z!==void 0?Z.length:0;let re=0;pe.morphAttributes.position!==void 0&&(re=1),pe.morphAttributes.normal!==void 0&&(re=2),pe.morphAttributes.color!==void 0&&(re=3);let Ne,he,Te,Ie;if(J){const cn=co[J];Ne=cn.vertexShader,he=cn.fragmentShader}else Ne=O.vertexShader,he=O.fragmentShader,d.update(O),Te=d.getVertexShaderID(O),Ie=d.getFragmentShaderID(O);const Ce=n.getRenderTarget(),He=n.state.buffers.depth.getReversed(),gt=ne.isInstancedMesh===!0,Ze=ne.isBatchedMesh===!0,Nt=!!O.map,Oe=!!O.matcap,Re=!!_e,j=!!O.aoMap,pt=!!O.lightMap,Ue=!!O.bumpMap,st=!!O.normalMap,Ge=!!O.displacementMap,At=!!O.emissiveMap,qe=!!O.metalnessMap,X=!!O.roughnessMap,z=O.anisotropy>0,Q=O.clearcoat>0,me=O.dispersion>0,Pe=O.iridescence>0,Ee=O.sheen>0,et=O.transmission>0,je=z&&!!O.anisotropyMap,Je=Q&&!!O.clearcoatMap,Ft=Q&&!!O.clearcoatNormalMap,Fe=Q&&!!O.clearcoatRoughnessMap,lt=Pe&&!!O.iridescenceMap,bt=Pe&&!!O.iridescenceThicknessMap,Rt=Ee&&!!O.sheenColorMap,ut=Ee&&!!O.sheenRoughnessMap,Wt=!!O.specularMap,Ot=!!O.specularColorMap,hn=!!O.specularIntensityMap,ae=et&&!!O.transmissionMap,Qe=et&&!!O.thicknessMap,be=!!O.gradientMap,Le=!!O.alphaMap,rt=O.alphaTest>0,tt=!!O.alphaHash,zt=!!O.extensions;let Rn=Uo;O.toneMapped&&(Ce===null||Ce.isXRRenderTarget===!0)&&(Rn=n.toneMapping);const Zn={shaderID:J,shaderType:O.type,shaderName:O.name,vertexShader:Ne,fragmentShader:he,defines:O.defines,customVertexShaderID:Te,customFragmentShaderID:Ie,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:x,batching:Ze,batchingColor:Ze&&ne._colorsTexture!==null,instancing:gt,instancingColor:gt&&ne.instanceColor!==null,instancingMorph:gt&&ne.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Ce===null?n.outputColorSpace:Ce.isXRRenderTarget===!0?Ce.texture.colorSpace:sc,alphaToCoverage:!!O.alphaToCoverage,map:Nt,matcap:Oe,envMap:Re,envMapMode:Re&&_e.mapping,envMapCubeUVHeight:F,aoMap:j,lightMap:pt,bumpMap:Ue,normalMap:st,displacementMap:v&&Ge,emissiveMap:At,normalMapObjectSpace:st&&O.normalMapType===lT,normalMapTangentSpace:st&&O.normalMapType===Ul,metalnessMap:qe,roughnessMap:X,anisotropy:z,anisotropyMap:je,clearcoat:Q,clearcoatMap:Je,clearcoatNormalMap:Ft,clearcoatRoughnessMap:Fe,dispersion:me,iridescence:Pe,iridescenceMap:lt,iridescenceThicknessMap:bt,sheen:Ee,sheenColorMap:Rt,sheenRoughnessMap:ut,specularMap:Wt,specularColorMap:Ot,specularIntensityMap:hn,transmission:et,transmissionMap:ae,thicknessMap:Qe,gradientMap:be,opaque:O.transparent===!1&&O.blending===Yu&&O.alphaToCoverage===!1,alphaMap:Le,alphaTest:rt,alphaHash:tt,combine:O.combine,mapUv:Nt&&b(O.map.channel),aoMapUv:j&&b(O.aoMap.channel),lightMapUv:pt&&b(O.lightMap.channel),bumpMapUv:Ue&&b(O.bumpMap.channel),normalMapUv:st&&b(O.normalMap.channel),displacementMapUv:Ge&&b(O.displacementMap.channel),emissiveMapUv:At&&b(O.emissiveMap.channel),metalnessMapUv:qe&&b(O.metalnessMap.channel),roughnessMapUv:X&&b(O.roughnessMap.channel),anisotropyMapUv:je&&b(O.anisotropyMap.channel),clearcoatMapUv:Je&&b(O.clearcoatMap.channel),clearcoatNormalMapUv:Ft&&b(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&b(O.clearcoatRoughnessMap.channel),iridescenceMapUv:lt&&b(O.iridescenceMap.channel),iridescenceThicknessMapUv:bt&&b(O.iridescenceThicknessMap.channel),sheenColorMapUv:Rt&&b(O.sheenColorMap.channel),sheenRoughnessMapUv:ut&&b(O.sheenRoughnessMap.channel),specularMapUv:Wt&&b(O.specularMap.channel),specularColorMapUv:Ot&&b(O.specularColorMap.channel),specularIntensityMapUv:hn&&b(O.specularIntensityMap.channel),transmissionMapUv:ae&&b(O.transmissionMap.channel),thicknessMapUv:Qe&&b(O.thicknessMap.channel),alphaMapUv:Le&&b(O.alphaMap.channel),vertexTangents:!!pe.attributes.tangent&&(st||z),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,pointsUvs:ne.isPoints===!0&&!!pe.attributes.uv&&(Nt||Le),fog:!!le,useFog:O.fog===!0,fogExp2:!!le&&le.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:He,skinning:ne.isSkinnedMesh===!0,morphTargets:pe.morphAttributes.position!==void 0,morphNormals:pe.morphAttributes.normal!==void 0,morphColors:pe.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:re,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:Rn,decodeVideoTexture:Nt&&O.map.isVideoTexture===!0&&mn.getTransfer(O.map.colorSpace)===Mn,decodeVideoTextureEmissive:At&&O.emissiveMap.isVideoTexture===!0&&mn.getTransfer(O.emissiveMap.colorSpace)===Mn,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===Oo,flipSided:O.side===Lr,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:zt&&O.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(zt&&O.extensions.multiDraw===!0||Ze)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return Zn.vertexUv1s=h.has(1),Zn.vertexUv2s=h.has(2),Zn.vertexUv3s=h.has(3),h.clear(),Zn}function S(O){const D=[];if(O.shaderID?D.push(O.shaderID):(D.push(O.customVertexShaderID),D.push(O.customFragmentShaderID)),O.defines!==void 0)for(const W in O.defines)D.push(W),D.push(O.defines[W]);return O.isRawShaderMaterial===!1&&(C(D,O),P(D,O),D.push(n.outputColorSpace)),D.push(O.customProgramCacheKey),D.join()}function C(O,D){O.push(D.precision),O.push(D.outputColorSpace),O.push(D.envMapMode),O.push(D.envMapCubeUVHeight),O.push(D.mapUv),O.push(D.alphaMapUv),O.push(D.lightMapUv),O.push(D.aoMapUv),O.push(D.bumpMapUv),O.push(D.normalMapUv),O.push(D.displacementMapUv),O.push(D.emissiveMapUv),O.push(D.metalnessMapUv),O.push(D.roughnessMapUv),O.push(D.anisotropyMapUv),O.push(D.clearcoatMapUv),O.push(D.clearcoatNormalMapUv),O.push(D.clearcoatRoughnessMapUv),O.push(D.iridescenceMapUv),O.push(D.iridescenceThicknessMapUv),O.push(D.sheenColorMapUv),O.push(D.sheenRoughnessMapUv),O.push(D.specularMapUv),O.push(D.specularColorMapUv),O.push(D.specularIntensityMapUv),O.push(D.transmissionMapUv),O.push(D.thicknessMapUv),O.push(D.combine),O.push(D.fogExp2),O.push(D.sizeAttenuation),O.push(D.morphTargetsCount),O.push(D.morphAttributeCount),O.push(D.numDirLights),O.push(D.numPointLights),O.push(D.numSpotLights),O.push(D.numSpotLightMaps),O.push(D.numHemiLights),O.push(D.numRectAreaLights),O.push(D.numDirLightShadows),O.push(D.numPointLightShadows),O.push(D.numSpotLightShadows),O.push(D.numSpotLightShadowsWithMaps),O.push(D.numLightProbes),O.push(D.shadowMapType),O.push(D.toneMapping),O.push(D.numClippingPlanes),O.push(D.numClipIntersection),O.push(D.depthPacking)}function P(O,D){u.disableAll(),D.supportsVertexTextures&&u.enable(0),D.instancing&&u.enable(1),D.instancingColor&&u.enable(2),D.instancingMorph&&u.enable(3),D.matcap&&u.enable(4),D.envMap&&u.enable(5),D.normalMapObjectSpace&&u.enable(6),D.normalMapTangentSpace&&u.enable(7),D.clearcoat&&u.enable(8),D.iridescence&&u.enable(9),D.alphaTest&&u.enable(10),D.vertexColors&&u.enable(11),D.vertexAlphas&&u.enable(12),D.vertexUv1s&&u.enable(13),D.vertexUv2s&&u.enable(14),D.vertexUv3s&&u.enable(15),D.vertexTangents&&u.enable(16),D.anisotropy&&u.enable(17),D.alphaHash&&u.enable(18),D.batching&&u.enable(19),D.dispersion&&u.enable(20),D.batchingColor&&u.enable(21),O.push(u.mask),u.disableAll(),D.fog&&u.enable(0),D.useFog&&u.enable(1),D.flatShading&&u.enable(2),D.logarithmicDepthBuffer&&u.enable(3),D.reverseDepthBuffer&&u.enable(4),D.skinning&&u.enable(5),D.morphTargets&&u.enable(6),D.morphNormals&&u.enable(7),D.morphColors&&u.enable(8),D.premultipliedAlpha&&u.enable(9),D.shadowMapEnabled&&u.enable(10),D.doubleSided&&u.enable(11),D.flipSided&&u.enable(12),D.useDepthPacking&&u.enable(13),D.dithering&&u.enable(14),D.transmission&&u.enable(15),D.sheen&&u.enable(16),D.opaque&&u.enable(17),D.pointsUvs&&u.enable(18),D.decodeVideoTexture&&u.enable(19),D.decodeVideoTextureEmissive&&u.enable(20),D.alphaToCoverage&&u.enable(21),O.push(u.mask)}function I(O){const D=w[O.type];let W;if(D){const ee=co[D];W=ST.clone(ee.uniforms)}else W=O.uniforms;return W}function B(O,D){let W;for(let ee=0,ne=m.length;ee<ne;ee++){const le=m[ee];if(le.cacheKey===D){W=le,++W.usedTimes;break}}return W===void 0&&(W=new GO(n,D,O,s),m.push(W)),W}function N(O){if(--O.usedTimes===0){const D=m.indexOf(O);m[D]=m[m.length-1],m.pop(),O.destroy()}}function U(O){d.remove(O)}function H(){d.dispose()}return{getParameters:E,getProgramCacheKey:S,getUniforms:I,acquireProgram:B,releaseProgram:N,releaseShaderCache:U,programs:m,dispose:H}}function YO(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let u=n.get(a);return u===void 0&&(u={},n.set(a,u)),u}function i(a){n.delete(a)}function r(a,u,d){n.get(a)[u]=d}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function KO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function zw(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Bw(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(g,v,x,w,b,E){let S=n[e];return S===void 0?(S={id:g.id,object:g,geometry:v,material:x,groupOrder:w,renderOrder:g.renderOrder,z:b,group:E},n[e]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=x,S.groupOrder=w,S.renderOrder=g.renderOrder,S.z=b,S.group=E),e++,S}function u(g,v,x,w,b,E){const S=a(g,v,x,w,b,E);x.transmission>0?i.push(S):x.transparent===!0?r.push(S):t.push(S)}function d(g,v,x,w,b,E){const S=a(g,v,x,w,b,E);x.transmission>0?i.unshift(S):x.transparent===!0?r.unshift(S):t.unshift(S)}function h(g,v){t.length>1&&t.sort(g||KO),i.length>1&&i.sort(v||zw),r.length>1&&r.sort(v||zw)}function m(){for(let g=e,v=n.length;g<v;g++){const x=n[g];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:u,unshift:d,finish:m,sort:h}}function ZO(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new Bw,n.set(i,[a])):r>=s.length?(a=new Bw,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function JO(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new ct};break;case"SpotLight":t={position:new q,direction:new q,color:new ct,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new ct,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new ct,groundColor:new ct};break;case"RectAreaLight":t={color:new ct,position:new q,halfWidth:new q,halfHeight:new q};break}return n[e.id]=t,t}}}function QO(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let ek=0;function tk(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function nk(n){const e=new JO,t=QO(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new q);const r=new q,s=new Ut,a=new Ut;function u(h){let m=0,g=0,v=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let x=0,w=0,b=0,E=0,S=0,C=0,P=0,I=0,B=0,N=0,U=0;h.sort(tk);for(let O=0,D=h.length;O<D;O++){const W=h[O],ee=W.color,ne=W.intensity,le=W.distance,pe=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)m+=ee.r*ne,g+=ee.g*ne,v+=ee.b*ne;else if(W.isLightProbe){for(let de=0;de<9;de++)i.probe[de].addScaledVector(W.sh.coefficients[de],ne);U++}else if(W.isDirectionalLight){const de=e.get(W);if(de.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const _e=W.shadow,F=t.get(W);F.shadowIntensity=_e.intensity,F.shadowBias=_e.bias,F.shadowNormalBias=_e.normalBias,F.shadowRadius=_e.radius,F.shadowMapSize=_e.mapSize,i.directionalShadow[x]=F,i.directionalShadowMap[x]=pe,i.directionalShadowMatrix[x]=W.shadow.matrix,C++}i.directional[x]=de,x++}else if(W.isSpotLight){const de=e.get(W);de.position.setFromMatrixPosition(W.matrixWorld),de.color.copy(ee).multiplyScalar(ne),de.distance=le,de.coneCos=Math.cos(W.angle),de.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),de.decay=W.decay,i.spot[b]=de;const _e=W.shadow;if(W.map&&(i.spotLightMap[B]=W.map,B++,_e.updateMatrices(W),W.castShadow&&N++),i.spotLightMatrix[b]=_e.matrix,W.castShadow){const F=t.get(W);F.shadowIntensity=_e.intensity,F.shadowBias=_e.bias,F.shadowNormalBias=_e.normalBias,F.shadowRadius=_e.radius,F.shadowMapSize=_e.mapSize,i.spotShadow[b]=F,i.spotShadowMap[b]=pe,I++}b++}else if(W.isRectAreaLight){const de=e.get(W);de.color.copy(ee).multiplyScalar(ne),de.halfWidth.set(W.width*.5,0,0),de.halfHeight.set(0,W.height*.5,0),i.rectArea[E]=de,E++}else if(W.isPointLight){const de=e.get(W);if(de.color.copy(W.color).multiplyScalar(W.intensity),de.distance=W.distance,de.decay=W.decay,W.castShadow){const _e=W.shadow,F=t.get(W);F.shadowIntensity=_e.intensity,F.shadowBias=_e.bias,F.shadowNormalBias=_e.normalBias,F.shadowRadius=_e.radius,F.shadowMapSize=_e.mapSize,F.shadowCameraNear=_e.camera.near,F.shadowCameraFar=_e.camera.far,i.pointShadow[w]=F,i.pointShadowMap[w]=pe,i.pointShadowMatrix[w]=W.shadow.matrix,P++}i.point[w]=de,w++}else if(W.isHemisphereLight){const de=e.get(W);de.skyColor.copy(W.color).multiplyScalar(ne),de.groundColor.copy(W.groundColor).multiplyScalar(ne),i.hemi[S]=de,S++}}E>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=it.LTC_FLOAT_1,i.rectAreaLTC2=it.LTC_FLOAT_2):(i.rectAreaLTC1=it.LTC_HALF_1,i.rectAreaLTC2=it.LTC_HALF_2)),i.ambient[0]=m,i.ambient[1]=g,i.ambient[2]=v;const H=i.hash;(H.directionalLength!==x||H.pointLength!==w||H.spotLength!==b||H.rectAreaLength!==E||H.hemiLength!==S||H.numDirectionalShadows!==C||H.numPointShadows!==P||H.numSpotShadows!==I||H.numSpotMaps!==B||H.numLightProbes!==U)&&(i.directional.length=x,i.spot.length=b,i.rectArea.length=E,i.point.length=w,i.hemi.length=S,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=P,i.pointShadowMap.length=P,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=P,i.spotLightMatrix.length=I+B-N,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=N,i.numLightProbes=U,H.directionalLength=x,H.pointLength=w,H.spotLength=b,H.rectAreaLength=E,H.hemiLength=S,H.numDirectionalShadows=C,H.numPointShadows=P,H.numSpotShadows=I,H.numSpotMaps=B,H.numLightProbes=U,i.version=ek++)}function d(h,m){let g=0,v=0,x=0,w=0,b=0;const E=m.matrixWorldInverse;for(let S=0,C=h.length;S<C;S++){const P=h[S];if(P.isDirectionalLight){const I=i.directional[g];I.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(E),g++}else if(P.isSpotLight){const I=i.spot[x];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(E),I.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(E),x++}else if(P.isRectAreaLight){const I=i.rectArea[w];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(E),a.identity(),s.copy(P.matrixWorld),s.premultiply(E),a.extractRotation(s),I.halfWidth.set(P.width*.5,0,0),I.halfHeight.set(0,P.height*.5,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),w++}else if(P.isPointLight){const I=i.point[v];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(E),v++}else if(P.isHemisphereLight){const I=i.hemi[b];I.direction.setFromMatrixPosition(P.matrixWorld),I.direction.transformDirection(E),b++}}}return{setup:u,setupView:d,state:i}}function Vw(n){const e=new nk(n),t=[],i=[];function r(m){h.camera=m,t.length=0,i.length=0}function s(m){t.push(m)}function a(m){i.push(m)}function u(){e.setup(t)}function d(m){e.setupView(t,m)}const h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:u,setupLightsView:d,pushLight:s,pushShadow:a}}function ik(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let u;return a===void 0?(u=new Vw(n),e.set(r,[u])):s>=a.length?(u=new Vw(n),a.push(u)):u=a[s],u}function i(){e=new WeakMap}return{get:t,dispose:i}}const rk=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sk=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ok(n,e,t){let i=new Cp;const r=new De,s=new De,a=new un,u=new qx({depthPacking:aT}),d=new Yx,h={},m=t.maxTextureSize,g={[za]:Lr,[Lr]:za,[Oo]:Oo},v=new po({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new De},radius:{value:4}},vertexShader:rk,fragmentShader:sk}),x=v.clone();x.defines.HORIZONTAL_PASS=1;const w=new tn;w.setAttribute("position",new Cn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new mi(w,v),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=B0;let S=this.type;this.render=function(N,U,H){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||N.length===0)return;const O=n.getRenderTarget(),D=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),ee=n.state;ee.setBlending(ka),ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const ne=S!==uo&&this.type===uo,le=S===uo&&this.type!==uo;for(let pe=0,de=N.length;pe<de;pe++){const _e=N[pe],F=_e.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",_e,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;r.copy(F.mapSize);const J=F.getFrameExtents();if(r.multiply(J),s.copy(F.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(s.x=Math.floor(m/J.x),r.x=s.x*J.x,F.mapSize.x=s.x),r.y>m&&(s.y=Math.floor(m/J.y),r.y=s.y*J.y,F.mapSize.y=s.y)),F.map===null||ne===!0||le===!0){const $=this.type!==uo?{minFilter:Ji,magFilter:Ji}:{};F.map!==null&&F.map.dispose(),F.map=new Vo(r.x,r.y,$),F.map.texture.name=_e.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();const Z=F.getViewportCount();for(let $=0;$<Z;$++){const re=F.getViewport($);a.set(s.x*re.x,s.y*re.y,s.x*re.z,s.y*re.w),ee.viewport(a),F.updateMatrices(_e,$),i=F.getFrustum(),I(U,H,F.camera,_e,this.type)}F.isPointLightShadow!==!0&&this.type===uo&&C(F,H),F.needsUpdate=!1}S=this.type,E.needsUpdate=!1,n.setRenderTarget(O,D,W)};function C(N,U){const H=e.update(b);v.defines.VSM_SAMPLES!==N.blurSamples&&(v.defines.VSM_SAMPLES=N.blurSamples,x.defines.VSM_SAMPLES=N.blurSamples,v.needsUpdate=!0,x.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Vo(r.x,r.y)),v.uniforms.shadow_pass.value=N.map.texture,v.uniforms.resolution.value=N.mapSize,v.uniforms.radius.value=N.radius,n.setRenderTarget(N.mapPass),n.clear(),n.renderBufferDirect(U,null,H,v,b,null),x.uniforms.shadow_pass.value=N.mapPass.texture,x.uniforms.resolution.value=N.mapSize,x.uniforms.radius.value=N.radius,n.setRenderTarget(N.map),n.clear(),n.renderBufferDirect(U,null,H,x,b,null)}function P(N,U,H,O){let D=null;const W=H.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(W!==void 0)D=W;else if(D=H.isPointLight===!0?d:u,n.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0||U.map&&U.alphaTest>0){const ee=D.uuid,ne=U.uuid;let le=h[ee];le===void 0&&(le={},h[ee]=le);let pe=le[ne];pe===void 0&&(pe=D.clone(),le[ne]=pe,U.addEventListener("dispose",B)),D=pe}if(D.visible=U.visible,D.wireframe=U.wireframe,O===uo?D.side=U.shadowSide!==null?U.shadowSide:U.side:D.side=U.shadowSide!==null?U.shadowSide:g[U.side],D.alphaMap=U.alphaMap,D.alphaTest=U.alphaTest,D.map=U.map,D.clipShadows=U.clipShadows,D.clippingPlanes=U.clippingPlanes,D.clipIntersection=U.clipIntersection,D.displacementMap=U.displacementMap,D.displacementScale=U.displacementScale,D.displacementBias=U.displacementBias,D.wireframeLinewidth=U.wireframeLinewidth,D.linewidth=U.linewidth,H.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const ee=n.properties.get(D);ee.light=H}return D}function I(N,U,H,O,D){if(N.visible===!1)return;if(N.layers.test(U.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&D===uo)&&(!N.frustumCulled||i.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,N.matrixWorld);const ne=e.update(N),le=N.material;if(Array.isArray(le)){const pe=ne.groups;for(let de=0,_e=pe.length;de<_e;de++){const F=pe[de],J=le[F.materialIndex];if(J&&J.visible){const Z=P(N,J,O,D);N.onBeforeShadow(n,N,U,H,ne,Z,F),n.renderBufferDirect(H,null,ne,Z,N,F),N.onAfterShadow(n,N,U,H,ne,Z,F)}}}else if(le.visible){const pe=P(N,le,O,D);N.onBeforeShadow(n,N,U,H,ne,pe,null),n.renderBufferDirect(H,null,ne,pe,N,null),N.onAfterShadow(n,N,U,H,ne,pe,null)}}const ee=N.children;for(let ne=0,le=ee.length;ne<le;ne++)I(ee[ne],U,H,O,D)}function B(N){N.target.removeEventListener("dispose",B);for(const H in h){const O=h[H],D=N.target.uuid;D in O&&(O[D].dispose(),delete O[D])}}}const ak={[Hg]:Wg,[Gg]:jg,[$g]:qg,[nc]:Xg,[Wg]:Hg,[jg]:Gg,[qg]:$g,[Xg]:nc};function lk(n,e){function t(){let ae=!1;const Qe=new un;let be=null;const Le=new un(0,0,0,0);return{setMask:function(rt){be!==rt&&!ae&&(n.colorMask(rt,rt,rt,rt),be=rt)},setLocked:function(rt){ae=rt},setClear:function(rt,tt,zt,Rn,Zn){Zn===!0&&(rt*=Rn,tt*=Rn,zt*=Rn),Qe.set(rt,tt,zt,Rn),Le.equals(Qe)===!1&&(n.clearColor(rt,tt,zt,Rn),Le.copy(Qe))},reset:function(){ae=!1,be=null,Le.set(-1,0,0,0)}}}function i(){let ae=!1,Qe=!1,be=null,Le=null,rt=null;return{setReversed:function(tt){if(Qe!==tt){const zt=e.get("EXT_clip_control");Qe?zt.clipControlEXT(zt.LOWER_LEFT_EXT,zt.ZERO_TO_ONE_EXT):zt.clipControlEXT(zt.LOWER_LEFT_EXT,zt.NEGATIVE_ONE_TO_ONE_EXT);const Rn=rt;rt=null,this.setClear(Rn)}Qe=tt},getReversed:function(){return Qe},setTest:function(tt){tt?Ce(n.DEPTH_TEST):He(n.DEPTH_TEST)},setMask:function(tt){be!==tt&&!ae&&(n.depthMask(tt),be=tt)},setFunc:function(tt){if(Qe&&(tt=ak[tt]),Le!==tt){switch(tt){case Hg:n.depthFunc(n.NEVER);break;case Wg:n.depthFunc(n.ALWAYS);break;case Gg:n.depthFunc(n.LESS);break;case nc:n.depthFunc(n.LEQUAL);break;case $g:n.depthFunc(n.EQUAL);break;case Xg:n.depthFunc(n.GEQUAL);break;case jg:n.depthFunc(n.GREATER);break;case qg:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Le=tt}},setLocked:function(tt){ae=tt},setClear:function(tt){rt!==tt&&(Qe&&(tt=1-tt),n.clearDepth(tt),rt=tt)},reset:function(){ae=!1,be=null,Le=null,rt=null,Qe=!1}}}function r(){let ae=!1,Qe=null,be=null,Le=null,rt=null,tt=null,zt=null,Rn=null,Zn=null;return{setTest:function(cn){ae||(cn?Ce(n.STENCIL_TEST):He(n.STENCIL_TEST))},setMask:function(cn){Qe!==cn&&!ae&&(n.stencilMask(cn),Qe=cn)},setFunc:function(cn,Vi,Hi){(be!==cn||Le!==Vi||rt!==Hi)&&(n.stencilFunc(cn,Vi,Hi),be=cn,Le=Vi,rt=Hi)},setOp:function(cn,Vi,Hi){(tt!==cn||zt!==Vi||Rn!==Hi)&&(n.stencilOp(cn,Vi,Hi),tt=cn,zt=Vi,Rn=Hi)},setLocked:function(cn){ae=cn},setClear:function(cn){Zn!==cn&&(n.clearStencil(cn),Zn=cn)},reset:function(){ae=!1,Qe=null,be=null,Le=null,rt=null,tt=null,zt=null,Rn=null,Zn=null}}}const s=new t,a=new i,u=new r,d=new WeakMap,h=new WeakMap;let m={},g={},v=new WeakMap,x=[],w=null,b=!1,E=null,S=null,C=null,P=null,I=null,B=null,N=null,U=new ct(0,0,0),H=0,O=!1,D=null,W=null,ee=null,ne=null,le=null;const pe=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let de=!1,_e=0;const F=n.getParameter(n.VERSION);F.indexOf("WebGL")!==-1?(_e=parseFloat(/^WebGL (\d)/.exec(F)[1]),de=_e>=1):F.indexOf("OpenGL ES")!==-1&&(_e=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),de=_e>=2);let J=null,Z={};const $=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),Ne=new un().fromArray($),he=new un().fromArray(re);function Te(ae,Qe,be,Le){const rt=new Uint8Array(4),tt=n.createTexture();n.bindTexture(ae,tt),n.texParameteri(ae,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ae,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let zt=0;zt<be;zt++)ae===n.TEXTURE_3D||ae===n.TEXTURE_2D_ARRAY?n.texImage3D(Qe,0,n.RGBA,1,1,Le,0,n.RGBA,n.UNSIGNED_BYTE,rt):n.texImage2D(Qe+zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,rt);return tt}const Ie={};Ie[n.TEXTURE_2D]=Te(n.TEXTURE_2D,n.TEXTURE_2D,1),Ie[n.TEXTURE_CUBE_MAP]=Te(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ie[n.TEXTURE_2D_ARRAY]=Te(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ie[n.TEXTURE_3D]=Te(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),u.setClear(0),Ce(n.DEPTH_TEST),a.setFunc(nc),Ue(!1),st(N_),Ce(n.CULL_FACE),j(ka);function Ce(ae){m[ae]!==!0&&(n.enable(ae),m[ae]=!0)}function He(ae){m[ae]!==!1&&(n.disable(ae),m[ae]=!1)}function gt(ae,Qe){return g[ae]!==Qe?(n.bindFramebuffer(ae,Qe),g[ae]=Qe,ae===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=Qe),ae===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=Qe),!0):!1}function Ze(ae,Qe){let be=x,Le=!1;if(ae){be=v.get(Qe),be===void 0&&(be=[],v.set(Qe,be));const rt=ae.textures;if(be.length!==rt.length||be[0]!==n.COLOR_ATTACHMENT0){for(let tt=0,zt=rt.length;tt<zt;tt++)be[tt]=n.COLOR_ATTACHMENT0+tt;be.length=rt.length,Le=!0}}else be[0]!==n.BACK&&(be[0]=n.BACK,Le=!0);Le&&n.drawBuffers(be)}function Nt(ae){return w!==ae?(n.useProgram(ae),w=ae,!0):!1}const Oe={[Dl]:n.FUNC_ADD,[Ib]:n.FUNC_SUBTRACT,[Lb]:n.FUNC_REVERSE_SUBTRACT};Oe[Db]=n.MIN,Oe[Nb]=n.MAX;const Re={[Ob]:n.ZERO,[kb]:n.ONE,[Ub]:n.SRC_COLOR,[Bg]:n.SRC_ALPHA,[Wb]:n.SRC_ALPHA_SATURATE,[Vb]:n.DST_COLOR,[zb]:n.DST_ALPHA,[Fb]:n.ONE_MINUS_SRC_COLOR,[Vg]:n.ONE_MINUS_SRC_ALPHA,[Hb]:n.ONE_MINUS_DST_COLOR,[Bb]:n.ONE_MINUS_DST_ALPHA,[Gb]:n.CONSTANT_COLOR,[$b]:n.ONE_MINUS_CONSTANT_COLOR,[Xb]:n.CONSTANT_ALPHA,[jb]:n.ONE_MINUS_CONSTANT_ALPHA};function j(ae,Qe,be,Le,rt,tt,zt,Rn,Zn,cn){if(ae===ka){b===!0&&(He(n.BLEND),b=!1);return}if(b===!1&&(Ce(n.BLEND),b=!0),ae!==Pb){if(ae!==E||cn!==O){if((S!==Dl||I!==Dl)&&(n.blendEquation(n.FUNC_ADD),S=Dl,I=Dl),cn)switch(ae){case Yu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case O_:n.blendFunc(n.ONE,n.ONE);break;case k_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case U_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case Yu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case O_:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case k_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case U_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}C=null,P=null,B=null,N=null,U.set(0,0,0),H=0,E=ae,O=cn}return}rt=rt||Qe,tt=tt||be,zt=zt||Le,(Qe!==S||rt!==I)&&(n.blendEquationSeparate(Oe[Qe],Oe[rt]),S=Qe,I=rt),(be!==C||Le!==P||tt!==B||zt!==N)&&(n.blendFuncSeparate(Re[be],Re[Le],Re[tt],Re[zt]),C=be,P=Le,B=tt,N=zt),(Rn.equals(U)===!1||Zn!==H)&&(n.blendColor(Rn.r,Rn.g,Rn.b,Zn),U.copy(Rn),H=Zn),E=ae,O=!1}function pt(ae,Qe){ae.side===Oo?He(n.CULL_FACE):Ce(n.CULL_FACE);let be=ae.side===Lr;Qe&&(be=!be),Ue(be),ae.blending===Yu&&ae.transparent===!1?j(ka):j(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.blendColor,ae.blendAlpha,ae.premultipliedAlpha),a.setFunc(ae.depthFunc),a.setTest(ae.depthTest),a.setMask(ae.depthWrite),s.setMask(ae.colorWrite);const Le=ae.stencilWrite;u.setTest(Le),Le&&(u.setMask(ae.stencilWriteMask),u.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),u.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),At(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?Ce(n.SAMPLE_ALPHA_TO_COVERAGE):He(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ue(ae){D!==ae&&(ae?n.frontFace(n.CW):n.frontFace(n.CCW),D=ae)}function st(ae){ae!==Ab?(Ce(n.CULL_FACE),ae!==W&&(ae===N_?n.cullFace(n.BACK):ae===Cb?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):He(n.CULL_FACE),W=ae}function Ge(ae){ae!==ee&&(de&&n.lineWidth(ae),ee=ae)}function At(ae,Qe,be){ae?(Ce(n.POLYGON_OFFSET_FILL),(ne!==Qe||le!==be)&&(n.polygonOffset(Qe,be),ne=Qe,le=be)):He(n.POLYGON_OFFSET_FILL)}function qe(ae){ae?Ce(n.SCISSOR_TEST):He(n.SCISSOR_TEST)}function X(ae){ae===void 0&&(ae=n.TEXTURE0+pe-1),J!==ae&&(n.activeTexture(ae),J=ae)}function z(ae,Qe,be){be===void 0&&(J===null?be=n.TEXTURE0+pe-1:be=J);let Le=Z[be];Le===void 0&&(Le={type:void 0,texture:void 0},Z[be]=Le),(Le.type!==ae||Le.texture!==Qe)&&(J!==be&&(n.activeTexture(be),J=be),n.bindTexture(ae,Qe||Ie[ae]),Le.type=ae,Le.texture=Qe)}function Q(){const ae=Z[J];ae!==void 0&&ae.type!==void 0&&(n.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function me(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ee(){try{n.texSubImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function et(){try{n.texSubImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function je(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ft(){try{n.texStorage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Fe(){try{n.texStorage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function lt(){try{n.texImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function bt(){try{n.texImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Rt(ae){Ne.equals(ae)===!1&&(n.scissor(ae.x,ae.y,ae.z,ae.w),Ne.copy(ae))}function ut(ae){he.equals(ae)===!1&&(n.viewport(ae.x,ae.y,ae.z,ae.w),he.copy(ae))}function Wt(ae,Qe){let be=h.get(Qe);be===void 0&&(be=new WeakMap,h.set(Qe,be));let Le=be.get(ae);Le===void 0&&(Le=n.getUniformBlockIndex(Qe,ae.name),be.set(ae,Le))}function Ot(ae,Qe){const Le=h.get(Qe).get(ae);d.get(Qe)!==Le&&(n.uniformBlockBinding(Qe,Le,ae.__bindingPointIndex),d.set(Qe,Le))}function hn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},J=null,Z={},g={},v=new WeakMap,x=[],w=null,b=!1,E=null,S=null,C=null,P=null,I=null,B=null,N=null,U=new ct(0,0,0),H=0,O=!1,D=null,W=null,ee=null,ne=null,le=null,Ne.set(0,0,n.canvas.width,n.canvas.height),he.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),u.reset()}return{buffers:{color:s,depth:a,stencil:u},enable:Ce,disable:He,bindFramebuffer:gt,drawBuffers:Ze,useProgram:Nt,setBlending:j,setMaterial:pt,setFlipSided:Ue,setCullFace:st,setLineWidth:Ge,setPolygonOffset:At,setScissorTest:qe,activeTexture:X,bindTexture:z,unbindTexture:Q,compressedTexImage2D:me,compressedTexImage3D:Pe,texImage2D:lt,texImage3D:bt,updateUBOMapping:Wt,uniformBlockBinding:Ot,texStorage2D:Ft,texStorage3D:Fe,texSubImage2D:Ee,texSubImage3D:et,compressedTexSubImage2D:je,compressedTexSubImage3D:Je,scissor:Rt,viewport:ut,reset:hn}}function uk(n,e,t,i,r,s,a){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new De,m=new WeakMap;let g;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(X,z){return x?new OffscreenCanvas(X,z):hp("canvas")}function b(X,z,Q){let me=1;const Pe=qe(X);if((Pe.width>Q||Pe.height>Q)&&(me=Q/Math.max(Pe.width,Pe.height)),me<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const Ee=Math.floor(me*Pe.width),et=Math.floor(me*Pe.height);g===void 0&&(g=w(Ee,et));const je=z?w(Ee,et):g;return je.width=Ee,je.height=et,je.getContext("2d").drawImage(X,0,0,Ee,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pe.width+"x"+Pe.height+") to ("+Ee+"x"+et+")."),je}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pe.width+"x"+Pe.height+")."),X;return X}function E(X){return X.generateMipmaps}function S(X){n.generateMipmap(X)}function C(X){return X.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?n.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function P(X,z,Q,me,Pe=!1){if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ee=z;if(z===n.RED&&(Q===n.FLOAT&&(Ee=n.R32F),Q===n.HALF_FLOAT&&(Ee=n.R16F),Q===n.UNSIGNED_BYTE&&(Ee=n.R8)),z===n.RED_INTEGER&&(Q===n.UNSIGNED_BYTE&&(Ee=n.R8UI),Q===n.UNSIGNED_SHORT&&(Ee=n.R16UI),Q===n.UNSIGNED_INT&&(Ee=n.R32UI),Q===n.BYTE&&(Ee=n.R8I),Q===n.SHORT&&(Ee=n.R16I),Q===n.INT&&(Ee=n.R32I)),z===n.RG&&(Q===n.FLOAT&&(Ee=n.RG32F),Q===n.HALF_FLOAT&&(Ee=n.RG16F),Q===n.UNSIGNED_BYTE&&(Ee=n.RG8)),z===n.RG_INTEGER&&(Q===n.UNSIGNED_BYTE&&(Ee=n.RG8UI),Q===n.UNSIGNED_SHORT&&(Ee=n.RG16UI),Q===n.UNSIGNED_INT&&(Ee=n.RG32UI),Q===n.BYTE&&(Ee=n.RG8I),Q===n.SHORT&&(Ee=n.RG16I),Q===n.INT&&(Ee=n.RG32I)),z===n.RGB_INTEGER&&(Q===n.UNSIGNED_BYTE&&(Ee=n.RGB8UI),Q===n.UNSIGNED_SHORT&&(Ee=n.RGB16UI),Q===n.UNSIGNED_INT&&(Ee=n.RGB32UI),Q===n.BYTE&&(Ee=n.RGB8I),Q===n.SHORT&&(Ee=n.RGB16I),Q===n.INT&&(Ee=n.RGB32I)),z===n.RGBA_INTEGER&&(Q===n.UNSIGNED_BYTE&&(Ee=n.RGBA8UI),Q===n.UNSIGNED_SHORT&&(Ee=n.RGBA16UI),Q===n.UNSIGNED_INT&&(Ee=n.RGBA32UI),Q===n.BYTE&&(Ee=n.RGBA8I),Q===n.SHORT&&(Ee=n.RGBA16I),Q===n.INT&&(Ee=n.RGBA32I)),z===n.RGB&&Q===n.UNSIGNED_INT_5_9_9_9_REV&&(Ee=n.RGB9_E5),z===n.RGBA){const et=Pe?cp:mn.getTransfer(me);Q===n.FLOAT&&(Ee=n.RGBA32F),Q===n.HALF_FLOAT&&(Ee=n.RGBA16F),Q===n.UNSIGNED_BYTE&&(Ee=et===Mn?n.SRGB8_ALPHA8:n.RGBA8),Q===n.UNSIGNED_SHORT_4_4_4_4&&(Ee=n.RGBA4),Q===n.UNSIGNED_SHORT_5_5_5_1&&(Ee=n.RGB5_A1)}return(Ee===n.R16F||Ee===n.R32F||Ee===n.RG16F||Ee===n.RG32F||Ee===n.RGBA16F||Ee===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ee}function I(X,z){let Q;return X?z===null||z===Va||z===ic?Q=n.DEPTH24_STENCIL8:z===Zr?Q=n.DEPTH32F_STENCIL8:z===rd&&(Q=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):z===null||z===Va||z===ic?Q=n.DEPTH_COMPONENT24:z===Zr?Q=n.DEPTH_COMPONENT32F:z===rd&&(Q=n.DEPTH_COMPONENT16),Q}function B(X,z){return E(X)===!0||X.isFramebufferTexture&&X.minFilter!==Ji&&X.minFilter!==Ai?Math.log2(Math.max(z.width,z.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?z.mipmaps.length:1}function N(X){const z=X.target;z.removeEventListener("dispose",N),H(z),z.isVideoTexture&&m.delete(z)}function U(X){const z=X.target;z.removeEventListener("dispose",U),D(z)}function H(X){const z=i.get(X);if(z.__webglInit===void 0)return;const Q=X.source,me=v.get(Q);if(me){const Pe=me[z.__cacheKey];Pe.usedTimes--,Pe.usedTimes===0&&O(X),Object.keys(me).length===0&&v.delete(Q)}i.remove(X)}function O(X){const z=i.get(X);n.deleteTexture(z.__webglTexture);const Q=X.source,me=v.get(Q);delete me[z.__cacheKey],a.memory.textures--}function D(X){const z=i.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),i.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let me=0;me<6;me++){if(Array.isArray(z.__webglFramebuffer[me]))for(let Pe=0;Pe<z.__webglFramebuffer[me].length;Pe++)n.deleteFramebuffer(z.__webglFramebuffer[me][Pe]);else n.deleteFramebuffer(z.__webglFramebuffer[me]);z.__webglDepthbuffer&&n.deleteRenderbuffer(z.__webglDepthbuffer[me])}else{if(Array.isArray(z.__webglFramebuffer))for(let me=0;me<z.__webglFramebuffer.length;me++)n.deleteFramebuffer(z.__webglFramebuffer[me]);else n.deleteFramebuffer(z.__webglFramebuffer);if(z.__webglDepthbuffer&&n.deleteRenderbuffer(z.__webglDepthbuffer),z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(z.__webglMultisampledFramebuffer),z.__webglColorRenderbuffer)for(let me=0;me<z.__webglColorRenderbuffer.length;me++)z.__webglColorRenderbuffer[me]&&n.deleteRenderbuffer(z.__webglColorRenderbuffer[me]);z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(z.__webglDepthRenderbuffer)}const Q=X.textures;for(let me=0,Pe=Q.length;me<Pe;me++){const Ee=i.get(Q[me]);Ee.__webglTexture&&(n.deleteTexture(Ee.__webglTexture),a.memory.textures--),i.remove(Q[me])}i.remove(X)}let W=0;function ee(){W=0}function ne(){const X=W;return X>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+r.maxTextures),W+=1,X}function le(X){const z=[];return z.push(X.wrapS),z.push(X.wrapT),z.push(X.wrapR||0),z.push(X.magFilter),z.push(X.minFilter),z.push(X.anisotropy),z.push(X.internalFormat),z.push(X.format),z.push(X.type),z.push(X.generateMipmaps),z.push(X.premultiplyAlpha),z.push(X.flipY),z.push(X.unpackAlignment),z.push(X.colorSpace),z.join()}function pe(X,z){const Q=i.get(X);if(X.isVideoTexture&&Ge(X),X.isRenderTargetTexture===!1&&X.version>0&&Q.__version!==X.version){const me=X.image;if(me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{he(Q,X,z);return}}t.bindTexture(n.TEXTURE_2D,Q.__webglTexture,n.TEXTURE0+z)}function de(X,z){const Q=i.get(X);if(X.version>0&&Q.__version!==X.version){he(Q,X,z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Q.__webglTexture,n.TEXTURE0+z)}function _e(X,z){const Q=i.get(X);if(X.version>0&&Q.__version!==X.version){he(Q,X,z);return}t.bindTexture(n.TEXTURE_3D,Q.__webglTexture,n.TEXTURE0+z)}function F(X,z){const Q=i.get(X);if(X.version>0&&Q.__version!==X.version){Te(Q,X,z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Q.__webglTexture,n.TEXTURE0+z)}const J={[op]:n.REPEAT,[Ls]:n.CLAMP_TO_EDGE,[ap]:n.MIRRORED_REPEAT},Z={[Ji]:n.NEAREST,[Sx]:n.NEAREST_MIPMAP_NEAREST,[qf]:n.NEAREST_MIPMAP_LINEAR,[Ai]:n.LINEAR,[$h]:n.LINEAR_MIPMAP_NEAREST,[ko]:n.LINEAR_MIPMAP_LINEAR},$={[uT]:n.NEVER,[mT]:n.ALWAYS,[cT]:n.LESS,[Lx]:n.LEQUAL,[fT]:n.EQUAL,[pT]:n.GEQUAL,[dT]:n.GREATER,[hT]:n.NOTEQUAL};function re(X,z){if(z.type===Zr&&e.has("OES_texture_float_linear")===!1&&(z.magFilter===Ai||z.magFilter===$h||z.magFilter===qf||z.magFilter===ko||z.minFilter===Ai||z.minFilter===$h||z.minFilter===qf||z.minFilter===ko)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(X,n.TEXTURE_WRAP_S,J[z.wrapS]),n.texParameteri(X,n.TEXTURE_WRAP_T,J[z.wrapT]),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,J[z.wrapR]),n.texParameteri(X,n.TEXTURE_MAG_FILTER,Z[z.magFilter]),n.texParameteri(X,n.TEXTURE_MIN_FILTER,Z[z.minFilter]),z.compareFunction&&(n.texParameteri(X,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(X,n.TEXTURE_COMPARE_FUNC,$[z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(z.magFilter===Ji||z.minFilter!==qf&&z.minFilter!==ko||z.type===Zr&&e.has("OES_texture_float_linear")===!1)return;if(z.anisotropy>1||i.get(z).__currentAnisotropy){const Q=e.get("EXT_texture_filter_anisotropic");n.texParameterf(X,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,r.getMaxAnisotropy())),i.get(z).__currentAnisotropy=z.anisotropy}}}function Ne(X,z){let Q=!1;X.__webglInit===void 0&&(X.__webglInit=!0,z.addEventListener("dispose",N));const me=z.source;let Pe=v.get(me);Pe===void 0&&(Pe={},v.set(me,Pe));const Ee=le(z);if(Ee!==X.__cacheKey){Pe[Ee]===void 0&&(Pe[Ee]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,Q=!0),Pe[Ee].usedTimes++;const et=Pe[X.__cacheKey];et!==void 0&&(Pe[X.__cacheKey].usedTimes--,et.usedTimes===0&&O(z)),X.__cacheKey=Ee,X.__webglTexture=Pe[Ee].texture}return Q}function he(X,z,Q){let me=n.TEXTURE_2D;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(me=n.TEXTURE_2D_ARRAY),z.isData3DTexture&&(me=n.TEXTURE_3D);const Pe=Ne(X,z),Ee=z.source;t.bindTexture(me,X.__webglTexture,n.TEXTURE0+Q);const et=i.get(Ee);if(Ee.version!==et.__version||Pe===!0){t.activeTexture(n.TEXTURE0+Q);const je=mn.getPrimaries(mn.workingColorSpace),Je=z.colorSpace===La?null:mn.getPrimaries(z.colorSpace),Ft=z.colorSpace===La||je===Je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);let Fe=b(z.image,!1,r.maxTextureSize);Fe=At(z,Fe);const lt=s.convert(z.format,z.colorSpace),bt=s.convert(z.type);let Rt=P(z.internalFormat,lt,bt,z.colorSpace,z.isVideoTexture);re(me,z);let ut;const Wt=z.mipmaps,Ot=z.isVideoTexture!==!0,hn=et.__version===void 0||Pe===!0,ae=Ee.dataReady,Qe=B(z,Fe);if(z.isDepthTexture)Rt=I(z.format===rc,z.type),hn&&(Ot?t.texStorage2D(n.TEXTURE_2D,1,Rt,Fe.width,Fe.height):t.texImage2D(n.TEXTURE_2D,0,Rt,Fe.width,Fe.height,0,lt,bt,null));else if(z.isDataTexture)if(Wt.length>0){Ot&&hn&&t.texStorage2D(n.TEXTURE_2D,Qe,Rt,Wt[0].width,Wt[0].height);for(let be=0,Le=Wt.length;be<Le;be++)ut=Wt[be],Ot?ae&&t.texSubImage2D(n.TEXTURE_2D,be,0,0,ut.width,ut.height,lt,bt,ut.data):t.texImage2D(n.TEXTURE_2D,be,Rt,ut.width,ut.height,0,lt,bt,ut.data);z.generateMipmaps=!1}else Ot?(hn&&t.texStorage2D(n.TEXTURE_2D,Qe,Rt,Fe.width,Fe.height),ae&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe.width,Fe.height,lt,bt,Fe.data)):t.texImage2D(n.TEXTURE_2D,0,Rt,Fe.width,Fe.height,0,lt,bt,Fe.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){Ot&&hn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Rt,Wt[0].width,Wt[0].height,Fe.depth);for(let be=0,Le=Wt.length;be<Le;be++)if(ut=Wt[be],z.format!==cr)if(lt!==null)if(Ot){if(ae)if(z.layerUpdates.size>0){const rt=j_(ut.width,ut.height,z.format,z.type);for(const tt of z.layerUpdates){const zt=ut.data.subarray(tt*rt/ut.data.BYTES_PER_ELEMENT,(tt+1)*rt/ut.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,tt,ut.width,ut.height,1,lt,zt)}z.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,0,ut.width,ut.height,Fe.depth,lt,ut.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,be,Rt,ut.width,ut.height,Fe.depth,0,ut.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ot?ae&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,0,ut.width,ut.height,Fe.depth,lt,bt,ut.data):t.texImage3D(n.TEXTURE_2D_ARRAY,be,Rt,ut.width,ut.height,Fe.depth,0,lt,bt,ut.data)}else{Ot&&hn&&t.texStorage2D(n.TEXTURE_2D,Qe,Rt,Wt[0].width,Wt[0].height);for(let be=0,Le=Wt.length;be<Le;be++)ut=Wt[be],z.format!==cr?lt!==null?Ot?ae&&t.compressedTexSubImage2D(n.TEXTURE_2D,be,0,0,ut.width,ut.height,lt,ut.data):t.compressedTexImage2D(n.TEXTURE_2D,be,Rt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ot?ae&&t.texSubImage2D(n.TEXTURE_2D,be,0,0,ut.width,ut.height,lt,bt,ut.data):t.texImage2D(n.TEXTURE_2D,be,Rt,ut.width,ut.height,0,lt,bt,ut.data)}else if(z.isDataArrayTexture)if(Ot){if(hn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Rt,Fe.width,Fe.height,Fe.depth),ae)if(z.layerUpdates.size>0){const be=j_(Fe.width,Fe.height,z.format,z.type);for(const Le of z.layerUpdates){const rt=Fe.data.subarray(Le*be/Fe.data.BYTES_PER_ELEMENT,(Le+1)*be/Fe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Le,Fe.width,Fe.height,1,lt,bt,rt)}z.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,lt,bt,Fe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Rt,Fe.width,Fe.height,Fe.depth,0,lt,bt,Fe.data);else if(z.isData3DTexture)Ot?(hn&&t.texStorage3D(n.TEXTURE_3D,Qe,Rt,Fe.width,Fe.height,Fe.depth),ae&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,lt,bt,Fe.data)):t.texImage3D(n.TEXTURE_3D,0,Rt,Fe.width,Fe.height,Fe.depth,0,lt,bt,Fe.data);else if(z.isFramebufferTexture){if(hn)if(Ot)t.texStorage2D(n.TEXTURE_2D,Qe,Rt,Fe.width,Fe.height);else{let be=Fe.width,Le=Fe.height;for(let rt=0;rt<Qe;rt++)t.texImage2D(n.TEXTURE_2D,rt,Rt,be,Le,0,lt,bt,null),be>>=1,Le>>=1}}else if(Wt.length>0){if(Ot&&hn){const be=qe(Wt[0]);t.texStorage2D(n.TEXTURE_2D,Qe,Rt,be.width,be.height)}for(let be=0,Le=Wt.length;be<Le;be++)ut=Wt[be],Ot?ae&&t.texSubImage2D(n.TEXTURE_2D,be,0,0,lt,bt,ut):t.texImage2D(n.TEXTURE_2D,be,Rt,lt,bt,ut);z.generateMipmaps=!1}else if(Ot){if(hn){const be=qe(Fe);t.texStorage2D(n.TEXTURE_2D,Qe,Rt,be.width,be.height)}ae&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,lt,bt,Fe)}else t.texImage2D(n.TEXTURE_2D,0,Rt,lt,bt,Fe);E(z)&&S(me),et.__version=Ee.version,z.onUpdate&&z.onUpdate(z)}X.__version=z.version}function Te(X,z,Q){if(z.image.length!==6)return;const me=Ne(X,z),Pe=z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+Q);const Ee=i.get(Pe);if(Pe.version!==Ee.__version||me===!0){t.activeTexture(n.TEXTURE0+Q);const et=mn.getPrimaries(mn.workingColorSpace),je=z.colorSpace===La?null:mn.getPrimaries(z.colorSpace),Je=z.colorSpace===La||et===je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);const Ft=z.isCompressedTexture||z.image[0].isCompressedTexture,Fe=z.image[0]&&z.image[0].isDataTexture,lt=[];for(let Le=0;Le<6;Le++)!Ft&&!Fe?lt[Le]=b(z.image[Le],!0,r.maxCubemapSize):lt[Le]=Fe?z.image[Le].image:z.image[Le],lt[Le]=At(z,lt[Le]);const bt=lt[0],Rt=s.convert(z.format,z.colorSpace),ut=s.convert(z.type),Wt=P(z.internalFormat,Rt,ut,z.colorSpace),Ot=z.isVideoTexture!==!0,hn=Ee.__version===void 0||me===!0,ae=Pe.dataReady;let Qe=B(z,bt);re(n.TEXTURE_CUBE_MAP,z);let be;if(Ft){Ot&&hn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Wt,bt.width,bt.height);for(let Le=0;Le<6;Le++){be=lt[Le].mipmaps;for(let rt=0;rt<be.length;rt++){const tt=be[rt];z.format!==cr?Rt!==null?Ot?ae&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,rt,0,0,tt.width,tt.height,Rt,tt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,rt,Wt,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ot?ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,rt,0,0,tt.width,tt.height,Rt,ut,tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,rt,Wt,tt.width,tt.height,0,Rt,ut,tt.data)}}}else{if(be=z.mipmaps,Ot&&hn){be.length>0&&Qe++;const Le=qe(lt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Wt,Le.width,Le.height)}for(let Le=0;Le<6;Le++)if(Fe){Ot?ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,lt[Le].width,lt[Le].height,Rt,ut,lt[Le].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Wt,lt[Le].width,lt[Le].height,0,Rt,ut,lt[Le].data);for(let rt=0;rt<be.length;rt++){const zt=be[rt].image[Le].image;Ot?ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,rt+1,0,0,zt.width,zt.height,Rt,ut,zt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,rt+1,Wt,zt.width,zt.height,0,Rt,ut,zt.data)}}else{Ot?ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,Rt,ut,lt[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Wt,Rt,ut,lt[Le]);for(let rt=0;rt<be.length;rt++){const tt=be[rt];Ot?ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,rt+1,0,0,Rt,ut,tt.image[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,rt+1,Wt,Rt,ut,tt.image[Le])}}}E(z)&&S(n.TEXTURE_CUBE_MAP),Ee.__version=Pe.version,z.onUpdate&&z.onUpdate(z)}X.__version=z.version}function Ie(X,z,Q,me,Pe,Ee){const et=s.convert(Q.format,Q.colorSpace),je=s.convert(Q.type),Je=P(Q.internalFormat,et,je,Q.colorSpace),Ft=i.get(z),Fe=i.get(Q);if(Fe.__renderTarget=z,!Ft.__hasExternalTextures){const lt=Math.max(1,z.width>>Ee),bt=Math.max(1,z.height>>Ee);Pe===n.TEXTURE_3D||Pe===n.TEXTURE_2D_ARRAY?t.texImage3D(Pe,Ee,Je,lt,bt,z.depth,0,et,je,null):t.texImage2D(Pe,Ee,Je,lt,bt,0,et,je,null)}t.bindFramebuffer(n.FRAMEBUFFER,X),st(z)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,me,Pe,Fe.__webglTexture,0,Ue(z)):(Pe===n.TEXTURE_2D||Pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,me,Pe,Fe.__webglTexture,Ee),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ce(X,z,Q){if(n.bindRenderbuffer(n.RENDERBUFFER,X),z.depthBuffer){const me=z.depthTexture,Pe=me&&me.isDepthTexture?me.type:null,Ee=I(z.stencilBuffer,Pe),et=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,je=Ue(z);st(z)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,je,Ee,z.width,z.height):Q?n.renderbufferStorageMultisample(n.RENDERBUFFER,je,Ee,z.width,z.height):n.renderbufferStorage(n.RENDERBUFFER,Ee,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,et,n.RENDERBUFFER,X)}else{const me=z.textures;for(let Pe=0;Pe<me.length;Pe++){const Ee=me[Pe],et=s.convert(Ee.format,Ee.colorSpace),je=s.convert(Ee.type),Je=P(Ee.internalFormat,et,je,Ee.colorSpace),Ft=Ue(z);Q&&st(z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ft,Je,z.width,z.height):st(z)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ft,Je,z.width,z.height):n.renderbufferStorage(n.RENDERBUFFER,Je,z.width,z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function He(X,z){if(z&&z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,X),!(z.depthTexture&&z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const me=i.get(z.depthTexture);me.__renderTarget=z,(!me.__webglTexture||z.depthTexture.image.width!==z.width||z.depthTexture.image.height!==z.height)&&(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0),pe(z.depthTexture,0);const Pe=me.__webglTexture,Ee=Ue(z);if(z.depthTexture.format===Ku)st(z)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0,Ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0);else if(z.depthTexture.format===rc)st(z)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0,Ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function gt(X){const z=i.get(X),Q=X.isWebGLCubeRenderTarget===!0;if(z.__boundDepthTexture!==X.depthTexture){const me=X.depthTexture;if(z.__depthDisposeCallback&&z.__depthDisposeCallback(),me){const Pe=()=>{delete z.__boundDepthTexture,delete z.__depthDisposeCallback,me.removeEventListener("dispose",Pe)};me.addEventListener("dispose",Pe),z.__depthDisposeCallback=Pe}z.__boundDepthTexture=me}if(X.depthTexture&&!z.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");He(z.__webglFramebuffer,X)}else if(Q){z.__webglDepthbuffer=[];for(let me=0;me<6;me++)if(t.bindFramebuffer(n.FRAMEBUFFER,z.__webglFramebuffer[me]),z.__webglDepthbuffer[me]===void 0)z.__webglDepthbuffer[me]=n.createRenderbuffer(),Ce(z.__webglDepthbuffer[me],X,!1);else{const Pe=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ee=z.__webglDepthbuffer[me];n.bindRenderbuffer(n.RENDERBUFFER,Ee),n.framebufferRenderbuffer(n.FRAMEBUFFER,Pe,n.RENDERBUFFER,Ee)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,z.__webglFramebuffer),z.__webglDepthbuffer===void 0)z.__webglDepthbuffer=n.createRenderbuffer(),Ce(z.__webglDepthbuffer,X,!1);else{const me=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Pe=z.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,me,n.RENDERBUFFER,Pe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ze(X,z,Q){const me=i.get(X);z!==void 0&&Ie(me.__webglFramebuffer,X,X.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Q!==void 0&&gt(X)}function Nt(X){const z=X.texture,Q=i.get(X),me=i.get(z);X.addEventListener("dispose",U);const Pe=X.textures,Ee=X.isWebGLCubeRenderTarget===!0,et=Pe.length>1;if(et||(me.__webglTexture===void 0&&(me.__webglTexture=n.createTexture()),me.__version=z.version,a.memory.textures++),Ee){Q.__webglFramebuffer=[];for(let je=0;je<6;je++)if(z.mipmaps&&z.mipmaps.length>0){Q.__webglFramebuffer[je]=[];for(let Je=0;Je<z.mipmaps.length;Je++)Q.__webglFramebuffer[je][Je]=n.createFramebuffer()}else Q.__webglFramebuffer[je]=n.createFramebuffer()}else{if(z.mipmaps&&z.mipmaps.length>0){Q.__webglFramebuffer=[];for(let je=0;je<z.mipmaps.length;je++)Q.__webglFramebuffer[je]=n.createFramebuffer()}else Q.__webglFramebuffer=n.createFramebuffer();if(et)for(let je=0,Je=Pe.length;je<Je;je++){const Ft=i.get(Pe[je]);Ft.__webglTexture===void 0&&(Ft.__webglTexture=n.createTexture(),a.memory.textures++)}if(X.samples>0&&st(X)===!1){Q.__webglMultisampledFramebuffer=n.createFramebuffer(),Q.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let je=0;je<Pe.length;je++){const Je=Pe[je];Q.__webglColorRenderbuffer[je]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Q.__webglColorRenderbuffer[je]);const Ft=s.convert(Je.format,Je.colorSpace),Fe=s.convert(Je.type),lt=P(Je.internalFormat,Ft,Fe,Je.colorSpace,X.isXRRenderTarget===!0),bt=Ue(X);n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,lt,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,Q.__webglColorRenderbuffer[je])}n.bindRenderbuffer(n.RENDERBUFFER,null),X.depthBuffer&&(Q.__webglDepthRenderbuffer=n.createRenderbuffer(),Ce(Q.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ee){t.bindTexture(n.TEXTURE_CUBE_MAP,me.__webglTexture),re(n.TEXTURE_CUBE_MAP,z);for(let je=0;je<6;je++)if(z.mipmaps&&z.mipmaps.length>0)for(let Je=0;Je<z.mipmaps.length;Je++)Ie(Q.__webglFramebuffer[je][Je],X,z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+je,Je);else Ie(Q.__webglFramebuffer[je],X,z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+je,0);E(z)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(et){for(let je=0,Je=Pe.length;je<Je;je++){const Ft=Pe[je],Fe=i.get(Ft);t.bindTexture(n.TEXTURE_2D,Fe.__webglTexture),re(n.TEXTURE_2D,Ft),Ie(Q.__webglFramebuffer,X,Ft,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,0),E(Ft)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let je=n.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(je=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(je,me.__webglTexture),re(je,z),z.mipmaps&&z.mipmaps.length>0)for(let Je=0;Je<z.mipmaps.length;Je++)Ie(Q.__webglFramebuffer[Je],X,z,n.COLOR_ATTACHMENT0,je,Je);else Ie(Q.__webglFramebuffer,X,z,n.COLOR_ATTACHMENT0,je,0);E(z)&&S(je),t.unbindTexture()}X.depthBuffer&&gt(X)}function Oe(X){const z=X.textures;for(let Q=0,me=z.length;Q<me;Q++){const Pe=z[Q];if(E(Pe)){const Ee=C(X),et=i.get(Pe).__webglTexture;t.bindTexture(Ee,et),S(Ee),t.unbindTexture()}}}const Re=[],j=[];function pt(X){if(X.samples>0){if(st(X)===!1){const z=X.textures,Q=X.width,me=X.height;let Pe=n.COLOR_BUFFER_BIT;const Ee=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=i.get(X),je=z.length>1;if(je)for(let Je=0;Je<z.length;Je++)t.bindFramebuffer(n.FRAMEBUFFER,et.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let Je=0;Je<z.length;Je++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Pe|=n.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Pe|=n.STENCIL_BUFFER_BIT)),je){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,et.__webglColorRenderbuffer[Je]);const Ft=i.get(z[Je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ft,0)}n.blitFramebuffer(0,0,Q,me,0,0,Q,me,Pe,n.NEAREST),d===!0&&(Re.length=0,j.length=0,Re.push(n.COLOR_ATTACHMENT0+Je),X.depthBuffer&&X.resolveDepthBuffer===!1&&(Re.push(Ee),j.push(Ee),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,j)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Re))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),je)for(let Je=0;Je<z.length;Je++){t.bindFramebuffer(n.FRAMEBUFFER,et.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,et.__webglColorRenderbuffer[Je]);const Ft=i.get(z[Je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,Ft,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&d){const z=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[z])}}}function Ue(X){return Math.min(r.maxSamples,X.samples)}function st(X){const z=i.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function Ge(X){const z=a.render.frame;m.get(X)!==z&&(m.set(X,z),X.update())}function At(X,z){const Q=X.colorSpace,me=X.format,Pe=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||Q!==sc&&Q!==La&&(mn.getTransfer(Q)===Mn?(me!==cr||Pe!==ho)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),z}function qe(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(h.width=X.naturalWidth||X.width,h.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(h.width=X.displayWidth,h.height=X.displayHeight):(h.width=X.width,h.height=X.height),h}this.allocateTextureUnit=ne,this.resetTextureUnits=ee,this.setTexture2D=pe,this.setTexture2DArray=de,this.setTexture3D=_e,this.setTextureCube=F,this.rebindTextures=Ze,this.setupRenderTarget=Nt,this.updateRenderTargetMipmap=Oe,this.updateMultisampleRenderTarget=pt,this.setupDepthRenderbuffer=gt,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=st}function TA(n,e){function t(i,r=La){let s;const a=mn.getTransfer(r);if(i===ho)return n.UNSIGNED_BYTE;if(i===W0)return n.UNSIGNED_SHORT_4_4_4_4;if(i===G0)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Ex)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===wx)return n.BYTE;if(i===Mx)return n.SHORT;if(i===rd)return n.UNSIGNED_SHORT;if(i===H0)return n.INT;if(i===Va)return n.UNSIGNED_INT;if(i===Zr)return n.FLOAT;if(i===hd)return n.HALF_FLOAT;if(i===bx)return n.ALPHA;if(i===Tx)return n.RGB;if(i===cr)return n.RGBA;if(i===Ax)return n.LUMINANCE;if(i===Cx)return n.LUMINANCE_ALPHA;if(i===Ku)return n.DEPTH_COMPONENT;if(i===rc)return n.DEPTH_STENCIL;if(i===$0)return n.RED;if(i===Ep)return n.RED_INTEGER;if(i===Rx)return n.RG;if(i===X0)return n.RG_INTEGER;if(i===j0)return n.RGBA_INTEGER;if(i===Xh||i===jh||i===qh||i===Yh)if(a===Mn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Xh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===jh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===qh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Yh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Xh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===jh)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===qh)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Yh)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Yg||i===Kg||i===Zg||i===Jg)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Yg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Kg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Zg)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Jg)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Qg||i===e0||i===t0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Qg||i===e0)return a===Mn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===t0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===n0||i===i0||i===r0||i===s0||i===o0||i===a0||i===l0||i===u0||i===c0||i===f0||i===d0||i===h0||i===p0||i===m0)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===n0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===i0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===r0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===s0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===o0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===a0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===l0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===u0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===c0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===f0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===d0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===h0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===p0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===m0)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Kh||i===g0||i===v0)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Kh)return a===Mn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===g0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===v0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Px||i===y0||i===_0||i===x0)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Kh)return s.COMPRESSED_RED_RGTC1_EXT;if(i===y0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===_0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===x0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===ic?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const ck=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fk=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class dk{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Wn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new po({vertexShader:ck,fragmentShader:fk,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new mi(new gd(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class hk extends Wo{constructor(e,t){super();const i=this;let r=null,s=1,a=null,u="local-floor",d=1,h=null,m=null,g=null,v=null,x=null,w=null;const b=new dk,E=t.getContextAttributes();let S=null,C=null;const P=[],I=[],B=new De;let N=null;const U=new Bi;U.viewport=new un;const H=new Bi;H.viewport=new un;const O=[U,H],D=new pA;let W=null,ee=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let Te=P[he];return Te===void 0&&(Te=new kg,P[he]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(he){let Te=P[he];return Te===void 0&&(Te=new kg,P[he]=Te),Te.getGripSpace()},this.getHand=function(he){let Te=P[he];return Te===void 0&&(Te=new kg,P[he]=Te),Te.getHandSpace()};function ne(he){const Te=I.indexOf(he.inputSource);if(Te===-1)return;const Ie=P[Te];Ie!==void 0&&(Ie.update(he.inputSource,he.frame,h||a),Ie.dispatchEvent({type:he.type,data:he.inputSource}))}function le(){r.removeEventListener("select",ne),r.removeEventListener("selectstart",ne),r.removeEventListener("selectend",ne),r.removeEventListener("squeeze",ne),r.removeEventListener("squeezestart",ne),r.removeEventListener("squeezeend",ne),r.removeEventListener("end",le),r.removeEventListener("inputsourceschange",pe);for(let he=0;he<P.length;he++){const Te=I[he];Te!==null&&(I[he]=null,P[he].disconnect(Te))}W=null,ee=null,b.reset(),e.setRenderTarget(S),x=null,v=null,g=null,r=null,C=null,Ne.stop(),i.isPresenting=!1,e.setPixelRatio(N),e.setSize(B.width,B.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){u=he,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(he){h=he},this.getBaseLayer=function(){return v!==null?v:x},this.getBinding=function(){return g},this.getFrame=function(){return w},this.getSession=function(){return r},this.setSession=async function(he){if(r=he,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",ne),r.addEventListener("selectstart",ne),r.addEventListener("selectend",ne),r.addEventListener("squeeze",ne),r.addEventListener("squeezestart",ne),r.addEventListener("squeezeend",ne),r.addEventListener("end",le),r.addEventListener("inputsourceschange",pe),E.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(B),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ie=null,Ce=null,He=null;E.depth&&(He=E.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ie=E.stencil?rc:Ku,Ce=E.stencil?ic:Va);const gt={colorFormat:t.RGBA8,depthFormat:He,scaleFactor:s};g=new XRWebGLBinding(r,t),v=g.createProjectionLayer(gt),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),C=new Vo(v.textureWidth,v.textureHeight,{format:cr,type:ho,depthTexture:new Bx(v.textureWidth,v.textureHeight,Ce,void 0,void 0,void 0,void 0,void 0,void 0,Ie),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1})}else{const Ie={antialias:E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:s};x=new XRWebGLLayer(r,t,Ie),r.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),C=new Vo(x.framebufferWidth,x.framebufferHeight,{format:cr,type:ho,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil})}C.isXRRenderTarget=!0,this.setFoveation(d),h=null,a=await r.requestReferenceSpace(u),Ne.setContext(r),Ne.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function pe(he){for(let Te=0;Te<he.removed.length;Te++){const Ie=he.removed[Te],Ce=I.indexOf(Ie);Ce>=0&&(I[Ce]=null,P[Ce].disconnect(Ie))}for(let Te=0;Te<he.added.length;Te++){const Ie=he.added[Te];let Ce=I.indexOf(Ie);if(Ce===-1){for(let gt=0;gt<P.length;gt++)if(gt>=I.length){I.push(Ie),Ce=gt;break}else if(I[gt]===null){I[gt]=Ie,Ce=gt;break}if(Ce===-1)break}const He=P[Ce];He&&He.connect(Ie)}}const de=new q,_e=new q;function F(he,Te,Ie){de.setFromMatrixPosition(Te.matrixWorld),_e.setFromMatrixPosition(Ie.matrixWorld);const Ce=de.distanceTo(_e),He=Te.projectionMatrix.elements,gt=Ie.projectionMatrix.elements,Ze=He[14]/(He[10]-1),Nt=He[14]/(He[10]+1),Oe=(He[9]+1)/He[5],Re=(He[9]-1)/He[5],j=(He[8]-1)/He[0],pt=(gt[8]+1)/gt[0],Ue=Ze*j,st=Ze*pt,Ge=Ce/(-j+pt),At=Ge*-j;if(Te.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(At),he.translateZ(Ge),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert(),He[10]===-1)he.projectionMatrix.copy(Te.projectionMatrix),he.projectionMatrixInverse.copy(Te.projectionMatrixInverse);else{const qe=Ze+Ge,X=Nt+Ge,z=Ue-At,Q=st+(Ce-At),me=Oe*Nt/X*qe,Pe=Re*Nt/X*qe;he.projectionMatrix.makePerspective(z,Q,me,Pe,qe,X),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}}function J(he,Te){Te===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(Te.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(r===null)return;let Te=he.near,Ie=he.far;b.texture!==null&&(b.depthNear>0&&(Te=b.depthNear),b.depthFar>0&&(Ie=b.depthFar)),D.near=H.near=U.near=Te,D.far=H.far=U.far=Ie,(W!==D.near||ee!==D.far)&&(r.updateRenderState({depthNear:D.near,depthFar:D.far}),W=D.near,ee=D.far),U.layers.mask=he.layers.mask|2,H.layers.mask=he.layers.mask|4,D.layers.mask=U.layers.mask|H.layers.mask;const Ce=he.parent,He=D.cameras;J(D,Ce);for(let gt=0;gt<He.length;gt++)J(He[gt],Ce);He.length===2?F(D,U,H):D.projectionMatrix.copy(U.projectionMatrix),Z(he,D,Ce)};function Z(he,Te,Ie){Ie===null?he.matrix.copy(Te.matrixWorld):(he.matrix.copy(Ie.matrixWorld),he.matrix.invert(),he.matrix.multiply(Te.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(Te.projectionMatrix),he.projectionMatrixInverse.copy(Te.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=sd*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(v===null&&x===null))return d},this.setFoveation=function(he){d=he,v!==null&&(v.fixedFoveation=he),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=he)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(D)};let $=null;function re(he,Te){if(m=Te.getViewerPose(h||a),w=Te,m!==null){const Ie=m.views;x!==null&&(e.setRenderTargetFramebuffer(C,x.framebuffer),e.setRenderTarget(C));let Ce=!1;Ie.length!==D.cameras.length&&(D.cameras.length=0,Ce=!0);for(let Ze=0;Ze<Ie.length;Ze++){const Nt=Ie[Ze];let Oe=null;if(x!==null)Oe=x.getViewport(Nt);else{const j=g.getViewSubImage(v,Nt);Oe=j.viewport,Ze===0&&(e.setRenderTargetTextures(C,j.colorTexture,v.ignoreDepthValues?void 0:j.depthStencilTexture),e.setRenderTarget(C))}let Re=O[Ze];Re===void 0&&(Re=new Bi,Re.layers.enable(Ze),Re.viewport=new un,O[Ze]=Re),Re.matrix.fromArray(Nt.transform.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.projectionMatrix.fromArray(Nt.projectionMatrix),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert(),Re.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),Ze===0&&(D.matrix.copy(Re.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),Ce===!0&&D.cameras.push(Re)}const He=r.enabledFeatures;if(He&&He.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&g){const Ze=g.getDepthInformation(Ie[0]);Ze&&Ze.isValid&&Ze.texture&&b.init(e,Ze,r.renderState)}}for(let Ie=0;Ie<P.length;Ie++){const Ce=I[Ie],He=P[Ie];Ce!==null&&He!==void 0&&He.update(Ce,Te,h||a)}$&&$(he,Te),Te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Te}),w=null}const Ne=new SA;Ne.setAnimationLoop(re),this.setAnimationLoop=function(he){$=he},this.dispose=function(){}}}const Fu=new Qr,pk=new Ut;function mk(n,e){function t(E,S){E.matrixAutoUpdate===!0&&E.updateMatrix(),S.value.copy(E.matrix)}function i(E,S){S.color.getRGB(E.fogColor.value,xT(n)),S.isFog?(E.fogNear.value=S.near,E.fogFar.value=S.far):S.isFogExp2&&(E.fogDensity.value=S.density)}function r(E,S,C,P,I){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(E,S):S.isMeshToonMaterial?(s(E,S),g(E,S)):S.isMeshPhongMaterial?(s(E,S),m(E,S)):S.isMeshStandardMaterial?(s(E,S),v(E,S),S.isMeshPhysicalMaterial&&x(E,S,I)):S.isMeshMatcapMaterial?(s(E,S),w(E,S)):S.isMeshDepthMaterial?s(E,S):S.isMeshDistanceMaterial?(s(E,S),b(E,S)):S.isMeshNormalMaterial?s(E,S):S.isLineBasicMaterial?(a(E,S),S.isLineDashedMaterial&&u(E,S)):S.isPointsMaterial?d(E,S,C,P):S.isSpriteMaterial?h(E,S):S.isShadowMaterial?(E.color.value.copy(S.color),E.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(E,S){E.opacity.value=S.opacity,S.color&&E.diffuse.value.copy(S.color),S.emissive&&E.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(E.map.value=S.map,t(S.map,E.mapTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,t(S.alphaMap,E.alphaMapTransform)),S.bumpMap&&(E.bumpMap.value=S.bumpMap,t(S.bumpMap,E.bumpMapTransform),E.bumpScale.value=S.bumpScale,S.side===Lr&&(E.bumpScale.value*=-1)),S.normalMap&&(E.normalMap.value=S.normalMap,t(S.normalMap,E.normalMapTransform),E.normalScale.value.copy(S.normalScale),S.side===Lr&&E.normalScale.value.negate()),S.displacementMap&&(E.displacementMap.value=S.displacementMap,t(S.displacementMap,E.displacementMapTransform),E.displacementScale.value=S.displacementScale,E.displacementBias.value=S.displacementBias),S.emissiveMap&&(E.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,E.emissiveMapTransform)),S.specularMap&&(E.specularMap.value=S.specularMap,t(S.specularMap,E.specularMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest);const C=e.get(S),P=C.envMap,I=C.envMapRotation;P&&(E.envMap.value=P,Fu.copy(I),Fu.x*=-1,Fu.y*=-1,Fu.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Fu.y*=-1,Fu.z*=-1),E.envMapRotation.value.setFromMatrix4(pk.makeRotationFromEuler(Fu)),E.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=S.reflectivity,E.ior.value=S.ior,E.refractionRatio.value=S.refractionRatio),S.lightMap&&(E.lightMap.value=S.lightMap,E.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,E.lightMapTransform)),S.aoMap&&(E.aoMap.value=S.aoMap,E.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,E.aoMapTransform))}function a(E,S){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,S.map&&(E.map.value=S.map,t(S.map,E.mapTransform))}function u(E,S){E.dashSize.value=S.dashSize,E.totalSize.value=S.dashSize+S.gapSize,E.scale.value=S.scale}function d(E,S,C,P){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,E.size.value=S.size*C,E.scale.value=P*.5,S.map&&(E.map.value=S.map,t(S.map,E.uvTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,t(S.alphaMap,E.alphaMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest)}function h(E,S){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,E.rotation.value=S.rotation,S.map&&(E.map.value=S.map,t(S.map,E.mapTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,t(S.alphaMap,E.alphaMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest)}function m(E,S){E.specular.value.copy(S.specular),E.shininess.value=Math.max(S.shininess,1e-4)}function g(E,S){S.gradientMap&&(E.gradientMap.value=S.gradientMap)}function v(E,S){E.metalness.value=S.metalness,S.metalnessMap&&(E.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,E.metalnessMapTransform)),E.roughness.value=S.roughness,S.roughnessMap&&(E.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,E.roughnessMapTransform)),S.envMap&&(E.envMapIntensity.value=S.envMapIntensity)}function x(E,S,C){E.ior.value=S.ior,S.sheen>0&&(E.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),E.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(E.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,E.sheenColorMapTransform)),S.sheenRoughnessMap&&(E.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,E.sheenRoughnessMapTransform))),S.clearcoat>0&&(E.clearcoat.value=S.clearcoat,E.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(E.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,E.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(E.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===Lr&&E.clearcoatNormalScale.value.negate())),S.dispersion>0&&(E.dispersion.value=S.dispersion),S.iridescence>0&&(E.iridescence.value=S.iridescence,E.iridescenceIOR.value=S.iridescenceIOR,E.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(E.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,E.iridescenceMapTransform)),S.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),S.transmission>0&&(E.transmission.value=S.transmission,E.transmissionSamplerMap.value=C.texture,E.transmissionSamplerSize.value.set(C.width,C.height),S.transmissionMap&&(E.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,E.transmissionMapTransform)),E.thickness.value=S.thickness,S.thicknessMap&&(E.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=S.attenuationDistance,E.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(E.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(E.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=S.specularIntensity,E.specularColor.value.copy(S.specularColor),S.specularColorMap&&(E.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,E.specularColorMapTransform)),S.specularIntensityMap&&(E.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,E.specularIntensityMapTransform))}function w(E,S){S.matcap&&(E.matcap.value=S.matcap)}function b(E,S){const C=e.get(S).light;E.referencePosition.value.setFromMatrixPosition(C.matrixWorld),E.nearDistance.value=C.shadow.camera.near,E.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function gk(n,e,t,i){let r={},s={},a=[];const u=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(C,P){const I=P.program;i.uniformBlockBinding(C,I)}function h(C,P){let I=r[C.id];I===void 0&&(w(C),I=m(C),r[C.id]=I,C.addEventListener("dispose",E));const B=P.program;i.updateUBOMapping(C,B);const N=e.render.frame;s[C.id]!==N&&(v(C),s[C.id]=N)}function m(C){const P=g();C.__bindingPointIndex=P;const I=n.createBuffer(),B=C.__size,N=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,I),n.bufferData(n.UNIFORM_BUFFER,B,N),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,P,I),I}function g(){for(let C=0;C<u;C++)if(a.indexOf(C)===-1)return a.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(C){const P=r[C.id],I=C.uniforms,B=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,P);for(let N=0,U=I.length;N<U;N++){const H=Array.isArray(I[N])?I[N]:[I[N]];for(let O=0,D=H.length;O<D;O++){const W=H[O];if(x(W,N,O,B)===!0){const ee=W.__offset,ne=Array.isArray(W.value)?W.value:[W.value];let le=0;for(let pe=0;pe<ne.length;pe++){const de=ne[pe],_e=b(de);typeof de=="number"||typeof de=="boolean"?(W.__data[0]=de,n.bufferSubData(n.UNIFORM_BUFFER,ee+le,W.__data)):de.isMatrix3?(W.__data[0]=de.elements[0],W.__data[1]=de.elements[1],W.__data[2]=de.elements[2],W.__data[3]=0,W.__data[4]=de.elements[3],W.__data[5]=de.elements[4],W.__data[6]=de.elements[5],W.__data[7]=0,W.__data[8]=de.elements[6],W.__data[9]=de.elements[7],W.__data[10]=de.elements[8],W.__data[11]=0):(de.toArray(W.__data,le),le+=_e.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ee,W.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(C,P,I,B){const N=C.value,U=P+"_"+I;if(B[U]===void 0)return typeof N=="number"||typeof N=="boolean"?B[U]=N:B[U]=N.clone(),!0;{const H=B[U];if(typeof N=="number"||typeof N=="boolean"){if(H!==N)return B[U]=N,!0}else if(H.equals(N)===!1)return H.copy(N),!0}return!1}function w(C){const P=C.uniforms;let I=0;const B=16;for(let U=0,H=P.length;U<H;U++){const O=Array.isArray(P[U])?P[U]:[P[U]];for(let D=0,W=O.length;D<W;D++){const ee=O[D],ne=Array.isArray(ee.value)?ee.value:[ee.value];for(let le=0,pe=ne.length;le<pe;le++){const de=ne[le],_e=b(de),F=I%B,J=F%_e.boundary,Z=F+J;I+=J,Z!==0&&B-Z<_e.storage&&(I+=B-Z),ee.__data=new Float32Array(_e.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=I,I+=_e.storage}}}const N=I%B;return N>0&&(I+=B-N),C.__size=I,C.__cache={},this}function b(C){const P={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(P.boundary=4,P.storage=4):C.isVector2?(P.boundary=8,P.storage=8):C.isVector3||C.isColor?(P.boundary=16,P.storage=12):C.isVector4?(P.boundary=16,P.storage=16):C.isMatrix3?(P.boundary=48,P.storage=48):C.isMatrix4?(P.boundary=64,P.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),P}function E(C){const P=C.target;P.removeEventListener("dispose",E);const I=a.indexOf(P.__bindingPointIndex);a.splice(I,1),n.deleteBuffer(r[P.id]),delete r[P.id],delete s[P.id]}function S(){for(const C in r)n.deleteBuffer(r[C]);a=[],r={},s={}}return{bind:d,update:h,dispose:S}}class AA{constructor(e={}){const{canvas:t=vT(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:u=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:h=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let x;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=i.getContextAttributes().alpha}else x=a;const w=new Uint32Array(4),b=new Int32Array(4);let E=null,S=null;const C=[],P=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Rr,this.toneMapping=Uo,this.toneMappingExposure=1;const I=this;let B=!1,N=0,U=0,H=null,O=-1,D=null;const W=new un,ee=new un;let ne=null;const le=new ct(0);let pe=0,de=t.width,_e=t.height,F=1,J=null,Z=null;const $=new un(0,0,de,_e),re=new un(0,0,de,_e);let Ne=!1;const he=new Cp;let Te=!1,Ie=!1;this.transmissionResolutionScale=1;const Ce=new Ut,He=new Ut,gt=new q,Ze=new un,Nt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Oe=!1;function Re(){return H===null?F:1}let j=i;function pt(G,ue){return t.getContext(G,ue)}try{const G={alpha:!0,depth:r,stencil:s,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:h,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${z0}`),t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",rt,!1),t.addEventListener("webglcontextcreationerror",tt,!1),j===null){const ue="webgl2";if(j=pt(ue,G),j===null)throw pt(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let Ue,st,Ge,At,qe,X,z,Q,me,Pe,Ee,et,je,Je,Ft,Fe,lt,bt,Rt,ut,Wt,Ot,hn,ae;function Qe(){Ue=new CN(j),Ue.init(),Ot=new TA(j,Ue),st=new wN(j,Ue,e,Ot),Ge=new lk(j,Ue),st.reverseDepthBuffer&&v&&Ge.buffers.depth.setReversed(!0),At=new IN(j),qe=new YO,X=new uk(j,Ue,Ge,qe,st,Ot,At),z=new EN(I),Q=new AN(I),me=new F3(j),hn=new xN(j,me),Pe=new RN(j,me,At,hn),Ee=new DN(j,Pe,me,At),Rt=new LN(j,st,X),Fe=new MN(qe),et=new qO(I,z,Q,Ue,st,hn,Fe),je=new mk(I,qe),Je=new ZO,Ft=new ik(Ue),bt=new _N(I,z,Q,Ge,Ee,x,d),lt=new ok(I,Ee,st),ae=new gk(j,At,st,Ge),ut=new SN(j,Ue,At),Wt=new PN(j,Ue,At),At.programs=et.programs,I.capabilities=st,I.extensions=Ue,I.properties=qe,I.renderLists=Je,I.shadowMap=lt,I.state=Ge,I.info=At}Qe();const be=new hk(I,j);this.xr=be,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const G=Ue.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Ue.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(G){G!==void 0&&(F=G,this.setSize(de,_e,!1))},this.getSize=function(G){return G.set(de,_e)},this.setSize=function(G,ue,Se=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}de=G,_e=ue,t.width=Math.floor(G*F),t.height=Math.floor(ue*F),Se===!0&&(t.style.width=G+"px",t.style.height=ue+"px"),this.setViewport(0,0,G,ue)},this.getDrawingBufferSize=function(G){return G.set(de*F,_e*F).floor()},this.setDrawingBufferSize=function(G,ue,Se){de=G,_e=ue,F=Se,t.width=Math.floor(G*Se),t.height=Math.floor(ue*Se),this.setViewport(0,0,G,ue)},this.getCurrentViewport=function(G){return G.copy(W)},this.getViewport=function(G){return G.copy($)},this.setViewport=function(G,ue,Se,ge){G.isVector4?$.set(G.x,G.y,G.z,G.w):$.set(G,ue,Se,ge),Ge.viewport(W.copy($).multiplyScalar(F).round())},this.getScissor=function(G){return G.copy(re)},this.setScissor=function(G,ue,Se,ge){G.isVector4?re.set(G.x,G.y,G.z,G.w):re.set(G,ue,Se,ge),Ge.scissor(ee.copy(re).multiplyScalar(F).round())},this.getScissorTest=function(){return Ne},this.setScissorTest=function(G){Ge.setScissorTest(Ne=G)},this.setOpaqueSort=function(G){J=G},this.setTransparentSort=function(G){Z=G},this.getClearColor=function(G){return G.copy(bt.getClearColor())},this.setClearColor=function(){bt.setClearColor.apply(bt,arguments)},this.getClearAlpha=function(){return bt.getClearAlpha()},this.setClearAlpha=function(){bt.setClearAlpha.apply(bt,arguments)},this.clear=function(G=!0,ue=!0,Se=!0){let ge=0;if(G){let fe=!1;if(H!==null){const Be=H.texture.format;fe=Be===j0||Be===X0||Be===Ep}if(fe){const Be=H.texture.type,Ke=Be===ho||Be===Va||Be===rd||Be===ic||Be===W0||Be===G0,at=bt.getClearColor(),dt=bt.getClearAlpha(),Ct=at.r,Tt=at.g,$e=at.b;Ke?(w[0]=Ct,w[1]=Tt,w[2]=$e,w[3]=dt,j.clearBufferuiv(j.COLOR,0,w)):(b[0]=Ct,b[1]=Tt,b[2]=$e,b[3]=dt,j.clearBufferiv(j.COLOR,0,b))}else ge|=j.COLOR_BUFFER_BIT}ue&&(ge|=j.DEPTH_BUFFER_BIT),Se&&(ge|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",rt,!1),t.removeEventListener("webglcontextcreationerror",tt,!1),bt.dispose(),Je.dispose(),Ft.dispose(),qe.dispose(),z.dispose(),Q.dispose(),Ee.dispose(),hn.dispose(),ae.dispose(),et.dispose(),be.dispose(),be.removeEventListener("sessionstart",$a),be.removeEventListener("sessionend",_o),gs.stop()};function Le(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),B=!0}function rt(){console.log("THREE.WebGLRenderer: Context Restored."),B=!1;const G=At.autoReset,ue=lt.enabled,Se=lt.autoUpdate,ge=lt.needsUpdate,fe=lt.type;Qe(),At.autoReset=G,lt.enabled=ue,lt.autoUpdate=Se,lt.needsUpdate=ge,lt.type=fe}function tt(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function zt(G){const ue=G.target;ue.removeEventListener("dispose",zt),Rn(ue)}function Rn(G){Zn(G),qe.remove(G)}function Zn(G){const ue=qe.get(G).programs;ue!==void 0&&(ue.forEach(function(Se){et.releaseProgram(Se)}),G.isShaderMaterial&&et.releaseShaderCache(G))}this.renderBufferDirect=function(G,ue,Se,ge,fe,Be){ue===null&&(ue=Nt);const Ke=fe.isMesh&&fe.matrixWorld.determinant()<0,at=mc(G,ue,Se,ge,fe);Ge.setMaterial(ge,Ke);let dt=Se.index,Ct=1;if(ge.wireframe===!0){if(dt=Pe.getWireframeAttribute(Se),dt===void 0)return;Ct=2}const Tt=Se.drawRange,$e=Se.attributes.position;let xt=Tt.start*Ct,kt=(Tt.start+Tt.count)*Ct;Be!==null&&(xt=Math.max(xt,Be.start*Ct),kt=Math.min(kt,(Be.start+Be.count)*Ct)),dt!==null?(xt=Math.max(xt,0),kt=Math.min(kt,dt.count)):$e!=null&&(xt=Math.max(xt,0),kt=Math.min(kt,$e.count));const nn=kt-xt;if(nn<0||nn===1/0)return;hn.setup(fe,ge,at,Se,dt);let rn,Yt=ut;if(dt!==null&&(rn=me.get(dt),Yt=Wt,Yt.setIndex(rn)),fe.isMesh)ge.wireframe===!0?(Ge.setLineWidth(ge.wireframeLinewidth*Re()),Yt.setMode(j.LINES)):Yt.setMode(j.TRIANGLES);else if(fe.isLine){let _t=ge.linewidth;_t===void 0&&(_t=1),Ge.setLineWidth(_t*Re()),fe.isLineSegments?Yt.setMode(j.LINES):fe.isLineLoop?Yt.setMode(j.LINE_LOOP):Yt.setMode(j.LINE_STRIP)}else fe.isPoints?Yt.setMode(j.POINTS):fe.isSprite&&Yt.setMode(j.TRIANGLES);if(fe.isBatchedMesh)if(fe._multiDrawInstances!==null)Yt.renderMultiDrawInstances(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount,fe._multiDrawInstances);else if(Ue.get("WEBGL_multi_draw"))Yt.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else{const _t=fe._multiDrawStarts,ln=fe._multiDrawCounts,Jt=fe._multiDrawCount,yi=dt?me.get(dt).bytesPerElement:1,Os=qe.get(ge).currentProgram.getUniforms();for(let oi=0;oi<Jt;oi++)Os.setValue(j,"_gl_DrawID",oi),Yt.render(_t[oi]/yi,ln[oi])}else if(fe.isInstancedMesh)Yt.renderInstances(xt,nn,fe.count);else if(Se.isInstancedBufferGeometry){const _t=Se._maxInstanceCount!==void 0?Se._maxInstanceCount:1/0,ln=Math.min(Se.instanceCount,_t);Yt.renderInstances(xt,nn,ln)}else Yt.render(xt,nn)};function cn(G,ue,Se){G.transparent===!0&&G.side===Oo&&G.forceSinglePass===!1?(G.side=Lr,G.needsUpdate=!0,Xa(G,ue,Se),G.side=za,G.needsUpdate=!0,Xa(G,ue,Se),G.side=Oo):Xa(G,ue,Se)}this.compile=function(G,ue,Se=null){Se===null&&(Se=G),S=Ft.get(Se),S.init(ue),P.push(S),Se.traverseVisible(function(fe){fe.isLight&&fe.layers.test(ue.layers)&&(S.pushLight(fe),fe.castShadow&&S.pushShadow(fe))}),G!==Se&&G.traverseVisible(function(fe){fe.isLight&&fe.layers.test(ue.layers)&&(S.pushLight(fe),fe.castShadow&&S.pushShadow(fe))}),S.setupLights();const ge=new Set;return G.traverse(function(fe){if(!(fe.isMesh||fe.isPoints||fe.isLine||fe.isSprite))return;const Be=fe.material;if(Be)if(Array.isArray(Be))for(let Ke=0;Ke<Be.length;Ke++){const at=Be[Ke];cn(at,Se,fe),ge.add(at)}else cn(Be,Se,fe),ge.add(Be)}),P.pop(),S=null,ge},this.compileAsync=function(G,ue,Se=null){const ge=this.compile(G,ue,Se);return new Promise(fe=>{function Be(){if(ge.forEach(function(Ke){qe.get(Ke).currentProgram.isReady()&&ge.delete(Ke)}),ge.size===0){fe(G);return}setTimeout(Be,10)}Ue.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let Vi=null;function Hi(G){Vi&&Vi(G)}function $a(){gs.stop()}function _o(){gs.start()}const gs=new SA;gs.setAnimationLoop(Hi),typeof self<"u"&&gs.setContext(self),this.setAnimationLoop=function(G){Vi=G,be.setAnimationLoop(G),G===null?gs.stop():gs.start()},be.addEventListener("sessionstart",$a),be.addEventListener("sessionend",_o),this.render=function(G,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(B===!0)return;if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(ue),ue=be.getCamera()),G.isScene===!0&&G.onBeforeRender(I,G,ue,H),S=Ft.get(G,P.length),S.init(ue),P.push(S),He.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),he.setFromProjectionMatrix(He),Ie=this.localClippingEnabled,Te=Fe.init(this.clippingPlanes,Ie),E=Je.get(G,C.length),E.init(),C.push(E),be.enabled===!0&&be.isPresenting===!0){const Be=I.xr.getDepthSensingMesh();Be!==null&&ts(Be,ue,-1/0,I.sortObjects)}ts(G,ue,0,I.sortObjects),E.finish(),I.sortObjects===!0&&E.sort(J,Z),Oe=be.enabled===!1||be.isPresenting===!1||be.hasDepthSensing()===!1,Oe&&bt.addToRenderList(E,G),this.info.render.frame++,Te===!0&&Fe.beginShadows();const Se=S.state.shadowsArray;lt.render(Se,G,ue),Te===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();const ge=E.opaque,fe=E.transmissive;if(S.setupLights(),ue.isArrayCamera){const Be=ue.cameras;if(fe.length>0)for(let Ke=0,at=Be.length;Ke<at;Ke++){const dt=Be[Ke];ns(ge,fe,G,dt)}Oe&&bt.render(G);for(let Ke=0,at=Be.length;Ke<at;Ke++){const dt=Be[Ke];$o(E,G,dt,dt.viewport)}}else fe.length>0&&ns(ge,fe,G,ue),Oe&&bt.render(G),$o(E,G,ue);H!==null&&U===0&&(X.updateMultisampleRenderTarget(H),X.updateRenderTargetMipmap(H)),G.isScene===!0&&G.onAfterRender(I,G,ue),hn.resetDefaultState(),O=-1,D=null,P.pop(),P.length>0?(S=P[P.length-1],Te===!0&&Fe.setGlobalState(I.clippingPlanes,S.state.camera)):S=null,C.pop(),C.length>0?E=C[C.length-1]:E=null};function ts(G,ue,Se,ge){if(G.visible===!1)return;if(G.layers.test(ue.layers)){if(G.isGroup)Se=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ue);else if(G.isLight)S.pushLight(G),G.castShadow&&S.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||he.intersectsSprite(G)){ge&&Ze.setFromMatrixPosition(G.matrixWorld).applyMatrix4(He);const Ke=Ee.update(G),at=G.material;at.visible&&E.push(G,Ke,at,Se,Ze.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||he.intersectsObject(G))){const Ke=Ee.update(G),at=G.material;if(ge&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),Ze.copy(G.boundingSphere.center)):(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),Ze.copy(Ke.boundingSphere.center)),Ze.applyMatrix4(G.matrixWorld).applyMatrix4(He)),Array.isArray(at)){const dt=Ke.groups;for(let Ct=0,Tt=dt.length;Ct<Tt;Ct++){const $e=dt[Ct],xt=at[$e.materialIndex];xt&&xt.visible&&E.push(G,Ke,xt,Se,Ze.z,$e)}}else at.visible&&E.push(G,Ke,at,Se,Ze.z,null)}}const Be=G.children;for(let Ke=0,at=Be.length;Ke<at;Ke++)ts(Be[Ke],ue,Se,ge)}function $o(G,ue,Se,ge){const fe=G.opaque,Be=G.transmissive,Ke=G.transparent;S.setupLightsView(Se),Te===!0&&Fe.setGlobalState(I.clippingPlanes,Se),ge&&Ge.viewport(W.copy(ge)),fe.length>0&&xo(fe,ue,Se),Be.length>0&&xo(Be,ue,Se),Ke.length>0&&xo(Ke,ue,Se),Ge.buffers.depth.setTest(!0),Ge.buffers.depth.setMask(!0),Ge.buffers.color.setMask(!0),Ge.setPolygonOffset(!1)}function ns(G,ue,Se,ge){if((Se.isScene===!0?Se.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[ge.id]===void 0&&(S.state.transmissionRenderTarget[ge.id]=new Vo(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")||Ue.has("EXT_color_buffer_float")?hd:ho,minFilter:ko,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:mn.workingColorSpace}));const Be=S.state.transmissionRenderTarget[ge.id],Ke=ge.viewport||W;Be.setSize(Ke.z*I.transmissionResolutionScale,Ke.w*I.transmissionResolutionScale);const at=I.getRenderTarget();I.setRenderTarget(Be),I.getClearColor(le),pe=I.getClearAlpha(),pe<1&&I.setClearColor(16777215,.5),I.clear(),Oe&&bt.render(Se);const dt=I.toneMapping;I.toneMapping=Uo;const Ct=ge.viewport;if(ge.viewport!==void 0&&(ge.viewport=void 0),S.setupLightsView(ge),Te===!0&&Fe.setGlobalState(I.clippingPlanes,ge),xo(G,Se,ge),X.updateMultisampleRenderTarget(Be),X.updateRenderTargetMipmap(Be),Ue.has("WEBGL_multisampled_render_to_texture")===!1){let Tt=!1;for(let $e=0,xt=ue.length;$e<xt;$e++){const kt=ue[$e],nn=kt.object,rn=kt.geometry,Yt=kt.material,_t=kt.group;if(Yt.side===Oo&&nn.layers.test(ge.layers)){const ln=Yt.side;Yt.side=Lr,Yt.needsUpdate=!0,hc(nn,Se,ge,rn,Yt,_t),Yt.side=ln,Yt.needsUpdate=!0,Tt=!0}}Tt===!0&&(X.updateMultisampleRenderTarget(Be),X.updateRenderTargetMipmap(Be))}I.setRenderTarget(at),I.setClearColor(le,pe),Ct!==void 0&&(ge.viewport=Ct),I.toneMapping=dt}function xo(G,ue,Se){const ge=ue.isScene===!0?ue.overrideMaterial:null;for(let fe=0,Be=G.length;fe<Be;fe++){const Ke=G[fe],at=Ke.object,dt=Ke.geometry,Ct=ge===null?Ke.material:ge,Tt=Ke.group;at.layers.test(Se.layers)&&hc(at,ue,Se,dt,Ct,Tt)}}function hc(G,ue,Se,ge,fe,Be){G.onBeforeRender(I,ue,Se,ge,fe,Be),G.modelViewMatrix.multiplyMatrices(Se.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),fe.onBeforeRender(I,ue,Se,ge,G,Be),fe.transparent===!0&&fe.side===Oo&&fe.forceSinglePass===!1?(fe.side=Lr,fe.needsUpdate=!0,I.renderBufferDirect(Se,ue,ge,fe,G,Be),fe.side=za,fe.needsUpdate=!0,I.renderBufferDirect(Se,ue,ge,fe,G,Be),fe.side=Oo):I.renderBufferDirect(Se,ue,ge,fe,G,Be),G.onAfterRender(I,ue,Se,ge,fe,Be)}function Xa(G,ue,Se){ue.isScene!==!0&&(ue=Nt);const ge=qe.get(G),fe=S.state.lights,Be=S.state.shadowsArray,Ke=fe.state.version,at=et.getParameters(G,fe.state,Be,ue,Se),dt=et.getProgramCacheKey(at);let Ct=ge.programs;ge.environment=G.isMeshStandardMaterial?ue.environment:null,ge.fog=ue.fog,ge.envMap=(G.isMeshStandardMaterial?Q:z).get(G.envMap||ge.environment),ge.envMapRotation=ge.environment!==null&&G.envMap===null?ue.environmentRotation:G.envMapRotation,Ct===void 0&&(G.addEventListener("dispose",zt),Ct=new Map,ge.programs=Ct);let Tt=Ct.get(dt);if(Tt!==void 0){if(ge.currentProgram===Tt&&ge.lightsStateVersion===Ke)return vs(G,at),Tt}else at.uniforms=et.getUniforms(G),G.onBeforeCompile(at,I),Tt=et.acquireProgram(at,dt),Ct.set(dt,Tt),ge.uniforms=at.uniforms;const $e=ge.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&($e.clippingPlanes=Fe.uniform),vs(G,at),ge.needsLights=vc(G),ge.lightsStateVersion=Ke,ge.needsLights&&($e.ambientLightColor.value=fe.state.ambient,$e.lightProbe.value=fe.state.probe,$e.directionalLights.value=fe.state.directional,$e.directionalLightShadows.value=fe.state.directionalShadow,$e.spotLights.value=fe.state.spot,$e.spotLightShadows.value=fe.state.spotShadow,$e.rectAreaLights.value=fe.state.rectArea,$e.ltc_1.value=fe.state.rectAreaLTC1,$e.ltc_2.value=fe.state.rectAreaLTC2,$e.pointLights.value=fe.state.point,$e.pointLightShadows.value=fe.state.pointShadow,$e.hemisphereLights.value=fe.state.hemi,$e.directionalShadowMap.value=fe.state.directionalShadowMap,$e.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,$e.spotShadowMap.value=fe.state.spotShadowMap,$e.spotLightMatrix.value=fe.state.spotLightMatrix,$e.spotLightMap.value=fe.state.spotLightMap,$e.pointShadowMap.value=fe.state.pointShadowMap,$e.pointShadowMatrix.value=fe.state.pointShadowMatrix),ge.currentProgram=Tt,ge.uniformsList=null,Tt}function pc(G){if(G.uniformsList===null){const ue=G.currentProgram.getUniforms();G.uniformsList=Ug.seqWithValue(ue.seq,G.uniforms)}return G.uniformsList}function vs(G,ue){const Se=qe.get(G);Se.outputColorSpace=ue.outputColorSpace,Se.batching=ue.batching,Se.batchingColor=ue.batchingColor,Se.instancing=ue.instancing,Se.instancingColor=ue.instancingColor,Se.instancingMorph=ue.instancingMorph,Se.skinning=ue.skinning,Se.morphTargets=ue.morphTargets,Se.morphNormals=ue.morphNormals,Se.morphColors=ue.morphColors,Se.morphTargetsCount=ue.morphTargetsCount,Se.numClippingPlanes=ue.numClippingPlanes,Se.numIntersection=ue.numClipIntersection,Se.vertexAlphas=ue.vertexAlphas,Se.vertexTangents=ue.vertexTangents,Se.toneMapping=ue.toneMapping}function mc(G,ue,Se,ge,fe){ue.isScene!==!0&&(ue=Nt),X.resetTextureUnits();const Be=ue.fog,Ke=ge.isMeshStandardMaterial?ue.environment:null,at=H===null?I.outputColorSpace:H.isXRRenderTarget===!0?H.texture.colorSpace:sc,dt=(ge.isMeshStandardMaterial?Q:z).get(ge.envMap||Ke),Ct=ge.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,Tt=!!Se.attributes.tangent&&(!!ge.normalMap||ge.anisotropy>0),$e=!!Se.morphAttributes.position,xt=!!Se.morphAttributes.normal,kt=!!Se.morphAttributes.color;let nn=Uo;ge.toneMapped&&(H===null||H.isXRRenderTarget===!0)&&(nn=I.toneMapping);const rn=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,Yt=rn!==void 0?rn.length:0,_t=qe.get(ge),ln=S.state.lights;if(Te===!0&&(Ie===!0||G!==D)){const _i=G===D&&ge.id===O;Fe.setState(ge,G,_i)}let Jt=!1;ge.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==ln.state.version||_t.outputColorSpace!==at||fe.isBatchedMesh&&_t.batching===!1||!fe.isBatchedMesh&&_t.batching===!0||fe.isBatchedMesh&&_t.batchingColor===!0&&fe.colorTexture===null||fe.isBatchedMesh&&_t.batchingColor===!1&&fe.colorTexture!==null||fe.isInstancedMesh&&_t.instancing===!1||!fe.isInstancedMesh&&_t.instancing===!0||fe.isSkinnedMesh&&_t.skinning===!1||!fe.isSkinnedMesh&&_t.skinning===!0||fe.isInstancedMesh&&_t.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&_t.instancingColor===!1&&fe.instanceColor!==null||fe.isInstancedMesh&&_t.instancingMorph===!0&&fe.morphTexture===null||fe.isInstancedMesh&&_t.instancingMorph===!1&&fe.morphTexture!==null||_t.envMap!==dt||ge.fog===!0&&_t.fog!==Be||_t.numClippingPlanes!==void 0&&(_t.numClippingPlanes!==Fe.numPlanes||_t.numIntersection!==Fe.numIntersection)||_t.vertexAlphas!==Ct||_t.vertexTangents!==Tt||_t.morphTargets!==$e||_t.morphNormals!==xt||_t.morphColors!==kt||_t.toneMapping!==nn||_t.morphTargetsCount!==Yt)&&(Jt=!0):(Jt=!0,_t.__version=ge.version);let yi=_t.currentProgram;Jt===!0&&(yi=Xa(ge,ue,fe));let Os=!1,oi=!1,ys=!1;const sn=yi.getUniforms(),Li=_t.uniforms;if(Ge.useProgram(yi.program)&&(Os=!0,oi=!0,ys=!0),ge.id!==O&&(O=ge.id,oi=!0),Os||D!==G){Ge.buffers.depth.getReversed()?(Ce.copy(G.projectionMatrix),lP(Ce),uP(Ce),sn.setValue(j,"projectionMatrix",Ce)):sn.setValue(j,"projectionMatrix",G.projectionMatrix),sn.setValue(j,"viewMatrix",G.matrixWorldInverse);const Gn=sn.map.cameraPosition;Gn!==void 0&&Gn.setValue(j,gt.setFromMatrixPosition(G.matrixWorld)),st.logarithmicDepthBuffer&&sn.setValue(j,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&sn.setValue(j,"isOrthographic",G.isOrthographicCamera===!0),D!==G&&(D=G,oi=!0,ys=!0)}if(fe.isSkinnedMesh){sn.setOptional(j,fe,"bindMatrix"),sn.setOptional(j,fe,"bindMatrixInverse");const _i=fe.skeleton;_i&&(_i.boneTexture===null&&_i.computeBoneTexture(),sn.setValue(j,"boneTexture",_i.boneTexture,X))}fe.isBatchedMesh&&(sn.setOptional(j,fe,"batchingTexture"),sn.setValue(j,"batchingTexture",fe._matricesTexture,X),sn.setOptional(j,fe,"batchingIdTexture"),sn.setValue(j,"batchingIdTexture",fe._indirectTexture,X),sn.setOptional(j,fe,"batchingColorTexture"),fe._colorsTexture!==null&&sn.setValue(j,"batchingColorTexture",fe._colorsTexture,X));const ai=Se.morphAttributes;if((ai.position!==void 0||ai.normal!==void 0||ai.color!==void 0)&&Rt.update(fe,Se,yi),(oi||_t.receiveShadow!==fe.receiveShadow)&&(_t.receiveShadow=fe.receiveShadow,sn.setValue(j,"receiveShadow",fe.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(Li.envMap.value=dt,Li.flipEnvMap.value=dt.isCubeTexture&&dt.isRenderTargetTexture===!1?-1:1),ge.isMeshStandardMaterial&&ge.envMap===null&&ue.environment!==null&&(Li.envMapIntensity.value=ue.environmentIntensity),oi&&(sn.setValue(j,"toneMappingExposure",I.toneMappingExposure),_t.needsLights&&gc(Li,ys),Be&&ge.fog===!0&&je.refreshFogUniforms(Li,Be),je.refreshMaterialUniforms(Li,ge,F,_e,S.state.transmissionRenderTarget[G.id]),Ug.upload(j,pc(_t),Li,X)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(Ug.upload(j,pc(_t),Li,X),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&sn.setValue(j,"center",fe.center),sn.setValue(j,"modelViewMatrix",fe.modelViewMatrix),sn.setValue(j,"normalMatrix",fe.normalMatrix),sn.setValue(j,"modelMatrix",fe.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const _i=ge.uniformsGroups;for(let Gn=0,on=_i.length;Gn<on;Gn++){const Qi=_i[Gn];ae.update(Qi,yi),ae.bind(Qi,yi)}}return yi}function gc(G,ue){G.ambientLightColor.needsUpdate=ue,G.lightProbe.needsUpdate=ue,G.directionalLights.needsUpdate=ue,G.directionalLightShadows.needsUpdate=ue,G.pointLights.needsUpdate=ue,G.pointLightShadows.needsUpdate=ue,G.spotLights.needsUpdate=ue,G.spotLightShadows.needsUpdate=ue,G.rectAreaLights.needsUpdate=ue,G.hemisphereLights.needsUpdate=ue}function vc(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return U},this.getRenderTarget=function(){return H},this.setRenderTargetTextures=function(G,ue,Se){qe.get(G.texture).__webglTexture=ue,qe.get(G.depthTexture).__webglTexture=Se;const ge=qe.get(G);ge.__hasExternalTextures=!0,ge.__autoAllocateDepthBuffer=Se===void 0,ge.__autoAllocateDepthBuffer||Ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(G,ue){const Se=qe.get(G);Se.__webglFramebuffer=ue,Se.__useDefaultFramebuffer=ue===void 0};const yc=j.createFramebuffer();this.setRenderTarget=function(G,ue=0,Se=0){H=G,N=ue,U=Se;let ge=!0,fe=null,Be=!1,Ke=!1;if(G){const dt=qe.get(G);if(dt.__useDefaultFramebuffer!==void 0)Ge.bindFramebuffer(j.FRAMEBUFFER,null),ge=!1;else if(dt.__webglFramebuffer===void 0)X.setupRenderTarget(G);else if(dt.__hasExternalTextures)X.rebindTextures(G,qe.get(G.texture).__webglTexture,qe.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const $e=G.depthTexture;if(dt.__boundDepthTexture!==$e){if($e!==null&&qe.has($e)&&(G.width!==$e.image.width||G.height!==$e.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");X.setupDepthRenderbuffer(G)}}const Ct=G.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(Ke=!0);const Tt=qe.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(Tt[ue])?fe=Tt[ue][Se]:fe=Tt[ue],Be=!0):G.samples>0&&X.useMultisampledRTT(G)===!1?fe=qe.get(G).__webglMultisampledFramebuffer:Array.isArray(Tt)?fe=Tt[Se]:fe=Tt,W.copy(G.viewport),ee.copy(G.scissor),ne=G.scissorTest}else W.copy($).multiplyScalar(F).floor(),ee.copy(re).multiplyScalar(F).floor(),ne=Ne;if(Se!==0&&(fe=yc),Ge.bindFramebuffer(j.FRAMEBUFFER,fe)&&ge&&Ge.drawBuffers(G,fe),Ge.viewport(W),Ge.scissor(ee),Ge.setScissorTest(ne),Be){const dt=qe.get(G.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+ue,dt.__webglTexture,Se)}else if(Ke){const dt=qe.get(G.texture),Ct=ue;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,dt.__webglTexture,Se,Ct)}else if(G!==null&&Se!==0){const dt=qe.get(G.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,dt.__webglTexture,Se)}O=-1},this.readRenderTargetPixels=function(G,ue,Se,ge,fe,Be,Ke){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let at=qe.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Ke!==void 0&&(at=at[Ke]),at){Ge.bindFramebuffer(j.FRAMEBUFFER,at);try{const dt=G.texture,Ct=dt.format,Tt=dt.type;if(!st.textureFormatReadable(Ct)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!st.textureTypeReadable(Tt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=G.width-ge&&Se>=0&&Se<=G.height-fe&&j.readPixels(ue,Se,ge,fe,Ot.convert(Ct),Ot.convert(Tt),Be)}finally{const dt=H!==null?qe.get(H).__webglFramebuffer:null;Ge.bindFramebuffer(j.FRAMEBUFFER,dt)}}},this.readRenderTargetPixelsAsync=async function(G,ue,Se,ge,fe,Be,Ke){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let at=qe.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Ke!==void 0&&(at=at[Ke]),at){const dt=G.texture,Ct=dt.format,Tt=dt.type;if(!st.textureFormatReadable(Ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!st.textureTypeReadable(Tt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ue>=0&&ue<=G.width-ge&&Se>=0&&Se<=G.height-fe){Ge.bindFramebuffer(j.FRAMEBUFFER,at);const $e=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,$e),j.bufferData(j.PIXEL_PACK_BUFFER,Be.byteLength,j.STREAM_READ),j.readPixels(ue,Se,ge,fe,Ot.convert(Ct),Ot.convert(Tt),0);const xt=H!==null?qe.get(H).__webglFramebuffer:null;Ge.bindFramebuffer(j.FRAMEBUFFER,xt);const kt=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await aP(j,kt,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,$e),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,Be),j.deleteBuffer($e),j.deleteSync(kt),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(G,ue=null,Se=0){G.isTexture!==!0&&($f("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ue=arguments[0]||null,G=arguments[1]);const ge=Math.pow(2,-Se),fe=Math.floor(G.image.width*ge),Be=Math.floor(G.image.height*ge),Ke=ue!==null?ue.x:0,at=ue!==null?ue.y:0;X.setTexture2D(G,0),j.copyTexSubImage2D(j.TEXTURE_2D,Se,0,0,Ke,at,fe,Be),Ge.unbindTexture()};const _c=j.createFramebuffer(),xc=j.createFramebuffer();this.copyTextureToTexture=function(G,ue,Se=null,ge=null,fe=0,Be=null){G.isTexture!==!0&&($f("WebGLRenderer: copyTextureToTexture function signature has changed."),ge=arguments[0]||null,G=arguments[1],ue=arguments[2],Be=arguments[3]||0,Se=null),Be===null&&(fe!==0?($f("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Be=fe,fe=0):Be=0);let Ke,at,dt,Ct,Tt,$e,xt,kt,nn;const rn=G.isCompressedTexture?G.mipmaps[Be]:G.image;if(Se!==null)Ke=Se.max.x-Se.min.x,at=Se.max.y-Se.min.y,dt=Se.isBox3?Se.max.z-Se.min.z:1,Ct=Se.min.x,Tt=Se.min.y,$e=Se.isBox3?Se.min.z:0;else{const ai=Math.pow(2,-fe);Ke=Math.floor(rn.width*ai),at=Math.floor(rn.height*ai),G.isDataArrayTexture?dt=rn.depth:G.isData3DTexture?dt=Math.floor(rn.depth*ai):dt=1,Ct=0,Tt=0,$e=0}ge!==null?(xt=ge.x,kt=ge.y,nn=ge.z):(xt=0,kt=0,nn=0);const Yt=Ot.convert(ue.format),_t=Ot.convert(ue.type);let ln;ue.isData3DTexture?(X.setTexture3D(ue,0),ln=j.TEXTURE_3D):ue.isDataArrayTexture||ue.isCompressedArrayTexture?(X.setTexture2DArray(ue,0),ln=j.TEXTURE_2D_ARRAY):(X.setTexture2D(ue,0),ln=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,ue.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,ue.unpackAlignment);const Jt=j.getParameter(j.UNPACK_ROW_LENGTH),yi=j.getParameter(j.UNPACK_IMAGE_HEIGHT),Os=j.getParameter(j.UNPACK_SKIP_PIXELS),oi=j.getParameter(j.UNPACK_SKIP_ROWS),ys=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,rn.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,rn.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Ct),j.pixelStorei(j.UNPACK_SKIP_ROWS,Tt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,$e);const sn=G.isDataArrayTexture||G.isData3DTexture,Li=ue.isDataArrayTexture||ue.isData3DTexture;if(G.isDepthTexture){const ai=qe.get(G),_i=qe.get(ue),Gn=qe.get(ai.__renderTarget),on=qe.get(_i.__renderTarget);Ge.bindFramebuffer(j.READ_FRAMEBUFFER,Gn.__webglFramebuffer),Ge.bindFramebuffer(j.DRAW_FRAMEBUFFER,on.__webglFramebuffer);for(let Qi=0;Qi<dt;Qi++)sn&&(j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,qe.get(G).__webglTexture,fe,$e+Qi),j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,qe.get(ue).__webglTexture,Be,nn+Qi)),j.blitFramebuffer(Ct,Tt,Ke,at,xt,kt,Ke,at,j.DEPTH_BUFFER_BIT,j.NEAREST);Ge.bindFramebuffer(j.READ_FRAMEBUFFER,null),Ge.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else if(fe!==0||G.isRenderTargetTexture||qe.has(G)){const ai=qe.get(G),_i=qe.get(ue);Ge.bindFramebuffer(j.READ_FRAMEBUFFER,_c),Ge.bindFramebuffer(j.DRAW_FRAMEBUFFER,xc);for(let Gn=0;Gn<dt;Gn++)sn?j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,ai.__webglTexture,fe,$e+Gn):j.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,ai.__webglTexture,fe),Li?j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,_i.__webglTexture,Be,nn+Gn):j.framebufferTexture2D(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,_i.__webglTexture,Be),fe!==0?j.blitFramebuffer(Ct,Tt,Ke,at,xt,kt,Ke,at,j.COLOR_BUFFER_BIT,j.NEAREST):Li?j.copyTexSubImage3D(ln,Be,xt,kt,nn+Gn,Ct,Tt,Ke,at):j.copyTexSubImage2D(ln,Be,xt,kt,Ct,Tt,Ke,at);Ge.bindFramebuffer(j.READ_FRAMEBUFFER,null),Ge.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else Li?G.isDataTexture||G.isData3DTexture?j.texSubImage3D(ln,Be,xt,kt,nn,Ke,at,dt,Yt,_t,rn.data):ue.isCompressedArrayTexture?j.compressedTexSubImage3D(ln,Be,xt,kt,nn,Ke,at,dt,Yt,rn.data):j.texSubImage3D(ln,Be,xt,kt,nn,Ke,at,dt,Yt,_t,rn):G.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,Be,xt,kt,Ke,at,Yt,_t,rn.data):G.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,Be,xt,kt,rn.width,rn.height,Yt,rn.data):j.texSubImage2D(j.TEXTURE_2D,Be,xt,kt,Ke,at,Yt,_t,rn);j.pixelStorei(j.UNPACK_ROW_LENGTH,Jt),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,yi),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Os),j.pixelStorei(j.UNPACK_SKIP_ROWS,oi),j.pixelStorei(j.UNPACK_SKIP_IMAGES,ys),Be===0&&ue.generateMipmaps&&j.generateMipmap(ln),Ge.unbindTexture()},this.copyTextureToTexture3D=function(G,ue,Se=null,ge=null,fe=0){return G.isTexture!==!0&&($f("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Se=arguments[0]||null,ge=arguments[1]||null,G=arguments[2],ue=arguments[3],fe=arguments[4]||0),$f('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(G,ue,Se,ge,fe)},this.initRenderTarget=function(G){qe.get(G).__webglFramebuffer===void 0&&X.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?X.setTextureCube(G,0):G.isData3DTexture?X.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?X.setTexture2DArray(G,0):X.setTexture2D(G,0),Ge.unbindTexture()},this.resetState=function(){N=0,U=0,H=null,Ge.reset(),hn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return fo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=mn._getDrawingBufferColorSpace(e),t.unpackColorSpace=mn._getUnpackColorSpace()}}const vk=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:xx,AddEquation:Dl,AddOperation:Yb,AdditiveAnimationBlendMode:Ix,AdditiveBlending:O_,AgXToneMapping:eT,AlphaFormat:bx,AlwaysCompare:mT,AlwaysDepth:Wg,AlwaysStencilFunc:z_,AmbientLight:lA,AnimationAction:vA,AnimationClip:xp,AnimationLoader:DI,AnimationMixer:a3,AnimationObjectGroup:s3,AnimationUtils:RI,ArcCurve:DT,ArrayCamera:pA,ArrowHelper:R3,AttachedBindMode:F_,Audio:mA,AudioAnalyser:YI,AudioContext:t1,AudioListener:XI,AudioLoader:WI,AxesHelper:P3,BackSide:Lr,BasicDepthPacking:oT,BasicShadowMap:Rb,BatchedMesh:RT,Bone:Fx,BooleanKeyframeTrack:fc,Box2:m3,Box3:Dr,Box3Helper:A3,BoxGeometry:cc,BoxHelper:T3,BufferAttribute:Cn,BufferGeometry:tn,BufferGeometryLoader:hA,ByteType:wx,Cache:Oa,Camera:Tp,CameraHelper:b3,CanvasTexture:QP,CapsuleGeometry:iv,CatmullRomCurve3:NT,CineonToneMapping:Jb,CircleGeometry:rv,ClampToEdgeWrapping:Ls,Clock:n1,Color:ct,ColorKeyframeTrack:Jx,ColorManagement:mn,CompressedArrayTexture:ZP,CompressedCubeTexture:JP,CompressedTexture:tv,CompressedTextureLoader:NI,ConeGeometry:sv,ConstantAlphaFactor:Xb,ConstantColorFactor:Gb,Controls:L3,CubeCamera:wT,CubeReflectionMapping:Ba,CubeRefractionMapping:Nl,CubeTexture:Ap,CubeTextureLoader:OI,CubeUVReflectionMapping:dd,CubicBezierCurve:Hx,CubicBezierCurve3:OT,CubicInterpolant:eA,CullFaceBack:N_,CullFaceFront:Cb,CullFaceFrontBack:l2,CullFaceNone:Ab,Curve:go,CurvePath:UT,CustomBlending:Pb,CustomToneMapping:Qb,CylinderGeometry:md,Cylindrical:p3,Data3DTexture:K0,DataArrayTexture:bp,DataTexture:Fo,DataTextureLoader:kI,DataUtils:EP,DecrementStencilOp:w2,DecrementWrapStencilOp:E2,DefaultLoadingManager:iA,DepthFormat:Ku,DepthStencilFormat:rc,DepthTexture:Bx,DetachedBindMode:nT,DirectionalLight:aA,DirectionalLightHelper:E3,DiscreteInterpolant:tA,DodecahedronGeometry:ov,DoubleSide:Oo,DstAlphaFactor:zb,DstColorFactor:Vb,DynamicCopyUsage:z2,DynamicDrawUsage:D2,DynamicReadUsage:k2,EdgesGeometry:FT,EllipseCurve:nv,EqualCompare:fT,EqualDepth:$g,EqualStencilFunc:C2,EquirectangularReflectionMapping:rp,EquirectangularRefractionMapping:sp,Euler:Qr,EventDispatcher:Wo,ExtrudeGeometry:lv,FileLoader:Ha,Float16BufferAttribute:IP,Float32BufferAttribute:Mt,FloatType:Zr,Fog:J0,FogExp2:Z0,FramebufferTexture:KP,FrontSide:za,Frustum:Cp,GLBufferAttribute:h3,GLSL1:V2,GLSL3:B_,GreaterCompare:dT,GreaterDepth:jg,GreaterEqualCompare:pT,GreaterEqualDepth:Xg,GreaterEqualStencilFunc:L2,GreaterStencilFunc:P2,GridHelper:w3,Group:Kf,HalfFloatType:hd,HemisphereLight:rA,HemisphereLightHelper:S3,IcosahedronGeometry:uv,ImageBitmapLoader:HI,ImageLoader:Sp,ImageUtils:yT,IncrementStencilOp:S2,IncrementWrapStencilOp:M2,InstancedBufferAttribute:ad,InstancedBufferGeometry:dA,InstancedInterleavedBuffer:d3,InstancedMesh:CT,Int16BufferAttribute:RP,Int32BufferAttribute:PP,Int8BufferAttribute:TP,IntType:H0,InterleavedBuffer:Q0,InterleavedBufferAttribute:oc,Interpolant:Lp,InterpolateDiscrete:lp,InterpolateLinear:S0,InterpolateSmooth:Og,InvertStencilOp:b2,KeepStencilOp:Bu,KeyframeTrack:vo,LOD:TT,LatheGeometry:Rp,Layers:Ju,LessCompare:cT,LessDepth:Gg,LessEqualCompare:Lx,LessEqualDepth:nc,LessEqualStencilFunc:R2,LessStencilFunc:A2,Light:Bl,LightProbe:fA,Line:Ol,Line3:g3,LineBasicMaterial:Nr,LineCurve:Wx,LineCurve3:kT,LineDashedMaterial:ZT,LineLoop:PT,LineSegments:Go,LinearFilter:Ai,LinearInterpolant:Zx,LinearMipMapLinearFilter:d2,LinearMipMapNearestFilter:f2,LinearMipmapLinearFilter:ko,LinearMipmapNearestFilter:$h,LinearSRGBColorSpace:sc,LinearToneMapping:Kb,LinearTransfer:cp,Loader:es,LoaderUtils:$_,LoadingManager:Qx,LoopOnce:iT,LoopPingPong:sT,LoopRepeat:rT,LuminanceAlphaFormat:Cx,LuminanceFormat:Ax,MOUSE:o2,Material:hr,MaterialLoader:gv,MathUtils:sP,Matrix2:o1,Matrix3:jt,Matrix4:Ut,MaxEquation:Nb,Mesh:mi,MeshBasicMaterial:Fl,MeshDepthMaterial:qx,MeshDistanceMaterial:Yx,MeshLambertMaterial:YT,MeshMatcapMaterial:KT,MeshNormalMaterial:qT,MeshPhongMaterial:XT,MeshPhysicalMaterial:$T,MeshStandardMaterial:jx,MeshToonMaterial:jT,MinEquation:Db,MirroredRepeatWrapping:ap,MixOperation:qb,MultiplyBlending:U_,MultiplyOperation:Mp,NearestFilter:Ji,NearestMipMapLinearFilter:c2,NearestMipMapNearestFilter:u2,NearestMipmapLinearFilter:qf,NearestMipmapNearestFilter:Sx,NeutralToneMapping:tT,NeverCompare:uT,NeverDepth:Hg,NeverStencilFunc:T2,NoBlending:ka,NoColorSpace:La,NoToneMapping:Uo,NormalAnimationBlendMode:q0,NormalBlending:Yu,NotEqualCompare:hT,NotEqualDepth:qg,NotEqualStencilFunc:I2,NumberKeyframeTrack:yp,Object3D:yn,ObjectLoader:BI,ObjectSpaceNormalMap:lT,OctahedronGeometry:Pp,OneFactor:kb,OneMinusConstantAlphaFactor:jb,OneMinusConstantColorFactor:$b,OneMinusDstAlphaFactor:Bb,OneMinusDstColorFactor:Hb,OneMinusSrcAlphaFactor:Vg,OneMinusSrcColorFactor:Fb,OrthographicCamera:Np,PCFShadowMap:B0,PCFSoftShadowMap:Gh,PMREMGenerator:q_,Path:pp,PerspectiveCamera:Bi,Plane:Ll,PlaneGeometry:gd,PlaneHelper:C3,PointLight:oA,PointLightHelper:_3,Points:IT,PointsMaterial:zx,PolarGridHelper:M3,PolyhedronGeometry:zl,PositionalAudio:qI,PropertyBinding:vn,PropertyMixer:gA,QuadraticBezierCurve:Gx,QuadraticBezierCurve3:$x,Quaternion:Ri,QuaternionKeyframeTrack:Dp,QuaternionLinearInterpolant:nA,RED_GREEN_RGTC2_Format:_0,RED_RGTC1_Format:Px,REVISION:z0,RGBADepthPacking:aT,RGBAFormat:cr,RGBAIntegerFormat:j0,RGBA_ASTC_10x10_Format:h0,RGBA_ASTC_10x5_Format:c0,RGBA_ASTC_10x6_Format:f0,RGBA_ASTC_10x8_Format:d0,RGBA_ASTC_12x10_Format:p0,RGBA_ASTC_12x12_Format:m0,RGBA_ASTC_4x4_Format:n0,RGBA_ASTC_5x4_Format:i0,RGBA_ASTC_5x5_Format:r0,RGBA_ASTC_6x5_Format:s0,RGBA_ASTC_6x6_Format:o0,RGBA_ASTC_8x5_Format:a0,RGBA_ASTC_8x6_Format:l0,RGBA_ASTC_8x8_Format:u0,RGBA_BPTC_Format:Kh,RGBA_ETC2_EAC_Format:t0,RGBA_PVRTC_2BPPV1_Format:Jg,RGBA_PVRTC_4BPPV1_Format:Zg,RGBA_S3TC_DXT1_Format:jh,RGBA_S3TC_DXT3_Format:qh,RGBA_S3TC_DXT5_Format:Yh,RGBDepthPacking:v2,RGBFormat:Tx,RGBIntegerFormat:h2,RGB_BPTC_SIGNED_Format:g0,RGB_BPTC_UNSIGNED_Format:v0,RGB_ETC1_Format:Qg,RGB_ETC2_Format:e0,RGB_PVRTC_2BPPV1_Format:Kg,RGB_PVRTC_4BPPV1_Format:Yg,RGB_S3TC_DXT1_Format:Xh,RGDepthPacking:y2,RGFormat:Rx,RGIntegerFormat:X0,RawShaderMaterial:GT,Ray:pd,Raycaster:yA,RectAreaLight:uA,RedFormat:$0,RedIntegerFormat:Ep,ReinhardToneMapping:Zb,RenderTarget:Y0,RenderTarget3D:l3,RenderTargetArray:u3,RepeatWrapping:op,ReplaceStencilOp:x2,ReverseSubtractEquation:Lb,RingGeometry:cv,SIGNED_RED_GREEN_RGTC2_Format:x0,SIGNED_RED_RGTC1_Format:y0,SRGBColorSpace:Rr,SRGBTransfer:Mn,Scene:kx,ShaderChunk:en,ShaderLib:co,ShaderMaterial:po,ShadowMaterial:WT,Shape:Qu,ShapeGeometry:fv,ShapePath:I3,ShapeUtils:zo,ShortType:Mx,Skeleton:ev,SkeletonHelper:y3,SkinnedMesh:AT,Source:Xu,Sphere:dr,SphereGeometry:Ip,Spherical:_A,SphericalHarmonics3:cA,SplineCurve:Xx,SpotLight:sA,SpotLightHelper:v3,Sprite:bT,SpriteMaterial:Ux,SrcAlphaFactor:Bg,SrcAlphaSaturateFactor:Wb,SrcColorFactor:Ub,StaticCopyUsage:F2,StaticDrawUsage:fp,StaticReadUsage:O2,StereoCamera:GI,StreamCopyUsage:B2,StreamDrawUsage:N2,StreamReadUsage:U2,StringKeyframeTrack:dc,SubtractEquation:Ib,SubtractiveBlending:k_,TOUCH:a2,TangentSpaceNormalMap:Ul,TetrahedronGeometry:dv,Texture:Wn,TextureLoader:ld,TextureUtils:U3,TimestampQuery:H2,TorusGeometry:hv,TorusKnotGeometry:pv,Triangle:Kr,TriangleFanDrawMode:g2,TriangleStripDrawMode:m2,TrianglesDrawMode:p2,TubeGeometry:mv,UVMapping:V0,Uint16BufferAttribute:Nx,Uint32BufferAttribute:Ox,Uint8BufferAttribute:AP,Uint8ClampedBufferAttribute:CP,Uniform:s1,UniformsGroup:f3,UniformsLib:it,UniformsUtils:ST,UnsignedByteType:ho,UnsignedInt248Type:ic,UnsignedInt5999Type:Ex,UnsignedIntType:Va,UnsignedShort4444Type:W0,UnsignedShort5551Type:G0,UnsignedShortType:rd,VSMShadowMap:uo,Vector2:De,Vector3:q,Vector4:un,VectorKeyframeTrack:_p,VideoFrameTexture:YP,VideoTexture:LT,WebGL3DRenderTarget:pP,WebGLArrayRenderTarget:hP,WebGLCoordinateSystem:fo,WebGLCubeRenderTarget:MT,WebGLRenderTarget:Vo,WebGLRenderer:AA,WebGLUtils:TA,WebGPUCoordinateSystem:dp,WebXRController:kg,WireframeGeometry:HT,WrapAroundEnding:up,ZeroCurvatureEnding:Gu,ZeroFactor:Ob,ZeroSlopeEnding:$u,ZeroStencilOp:_2,createCanvasElement:vT},Symbol.toStringTag,{value:"Module"}));var Wy={exports:{}},Pl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function yk(){return Hw||(Hw=1,Pl.ConcurrentRoot=1,Pl.ContinuousEventPriority=4,Pl.DefaultEventPriority=16,Pl.DiscreteEventPriority=1,Pl.IdleEventPriority=536870912,Pl.LegacyRoot=0),Pl}var Ww;function _k(){return Ww||(Ww=1,Wy.exports=yk()),Wy.exports}var Qf=_k();function xk(n){let e;const t=new Set,i=(h,m)=>{const g=typeof h=="function"?h(e):h;if(g!==e){const v=e;e=m?g:Object.assign({},e,g),t.forEach(x=>x(e,v))}},r=()=>e,s=(h,m=r,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=m(e);function x(){const w=m(e);if(!g(v,w)){const b=v;h(v=w,b)}}return t.add(x),()=>t.delete(x)},d={setState:i,getState:r,subscribe:(h,m,g)=>m||g?s(h,m,g):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=n(i,r,d),d}const Sk=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Gw=Sk?V.useEffect:V.useLayoutEffect;function CA(n){const e=typeof n=="function"?xk(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=V.useReducer(E=>E+1,0),a=e.getState(),u=V.useRef(a),d=V.useRef(i),h=V.useRef(r),m=V.useRef(!1),g=V.useRef();g.current===void 0&&(g.current=i(a));let v,x=!1;(u.current!==a||d.current!==i||h.current!==r||m.current)&&(v=i(a),x=!r(g.current,v)),Gw(()=>{x&&(g.current=v),u.current=a,d.current=i,h.current=r,m.current=!1});const w=V.useRef(a);Gw(()=>{const E=()=>{try{const C=e.getState(),P=d.current(C);h.current(g.current,P)||(u.current=C,g.current=P,s())}catch{m.current=!0,s()}},S=e.subscribe(E);return e.getState()!==w.current&&E(),S},[]);const b=x?v:g.current;return V.useDebugValue(b),b};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const wk=n=>typeof n=="object"&&typeof n.then=="function",qu=[];function RA(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function PA(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of qu)if(RA(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=qu.indexOf(r);s!==-1&&qu.splice(s,1)},promise:(wk(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(qu.push(r),!t)throw r.promise}const Mk=(n,e,t)=>PA(n,e,!1,t),Ek=(n,e,t)=>void PA(n,e,!0,t),bk=n=>{if(n===void 0||n.length===0)qu.splice(0,qu.length);else{const e=qu.find(t=>RA(n,t.keys,t.equal));e&&e.remove()}};var Gy={exports:{}},$y={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function Tk(){return $w||($w=1,function(n){function e(F,J){var Z=F.length;F.push(J);e:for(;0<Z;){var $=Z-1>>>1,re=F[$];if(0<r(re,J))F[$]=J,F[Z]=re,Z=$;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var J=F[0],Z=F.pop();if(Z!==J){F[0]=Z;e:for(var $=0,re=F.length,Ne=re>>>1;$<Ne;){var he=2*($+1)-1,Te=F[he],Ie=he+1,Ce=F[Ie];if(0>r(Te,Z))Ie<re&&0>r(Ce,Te)?(F[$]=Ce,F[Ie]=Z,$=Ie):(F[$]=Te,F[he]=Z,$=he);else if(Ie<re&&0>r(Ce,Z))F[$]=Ce,F[Ie]=Z,$=Ie;else break e}}return J}function r(F,J){var Z=F.sortIndex-J.sortIndex;return Z!==0?Z:F.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,v=3,x=!1,w=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(F){for(var J=t(h);J!==null;){if(J.callback===null)i(h);else if(J.startTime<=F)i(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(h)}}function I(F){if(b=!1,P(F),!w)if(t(d)!==null)w=!0,de(B);else{var J=t(h);J!==null&&_e(I,J.startTime-F)}}function B(F,J){w=!1,b&&(b=!1,S(H),H=-1),x=!0;var Z=v;try{for(P(J),g=t(d);g!==null&&(!(g.expirationTime>J)||F&&!W());){var $=g.callback;if(typeof $=="function"){g.callback=null,v=g.priorityLevel;var re=$(g.expirationTime<=J);J=n.unstable_now(),typeof re=="function"?g.callback=re:g===t(d)&&i(d),P(J)}else i(d);g=t(d)}if(g!==null)var Ne=!0;else{var he=t(h);he!==null&&_e(I,he.startTime-J),Ne=!1}return Ne}finally{g=null,v=Z,x=!1}}var N=!1,U=null,H=-1,O=5,D=-1;function W(){return!(n.unstable_now()-D<O)}function ee(){if(U!==null){var F=n.unstable_now();D=F;var J=!0;try{J=U(!0,F)}finally{J?ne():(N=!1,U=null)}}else N=!1}var ne;if(typeof C=="function")ne=function(){C(ee)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,pe=le.port2;le.port1.onmessage=ee,ne=function(){pe.postMessage(null)}}else ne=function(){E(ee,0)};function de(F){U=F,N||(N=!0,ne())}function _e(F,J){H=E(function(){F(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){w||x||(w=!0,de(B))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(F){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var Z=v;v=J;try{return F()}finally{v=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=v;v=F;try{return J()}finally{v=Z}},n.unstable_scheduleCallback=function(F,J,Z){var $=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?$+Z:$):Z=$,F){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Z+re,F={id:m++,callback:J,priorityLevel:F,startTime:Z,expirationTime:re,sortIndex:-1},Z>$?(F.sortIndex=Z,e(h,F),t(d)===null&&F===t(h)&&(b?(S(H),H=-1):b=!0,_e(I,Z-$))):(F.sortIndex=re,e(d,F),w||x||(w=!0,de(B))),F},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(F){var J=v;return function(){var Z=v;v=J;try{return F.apply(this,arguments)}finally{v=Z}}}}(Xy)),Xy}var Xw;function Ak(){return Xw||(Xw=1,$y.exports=Tk()),$y.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy,jw;function Ck(){return jw||(jw=1,jy=function(e){var t={},i=F0(),r=Ak(),s=Object.assign;function a(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),h=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),B=Symbol.iterator;function N(c){return c===null||typeof c!="object"?null:(c=B&&c[B]||c["@@iterator"],typeof c=="function"?c:null)}function U(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case m:return"Fragment";case h:return"Portal";case v:return"Profiler";case g:return"StrictMode";case E:return"Suspense";case S:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case w:return(c.displayName||"Context")+".Consumer";case x:return(c._context.displayName||"Context")+".Provider";case b:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case C:return f=c.displayName||null,f!==null?f:U(c.type)||"Memo";case P:f=c._payload,c=c._init;try{return U(c(f))}catch{}}return null}function H(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(f);case 8:return f===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function O(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function D(c){if(O(c)!==c)throw Error(a(188))}function W(c){var f=c.alternate;if(!f){if(f=O(c),f===null)throw Error(a(188));return f!==c?null:c}for(var y=c,M=f;;){var A=y.return;if(A===null)break;var L=A.alternate;if(L===null){if(M=A.return,M!==null){y=M;continue}break}if(A.child===L.child){for(L=A.child;L;){if(L===y)return D(A),c;if(L===M)return D(A),f;L=L.sibling}throw Error(a(188))}if(y.return!==M.return)y=A,M=L;else{for(var Y=!1,oe=A.child;oe;){if(oe===y){Y=!0,y=A,M=L;break}if(oe===M){Y=!0,M=A,y=L;break}oe=oe.sibling}if(!Y){for(oe=L.child;oe;){if(oe===y){Y=!0,y=L,M=A;break}if(oe===M){Y=!0,M=L,y=A;break}oe=oe.sibling}if(!Y)throw Error(a(189))}}if(y.alternate!==M)throw Error(a(190))}if(y.tag!==3)throw Error(a(188));return y.stateNode.current===y?c:f}function ee(c){return c=W(c),c!==null?ne(c):null}function ne(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=ne(c);if(f!==null)return f;c=c.sibling}return null}function le(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=le(c);if(f!==null)return f}c=c.sibling}return null}var pe=Array.isArray,de=e.getPublicInstance,_e=e.getRootHostContext,F=e.getChildHostContext,J=e.prepareForCommit,Z=e.resetAfterCommit,$=e.createInstance,re=e.appendInitialChild,Ne=e.finalizeInitialChildren,he=e.prepareUpdate,Te=e.shouldSetTextContent,Ie=e.createTextInstance,Ce=e.scheduleTimeout,He=e.cancelTimeout,gt=e.noTimeout,Ze=e.isPrimaryRenderer,Nt=e.supportsMutation,Oe=e.supportsPersistence,Re=e.supportsHydration,j=e.getInstanceFromNode,pt=e.preparePortalMount,Ue=e.getCurrentEventPriority,st=e.detachDeletedInstance,Ge=e.supportsMicrotasks,At=e.scheduleMicrotask,qe=e.supportsTestSelectors,X=e.findFiberRoot,z=e.getBoundingRect,Q=e.getTextContent,me=e.isHiddenSubtree,Pe=e.matchAccessibilityRole,Ee=e.setFocusIfFocusable,et=e.setupIntersectionObserver,je=e.appendChild,Je=e.appendChildToContainer,Ft=e.commitTextUpdate,Fe=e.commitMount,lt=e.commitUpdate,bt=e.insertBefore,Rt=e.insertInContainerBefore,ut=e.removeChild,Wt=e.removeChildFromContainer,Ot=e.resetTextContent,hn=e.hideInstance,ae=e.hideTextInstance,Qe=e.unhideInstance,be=e.unhideTextInstance,Le=e.clearContainer,rt=e.cloneInstance,tt=e.createContainerChildSet,zt=e.appendChildToContainerChildSet,Rn=e.finalizeContainerChildren,Zn=e.replaceContainerChildren,cn=e.cloneHiddenInstance,Vi=e.cloneHiddenTextInstance,Hi=e.canHydrateInstance,$a=e.canHydrateTextInstance,_o=e.canHydrateSuspenseInstance,gs=e.isSuspenseInstancePending,ts=e.isSuspenseInstanceFallback,$o=e.registerSuspenseInstanceRetry,ns=e.getNextHydratableSibling,xo=e.getFirstHydratableChild,hc=e.getFirstHydratableChildWithinContainer,Xa=e.getFirstHydratableChildWithinSuspenseInstance,pc=e.hydrateInstance,vs=e.hydrateTextInstance,mc=e.hydrateSuspenseInstance,gc=e.getNextHydratableInstanceAfterSuspenseInstance,vc=e.commitHydratedContainer,yc=e.commitHydratedSuspenseInstance,_c=e.clearSuspenseBoundary,xc=e.clearSuspenseBoundaryFromContainer,G=e.shouldDeleteUnhydratedTailInstances,ue=e.didNotMatchHydratedContainerTextInstance,Se=e.didNotMatchHydratedTextInstance,ge;function fe(c){if(ge===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);ge=f&&f[1]||""}return`
`+ge+c}var Be=!1;function Ke(c,f){if(!c||Be)return"";Be=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(We){var M=We}Reflect.construct(c,[],f)}else{try{f.call()}catch(We){M=We}c.call(f.prototype)}else{try{throw Error()}catch(We){M=We}c()}}catch(We){if(We&&M&&typeof We.stack=="string"){for(var A=We.stack.split(`
`),L=M.stack.split(`
`),Y=A.length-1,oe=L.length-1;1<=Y&&0<=oe&&A[Y]!==L[oe];)oe--;for(;1<=Y&&0<=oe;Y--,oe--)if(A[Y]!==L[oe]){if(Y!==1||oe!==1)do if(Y--,oe--,0>oe||A[Y]!==L[oe]){var Ae=`
`+A[Y].replace(" at new "," at ");return c.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",c.displayName)),Ae}while(1<=Y&&0<=oe);break}}}finally{Be=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?fe(c):""}var at=Object.prototype.hasOwnProperty,dt=[],Ct=-1;function Tt(c){return{current:c}}function $e(c){0>Ct||(c.current=dt[Ct],dt[Ct]=null,Ct--)}function xt(c,f){Ct++,dt[Ct]=c.current,c.current=f}var kt={},nn=Tt(kt),rn=Tt(!1),Yt=kt;function _t(c,f){var y=c.type.contextTypes;if(!y)return kt;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===f)return M.__reactInternalMemoizedMaskedChildContext;var A={},L;for(L in y)A[L]=f[L];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=A),A}function ln(c){return c=c.childContextTypes,c!=null}function Jt(){$e(rn),$e(nn)}function yi(c,f,y){if(nn.current!==kt)throw Error(a(168));xt(nn,f),xt(rn,y)}function Os(c,f,y){var M=c.stateNode;if(f=f.childContextTypes,typeof M.getChildContext!="function")return y;M=M.getChildContext();for(var A in M)if(!(A in f))throw Error(a(108,H(c)||"Unknown",A));return s({},y,M)}function oi(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||kt,Yt=nn.current,xt(nn,c),xt(rn,rn.current),!0}function ys(c,f,y){var M=c.stateNode;if(!M)throw Error(a(169));y?(c=Os(c,f,Yt),M.__reactInternalMemoizedMergedChildContext=c,$e(rn),$e(nn),xt(nn,c)):$e(rn),xt(rn,y)}var sn=Math.clz32?Math.clz32:_i,Li=Math.log,ai=Math.LN2;function _i(c){return c>>>=0,c===0?32:31-(Li(c)/ai|0)|0}var Gn=64,on=4194304;function Qi(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Vl(c,f){var y=c.pendingLanes;if(y===0)return 0;var M=0,A=c.suspendedLanes,L=c.pingedLanes,Y=y&268435455;if(Y!==0){var oe=Y&~A;oe!==0?M=Qi(oe):(L&=Y,L!==0&&(M=Qi(L)))}else Y=y&~A,Y!==0?M=Qi(Y):L!==0&&(M=Qi(L));if(M===0)return 0;if(f!==0&&f!==M&&!(f&A)&&(A=M&-M,L=f&-f,A>=L||A===16&&(L&4194240)!==0))return f;if(M&4&&(M|=y&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=M;0<f;)y=31-sn(f),A=1<<y,M|=c[y],f&=~A;return M}function Md(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hp(c,f){for(var y=c.suspendedLanes,M=c.pingedLanes,A=c.expirationTimes,L=c.pendingLanes;0<L;){var Y=31-sn(L),oe=1<<Y,Ae=A[Y];Ae===-1?(!(oe&y)||oe&M)&&(A[Y]=Md(oe,f)):Ae<=f&&(c.expiredLanes|=oe),L&=~oe}}function Sc(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function wc(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function Xo(c,f,y){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-sn(f),c[f]=y}function Mc(c,f){var y=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<y;){var A=31-sn(y),L=1<<A;f[A]=0,M[A]=-1,c[A]=-1,y&=~L}}function _s(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var M=31-sn(y),A=1<<M;A&f|c[M]&f&&(c[M]|=f),y&=~A}}var Qt=0;function ks(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var jo=r.unstable_scheduleCallback,ja=r.unstable_cancelCallback,So=r.unstable_shouldYield,wv=r.unstable_requestPaint,ni=r.unstable_now,qo=r.unstable_ImmediatePriority,Mv=r.unstable_UserBlockingPriority,Ec=r.unstable_NormalPriority,bc=r.unstable_IdlePriority,Hl=null,xs=null;function Wl(c){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(Hl,c,void 0,(c.current.flags&128)===128)}catch{}}function Gl(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Wi=typeof Object.is=="function"?Object.is:Gl,Or=null,Tc=!1,Ed=!1;function Ac(c){Or===null?Or=[c]:Or.push(c)}function Cc(c){Tc=!0,Ac(c)}function kr(){if(!Ed&&Or!==null){Ed=!0;var c=0,f=Qt;try{var y=Or;for(Qt=1;c<y.length;c++){var M=y[c];do M=M(!0);while(M!==null)}Or=null,Tc=!1}catch(A){throw Or!==null&&(Or=Or.slice(c+1)),jo(qo,kr),A}finally{Qt=f,Ed=!1}}return null}var Wp=u.ReactCurrentBatchConfig;function is(c,f){if(Wi(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),M=Object.keys(f);if(y.length!==M.length)return!1;for(M=0;M<y.length;M++){var A=y[M];if(!at.call(f,A)||!Wi(c[A],f[A]))return!1}return!0}function bd(c){switch(c.tag){case 5:return fe(c.type);case 16:return fe("Lazy");case 13:return fe("Suspense");case 19:return fe("SuspenseList");case 0:case 2:case 15:return c=Ke(c.type,!1),c;case 11:return c=Ke(c.type.render,!1),c;case 1:return c=Ke(c.type,!0),c;default:return""}}function er(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var y in c)f[y]===void 0&&(f[y]=c[y]);return f}return f}var $l=Tt(null),Yo=null,Us=null,Rc=null;function Gi(){Rc=Us=Yo=null}function Ko(c,f,y){Ze?(xt($l,f._currentValue),f._currentValue=y):(xt($l,f._currentValue2),f._currentValue2=y)}function Xl(c){var f=$l.current;$e($l),Ze?c._currentValue=f:c._currentValue2=f}function Zo(c,f,y){for(;c!==null;){var M=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,M!==null&&(M.childLanes|=f)):M!==null&&(M.childLanes&f)!==f&&(M.childLanes|=f),c===y)break;c=c.return}}function qa(c,f){Yo=c,Rc=Us=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(fi=!0),c.firstContext=null)}function tr(c){var f=Ze?c._currentValue:c._currentValue2;if(Rc!==c)if(c={context:c,memoizedValue:f,next:null},Us===null){if(Yo===null)throw Error(a(308));Us=c,Yo.dependencies={lanes:0,firstContext:c}}else Us=Us.next=c;return f}var Ur=null,Fr=!1;function Ya(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Td(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Fs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function wo(c,f){var y=c.updateQueue;y!==null&&(y=y.shared,Xn!==null&&c.mode&1&&!(Xt&2)?(c=y.interleaved,c===null?(f.next=f,Ur===null?Ur=[y]:Ur.push(y)):(f.next=c.next,c.next=f),y.interleaved=f):(c=y.pending,c===null?f.next=f:(f.next=c.next,c.next=f),y.pending=f))}function Pc(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var M=f.lanes;M&=c.pendingLanes,y|=M,f.lanes=y,_s(c,y)}}function Ic(c,f){var y=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,y===M)){var A=null,L=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};L===null?A=L=Y:L=L.next=Y,y=y.next}while(y!==null);L===null?A=L=f:L=L.next=f}else A=L=f;y={baseState:M.baseState,firstBaseUpdate:A,lastBaseUpdate:L,shared:M.shared,effects:M.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}function Lc(c,f,y,M){var A=c.updateQueue;Fr=!1;var L=A.firstBaseUpdate,Y=A.lastBaseUpdate,oe=A.shared.pending;if(oe!==null){A.shared.pending=null;var Ae=oe,We=Ae.next;Ae.next=null,Y===null?L=We:Y.next=We,Y=Ae;var ht=c.alternate;ht!==null&&(ht=ht.updateQueue,oe=ht.lastBaseUpdate,oe!==Y&&(oe===null?ht.firstBaseUpdate=We:oe.next=We,ht.lastBaseUpdate=Ae))}if(L!==null){var Vt=A.baseState;Y=0,ht=We=Ae=null,oe=L;do{var Pt=oe.lane,Kt=oe.eventTime;if((M&Pt)===Pt){ht!==null&&(ht=ht.next={eventTime:Kt,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var ot=c,bi=oe;switch(Pt=f,Kt=y,bi.tag){case 1:if(ot=bi.payload,typeof ot=="function"){Vt=ot.call(Kt,Vt,Pt);break e}Vt=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=bi.payload,Pt=typeof ot=="function"?ot.call(Kt,Vt,Pt):ot,Pt==null)break e;Vt=s({},Vt,Pt);break e;case 2:Fr=!0}}oe.callback!==null&&oe.lane!==0&&(c.flags|=64,Pt=A.effects,Pt===null?A.effects=[oe]:Pt.push(oe))}else Kt={eventTime:Kt,lane:Pt,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},ht===null?(We=ht=Kt,Ae=Vt):ht=ht.next=Kt,Y|=Pt;if(oe=oe.next,oe===null){if(oe=A.shared.pending,oe===null)break;Pt=oe,oe=Pt.next,Pt.next=null,A.lastBaseUpdate=Pt,A.shared.pending=null}}while(!0);if(ht===null&&(Ae=Vt),A.baseState=Ae,A.firstBaseUpdate=We,A.lastBaseUpdate=ht,f=A.shared.interleaved,f!==null){A=f;do Y|=A.lane,A=A.next;while(A!==f)}else L===null&&(A.shared.lanes=0);Es|=Y,c.lanes=Y,c.memoizedState=Vt}}function Gp(c,f,y){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var M=c[f],A=M.callback;if(A!==null){if(M.callback=null,M=y,typeof A!="function")throw Error(a(191,A));A.call(M)}}}var $p=new i.Component().refs;function Ad(c,f,y,M){f=c.memoizedState,y=y(M,f),y=y==null?f:s({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var Dc={isMounted:function(c){return(c=c._reactInternals)?O(c)===c:!1},enqueueSetState:function(c,f,y){c=c._reactInternals;var M=pn(),A=cs(c),L=Fs(M,A);L.payload=f,y!=null&&(L.callback=y),wo(c,L),f=Oi(c,A,M),f!==null&&Pc(f,c,A)},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var M=pn(),A=cs(c),L=Fs(M,A);L.tag=1,L.payload=f,y!=null&&(L.callback=y),wo(c,L),f=Oi(c,A,M),f!==null&&Pc(f,c,A)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=pn(),M=cs(c),A=Fs(y,M);A.tag=2,f!=null&&(A.callback=f),wo(c,A),f=Oi(c,M,y),f!==null&&Pc(f,c,M)}};function Cd(c,f,y,M,A,L,Y){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,L,Y):f.prototype&&f.prototype.isPureReactComponent?!is(y,M)||!is(A,L):!0}function Xp(c,f,y){var M=!1,A=kt,L=f.contextType;return typeof L=="object"&&L!==null?L=tr(L):(A=ln(f)?Yt:nn.current,M=f.contextTypes,L=(M=M!=null)?_t(c,A):kt),f=new f(y,L),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Dc,c.stateNode=f,f._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=A,c.__reactInternalMemoizedMaskedChildContext=L),f}function jp(c,f,y,M){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,M),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,M),f.state!==c&&Dc.enqueueReplaceState(f,f.state,null)}function Rd(c,f,y,M){var A=c.stateNode;A.props=y,A.state=c.memoizedState,A.refs=$p,Ya(c);var L=f.contextType;typeof L=="object"&&L!==null?A.context=tr(L):(L=ln(f)?Yt:nn.current,A.context=_t(c,L)),A.state=c.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(Ad(c,f,L,y),A.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(f=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),f!==A.state&&Dc.enqueueReplaceState(A,A.state,null),Lc(c,y,A,M),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308)}var Ka=[],Mo=0,Nc=null,Oc=0,zr=[],mr=0,Jo=null,zs=1,Bs="";function Qo(c,f){Ka[Mo++]=Oc,Ka[Mo++]=Nc,Nc=c,Oc=f}function qp(c,f,y){zr[mr++]=zs,zr[mr++]=Bs,zr[mr++]=Jo,Jo=c;var M=zs;c=Bs;var A=32-sn(M)-1;M&=~(1<<A),y+=1;var L=32-sn(f)+A;if(30<L){var Y=A-A%5;L=(M&(1<<Y)-1).toString(32),M>>=Y,A-=Y,zs=1<<32-sn(f)+A|y<<A|M,Bs=L+c}else zs=1<<L|y<<A|M,Bs=c}function Pd(c){c.return!==null&&(Qo(c,1),qp(c,1,0))}function Id(c){for(;c===Nc;)Nc=Ka[--Mo],Ka[Mo]=null,Oc=Ka[--Mo],Ka[Mo]=null;for(;c===Jo;)Jo=zr[--mr],zr[mr]=null,Bs=zr[--mr],zr[mr]=null,zs=zr[--mr],zr[mr]=null}var $i=null,xi=null,Ln=!1,Za=!1,Br=null;function Ld(c,f){var y=wr(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=c,f=c.deletions,f===null?(c.deletions=[y],c.flags|=16):f.push(y)}function Dd(c,f){switch(c.tag){case 5:return f=Hi(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,$i=c,xi=xo(f),!0):!1;case 6:return f=$a(f,c.pendingProps),f!==null?(c.stateNode=f,$i=c,xi=null,!0):!1;case 13:if(f=_o(f),f!==null){var y=Jo!==null?{id:zs,overflow:Bs}:null;return c.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=wr(18,null,null,0),y.stateNode=f,y.return=c,c.child=y,$i=c,xi=null,!0}return!1;default:return!1}}function kc(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Eo(c){if(Ln){var f=xi;if(f){var y=f;if(!Dd(c,f)){if(kc(c))throw Error(a(418));f=ns(y);var M=$i;f&&Dd(c,f)?Ld(M,y):(c.flags=c.flags&-4097|2,Ln=!1,$i=c)}}else{if(kc(c))throw Error(a(418));c.flags=c.flags&-4097|2,Ln=!1,$i=c}}}function Yp(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;$i=c}function jl(c){if(!Re||c!==$i)return!1;if(!Ln)return Yp(c),Ln=!0,!1;if(c.tag!==3&&(c.tag!==5||G(c.type)&&!Te(c.type,c.memoizedProps))){var f=xi;if(f){if(kc(c)){for(c=xi;c;)c=ns(c);throw Error(a(418))}for(;f;)Ld(c,f),f=ns(f)}}if(Yp(c),c.tag===13){if(!Re)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));xi=gc(c)}else xi=$i?ns(c.stateNode):null;return!0}function Ja(){Re&&(xi=$i=null,Za=Ln=!1)}function Uc(c){Br===null?Br=[c]:Br.push(c)}function Qa(c,f,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(a(309));var M=y.stateNode}if(!M)throw Error(a(147,c));var A=M,L=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===L?f.ref:(f=function(Y){var oe=A.refs;oe===$p&&(oe=A.refs={}),Y===null?delete oe[L]:oe[L]=Y},f._stringRef=L,f)}if(typeof c!="string")throw Error(a(284));if(!y._owner)throw Error(a(290,c))}return c}function bo(c,f){throw c=Object.prototype.toString.call(f),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function el(c){var f=c._init;return f(c._payload)}function Kp(c){function f(xe,ce){if(c){var Me=xe.deletions;Me===null?(xe.deletions=[ce],xe.flags|=16):Me.push(ce)}}function y(xe,ce){if(!c)return null;for(;ce!==null;)f(xe,ce),ce=ce.sibling;return null}function M(xe,ce){for(xe=new Map;ce!==null;)ce.key!==null?xe.set(ce.key,ce):xe.set(ce.index,ce),ce=ce.sibling;return xe}function A(xe,ce){return xe=eo(xe,ce),xe.index=0,xe.sibling=null,xe}function L(xe,ce,Me){return xe.index=Me,c?(Me=xe.alternate,Me!==null?(Me=Me.index,Me<ce?(xe.flags|=2,ce):Me):(xe.flags|=2,ce)):(xe.flags|=1048576,ce)}function Y(xe){return c&&xe.alternate===null&&(xe.flags|=2),xe}function oe(xe,ce,Me,nt){return ce===null||ce.tag!==6?(ce=ff(Me,xe.mode,nt),ce.return=xe,ce):(ce=A(ce,Me),ce.return=xe,ce)}function Ae(xe,ce,Me,nt){var wt=Me.type;return wt===m?ht(xe,ce,Me.props.children,nt,Me.key):ce!==null&&(ce.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===P&&el(wt)===ce.type)?(nt=A(ce,Me.props),nt.ref=Qa(xe,ce,Me),nt.return=xe,nt):(nt=cf(Me.type,Me.key,Me.props,null,xe.mode,nt),nt.ref=Qa(xe,ce,Me),nt.return=xe,nt)}function We(xe,ce,Me,nt){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==Me.containerInfo||ce.stateNode.implementation!==Me.implementation?(ce=df(Me,xe.mode,nt),ce.return=xe,ce):(ce=A(ce,Me.children||[]),ce.return=xe,ce)}function ht(xe,ce,Me,nt,wt){return ce===null||ce.tag!==7?(ce=Sa(Me,xe.mode,nt,wt),ce.return=xe,ce):(ce=A(ce,Me),ce.return=xe,ce)}function Vt(xe,ce,Me){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=ff(""+ce,xe.mode,Me),ce.return=xe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case d:return Me=cf(ce.type,ce.key,ce.props,null,xe.mode,Me),Me.ref=Qa(xe,null,ce),Me.return=xe,Me;case h:return ce=df(ce,xe.mode,Me),ce.return=xe,ce;case P:var nt=ce._init;return Vt(xe,nt(ce._payload),Me)}if(pe(ce)||N(ce))return ce=Sa(ce,xe.mode,Me,null),ce.return=xe,ce;bo(xe,ce)}return null}function Pt(xe,ce,Me,nt){var wt=ce!==null?ce.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return wt!==null?null:oe(xe,ce,""+Me,nt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case d:return Me.key===wt?Ae(xe,ce,Me,nt):null;case h:return Me.key===wt?We(xe,ce,Me,nt):null;case P:return wt=Me._init,Pt(xe,ce,wt(Me._payload),nt)}if(pe(Me)||N(Me))return wt!==null?null:ht(xe,ce,Me,nt,null);bo(xe,Me)}return null}function Kt(xe,ce,Me,nt,wt){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return xe=xe.get(Me)||null,oe(ce,xe,""+nt,wt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case d:return xe=xe.get(nt.key===null?Me:nt.key)||null,Ae(ce,xe,nt,wt);case h:return xe=xe.get(nt.key===null?Me:nt.key)||null,We(ce,xe,nt,wt);case P:var Gt=nt._init;return Kt(xe,ce,Me,Gt(nt._payload),wt)}if(pe(nt)||N(nt))return xe=xe.get(Me)||null,ht(ce,xe,nt,wt,null);bo(ce,nt)}return null}function ot(xe,ce,Me,nt){for(var wt=null,Gt=null,Ht=ce,dn=ce=0,Qn=null;Ht!==null&&dn<Me.length;dn++){Ht.index>dn?(Qn=Ht,Ht=null):Qn=Ht.sibling;var fn=Pt(xe,Ht,Me[dn],nt);if(fn===null){Ht===null&&(Ht=Qn);break}c&&Ht&&fn.alternate===null&&f(xe,Ht),ce=L(fn,ce,dn),Gt===null?wt=fn:Gt.sibling=fn,Gt=fn,Ht=Qn}if(dn===Me.length)return y(xe,Ht),Ln&&Qo(xe,dn),wt;if(Ht===null){for(;dn<Me.length;dn++)Ht=Vt(xe,Me[dn],nt),Ht!==null&&(ce=L(Ht,ce,dn),Gt===null?wt=Ht:Gt.sibling=Ht,Gt=Ht);return Ln&&Qo(xe,dn),wt}for(Ht=M(xe,Ht);dn<Me.length;dn++)Qn=Kt(Ht,xe,dn,Me[dn],nt),Qn!==null&&(c&&Qn.alternate!==null&&Ht.delete(Qn.key===null?dn:Qn.key),ce=L(Qn,ce,dn),Gt===null?wt=Qn:Gt.sibling=Qn,Gt=Qn);return c&&Ht.forEach(function(to){return f(xe,to)}),Ln&&Qo(xe,dn),wt}function bi(xe,ce,Me,nt){var wt=N(Me);if(typeof wt!="function")throw Error(a(150));if(Me=wt.call(Me),Me==null)throw Error(a(151));for(var Gt=wt=null,Ht=ce,dn=ce=0,Qn=null,fn=Me.next();Ht!==null&&!fn.done;dn++,fn=Me.next()){Ht.index>dn?(Qn=Ht,Ht=null):Qn=Ht.sibling;var to=Pt(xe,Ht,fn.value,nt);if(to===null){Ht===null&&(Ht=Qn);break}c&&Ht&&to.alternate===null&&f(xe,Ht),ce=L(to,ce,dn),Gt===null?wt=to:Gt.sibling=to,Gt=to,Ht=Qn}if(fn.done)return y(xe,Ht),Ln&&Qo(xe,dn),wt;if(Ht===null){for(;!fn.done;dn++,fn=Me.next())fn=Vt(xe,fn.value,nt),fn!==null&&(ce=L(fn,ce,dn),Gt===null?wt=fn:Gt.sibling=fn,Gt=fn);return Ln&&Qo(xe,dn),wt}for(Ht=M(xe,Ht);!fn.done;dn++,fn=Me.next())fn=Kt(Ht,xe,dn,fn.value,nt),fn!==null&&(c&&fn.alternate!==null&&Ht.delete(fn.key===null?dn:fn.key),ce=L(fn,ce,dn),Gt===null?wt=fn:Gt.sibling=fn,Gt=fn);return c&&Ht.forEach(function(ch){return f(xe,ch)}),Ln&&Qo(xe,dn),wt}function Mr(xe,ce,Me,nt){if(typeof Me=="object"&&Me!==null&&Me.type===m&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case d:e:{for(var wt=Me.key,Gt=ce;Gt!==null;){if(Gt.key===wt){if(wt=Me.type,wt===m){if(Gt.tag===7){y(xe,Gt.sibling),ce=A(Gt,Me.props.children),ce.return=xe,xe=ce;break e}}else if(Gt.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===P&&el(wt)===Gt.type){y(xe,Gt.sibling),ce=A(Gt,Me.props),ce.ref=Qa(xe,Gt,Me),ce.return=xe,xe=ce;break e}y(xe,Gt);break}else f(xe,Gt);Gt=Gt.sibling}Me.type===m?(ce=Sa(Me.props.children,xe.mode,nt,Me.key),ce.return=xe,xe=ce):(nt=cf(Me.type,Me.key,Me.props,null,xe.mode,nt),nt.ref=Qa(xe,ce,Me),nt.return=xe,xe=nt)}return Y(xe);case h:e:{for(Gt=Me.key;ce!==null;){if(ce.key===Gt)if(ce.tag===4&&ce.stateNode.containerInfo===Me.containerInfo&&ce.stateNode.implementation===Me.implementation){y(xe,ce.sibling),ce=A(ce,Me.children||[]),ce.return=xe,xe=ce;break e}else{y(xe,ce);break}else f(xe,ce);ce=ce.sibling}ce=df(Me,xe.mode,nt),ce.return=xe,xe=ce}return Y(xe);case P:return Gt=Me._init,Mr(xe,ce,Gt(Me._payload),nt)}if(pe(Me))return ot(xe,ce,Me,nt);if(N(Me))return bi(xe,ce,Me,nt);bo(xe,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,ce!==null&&ce.tag===6?(y(xe,ce.sibling),ce=A(ce,Me),ce.return=xe,xe=ce):(y(xe,ce),ce=ff(Me,xe.mode,nt),ce.return=xe,xe=ce),Y(xe)):y(xe,ce)}return Mr}var Vs=Kp(!0),Zp=Kp(!1),tl={},nr=Tt(tl),ea=Tt(tl),ta=Tt(tl);function rs(c){if(c===tl)throw Error(a(174));return c}function Fc(c,f){xt(ta,f),xt(ea,c),xt(nr,tl),c=_e(f),$e(nr),xt(nr,c)}function nl(){$e(nr),$e(ea),$e(ta)}function Jp(c){var f=rs(ta.current),y=rs(nr.current);f=F(y,c.type,f),y!==f&&(xt(ea,c),xt(nr,f))}function Nd(c){ea.current===c&&($e(nr),$e(ea))}var Fn=Tt(0);function zc(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||gs(y)||ts(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var gr=[];function na(){for(var c=0;c<gr.length;c++){var f=gr[c];Ze?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}gr.length=0}var ql=u.ReactCurrentDispatcher,vr=u.ReactCurrentBatchConfig,ia=0,zn=null,li=null,ui=null,Bc=!1,Ss=!1,ra=0,Yl=0;function ci(){throw Error(a(321))}function Vc(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!Wi(c[y],f[y]))return!1;return!0}function il(c,f,y,M,A,L){if(ia=L,zn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ql.current=c===null||c.memoizedState===null?Bd:Vd,c=y(M,A),Ss){L=0;do{if(Ss=!1,ra=0,25<=L)throw Error(a(301));L+=1,ui=li=null,f.updateQueue=null,ql.current=Hd,c=y(M,A)}while(Ss)}if(ql.current=al,f=li!==null&&li.next!==null,ia=0,ui=li=zn=null,Bc=!1,f)throw Error(a(300));return c}function To(){var c=ra!==0;return ra=0,c}function ss(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?zn.memoizedState=ui=c:ui=ui.next=c,ui}function os(){if(li===null){var c=zn.alternate;c=c!==null?c.memoizedState:null}else c=li.next;var f=ui===null?zn.memoizedState:ui.next;if(f!==null)ui=f,li=c;else{if(c===null)throw Error(a(310));li=c,c={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},ui===null?zn.memoizedState=ui=c:ui=ui.next=c}return ui}function ws(c,f){return typeof f=="function"?f(c):f}function Kl(c){var f=os(),y=f.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=c;var M=li,A=M.baseQueue,L=y.pending;if(L!==null){if(A!==null){var Y=A.next;A.next=L.next,L.next=Y}M.baseQueue=A=L,y.pending=null}if(A!==null){L=A.next,M=M.baseState;var oe=Y=null,Ae=null,We=L;do{var ht=We.lane;if((ia&ht)===ht)Ae!==null&&(Ae=Ae.next={lane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),M=We.hasEagerState?We.eagerState:c(M,We.action);else{var Vt={lane:ht,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null};Ae===null?(oe=Ae=Vt,Y=M):Ae=Ae.next=Vt,zn.lanes|=ht,Es|=ht}We=We.next}while(We!==null&&We!==L);Ae===null?Y=M:Ae.next=oe,Wi(M,f.memoizedState)||(fi=!0),f.memoizedState=M,f.baseState=Y,f.baseQueue=Ae,y.lastRenderedState=M}if(c=y.interleaved,c!==null){A=c;do L=A.lane,zn.lanes|=L,Es|=L,A=A.next;while(A!==c)}else A===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function Zl(c){var f=os(),y=f.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=c;var M=y.dispatch,A=y.pending,L=f.memoizedState;if(A!==null){y.pending=null;var Y=A=A.next;do L=c(L,Y.action),Y=Y.next;while(Y!==A);Wi(L,f.memoizedState)||(fi=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),y.lastRenderedState=L}return[L,M]}function Od(){}function kd(c,f){var y=zn,M=os(),A=f(),L=!Wi(M.memoizedState,A);if(L&&(M.memoizedState=A,fi=!0),M=M.queue,rl(Hs.bind(null,y,M,c),[c]),M.getSnapshot!==f||L||ui!==null&&ui.memoizedState.tag&1){if(y.flags|=2048,Ql(9,Fd.bind(null,y,M,A,f),void 0,null),Xn===null)throw Error(a(349));ia&30||Ud(y,f,A)}return A}function Ud(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=zn.updateQueue,f===null?(f={lastEffect:null,stores:null},zn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function Fd(c,f,y,M){f.value=y,f.getSnapshot=M,Hc(f)&&Oi(c,1,-1)}function Hs(c,f,y){return y(function(){Hc(f)&&Oi(c,1,-1)})}function Hc(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!Wi(c,y)}catch{return!0}}function Jl(c){var f=ss();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:c},f.queue=c,c=c.dispatch=Ev.bind(null,zn,c),[f.memoizedState,c]}function Ql(c,f,y,M){return c={tag:c,create:f,destroy:y,deps:M,next:null},f=zn.updateQueue,f===null?(f={lastEffect:null,stores:null},zn.updateQueue=f,f.lastEffect=c.next=c):(y=f.lastEffect,y===null?f.lastEffect=c.next=c:(M=y.next,y.next=c,c.next=M,f.lastEffect=c)),c}function Qp(){return os().memoizedState}function Ao(c,f,y,M){var A=ss();zn.flags|=c,A.memoizedState=Ql(1|f,y,void 0,M===void 0?null:M)}function Wc(c,f,y,M){var A=os();M=M===void 0?null:M;var L=void 0;if(li!==null){var Y=li.memoizedState;if(L=Y.destroy,M!==null&&Vc(M,Y.deps)){A.memoizedState=Ql(f,y,L,M);return}}zn.flags|=c,A.memoizedState=Ql(1|f,y,L,M)}function Gc(c,f){return Ao(8390656,8,c,f)}function rl(c,f){return Wc(2048,8,c,f)}function En(c,f){return Wc(4,2,c,f)}function $c(c,f){return Wc(4,4,c,f)}function eu(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function sl(c,f,y){return y=y!=null?y.concat([c]):null,Wc(4,4,eu.bind(null,f,c),y)}function Xc(){}function jc(c,f){var y=os();f=f===void 0?null:f;var M=y.memoizedState;return M!==null&&f!==null&&Vc(f,M[1])?M[0]:(y.memoizedState=[c,f],c)}function ol(c,f){var y=os();f=f===void 0?null:f;var M=y.memoizedState;return M!==null&&f!==null&&Vc(f,M[1])?M[0]:(c=c(),y.memoizedState=[c,f],c)}function qc(c,f){var y=Qt;Qt=y!==0&&4>y?y:4,c(!0);var M=vr.transition;vr.transition={};try{c(!1),f()}finally{Qt=y,vr.transition=M}}function sa(){return os().memoizedState}function em(c,f,y){var M=cs(c);y={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null},tm(c)?zd(f,y):(tu(c,f,y),y=pn(),c=Oi(c,M,y),c!==null&&nu(c,f,M))}function Ev(c,f,y){var M=cs(c),A={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null};if(tm(c))zd(f,A);else{tu(c,f,A);var L=c.alternate;if(c.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var Y=f.lastRenderedState,oe=L(Y,y);if(A.hasEagerState=!0,A.eagerState=oe,Wi(oe,Y))return}catch{}finally{}y=pn(),c=Oi(c,M,y),c!==null&&nu(c,f,M)}}function tm(c){var f=c.alternate;return c===zn||f!==null&&f===zn}function zd(c,f){Ss=Bc=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function tu(c,f,y){Xn!==null&&c.mode&1&&!(Xt&2)?(c=f.interleaved,c===null?(y.next=y,Ur===null?Ur=[f]:Ur.push(f)):(y.next=c.next,c.next=y),f.interleaved=y):(c=f.pending,c===null?y.next=y:(y.next=c.next,c.next=y),f.pending=y)}function nu(c,f,y){if(y&4194240){var M=f.lanes;M&=c.pendingLanes,y|=M,f.lanes=y,_s(c,y)}}var al={readContext:tr,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useInsertionEffect:ci,useLayoutEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useMutableSource:ci,useSyncExternalStore:ci,useId:ci,unstable_isNewReconciler:!1},Bd={readContext:tr,useCallback:function(c,f){return ss().memoizedState=[c,f===void 0?null:f],c},useContext:tr,useEffect:Gc,useImperativeHandle:function(c,f,y){return y=y!=null?y.concat([c]):null,Ao(4194308,4,eu.bind(null,f,c),y)},useLayoutEffect:function(c,f){return Ao(4194308,4,c,f)},useInsertionEffect:function(c,f){return Ao(4,2,c,f)},useMemo:function(c,f){var y=ss();return f=f===void 0?null:f,c=c(),y.memoizedState=[c,f],c},useReducer:function(c,f,y){var M=ss();return f=y!==void 0?y(f):f,M.memoizedState=M.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},M.queue=c,c=c.dispatch=em.bind(null,zn,c),[M.memoizedState,c]},useRef:function(c){var f=ss();return c={current:c},f.memoizedState=c},useState:Jl,useDebugValue:Xc,useDeferredValue:function(c){var f=Jl(c),y=f[0],M=f[1];return Gc(function(){var A=vr.transition;vr.transition={};try{M(c)}finally{vr.transition=A}},[c]),y},useTransition:function(){var c=Jl(!1),f=c[0];return c=qc.bind(null,c[1]),ss().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,y){var M=zn,A=ss();if(Ln){if(y===void 0)throw Error(a(407));y=y()}else{if(y=f(),Xn===null)throw Error(a(349));ia&30||Ud(M,f,y)}A.memoizedState=y;var L={value:y,getSnapshot:f};return A.queue=L,Gc(Hs.bind(null,M,L,c),[c]),M.flags|=2048,Ql(9,Fd.bind(null,M,L,y,f),void 0,null),y},useId:function(){var c=ss(),f=Xn.identifierPrefix;if(Ln){var y=Bs,M=zs;y=(M&~(1<<32-sn(M)-1)).toString(32)+y,f=":"+f+"R"+y,y=ra++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=Yl++,f=":"+f+"r"+y.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},Vd={readContext:tr,useCallback:jc,useContext:tr,useEffect:rl,useImperativeHandle:sl,useInsertionEffect:En,useLayoutEffect:$c,useMemo:ol,useReducer:Kl,useRef:Qp,useState:function(){return Kl(ws)},useDebugValue:Xc,useDeferredValue:function(c){var f=Kl(ws),y=f[0],M=f[1];return rl(function(){var A=vr.transition;vr.transition={};try{M(c)}finally{vr.transition=A}},[c]),y},useTransition:function(){var c=Kl(ws)[0],f=os().memoizedState;return[c,f]},useMutableSource:Od,useSyncExternalStore:kd,useId:sa,unstable_isNewReconciler:!1},Hd={readContext:tr,useCallback:jc,useContext:tr,useEffect:rl,useImperativeHandle:sl,useInsertionEffect:En,useLayoutEffect:$c,useMemo:ol,useReducer:Zl,useRef:Qp,useState:function(){return Zl(ws)},useDebugValue:Xc,useDeferredValue:function(c){var f=Zl(ws),y=f[0],M=f[1];return rl(function(){var A=vr.transition;vr.transition={};try{M(c)}finally{vr.transition=A}},[c]),y},useTransition:function(){var c=Zl(ws)[0],f=os().memoizedState;return[c,f]},useMutableSource:Od,useSyncExternalStore:kd,useId:sa,unstable_isNewReconciler:!1};function Wd(c,f){try{var y="",M=f;do y+=bd(M),M=M.return;while(M);var A=y}catch(L){A=`
Error generating stack: `+L.message+`
`+L.stack}return{value:c,source:f,stack:A}}function Yc(c,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var bv=typeof WeakMap=="function"?WeakMap:Map;function nm(c,f,y){y=Fs(-1,y),y.tag=3,y.payload={element:null};var M=f.value;return y.callback=function(){hl||(hl=!0,In=M),Yc(c,f)},y}function Kc(c,f,y){y=Fs(-1,y),y.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var A=f.value;y.payload=function(){return M(A)},y.callback=function(){Yc(c,f)}}var L=c.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(y.callback=function(){Yc(c,f),typeof M!="function"&&(us===null?us=new Set([this]):us.add(this));var Y=f.stack;this.componentDidCatch(f.value,{componentStack:Y!==null?Y:""})}),y}function Ws(c,f,y){var M=c.pingCache;if(M===null){M=c.pingCache=new bv;var A=new Set;M.set(f,A)}else A=M.get(f),A===void 0&&(A=new Set,M.set(f,A));A.has(y)||(A.add(y),c=ah.bind(null,c,f,y),f.then(c,c))}function Gd(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function oa(c,f,y,M,A){return c.mode&1?(c.flags|=65536,c.lanes=A,c):(c===f?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=Fs(-1,1),f.tag=2,wo(y,f))),y.lanes|=1),c)}function ii(c){c.flags|=4}function ll(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var yr,aa,Zc,Jc;if(Nt)yr=function(c,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)re(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},aa=function(){},Zc=function(c,f,y,M,A){if(c=c.memoizedProps,c!==M){var L=f.stateNode,Y=rs(nr.current);y=he(L,y,c,M,A,Y),(f.updateQueue=y)&&ii(f)}},Jc=function(c,f,y,M){y!==M&&ii(f)};else if(Oe){yr=function(c,f,y,M){for(var A=f.child;A!==null;){if(A.tag===5){var L=A.stateNode;y&&M&&(L=cn(L,A.type,A.memoizedProps,A)),re(c,L)}else if(A.tag===6)L=A.stateNode,y&&M&&(L=Vi(L,A.memoizedProps,A)),re(c,L);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)L=A.child,L!==null&&(L.return=A),yr(c,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};var Co=function(c,f,y,M){for(var A=f.child;A!==null;){if(A.tag===5){var L=A.stateNode;y&&M&&(L=cn(L,A.type,A.memoizedProps,A)),zt(c,L)}else if(A.tag===6)L=A.stateNode,y&&M&&(L=Vi(L,A.memoizedProps,A)),zt(c,L);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)L=A.child,L!==null&&(L.return=A),Co(c,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};aa=function(c,f){var y=f.stateNode;if(!ll(c,f)){c=y.containerInfo;var M=tt(c);Co(M,f,!1,!1),y.pendingChildren=M,ii(f),Rn(c,M)}},Zc=function(c,f,y,M,A){var L=c.stateNode,Y=c.memoizedProps;if((c=ll(c,f))&&Y===M)f.stateNode=L;else{var oe=f.stateNode,Ae=rs(nr.current),We=null;Y!==M&&(We=he(oe,y,Y,M,A,Ae)),c&&We===null?f.stateNode=L:(L=rt(L,We,y,Y,M,f,c,oe),Ne(L,y,M,A,Ae)&&ii(f),f.stateNode=L,c?ii(f):yr(L,f,!1,!1))}},Jc=function(c,f,y,M){y!==M?(c=rs(ta.current),y=rs(nr.current),f.stateNode=Ie(M,c,y,f),ii(f)):f.stateNode=c.stateNode}}else aa=function(){},Zc=function(){},Jc=function(){};function Gs(c,f){if(!Ln)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var M=null;y!==null;)y.alternate!==null&&(M=y),y=y.sibling;M===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function $n(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,M=0;if(f)for(var A=c.child;A!==null;)y|=A.lanes|A.childLanes,M|=A.subtreeFlags&14680064,M|=A.flags&14680064,A.return=c,A=A.sibling;else for(A=c.child;A!==null;)y|=A.lanes|A.childLanes,M|=A.subtreeFlags,M|=A.flags,A.return=c,A=A.sibling;return c.subtreeFlags|=M,c.childLanes=y,f}function Qc(c,f,y){var M=f.pendingProps;switch(Id(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(f),null;case 1:return ln(f.type)&&Jt(),$n(f),null;case 3:return M=f.stateNode,nl(),$e(rn),$e(nn),na(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(jl(f)?ii(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Br!==null&&(mu(Br),Br=null))),aa(c,f),$n(f),null;case 5:Nd(f),y=rs(ta.current);var A=f.type;if(c!==null&&f.stateNode!=null)Zc(c,f,A,M,y),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!M){if(f.stateNode===null)throw Error(a(166));return $n(f),null}if(c=rs(nr.current),jl(f)){if(!Re)throw Error(a(175));c=pc(f.stateNode,f.type,f.memoizedProps,y,c,f,!Za),f.updateQueue=c,c!==null&&ii(f)}else{var L=$(A,M,y,c,f);yr(L,f,!1,!1),f.stateNode=L,Ne(L,A,M,y,c)&&ii(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return $n(f),null;case 6:if(c&&f.stateNode!=null)Jc(c,f,c.memoizedProps,M);else{if(typeof M!="string"&&f.stateNode===null)throw Error(a(166));if(c=rs(ta.current),y=rs(nr.current),jl(f)){if(!Re)throw Error(a(176));if(c=f.stateNode,M=f.memoizedProps,(y=vs(c,M,f,!Za))&&(A=$i,A!==null))switch(L=(A.mode&1)!==0,A.tag){case 3:ue(A.stateNode.containerInfo,c,M,L);break;case 5:Se(A.type,A.memoizedProps,A.stateNode,c,M,L)}y&&ii(f)}else f.stateNode=Ie(M,c,y,f)}return $n(f),null;case 13:if($e(Fn),M=f.memoizedState,Ln&&xi!==null&&f.mode&1&&!(f.flags&128)){for(c=xi;c;)c=ns(c);return Ja(),f.flags|=98560,f}if(M!==null&&M.dehydrated!==null){if(M=jl(f),c===null){if(!M)throw Error(a(318));if(!Re)throw Error(a(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));mc(c,f)}else Ja(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return $n(f),null}return Br!==null&&(mu(Br),Br=null),f.flags&128?(f.lanes=y,f):(M=M!==null,y=!1,c===null?jl(f):y=c.memoizedState!==null,M&&!y&&(f.child.flags|=8192,f.mode&1&&(c===null||Fn.current&1?Vn===0&&(Vn=3):af())),f.updateQueue!==null&&(f.flags|=4),$n(f),null);case 4:return nl(),aa(c,f),c===null&&pt(f.stateNode.containerInfo),$n(f),null;case 10:return Xl(f.type._context),$n(f),null;case 17:return ln(f.type)&&Jt(),$n(f),null;case 19:if($e(Fn),A=f.memoizedState,A===null)return $n(f),null;if(M=(f.flags&128)!==0,L=A.rendering,L===null)if(M)Gs(A,!1);else{if(Vn!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(L=zc(c),L!==null){for(f.flags|=128,Gs(A,!1),c=L.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=y,M=f.child;M!==null;)y=M,A=c,y.flags&=14680066,L=y.alternate,L===null?(y.childLanes=0,y.lanes=A,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=L.childLanes,y.lanes=L.lanes,y.child=L.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=L.memoizedProps,y.memoizedState=L.memoizedState,y.updateQueue=L.updateQueue,y.type=L.type,A=L.dependencies,y.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),M=M.sibling;return xt(Fn,Fn.current&1|2),f.child}c=c.sibling}A.tail!==null&&ni()>Io&&(f.flags|=128,M=!0,Gs(A,!1),f.lanes=4194304)}else{if(!M)if(c=zc(L),c!==null){if(f.flags|=128,M=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Gs(A,!0),A.tail===null&&A.tailMode==="hidden"&&!L.alternate&&!Ln)return $n(f),null}else 2*ni()-A.renderingStartTime>Io&&y!==1073741824&&(f.flags|=128,M=!0,Gs(A,!1),f.lanes=4194304);A.isBackwards?(L.sibling=f.child,f.child=L):(c=A.last,c!==null?c.sibling=L:f.child=L,A.last=L)}return A.tail!==null?(f=A.tail,A.rendering=f,A.tail=f.sibling,A.renderingStartTime=ni(),f.sibling=null,c=Fn.current,xt(Fn,M?c&1|2:c&1),f):($n(f),null);case 22:case 23:return gu(),M=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(f.flags|=8192),M&&f.mode&1?Ni&1073741824&&($n(f),Nt&&f.subtreeFlags&6&&(f.flags|=8192)):$n(f),null;case 24:return null;case 25:return null}throw Error(a(156,f.tag))}var $d=u.ReactCurrentOwner,fi=!1;function Bn(c,f,y,M){f.child=c===null?Zp(f,null,y,M):Vs(f,c.child,y,M)}function bn(c,f,y,M,A){y=y.render;var L=f.ref;return qa(f,A),M=il(c,f,y,M,L,A),y=To(),c!==null&&!fi?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~A,ir(c,f,A)):(Ln&&y&&Pd(f),f.flags|=1,Bn(c,f,M,A),f.child)}function wn(c,f,y,M,A){if(c===null){var L=y.type;return typeof L=="function"&&!uf(L)&&L.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=L,$s(c,f,L,M,A)):(c=cf(y.type,null,M,f,f.mode,A),c.ref=f.ref,c.return=f,f.child=c)}if(L=c.child,!(c.lanes&A)){var Y=L.memoizedProps;if(y=y.compare,y=y!==null?y:is,y(Y,M)&&c.ref===f.ref)return ir(c,f,A)}return f.flags|=1,c=eo(L,M),c.ref=f.ref,c.return=f,f.child=c}function $s(c,f,y,M,A){if(c!==null&&is(c.memoizedProps,M)&&c.ref===f.ref)if(fi=!1,(c.lanes&A)!==0)c.flags&131072&&(fi=!0);else return f.lanes=c.lanes,ir(c,f,A);return Xs(c,f,y,M,A)}function Si(c,f,y){var M=f.pendingProps,A=M.children,L=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},xt(ga,Ni),Ni|=y;else if(y&1073741824)f.memoizedState={baseLanes:0,cachePool:null},M=L!==null?L.baseLanes:y,xt(ga,Ni),Ni|=M;else return c=L!==null?L.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,xt(ga,Ni),Ni|=c,null;else L!==null?(M=L.baseLanes|y,f.memoizedState=null):M=y,xt(ga,Ni),Ni|=M;return Bn(c,f,A,y),f.child}function Xi(c,f){var y=f.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function Xs(c,f,y,M,A){var L=ln(y)?Yt:nn.current;return L=_t(f,L),qa(f,A),y=il(c,f,y,M,L,A),M=To(),c!==null&&!fi?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~A,ir(c,f,A)):(Ln&&M&&Pd(f),f.flags|=1,Bn(c,f,y,A),f.child)}function la(c,f,y,M,A){if(ln(y)){var L=!0;oi(f)}else L=!1;if(qa(f,A),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),Xp(f,y,M),Rd(f,y,M,A),M=!0;else if(c===null){var Y=f.stateNode,oe=f.memoizedProps;Y.props=oe;var Ae=Y.context,We=y.contextType;typeof We=="object"&&We!==null?We=tr(We):(We=ln(y)?Yt:nn.current,We=_t(f,We));var ht=y.getDerivedStateFromProps,Vt=typeof ht=="function"||typeof Y.getSnapshotBeforeUpdate=="function";Vt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(oe!==M||Ae!==We)&&jp(f,Y,M,We),Fr=!1;var Pt=f.memoizedState;Y.state=Pt,Lc(f,M,Y,A),Ae=f.memoizedState,oe!==M||Pt!==Ae||rn.current||Fr?(typeof ht=="function"&&(Ad(f,y,ht,M),Ae=f.memoizedState),(oe=Fr||Cd(f,y,oe,M,Pt,Ae,We))?(Vt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=M,f.memoizedState=Ae),Y.props=M,Y.state=Ae,Y.context=We,M=oe):(typeof Y.componentDidMount=="function"&&(f.flags|=4194308),M=!1)}else{Y=f.stateNode,Td(c,f),oe=f.memoizedProps,We=f.type===f.elementType?oe:er(f.type,oe),Y.props=We,Vt=f.pendingProps,Pt=Y.context,Ae=y.contextType,typeof Ae=="object"&&Ae!==null?Ae=tr(Ae):(Ae=ln(y)?Yt:nn.current,Ae=_t(f,Ae));var Kt=y.getDerivedStateFromProps;(ht=typeof Kt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(oe!==Vt||Pt!==Ae)&&jp(f,Y,M,Ae),Fr=!1,Pt=f.memoizedState,Y.state=Pt,Lc(f,M,Y,A);var ot=f.memoizedState;oe!==Vt||Pt!==ot||rn.current||Fr?(typeof Kt=="function"&&(Ad(f,y,Kt,M),ot=f.memoizedState),(We=Fr||Cd(f,y,We,M,Pt,ot,Ae)||!1)?(ht||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(M,ot,Ae),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(M,ot,Ae)),typeof Y.componentDidUpdate=="function"&&(f.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Y.componentDidUpdate!="function"||oe===c.memoizedProps&&Pt===c.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&Pt===c.memoizedState||(f.flags|=1024),f.memoizedProps=M,f.memoizedState=ot),Y.props=M,Y.state=ot,Y.context=Ae,M=We):(typeof Y.componentDidUpdate!="function"||oe===c.memoizedProps&&Pt===c.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&Pt===c.memoizedState||(f.flags|=1024),M=!1)}return Di(c,f,y,M,L,A)}function Di(c,f,y,M,A,L){Xi(c,f);var Y=(f.flags&128)!==0;if(!M&&!Y)return A&&ys(f,y,!1),ir(c,f,L);M=f.stateNode,$d.current=f;var oe=Y&&typeof y.getDerivedStateFromError!="function"?null:M.render();return f.flags|=1,c!==null&&Y?(f.child=Vs(f,c.child,null,L),f.child=Vs(f,null,oe,L)):Bn(c,f,oe,L),f.memoizedState=M.state,A&&ys(f,y,!0),f.child}function iu(c){var f=c.stateNode;f.pendingContext?yi(c,f.pendingContext,f.pendingContext!==f.context):f.context&&yi(c,f.context,!1),Fc(c,f.containerInfo)}function Xd(c,f,y,M,A){return Ja(),Uc(A),f.flags|=256,Bn(c,f,y,M),f.child}var ru={dehydrated:null,treeContext:null,retryLane:0};function ua(c){return{baseLanes:c,cachePool:null}}function jd(c,f,y){var M=f.pendingProps,A=Fn.current,L=!1,Y=(f.flags&128)!==0,oe;if((oe=Y)||(oe=c!==null&&c.memoizedState===null?!1:(A&2)!==0),oe?(L=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(A|=1),xt(Fn,A&1),c===null)return Eo(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?ts(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(A=M.children,c=M.fallback,L?(M=f.mode,L=f.child,A={mode:"hidden",children:A},!(M&1)&&L!==null?(L.childLanes=0,L.pendingProps=A):L=_u(A,M,0,null),c=Sa(c,M,y,null),L.return=f,c.return=f,L.sibling=c,f.child=L,f.child.memoizedState=ua(y),f.memoizedState=ru,c):as(f,A));if(A=c.memoizedState,A!==null){if(oe=A.dehydrated,oe!==null){if(Y)return f.flags&256?(f.flags&=-257,ou(c,f,y,Error(a(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(L=M.fallback,A=f.mode,M=_u({mode:"visible",children:M.children},A,0,null),L=Sa(L,A,y,null),L.flags|=2,M.return=f,L.return=f,M.sibling=L,f.child=M,f.mode&1&&Vs(f,c.child,null,y),f.child.memoizedState=ua(y),f.memoizedState=ru,L);if(!(f.mode&1))f=ou(c,f,y,null);else if(ts(oe))f=ou(c,f,y,Error(a(419)));else if(M=(y&c.childLanes)!==0,fi||M){if(M=Xn,M!==null){switch(y&-y){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}M=L&(M.suspendedLanes|y)?0:L,M!==0&&M!==A.retryLane&&(A.retryLane=M,Oi(c,M,-1))}af(),f=ou(c,f,y,Error(a(421)))}else gs(oe)?(f.flags|=128,f.child=c.child,f=am.bind(null,c),$o(oe,f),f=null):(y=A.treeContext,Re&&(xi=Xa(oe),$i=f,Ln=!0,Br=null,Za=!1,y!==null&&(zr[mr++]=zs,zr[mr++]=Bs,zr[mr++]=Jo,zs=y.id,Bs=y.overflow,Jo=f)),f=as(f,f.pendingProps.children),f.flags|=4096);return f}return L?(M=ef(c,f,M.children,M.fallback,y),L=f.child,A=c.child.memoizedState,L.memoizedState=A===null?ua(y):{baseLanes:A.baseLanes|y,cachePool:null},L.childLanes=c.childLanes&~y,f.memoizedState=ru,M):(y=su(c,f,M.children,y),f.memoizedState=null,y)}return L?(M=ef(c,f,M.children,M.fallback,y),L=f.child,A=c.child.memoizedState,L.memoizedState=A===null?ua(y):{baseLanes:A.baseLanes|y,cachePool:null},L.childLanes=c.childLanes&~y,f.memoizedState=ru,M):(y=su(c,f,M.children,y),f.memoizedState=null,y)}function as(c,f){return f=_u({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function su(c,f,y,M){var A=c.child;return c=A.sibling,y=eo(A,{mode:"visible",children:y}),!(f.mode&1)&&(y.lanes=M),y.return=f,y.sibling=null,c!==null&&(M=f.deletions,M===null?(f.deletions=[c],f.flags|=16):M.push(c)),f.child=y}function ef(c,f,y,M,A){var L=f.mode;c=c.child;var Y=c.sibling,oe={mode:"hidden",children:y};return!(L&1)&&f.child!==c?(y=f.child,y.childLanes=0,y.pendingProps=oe,f.deletions=null):(y=eo(c,oe),y.subtreeFlags=c.subtreeFlags&14680064),Y!==null?M=eo(Y,M):(M=Sa(M,L,A,null),M.flags|=2),M.return=f,y.return=f,y.sibling=M,f.child=y,M}function ou(c,f,y,M){return M!==null&&Uc(M),Vs(f,c.child,null,y),c=as(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function im(c,f,y){c.lanes|=f;var M=c.alternate;M!==null&&(M.lanes|=f),Zo(c.return,f,y)}function Ms(c,f,y,M,A){var L=c.memoizedState;L===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:M,tail:y,tailMode:A}:(L.isBackwards=f,L.rendering=null,L.renderingStartTime=0,L.last=M,L.tail=y,L.tailMode=A)}function ca(c,f,y){var M=f.pendingProps,A=M.revealOrder,L=M.tail;if(Bn(c,f,M.children,y),M=Fn.current,M&2)M=M&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&im(c,y,f);else if(c.tag===19)im(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(xt(Fn,M),!(f.mode&1))f.memoizedState=null;else switch(A){case"forwards":for(y=f.child,A=null;y!==null;)c=y.alternate,c!==null&&zc(c)===null&&(A=y),y=y.sibling;y=A,y===null?(A=f.child,f.child=null):(A=y.sibling,y.sibling=null),Ms(f,!1,A,y,L);break;case"backwards":for(y=null,A=f.child,f.child=null;A!==null;){if(c=A.alternate,c!==null&&zc(c)===null){f.child=A;break}c=A.sibling,A.sibling=y,y=A,A=c}Ms(f,!0,y,null,L);break;case"together":Ms(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ir(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),Es|=f.lanes,!(y&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(a(153));if(f.child!==null){for(c=f.child,y=eo(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=eo(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function tf(c,f,y){switch(f.tag){case 3:iu(f),Ja();break;case 5:Jp(f);break;case 1:ln(f.type)&&oi(f);break;case 4:Fc(f,f.stateNode.containerInfo);break;case 10:Ko(f,f.type._context,f.memoizedProps.value);break;case 13:var M=f.memoizedState;if(M!==null)return M.dehydrated!==null?(xt(Fn,Fn.current&1),f.flags|=128,null):y&f.child.childLanes?jd(c,f,y):(xt(Fn,Fn.current&1),c=ir(c,f,y),c!==null?c.sibling:null);xt(Fn,Fn.current&1);break;case 19:if(M=(y&f.childLanes)!==0,c.flags&128){if(M)return ca(c,f,y);f.flags|=128}var A=f.memoizedState;if(A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),xt(Fn,Fn.current),M)break;return null;case 22:case 23:return f.lanes=0,Si(c,f,y)}return ir(c,f,y)}function nf(c,f){switch(Id(f),f.tag){case 1:return ln(f.type)&&Jt(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return nl(),$e(rn),$e(nn),na(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return Nd(f),null;case 13:if($e(Fn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(a(340));Ja()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return $e(Fn),null;case 4:return nl(),null;case 10:return Xl(f.type._context),null;case 22:case 23:return gu(),null;case 24:return null;default:return null}}var ji=!1,di=!1,fa=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Vr(c,f){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(M){Yi(c,f,M)}else y.current=null}function js(c,f,y){try{y()}catch(M){Yi(c,f,M)}}var qd=!1;function Yd(c,f){for(J(c.containerInfo),Ye=f;Ye!==null;)if(c=Ye,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,Ye=f;else for(;Ye!==null;){c=Ye;try{var y=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,A=y.memoizedState,L=c.stateNode,Y=L.getSnapshotBeforeUpdate(c.elementType===c.type?M:er(c.type,M),A);L.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:Nt&&Le(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(oe){Yi(c,c.return,oe)}if(f=c.sibling,f!==null){f.return=c.return,Ye=f;break}Ye=c.return}return y=qd,qd=!1,y}function qs(c,f,y){var M=f.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var A=M=M.next;do{if((A.tag&c)===c){var L=A.destroy;A.destroy=void 0,L!==void 0&&js(f,y,L)}A=A.next}while(A!==M)}}function wi(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&c)===c){var M=y.create;y.destroy=M()}y=y.next}while(y!==f)}}function qi(c){var f=c.ref;if(f!==null){var y=c.stateNode;switch(c.tag){case 5:c=de(y);break;default:c=y}typeof f=="function"?f(c):f.current=c}}function Pn(c,f,y){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(Hl,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var M=c=c.next;do{var A=M,L=A.destroy;A=A.tag,L!==void 0&&(A&2||A&4)&&js(f,y,L),M=M.next}while(M!==c)}break;case 1:if(Vr(f,y),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(Y){Yi(f,y,Y)}break;case 5:Vr(f,y);break;case 4:Nt?Jd(c,f,y):Oe&&Oe&&(f=f.stateNode.containerInfo,y=tt(f),Zn(f,y))}}function Hr(c,f,y){for(var M=f;;)if(Pn(c,M,y),M.child===null||Nt&&M.tag===4){if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function Kd(c){var f=c.alternate;f!==null&&(c.alternate=null,Kd(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&st(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Zd(c){return c.tag===5||c.tag===3||c.tag===4}function rf(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Zd(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function sf(c){if(Nt){e:{for(var f=c.return;f!==null;){if(Zd(f))break e;f=f.return}throw Error(a(160))}var y=f;switch(y.tag){case 5:f=y.stateNode,y.flags&32&&(Ot(f),y.flags&=-33),y=rf(c),ul(c,y,f);break;case 3:case 4:f=y.stateNode.containerInfo,y=rf(c),of(c,y,f);break;default:throw Error(a(161))}}}function of(c,f,y){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?Rt(y,c,f):Je(y,c);else if(M!==4&&(c=c.child,c!==null))for(of(c,f,y),c=c.sibling;c!==null;)of(c,f,y),c=c.sibling}function ul(c,f,y){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?bt(y,c,f):je(y,c);else if(M!==4&&(c=c.child,c!==null))for(ul(c,f,y),c=c.sibling;c!==null;)ul(c,f,y),c=c.sibling}function Jd(c,f,y){for(var M=f,A=!1,L,Y;;){if(!A){A=M.return;e:for(;;){if(A===null)throw Error(a(160));switch(L=A.stateNode,A.tag){case 5:Y=!1;break e;case 3:L=L.containerInfo,Y=!0;break e;case 4:L=L.containerInfo,Y=!0;break e}A=A.return}A=!0}if(M.tag===5||M.tag===6)Hr(c,M,y),Y?Wt(L,M.stateNode):ut(L,M.stateNode);else if(M.tag===18)Y?xc(L,M.stateNode):_c(L,M.stateNode);else if(M.tag===4){if(M.child!==null){L=M.stateNode.containerInfo,Y=!0,M.child.return=M,M=M.child;continue}}else if(Pn(c,M,y),M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return,M.tag===4&&(A=!1)}M.sibling.return=M.return,M=M.sibling}}function Ro(c,f){if(Nt){switch(f.tag){case 0:case 11:case 14:case 15:qs(3,f,f.return),wi(3,f),qs(5,f,f.return);return;case 1:return;case 5:var y=f.stateNode;if(y!=null){var M=f.memoizedProps;c=c!==null?c.memoizedProps:M;var A=f.type,L=f.updateQueue;f.updateQueue=null,L!==null&&lt(y,L,A,c,M,f)}return;case 6:if(f.stateNode===null)throw Error(a(162));y=f.memoizedProps,Ft(f.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:Re&&c!==null&&c.memoizedState.isDehydrated&&vc(f.stateNode.containerInfo);return;case 12:return;case 13:cl(f);return;case 19:cl(f);return;case 17:return}throw Error(a(163))}switch(f.tag){case 0:case 11:case 14:case 15:qs(3,f,f.return),wi(3,f),qs(5,f,f.return);return;case 12:return;case 13:cl(f);return;case 19:cl(f);return;case 3:Re&&c!==null&&c.memoizedState.isDehydrated&&vc(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Oe){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Zn(f.containerInfo,f.pendingChildren);break e}throw Error(a(163))}}function cl(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new fa),f.forEach(function(M){var A=lm.bind(null,c,M);y.has(M)||(y.add(M),M.then(A,A))})}}function Tv(c,f){for(Ye=f;Ye!==null;){f=Ye;var y=f.deletions;if(y!==null)for(var M=0;M<y.length;M++){var A=y[M];try{var L=c;Nt?Jd(L,A,f):Hr(L,A,f);var Y=A.alternate;Y!==null&&(Y.return=null),A.return=null}catch(wt){Yi(A,f,wt)}}if(y=f.child,f.subtreeFlags&12854&&y!==null)y.return=f,Ye=y;else for(;Ye!==null;){f=Ye;try{var oe=f.flags;if(oe&32&&Nt&&Ot(f.stateNode),oe&512){var Ae=f.alternate;if(Ae!==null){var We=Ae.ref;We!==null&&(typeof We=="function"?We(null):We.current=null)}}if(oe&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var ht=f.alternate;(ht===null||ht.memoizedState===null)&&(hu=ni())}break;case 22:var Vt=f.memoizedState!==null,Pt=f.alternate,Kt=Pt!==null&&Pt.memoizedState!==null;if(y=f,Nt){e:if(M=y,A=Vt,L=null,Nt)for(var ot=M;;){if(ot.tag===5){if(L===null){L=ot;var bi=ot.stateNode;A?hn(bi):Qe(ot.stateNode,ot.memoizedProps)}}else if(ot.tag===6){if(L===null){var Mr=ot.stateNode;A?ae(Mr):be(Mr,ot.memoizedProps)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===M)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===M)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===M)break e;L===ot&&(L=null),ot=ot.return}L===ot&&(L=null),ot.sibling.return=ot.return,ot=ot.sibling}}if(Vt&&!Kt&&y.mode&1){Ye=y;for(var xe=y.child;xe!==null;){for(y=Ye=xe;Ye!==null;){M=Ye;var ce=M.child;switch(M.tag){case 0:case 11:case 14:case 15:qs(4,M,M.return);break;case 1:Vr(M,M.return);var Me=M.stateNode;if(typeof Me.componentWillUnmount=="function"){var nt=M.return;try{Me.props=M.memoizedProps,Me.state=M.memoizedState,Me.componentWillUnmount()}catch(wt){Yi(M,nt,wt)}}break;case 5:Vr(M,M.return);break;case 22:if(M.memoizedState!==null){eh(y);continue}}ce!==null?(ce.return=M,Ye=ce):eh(y)}xe=xe.sibling}}}switch(oe&4102){case 2:sf(f),f.flags&=-3;break;case 6:sf(f),f.flags&=-3,Ro(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Ro(f.alternate,f);break;case 4:Ro(f.alternate,f)}}catch(wt){Yi(f,f.return,wt)}if(y=f.sibling,y!==null){y.return=f.return,Ye=y;break}Ye=f.return}}}function au(c,f,y){Ye=c,lu(c)}function lu(c,f,y){for(var M=(c.mode&1)!==0;Ye!==null;){var A=Ye,L=A.child;if(A.tag===22&&M){var Y=A.memoizedState!==null||ji;if(!Y){var oe=A.alternate,Ae=oe!==null&&oe.memoizedState!==null||di;oe=ji;var We=di;if(ji=Y,(di=Ae)&&!We)for(Ye=A;Ye!==null;)Y=Ye,Ae=Y.child,Y.tag===22&&Y.memoizedState!==null?da(A):Ae!==null?(Ae.return=Y,Ye=Ae):da(A);for(;L!==null;)Ye=L,lu(L),L=L.sibling;Ye=A,ji=oe,di=We}Qd(c)}else A.subtreeFlags&8772&&L!==null?(L.return=A,Ye=L):Qd(c)}}function Qd(c){for(;Ye!==null;){var f=Ye;if(f.flags&8772){var y=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:di||wi(5,f);break;case 1:var M=f.stateNode;if(f.flags&4&&!di)if(y===null)M.componentDidMount();else{var A=f.elementType===f.type?y.memoizedProps:er(f.type,y.memoizedProps);M.componentDidUpdate(A,y.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var L=f.updateQueue;L!==null&&Gp(f,L,M);break;case 3:var Y=f.updateQueue;if(Y!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=de(f.child.stateNode);break;case 1:y=f.child.stateNode}Gp(f,Y,y)}break;case 5:var oe=f.stateNode;y===null&&f.flags&4&&Fe(oe,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Re&&f.memoizedState===null){var Ae=f.alternate;if(Ae!==null){var We=Ae.memoizedState;if(We!==null){var ht=We.dehydrated;ht!==null&&yc(ht)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}di||f.flags&512&&qi(f)}catch(Vt){Yi(f,f.return,Vt)}}if(f===c){Ye=null;break}if(y=f.sibling,y!==null){y.return=f.return,Ye=y;break}Ye=f.return}}function eh(c){for(;Ye!==null;){var f=Ye;if(f===c){Ye=null;break}var y=f.sibling;if(y!==null){y.return=f.return,Ye=y;break}Ye=f.return}}function da(c){for(;Ye!==null;){var f=Ye;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{wi(4,f)}catch(Ae){Yi(f,y,Ae)}break;case 1:var M=f.stateNode;if(typeof M.componentDidMount=="function"){var A=f.return;try{M.componentDidMount()}catch(Ae){Yi(f,A,Ae)}}var L=f.return;try{qi(f)}catch(Ae){Yi(f,L,Ae)}break;case 5:var Y=f.return;try{qi(f)}catch(Ae){Yi(f,Y,Ae)}}}catch(Ae){Yi(f,f.return,Ae)}if(f===c){Ye=null;break}var oe=f.sibling;if(oe!==null){oe.return=f.return,Ye=oe;break}Ye=f.return}}var uu=0,ha=1,pa=2,Ys=3,fl=4;if(typeof Symbol=="function"&&Symbol.for){var ma=Symbol.for;uu=ma("selector.component"),ha=ma("selector.has_pseudo_class"),pa=ma("selector.role"),Ys=ma("selector.test_id"),fl=ma("selector.text")}function cu(c){var f=j(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(a(364));return f}if(c=X(c),c===null)throw Error(a(362));return c.stateNode.current}function fu(c,f){switch(f.$$typeof){case uu:if(c.type===f.value)return!0;break;case ha:e:{f=f.value,c=[c,0];for(var y=0;y<c.length;){var M=c[y++],A=c[y++],L=f[A];if(M.tag!==5||!me(M)){for(;L!=null&&fu(M,L);)A++,L=f[A];if(A===f.length){f=!0;break e}else for(M=M.child;M!==null;)c.push(M,A),M=M.sibling}}f=!1}return f;case pa:if(c.tag===5&&Pe(c.stateNode,f.value))return!0;break;case fl:if((c.tag===5||c.tag===6)&&(c=Q(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Ys:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Po(c){switch(c.$$typeof){case uu:return"<"+(U(c.value)||"Unknown")+">";case ha:return":has("+(Po(c)||"")+")";case pa:return'[role="'+c.value+'"]';case fl:return'"'+c.value+'"';case Ys:return'[data-testname="'+c.value+'"]';default:throw Error(a(365))}}function _r(c,f){var y=[];c=[c,0];for(var M=0;M<c.length;){var A=c[M++],L=c[M++],Y=f[L];if(A.tag!==5||!me(A)){for(;Y!=null&&fu(A,Y);)L++,Y=f[L];if(L===f.length)y.push(A);else for(A=A.child;A!==null;)c.push(A,L),A=A.sibling}}return y}function Ks(c,f){if(!qe)throw Error(a(363));c=cu(c),c=_r(c,f),f=[],c=Array.from(c);for(var y=0;y<c.length;){var M=c[y++];if(M.tag===5)me(M)||f.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return f}var th=Math.ceil,du=u.ReactCurrentDispatcher,ls=u.ReactCurrentOwner,xn=u.ReactCurrentBatchConfig,Xt=0,Xn=null,Sn=null,Dn=0,Ni=0,ga=Tt(0),Vn=0,dl=null,Es=0,xr=0,va=0,Zs=null,Jn=null,hu=0,Io=1/0;function ya(){Io=ni()+500}var hl=!1,In=null,us=null,pl=!1,bs=null,_a=0,xa=0,Js=null,Tn=-1,Hn=0;function pn(){return Xt&6?ni():Tn!==-1?Tn:Tn=ni()}function cs(c){return c.mode&1?Xt&2&&Dn!==0?Dn&-Dn:Wp.transition!==null?(Hn===0&&(c=Gn,Gn<<=1,!(Gn&4194240)&&(Gn=64),Hn=c),Hn):(c=Qt,c!==0?c:Ue()):1}function Oi(c,f,y){if(50<xa)throw xa=0,Js=null,Error(a(185));var M=Lo(c,f);return M===null?null:(Xo(M,f,y),(!(Xt&2)||M!==Xn)&&(M===Xn&&(!(Xt&2)&&(xr|=f),Vn===4&&Ei(M,Dn)),rr(M,y),f===1&&Xt===0&&!(c.mode&1)&&(ya(),Tc&&kr())),M)}function Lo(c,f){c.lanes|=f;var y=c.alternate;for(y!==null&&(y.lanes|=f),y=c,c=c.return;c!==null;)c.childLanes|=f,y=c.alternate,y!==null&&(y.childLanes|=f),y=c,c=c.return;return y.tag===3?y.stateNode:null}function rr(c,f){var y=c.callbackNode;Hp(c,f);var M=Vl(c,c===Xn?Dn:0);if(M===0)y!==null&&ja(y),c.callbackNode=null,c.callbackPriority=0;else if(f=M&-M,c.callbackPriority!==f){if(y!=null&&ja(y),f===1)c.tag===0?Cc(Sr.bind(null,c)):Ac(Sr.bind(null,c)),Ge?At(function(){Xt===0&&kr()}):jo(qo,kr),y=null;else{switch(ks(M)){case 1:y=qo;break;case 4:y=Mv;break;case 16:y=Ec;break;case 536870912:y=bc;break;default:y=Ec}y=lf(y,Mi.bind(null,c))}c.callbackPriority=f,c.callbackNode=y}}function Mi(c,f){if(Tn=-1,Hn=0,Xt&6)throw Error(a(327));var y=c.callbackNode;if(Ts()&&c.callbackNode!==y)return null;var M=Vl(c,c===Xn?Dn:0);if(M===0)return null;if(M&30||M&c.expiredLanes||f)f=vu(c,M);else{f=M;var A=Xt;Xt|=2;var L=rh();(Xn!==c||Dn!==f)&&(ya(),Qs(c,f));do try{sm();break}catch(oe){ih(c,oe)}while(!0);Gi(),du.current=L,Xt=A,Sn!==null?f=0:(Xn=null,Dn=0,f=Vn)}if(f!==0){if(f===2&&(A=Sc(c),A!==0&&(M=A,f=pu(c,A))),f===1)throw y=dl,Qs(c,0),Ei(c,M),rr(c,ni()),y;if(f===6)Ei(c,M);else{if(A=c.current.alternate,!(M&30)&&!nh(A)&&(f=vu(c,M),f===2&&(L=Sc(c),L!==0&&(M=L,f=pu(c,L))),f===1))throw y=dl,Qs(c,0),Ei(c,M),rr(c,ni()),y;switch(c.finishedWork=A,c.finishedLanes=M,f){case 0:case 1:throw Error(a(345));case 2:fs(c,Jn);break;case 3:if(Ei(c,M),(M&130023424)===M&&(f=hu+500-ni(),10<f)){if(Vl(c,0)!==0)break;if(A=c.suspendedLanes,(A&M)!==M){pn(),c.pingedLanes|=c.suspendedLanes&A;break}c.timeoutHandle=Ce(fs.bind(null,c,Jn),f);break}fs(c,Jn);break;case 4:if(Ei(c,M),(M&4194240)===M)break;for(f=c.eventTimes,A=-1;0<M;){var Y=31-sn(M);L=1<<Y,Y=f[Y],Y>A&&(A=Y),M&=~L}if(M=A,M=ni()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*th(M/1960))-M,10<M){c.timeoutHandle=Ce(fs.bind(null,c,Jn),M);break}fs(c,Jn);break;case 5:fs(c,Jn);break;default:throw Error(a(329))}}}return rr(c,ni()),c.callbackNode===y?Mi.bind(null,c):null}function pu(c,f){var y=Zs;return c.current.memoizedState.isDehydrated&&(Qs(c,f).flags|=256),c=vu(c,f),c!==2&&(f=Jn,Jn=y,f!==null&&mu(f)),c}function mu(c){Jn===null?Jn=c:Jn.push.apply(Jn,c)}function nh(c){for(var f=c;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var M=0;M<y.length;M++){var A=y[M],L=A.getSnapshot;A=A.value;try{if(!Wi(L(),A))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ei(c,f){for(f&=~va,f&=~xr,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var y=31-sn(f),M=1<<y;c[y]=-1,f&=~M}}function Sr(c){if(Xt&6)throw Error(a(327));Ts();var f=Vl(c,0);if(!(f&1))return rr(c,ni()),null;var y=vu(c,f);if(c.tag!==0&&y===2){var M=Sc(c);M!==0&&(f=M,y=pu(c,M))}if(y===1)throw y=dl,Qs(c,0),Ei(c,f),rr(c,ni()),y;if(y===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,fs(c,Jn),rr(c,ni()),null}function ml(c){bs!==null&&bs.tag===0&&!(Xt&6)&&Ts();var f=Xt;Xt|=1;var y=xn.transition,M=Qt;try{if(xn.transition=null,Qt=1,c)return c()}finally{Qt=M,xn.transition=y,Xt=f,!(Xt&6)&&kr()}}function gu(){Ni=ga.current,$e(ga)}function Qs(c,f){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==gt&&(c.timeoutHandle=gt,He(y)),Sn!==null)for(y=Sn.return;y!==null;){var M=y;switch(Id(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Jt();break;case 3:nl(),$e(rn),$e(nn),na();break;case 5:Nd(M);break;case 4:nl();break;case 13:$e(Fn);break;case 19:$e(Fn);break;case 10:Xl(M.type._context);break;case 22:case 23:gu()}y=y.return}if(Xn=c,Sn=c=eo(c.current,null),Dn=Ni=f,Vn=0,dl=null,va=xr=Es=0,Jn=Zs=null,Ur!==null){for(f=0;f<Ur.length;f++)if(y=Ur[f],M=y.interleaved,M!==null){y.interleaved=null;var A=M.next,L=y.pending;if(L!==null){var Y=L.next;L.next=A,M.next=Y}y.pending=M}Ur=null}return c}function ih(c,f){do{var y=Sn;try{if(Gi(),ql.current=al,Bc){for(var M=zn.memoizedState;M!==null;){var A=M.queue;A!==null&&(A.pending=null),M=M.next}Bc=!1}if(ia=0,ui=li=zn=null,Ss=!1,ra=0,ls.current=null,y===null||y.return===null){Vn=1,dl=f,Sn=null;break}e:{var L=c,Y=y.return,oe=y,Ae=f;if(f=Dn,oe.flags|=32768,Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var We=Ae,ht=oe,Vt=ht.tag;if(!(ht.mode&1)&&(Vt===0||Vt===11||Vt===15)){var Pt=ht.alternate;Pt?(ht.updateQueue=Pt.updateQueue,ht.memoizedState=Pt.memoizedState,ht.lanes=Pt.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Kt=Gd(Y);if(Kt!==null){Kt.flags&=-257,oa(Kt,Y,oe,L,f),Kt.mode&1&&Ws(L,We,f),f=Kt,Ae=We;var ot=f.updateQueue;if(ot===null){var bi=new Set;bi.add(Ae),f.updateQueue=bi}else ot.add(Ae);break e}else{if(!(f&1)){Ws(L,We,f),af();break e}Ae=Error(a(426))}}else if(Ln&&oe.mode&1){var Mr=Gd(Y);if(Mr!==null){!(Mr.flags&65536)&&(Mr.flags|=256),oa(Mr,Y,oe,L,f),Uc(Ae);break e}}L=Ae,Vn!==4&&(Vn=2),Zs===null?Zs=[L]:Zs.push(L),Ae=Wd(Ae,oe),oe=Y;do{switch(oe.tag){case 3:oe.flags|=65536,f&=-f,oe.lanes|=f;var xe=nm(oe,Ae,f);Ic(oe,xe);break e;case 1:L=Ae;var ce=oe.type,Me=oe.stateNode;if(!(oe.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(us===null||!us.has(Me)))){oe.flags|=65536,f&=-f,oe.lanes|=f;var nt=Kc(oe,L,f);Ic(oe,nt);break e}}oe=oe.return}while(oe!==null)}oh(y)}catch(wt){f=wt,Sn===y&&y!==null&&(Sn=y=y.return);continue}break}while(!0)}function rh(){var c=du.current;return du.current=al,c===null?al:c}function af(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),Xn===null||!(Es&268435455)&&!(xr&268435455)||Ei(Xn,Dn)}function vu(c,f){var y=Xt;Xt|=2;var M=rh();Xn===c&&Dn===f||Qs(c,f);do try{rm();break}catch(A){ih(c,A)}while(!0);if(Gi(),Xt=y,du.current=M,Sn!==null)throw Error(a(261));return Xn=null,Dn=0,Vn}function rm(){for(;Sn!==null;)sh(Sn)}function sm(){for(;Sn!==null&&!So();)sh(Sn)}function sh(c){var f=uh(c.alternate,c,Ni);c.memoizedProps=c.pendingProps,f===null?oh(c):Sn=f,ls.current=null}function oh(c){var f=c;do{var y=f.alternate;if(c=f.return,f.flags&32768){if(y=nf(y,f),y!==null){y.flags&=32767,Sn=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Vn=6,Sn=null;return}}else if(y=Qc(y,f,Ni),y!==null){Sn=y;return}if(f=f.sibling,f!==null){Sn=f;return}Sn=f=c}while(f!==null);Vn===0&&(Vn=5)}function fs(c,f){var y=Qt,M=xn.transition;try{xn.transition=null,Qt=1,om(c,f,y)}finally{xn.transition=M,Qt=y}return null}function om(c,f,y){do Ts();while(bs!==null);if(Xt&6)throw Error(a(327));var M=c.finishedWork,A=c.finishedLanes;if(M===null)return null;if(c.finishedWork=null,c.finishedLanes=0,M===c.current)throw Error(a(177));c.callbackNode=null,c.callbackPriority=0;var L=M.lanes|M.childLanes;if(Mc(c,L),c===Xn&&(Sn=Xn=null,Dn=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||pl||(pl=!0,lf(Ec,function(){return Ts(),null})),L=(M.flags&15990)!==0,M.subtreeFlags&15990||L){L=xn.transition,xn.transition=null;var Y=Qt;Qt=1;var oe=Xt;Xt|=4,ls.current=null,Yd(c,M),Tv(c,M),Z(c.containerInfo),c.current=M,au(M),wv(),Xt=oe,Qt=Y,xn.transition=L}else c.current=M;if(pl&&(pl=!1,bs=c,_a=A),L=c.pendingLanes,L===0&&(us=null),Wl(M.stateNode),rr(c,ni()),f!==null)for(y=c.onRecoverableError,M=0;M<f.length;M++)y(f[M]);if(hl)throw hl=!1,c=In,In=null,c;return _a&1&&c.tag!==0&&Ts(),L=c.pendingLanes,L&1?c===Js?xa++:(xa=0,Js=c):xa=0,kr(),null}function Ts(){if(bs!==null){var c=ks(_a),f=xn.transition,y=Qt;try{if(xn.transition=null,Qt=16>c?16:c,bs===null)var M=!1;else{if(c=bs,bs=null,_a=0,Xt&6)throw Error(a(331));var A=Xt;for(Xt|=4,Ye=c.current;Ye!==null;){var L=Ye,Y=L.child;if(Ye.flags&16){var oe=L.deletions;if(oe!==null){for(var Ae=0;Ae<oe.length;Ae++){var We=oe[Ae];for(Ye=We;Ye!==null;){var ht=Ye;switch(ht.tag){case 0:case 11:case 15:qs(8,ht,L)}var Vt=ht.child;if(Vt!==null)Vt.return=ht,Ye=Vt;else for(;Ye!==null;){ht=Ye;var Pt=ht.sibling,Kt=ht.return;if(Kd(ht),ht===We){Ye=null;break}if(Pt!==null){Pt.return=Kt,Ye=Pt;break}Ye=Kt}}}var ot=L.alternate;if(ot!==null){var bi=ot.child;if(bi!==null){ot.child=null;do{var Mr=bi.sibling;bi.sibling=null,bi=Mr}while(bi!==null)}}Ye=L}}if(L.subtreeFlags&2064&&Y!==null)Y.return=L,Ye=Y;else e:for(;Ye!==null;){if(L=Ye,L.flags&2048)switch(L.tag){case 0:case 11:case 15:qs(9,L,L.return)}var xe=L.sibling;if(xe!==null){xe.return=L.return,Ye=xe;break e}Ye=L.return}}var ce=c.current;for(Ye=ce;Ye!==null;){Y=Ye;var Me=Y.child;if(Y.subtreeFlags&2064&&Me!==null)Me.return=Y,Ye=Me;else e:for(Y=ce;Ye!==null;){if(oe=Ye,oe.flags&2048)try{switch(oe.tag){case 0:case 11:case 15:wi(9,oe)}}catch(wt){Yi(oe,oe.return,wt)}if(oe===Y){Ye=null;break e}var nt=oe.sibling;if(nt!==null){nt.return=oe.return,Ye=nt;break e}Ye=oe.return}}if(Xt=A,kr(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(Hl,c)}catch{}M=!0}return M}finally{Qt=y,xn.transition=f}}return!1}function yu(c,f,y){f=Wd(y,f),f=nm(c,f,1),wo(c,f),f=pn(),c=Lo(c,1),c!==null&&(Xo(c,1,f),rr(c,f))}function Yi(c,f,y){if(c.tag===3)yu(c,c,y);else for(;f!==null;){if(f.tag===3){yu(f,c,y);break}else if(f.tag===1){var M=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(us===null||!us.has(M))){c=Wd(y,c),c=Kc(f,c,1),wo(f,c),c=pn(),f=Lo(f,1),f!==null&&(Xo(f,1,c),rr(f,c));break}}f=f.return}}function ah(c,f,y){var M=c.pingCache;M!==null&&M.delete(f),f=pn(),c.pingedLanes|=c.suspendedLanes&y,Xn===c&&(Dn&y)===y&&(Vn===4||Vn===3&&(Dn&130023424)===Dn&&500>ni()-hu?Qs(c,0):va|=y),rr(c,f)}function lh(c,f){f===0&&(c.mode&1?(f=on,on<<=1,!(on&130023424)&&(on=4194304)):f=1);var y=pn();c=Lo(c,f),c!==null&&(Xo(c,f,y),rr(c,y))}function am(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),lh(c,y)}function lm(c,f){var y=0;switch(c.tag){case 13:var M=c.stateNode,A=c.memoizedState;A!==null&&(y=A.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(a(314))}M!==null&&M.delete(f),lh(c,y)}var uh;uh=function(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps||rn.current)fi=!0;else{if(!(c.lanes&y)&&!(f.flags&128))return fi=!1,tf(c,f,y);fi=!!(c.flags&131072)}else fi=!1,Ln&&f.flags&1048576&&qp(f,Oc,f.index);switch(f.lanes=0,f.tag){case 2:var M=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var A=_t(f,nn.current);qa(f,y),A=il(null,f,M,c,A,y);var L=To();return f.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,ln(M)?(L=!0,oi(f)):L=!1,f.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Ya(f),A.updater=Dc,f.stateNode=A,A._reactInternals=f,Rd(f,M,c,y),f=Di(null,f,M,!0,L,y)):(f.tag=0,Ln&&L&&Pd(f),Bn(null,f,A,y),f=f.child),f;case 16:M=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,A=M._init,M=A(M._payload),f.type=M,A=f.tag=Av(M),c=er(M,c),A){case 0:f=Xs(null,f,M,c,y);break e;case 1:f=la(null,f,M,c,y);break e;case 11:f=bn(null,f,M,c,y);break e;case 14:f=wn(null,f,M,er(M.type,c),y);break e}throw Error(a(306,M,""))}return f;case 0:return M=f.type,A=f.pendingProps,A=f.elementType===M?A:er(M,A),Xs(c,f,M,A,y);case 1:return M=f.type,A=f.pendingProps,A=f.elementType===M?A:er(M,A),la(c,f,M,A,y);case 3:e:{if(iu(f),c===null)throw Error(a(387));M=f.pendingProps,L=f.memoizedState,A=L.element,Td(c,f),Lc(f,M,null,y);var Y=f.memoizedState;if(M=Y.element,Re&&L.isDehydrated)if(L={element:M,isDehydrated:!1,cache:Y.cache,transitions:Y.transitions},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){A=Error(a(423)),f=Xd(c,f,M,y,A);break e}else if(M!==A){A=Error(a(424)),f=Xd(c,f,M,y,A);break e}else for(Re&&(xi=hc(f.stateNode.containerInfo),$i=f,Ln=!0,Br=null,Za=!1),y=Zp(f,null,M,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ja(),M===A){f=ir(c,f,y);break e}Bn(c,f,M,y)}f=f.child}return f;case 5:return Jp(f),c===null&&Eo(f),M=f.type,A=f.pendingProps,L=c!==null?c.memoizedProps:null,Y=A.children,Te(M,A)?Y=null:L!==null&&Te(M,L)&&(f.flags|=32),Xi(c,f),Bn(c,f,Y,y),f.child;case 6:return c===null&&Eo(f),null;case 13:return jd(c,f,y);case 4:return Fc(f,f.stateNode.containerInfo),M=f.pendingProps,c===null?f.child=Vs(f,null,M,y):Bn(c,f,M,y),f.child;case 11:return M=f.type,A=f.pendingProps,A=f.elementType===M?A:er(M,A),bn(c,f,M,A,y);case 7:return Bn(c,f,f.pendingProps,y),f.child;case 8:return Bn(c,f,f.pendingProps.children,y),f.child;case 12:return Bn(c,f,f.pendingProps.children,y),f.child;case 10:e:{if(M=f.type._context,A=f.pendingProps,L=f.memoizedProps,Y=A.value,Ko(f,M,Y),L!==null)if(Wi(L.value,Y)){if(L.children===A.children&&!rn.current){f=ir(c,f,y);break e}}else for(L=f.child,L!==null&&(L.return=f);L!==null;){var oe=L.dependencies;if(oe!==null){Y=L.child;for(var Ae=oe.firstContext;Ae!==null;){if(Ae.context===M){if(L.tag===1){Ae=Fs(-1,y&-y),Ae.tag=2;var We=L.updateQueue;if(We!==null){We=We.shared;var ht=We.pending;ht===null?Ae.next=Ae:(Ae.next=ht.next,ht.next=Ae),We.pending=Ae}}L.lanes|=y,Ae=L.alternate,Ae!==null&&(Ae.lanes|=y),Zo(L.return,y,f),oe.lanes|=y;break}Ae=Ae.next}}else if(L.tag===10)Y=L.type===f.type?null:L.child;else if(L.tag===18){if(Y=L.return,Y===null)throw Error(a(341));Y.lanes|=y,oe=Y.alternate,oe!==null&&(oe.lanes|=y),Zo(Y,y,f),Y=L.sibling}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===f){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}Bn(c,f,A.children,y),f=f.child}return f;case 9:return A=f.type,M=f.pendingProps.children,qa(f,y),A=tr(A),M=M(A),f.flags|=1,Bn(c,f,M,y),f.child;case 14:return M=f.type,A=er(M,f.pendingProps),A=er(M.type,A),wn(c,f,M,A,y);case 15:return $s(c,f,f.type,f.pendingProps,y);case 17:return M=f.type,A=f.pendingProps,A=f.elementType===M?A:er(M,A),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,ln(M)?(c=!0,oi(f)):c=!1,qa(f,y),Xp(f,M,A),Rd(f,M,A,y),Di(null,f,M,!0,c,y);case 19:return ca(c,f,y);case 22:return Si(c,f,y)}throw Error(a(156,f.tag))};function lf(c,f){return jo(c,f)}function um(c,f,y,M){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(c,f,y,M){return new um(c,f,y,M)}function uf(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Av(c){if(typeof c=="function")return uf(c)?1:0;if(c!=null){if(c=c.$$typeof,c===b)return 11;if(c===C)return 14}return 2}function eo(c,f){var y=c.alternate;return y===null?(y=wr(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function cf(c,f,y,M,A,L){var Y=2;if(M=c,typeof c=="function")uf(c)&&(Y=1);else if(typeof c=="string")Y=5;else e:switch(c){case m:return Sa(y.children,A,L,f);case g:Y=8,A|=8;break;case v:return c=wr(12,y,f,A|2),c.elementType=v,c.lanes=L,c;case E:return c=wr(13,y,f,A),c.elementType=E,c.lanes=L,c;case S:return c=wr(19,y,f,A),c.elementType=S,c.lanes=L,c;case I:return _u(y,A,L,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:Y=10;break e;case w:Y=9;break e;case b:Y=11;break e;case C:Y=14;break e;case P:Y=16,M=null;break e}throw Error(a(130,c==null?c:typeof c,""))}return f=wr(Y,y,f,A),f.elementType=c,f.type=M,f.lanes=L,f}function Sa(c,f,y,M){return c=wr(7,c,M,f),c.lanes=y,c}function _u(c,f,y,M){return c=wr(22,c,M,f),c.elementType=I,c.lanes=y,c.stateNode={},c}function ff(c,f,y){return c=wr(6,c,null,f),c.lanes=y,c}function df(c,f,y){return f=wr(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function hf(c,f,y,M,A){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=gt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wc(0),this.expirationTimes=wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wc(0),this.identifierPrefix=M,this.onRecoverableError=A,Re&&(this.mutableSourceEagerHydrationData=null)}function cm(c,f,y,M,A,L,Y,oe,Ae){return c=new hf(c,f,y,oe,Ae),f===1?(f=1,L===!0&&(f|=8)):f=0,L=wr(3,null,null,f),c.current=L,L.stateNode=c,L.memoizedState={element:M,isDehydrated:y,cache:null,transitions:null},Ya(L),c}function fm(c){if(!c)return kt;c=c._reactInternals;e:{if(O(c)!==c||c.tag!==1)throw Error(a(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(ln(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(a(171))}if(c.tag===1){var y=c.type;if(ln(y))return Os(c,y,f)}return f}function dm(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=ee(f),c===null?null:c.stateNode}function Wr(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function xu(c,f){Wr(c,f),(c=c.alternate)&&Wr(c,f)}function pf(c){return c=ee(c),c===null?null:c.stateNode}function hm(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=pn();Oi(c,134217728,f),xu(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=pn(),y=cs(c);Oi(c,y,f),xu(c,y)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var y=Qi(f.pendingLanes);y!==0&&(_s(f,y|1),rr(f,ni()),!(Xt&6)&&(ya(),kr()))}break;case 13:var M=pn();ml(function(){return Oi(c,1,M)}),xu(c,1)}},t.batchedUpdates=function(c,f){var y=Xt;Xt|=1;try{return c(f)}finally{Xt=y,Xt===0&&(ya(),Tc&&kr())}},t.createComponentSelector=function(c){return{$$typeof:uu,value:c}},t.createContainer=function(c,f,y,M,A,L,Y){return cm(c,f,!1,null,y,M,A,L,Y)},t.createHasPseudoClassSelector=function(c){return{$$typeof:ha,value:c}},t.createHydrationContainer=function(c,f,y,M,A,L,Y,oe,Ae){return c=cm(y,M,!0,c,A,L,Y,oe,Ae),c.context=fm(null),y=c.current,M=pn(),A=cs(y),L=Fs(M,A),L.callback=f??null,wo(y,L),c.current.lanes=A,Xo(c,A,M),rr(c,M),c},t.createPortal=function(c,f,y){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:M==null?null:""+M,children:c,containerInfo:f,implementation:y}},t.createRoleSelector=function(c){return{$$typeof:pa,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Ys,value:c}},t.createTextSelector=function(c){return{$$typeof:fl,value:c}},t.deferredUpdates=function(c){var f=Qt,y=xn.transition;try{return xn.transition=null,Qt=16,c()}finally{Qt=f,xn.transition=y}},t.discreteUpdates=function(c,f,y,M,A){var L=Qt,Y=xn.transition;try{return xn.transition=null,Qt=1,c(f,y,M,A)}finally{Qt=L,xn.transition=Y,Xt===0&&ya()}},t.findAllNodes=Ks,t.findBoundingRects=function(c,f){if(!qe)throw Error(a(363));f=Ks(c,f),c=[];for(var y=0;y<f.length;y++)c.push(z(f[y]));for(f=c.length-1;0<f;f--){y=c[f];for(var M=y.x,A=M+y.width,L=y.y,Y=L+y.height,oe=f-1;0<=oe;oe--)if(f!==oe){var Ae=c[oe],We=Ae.x,ht=We+Ae.width,Vt=Ae.y,Pt=Vt+Ae.height;if(M>=We&&L>=Vt&&A<=ht&&Y<=Pt){c.splice(f,1);break}else if(M!==We||y.width!==Ae.width||Pt<L||Vt>Y){if(!(L!==Vt||y.height!==Ae.height||ht<M||We>A)){We>M&&(Ae.width+=We-M,Ae.x=M),ht<A&&(Ae.width=A-We),c.splice(f,1);break}}else{Vt>L&&(Ae.height+=Vt-L,Ae.y=L),Pt<Y&&(Ae.height=Y-Vt),c.splice(f,1);break}}}return c},t.findHostInstance=dm,t.findHostInstanceWithNoPortals=function(c){return c=W(c),c=c!==null?le(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return dm(c)},t.flushControlled=function(c){var f=Xt;Xt|=1;var y=xn.transition,M=Qt;try{xn.transition=null,Qt=1,c()}finally{Qt=M,xn.transition=y,Xt=f,Xt===0&&(ya(),kr())}},t.flushPassiveEffects=Ts,t.flushSync=ml,t.focusWithin=function(c,f){if(!qe)throw Error(a(363));for(c=cu(c),f=_r(c,f),f=Array.from(f),c=0;c<f.length;){var y=f[c++];if(!me(y)){if(y.tag===5&&Ee(y.stateNode))return!0;for(y=y.child;y!==null;)f.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Qt},t.getFindAllNodesFailureDescription=function(c,f){if(!qe)throw Error(a(363));var y=0,M=[];c=[cu(c),0];for(var A=0;A<c.length;){var L=c[A++],Y=c[A++],oe=f[Y];if((L.tag!==5||!me(L))&&(fu(L,oe)&&(M.push(Po(oe)),Y++,Y>y&&(y=Y)),Y<f.length))for(L=L.child;L!==null;)c.push(L,Y),L=L.sibling}if(y<f.length){for(c=[];y<f.length;y++)c.push(Po(f[y]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return de(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:pf,findFiberByHostInstance:c.findFiberByHostInstance||hm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Hl=f.inject(c),xs=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,y,M){if(!qe)throw Error(a(363));c=Ks(c,f);var A=et(c,y,M).disconnect;return{disconnect:function(){A()}}},t.registerMutableSourceForHydration=function(c,f){var y=f._getVersion;y=y(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,y]:c.mutableSourceEagerHydrationData.push(f,y)},t.runWithPriority=function(c,f){var y=Qt;try{return Qt=c,f()}finally{Qt=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,y,M){var A=f.current,L=pn(),Y=cs(A);return y=fm(y),f.context===null?f.context=y:f.pendingContext=y,f=Fs(L,Y),f.payload={element:c},M=M===void 0?null:M,M!==null&&(f.callback=M),wo(A,f),c=Oi(A,Y,L),c!==null&&Pc(c,A,Y),Y},t}),jy}var qw;function Rk(){return qw||(qw=1,Gy.exports=Ck()),Gy.exports}var Pk=Rk();const Ik=fd(Pk);var qy={exports:{}},Yy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function Lk(){return Yw||(Yw=1,function(n){function e(F,J){var Z=F.length;F.push(J);e:for(;0<Z;){var $=Z-1>>>1,re=F[$];if(0<r(re,J))F[$]=J,F[Z]=re,Z=$;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var J=F[0],Z=F.pop();if(Z!==J){F[0]=Z;e:for(var $=0,re=F.length,Ne=re>>>1;$<Ne;){var he=2*($+1)-1,Te=F[he],Ie=he+1,Ce=F[Ie];if(0>r(Te,Z))Ie<re&&0>r(Ce,Te)?(F[$]=Ce,F[Ie]=Z,$=Ie):(F[$]=Te,F[he]=Z,$=he);else if(Ie<re&&0>r(Ce,Z))F[$]=Ce,F[Ie]=Z,$=Ie;else break e}}return J}function r(F,J){var Z=F.sortIndex-J.sortIndex;return Z!==0?Z:F.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,v=3,x=!1,w=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(F){for(var J=t(h);J!==null;){if(J.callback===null)i(h);else if(J.startTime<=F)i(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(h)}}function I(F){if(b=!1,P(F),!w)if(t(d)!==null)w=!0,de(B);else{var J=t(h);J!==null&&_e(I,J.startTime-F)}}function B(F,J){w=!1,b&&(b=!1,S(H),H=-1),x=!0;var Z=v;try{for(P(J),g=t(d);g!==null&&(!(g.expirationTime>J)||F&&!W());){var $=g.callback;if(typeof $=="function"){g.callback=null,v=g.priorityLevel;var re=$(g.expirationTime<=J);J=n.unstable_now(),typeof re=="function"?g.callback=re:g===t(d)&&i(d),P(J)}else i(d);g=t(d)}if(g!==null)var Ne=!0;else{var he=t(h);he!==null&&_e(I,he.startTime-J),Ne=!1}return Ne}finally{g=null,v=Z,x=!1}}var N=!1,U=null,H=-1,O=5,D=-1;function W(){return!(n.unstable_now()-D<O)}function ee(){if(U!==null){var F=n.unstable_now();D=F;var J=!0;try{J=U(!0,F)}finally{J?ne():(N=!1,U=null)}}else N=!1}var ne;if(typeof C=="function")ne=function(){C(ee)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,pe=le.port2;le.port1.onmessage=ee,ne=function(){pe.postMessage(null)}}else ne=function(){E(ee,0)};function de(F){U=F,N||(N=!0,ne())}function _e(F,J){H=E(function(){F(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){w||x||(w=!0,de(B))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(F){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var Z=v;v=J;try{return F()}finally{v=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=v;v=F;try{return J()}finally{v=Z}},n.unstable_scheduleCallback=function(F,J,Z){var $=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?$+Z:$):Z=$,F){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Z+re,F={id:m++,callback:J,priorityLevel:F,startTime:Z,expirationTime:re,sortIndex:-1},Z>$?(F.sortIndex=Z,e(h,F),t(d)===null&&F===t(h)&&(b?(S(H),H=-1):b=!0,_e(I,Z-$))):(F.sortIndex=re,e(d,F),w||x||(w=!0,de(B))),F},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(F){var J=v;return function(){var Z=v;v=J;try{return F.apply(this,arguments)}finally{v=Z}}}}(Yy)),Yy}var Kw;function Dk(){return Kw||(Kw=1,qy.exports=Lk()),qy.exports}var Zw=Dk();const l1={},Nk=n=>void Object.assign(l1,n);function Ok(n,e){function t(m,{args:g=[],attach:v,...x},w){let b=`${m[0].toUpperCase()}${m.slice(1)}`,E;if(m==="primitive"){if(x.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const S=x.object;E=Xf(S,{type:m,root:w,attach:v,primitive:!0})}else{const S=l1[b];if(!S)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");E=Xf(new S(...g),{type:m,root:w,attach:v,memoizedProps:{args:g}})}return E.__r3f.attach===void 0&&(E.isBufferGeometry?E.__r3f.attach="geometry":E.isMaterial&&(E.__r3f.attach="material")),b!=="inject"&&Jy(E,x),E}function i(m,g){let v=!1;if(g){var x,w;(x=g.__r3f)!=null&&x.attach?Zy(m,g,g.__r3f.attach):g.isObject3D&&m.isObject3D&&(m.add(g),v=!0),v||(w=m.__r3f)==null||w.objects.push(g),g.__r3f||Xf(g,{}),g.__r3f.parent=m,Z_(g),jf(g)}}function r(m,g,v){let x=!1;if(g){var w,b;if((w=g.__r3f)!=null&&w.attach)Zy(m,g,g.__r3f.attach);else if(g.isObject3D&&m.isObject3D){g.parent=m,g.dispatchEvent({type:"added"}),m.dispatchEvent({type:"childadded",child:g});const E=m.children.filter(C=>C!==g),S=E.indexOf(v);m.children=[...E.slice(0,S),g,...E.slice(S)],x=!0}x||(b=m.__r3f)==null||b.objects.push(g),g.__r3f||Xf(g,{}),g.__r3f.parent=m,Z_(g),jf(g)}}function s(m,g,v=!1){m&&[...m].forEach(x=>a(g,x,v))}function a(m,g,v){if(g){var x,w,b;if(g.__r3f&&(g.__r3f.parent=null),(x=m.__r3f)!=null&&x.objects&&(m.__r3f.objects=m.__r3f.objects.filter(I=>I!==g)),(w=g.__r3f)!=null&&w.attach)nM(m,g,g.__r3f.attach);else if(g.isObject3D&&m.isObject3D){var E;m.remove(g),(E=g.__r3f)!=null&&E.root&&Wk(Fg(g),g)}const C=(b=g.__r3f)==null?void 0:b.primitive,P=!C&&(v===void 0?g.dispose!==null:v);if(!C){var S;s((S=g.__r3f)==null?void 0:S.objects,g,P),s(g.children,g,P)}if(delete g.__r3f,P&&g.dispose&&g.type!=="Scene"){const I=()=>{try{g.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Zw.unstable_scheduleCallback(Zw.unstable_IdlePriority,I):I()}jf(m)}}function u(m,g,v,x){var w;const b=(w=m.__r3f)==null?void 0:w.parent;if(!b)return;const E=t(g,v,m.__r3f.root);if(m.children){for(const S of m.children)S.__r3f&&i(E,S);m.children=m.children.filter(S=>!S.__r3f)}m.__r3f.objects.forEach(S=>i(E,S)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||a(b,m),E.parent&&(E.__r3f.autoRemovedBeforeAppend=!0),i(b,E),E.raycast&&E.__r3f.eventCount&&Fg(E).getState().internal.interaction.push(E),[x,x.alternate].forEach(S=>{S!==null&&(S.stateNode=E,S.ref&&(typeof S.ref=="function"?S.ref(E):S.ref.current=E))})}const d=()=>{};return{reconciler:Ik({createInstance:t,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,g)=>{if(!g)return;const v=m.getState().scene;v.__r3f&&(v.__r3f.root=m,i(v,g))},removeChildFromContainer:(m,g)=>{g&&a(m.getState().scene,g)},insertInContainerBefore:(m,g,v)=>{if(!g||!v)return;const x=m.getState().scene;x.__r3f&&r(x,g,v)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var g;return!!((g=m==null?void 0:m.__r3f)!=null?g:{}).handlers},prepareUpdate(m,g,v,x){var w;if(((w=m==null?void 0:m.__r3f)!=null?w:{}).primitive&&x.object&&x.object!==m)return[!0];{const{args:E=[],children:S,...C}=x,{args:P=[],children:I,...B}=v;if(!Array.isArray(E))throw new Error("R3F: the args prop must be an array!");if(E.some((U,H)=>U!==P[H]))return[!0];const N=UA(m,C,B,!0);return N.changes.length?[!1,N]:null}},commitUpdate(m,[g,v],x,w,b,E){g?u(m,x,b,E):Jy(m,v)},commitMount(m,g,v,x){var w;const b=(w=m.__r3f)!=null?w:{};m.raycast&&b.handlers&&b.eventCount&&Fg(m).getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>Xf(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var g;const{attach:v,parent:x}=(g=m.__r3f)!=null?g:{};v&&x&&nM(x,m,v),m.isObject3D&&(m.visible=!1),jf(m)},unhideInstance(m,g){var v;const{attach:x,parent:w}=(v=m.__r3f)!=null?v:{};x&&w&&Zy(w,m,x),(m.isObject3D&&g.visible==null||g.visible)&&(m.visible=!0),jf(m)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>e?e():Qf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&On.fun(performance.now)?performance.now:On.fun(Date.now)?Date.now:()=>0,scheduleTimeout:On.fun(setTimeout)?setTimeout:void 0,cancelTimeout:On.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Jy}}var Jw,Qw;const Ky=n=>"colorSpace"in n||"outputColorSpace"in n,IA=()=>{var n;return(n=l1.ColorManagement)!=null?n:null},LA=n=>n&&n.isOrthographicCamera,kk=n=>n&&n.hasOwnProperty("current"),Op=typeof window<"u"&&((Jw=window.document)!=null&&Jw.createElement||((Qw=window.navigator)==null?void 0:Qw.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function DA(n){const e=V.useRef(n);return Op(()=>void(e.current=n),[n]),e}function Uk({set:n}){return Op(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class NA extends V.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}NA.getDerivedStateFromError=()=>({error:!0});const OA="__default",eM=new Map,Fk=n=>n&&!!n.memoized&&!!n.changes;function kA(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Ph=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Fg(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const On={obj:n=>n===Object(n)&&!On.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(On.str(n)||On.num(n)||On.boo(n))return n===e;const s=On.obj(n);if(s&&i==="reference")return n===e;const a=On.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(u in r?e:n)if(!On.equ(n[u],e[u],{strict:r,objects:"reference"}))return!1}else for(u in r?e:n)if(n[u]!==e[u])return!1;if(On.und(u)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function zk(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Bk(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Xf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function K_(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,a)=>s[a],n),{target:t,key:r}}else return{target:t,key:e}}const tM=/-\d+$/;function Zy(n,e,t){if(On.str(t)){if(tM.test(t)){const s=t.replace(tM,""),{target:a,key:u}=K_(n,s);Array.isArray(a[u])||(a[u]=[])}const{target:i,key:r}=K_(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function nM(n,e,t){var i,r;if(On.str(t)){const{target:s,key:a}=K_(n,t),u=e.__r3f.previousAttach;u===void 0?delete s[a]:s[a]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function UA(n,{children:e,key:t,ref:i,...r},{children:s,key:a,ref:u,...d}={},h=!1){const m=n.__r3f,g=Object.entries(r),v=[];if(h){const w=Object.keys(d);for(let b=0;b<w.length;b++)r.hasOwnProperty(w[b])||g.unshift([w[b],OA+"remove"])}g.forEach(([w,b])=>{var E;if((E=n.__r3f)!=null&&E.primitive&&w==="object"||On.equ(b,d[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return v.push([w,b,!0,[]]);let S=[];w.includes("-")&&(S=w.split("-")),v.push([w,b,!1,S]);for(const C in r){const P=r[C];C.startsWith(`${w}-`)&&v.push([C,P,!1,C.split("-")])}});const x={...r};return m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.args&&(x.args=m.memoizedProps.args),m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.attach&&(x.attach=m.memoizedProps.attach),{memoized:x,changes:v}}function Jy(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:a,changes:u}=Fk(e)?e:UA(n,e),d=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=a);for(let v=0;v<u.length;v++){let[x,w,b,E]=u[v];if(Ky(n)){const I="srgb",B="srgb-linear";x==="encoding"?(x="colorSpace",w=w===3001?I:B):x==="outputEncoding"&&(x="outputColorSpace",w=w===3001?I:B)}let S=n,C=S[x];if(E.length&&(C=E.reduce((P,I)=>P[I],n),!(C&&C.set))){const[P,...I]=E.reverse();S=I.reverse().reduce((B,N)=>B[N],n),x=P}if(w===OA+"remove")if(S.constructor){let P=eM.get(S.constructor);P||(P=new S.constructor,eM.set(S.constructor,P)),w=P[x]}else w=0;if(b&&i)w?i.handlers[x]=w:delete i.handlers[x],i.eventCount=Object.keys(i.handlers).length;else if(C&&C.set&&(C.copy||C instanceof Ju)){if(Array.isArray(w))C.fromArray?C.fromArray(w):C.set(...w);else if(C.copy&&w&&w.constructor&&C.constructor===w.constructor)C.copy(w);else if(w!==void 0){var h;const P=(h=C)==null?void 0:h.isColor;!P&&C.setScalar?C.setScalar(w):C instanceof Ju&&w instanceof Ju?C.mask=w.mask:C.set(w),!IA()&&s&&!s.linear&&P&&C.convertSRGBToLinear()}}else{var m;if(S[x]=w,(m=S[x])!=null&&m.isTexture&&S[x].format===cr&&S[x].type===ho&&s){const P=S[x];Ky(P)&&Ky(s.gl)?P.colorSpace=s.gl.outputColorSpace:P.encoding=s.gl.outputEncoding}}jf(n)}if(i&&i.parent&&n.raycast&&d!==i.eventCount){const v=Fg(n).getState().internal,x=v.interaction.indexOf(n);x>-1&&v.interaction.splice(x,1),i.eventCount&&v.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(t=n.__r3f)!=null&&t.parent&&Z_(n),n}function jf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Z_(n){n.onUpdate==null||n.onUpdate(n)}function Vk(n,e){n.manual||(LA(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Tg(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Hk(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Qf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Qf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Qf.ContinuousEventPriority;default:return Qf.DefaultEventPriority}}function FA(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Wk(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{FA(t.capturedMap,e,i,r)})}function Gk(n){function e(d){const{internal:h}=n.getState(),m=d.offsetX-h.initialClick[0],g=d.offsetY-h.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(d){return d.filter(h=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=h.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function i(d,h){const m=n.getState(),g=new Set,v=[],x=h?h(m.internal.interaction):m.internal.interaction;for(let S=0;S<x.length;S++){const C=Ph(x[S]);C&&(C.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(d,m);function w(S){const C=Ph(S);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var P;C.events.compute==null||C.events.compute(d,C,(P=C.previousRoot)==null?void 0:P.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(S,!0):[]}let b=x.flatMap(w).sort((S,C)=>{const P=Ph(S.object),I=Ph(C.object);return!P||!I?S.distance-C.distance:I.events.priority-P.events.priority||S.distance-C.distance}).filter(S=>{const C=Tg(S);return g.has(C)?!1:(g.add(C),!0)});m.events.filter&&(b=m.events.filter(b,m));for(const S of b){let C=S.object;for(;C;){var E;(E=C.__r3f)!=null&&E.eventCount&&v.push({...S,eventObject:C}),C=C.parent}}if("pointerId"in d&&m.internal.capturedMap.has(d.pointerId))for(let S of m.internal.capturedMap.get(d.pointerId).values())g.has(Tg(S.intersection))||v.push(S.intersection);return v}function r(d,h,m,g){const v=n.getState();if(d.length){const x={stopped:!1};for(const w of d){const b=Ph(w.object)||v,{raycaster:E,pointer:S,camera:C,internal:P}=b,I=new q(S.x,S.y,0).unproject(C),B=D=>{var W,ee;return(W=(ee=P.capturedMap.get(D))==null?void 0:ee.has(w.eventObject))!=null?W:!1},N=D=>{const W={intersection:w,target:h.target};P.capturedMap.has(D)?P.capturedMap.get(D).set(w.eventObject,W):P.capturedMap.set(D,new Map([[w.eventObject,W]])),h.target.setPointerCapture(D)},U=D=>{const W=P.capturedMap.get(D);W&&FA(P.capturedMap,w.eventObject,W,D)};let H={};for(let D in h){let W=h[D];typeof W!="function"&&(H[D]=W)}let O={...w,...H,pointer:S,intersections:d,stopped:x.stopped,delta:m,unprojectedPoint:I,ray:E.ray,camera:C,stopPropagation(){const D="pointerId"in h&&P.capturedMap.get(h.pointerId);if((!D||D.has(w.eventObject))&&(O.stopped=x.stopped=!0,P.hovered.size&&Array.from(P.hovered.values()).find(W=>W.eventObject===w.eventObject))){const W=d.slice(0,d.indexOf(w));s([...W,w])}},target:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:U},currentTarget:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:U},nativeEvent:h};if(g(O),x.stopped===!0)break}}return d}function s(d){const{internal:h}=n.getState();for(const m of h.hovered.values())if(!d.length||!d.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f,x=v==null?void 0:v.handlers;if(h.hovered.delete(Tg(m)),v!=null&&v.eventCount){const w={...m,intersections:d};x.onPointerOut==null||x.onPointerOut(w),x.onPointerLeave==null||x.onPointerLeave(w)}}}function a(d,h){for(let m=0;m<h.length;m++){const g=h[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(d)}}function u(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:m}=n.getState();"pointerId"in h&&m.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(h.pointerId)&&(m.capturedMap.delete(h.pointerId),s([]))})}}return function(m){const{onPointerMissed:g,internal:v}=n.getState();v.lastEvent.current=m;const x=d==="onPointerMove",w=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",E=i(m,x?t:void 0),S=w?e(m):0;d==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=E.map(P=>P.eventObject)),w&&!E.length&&S<=2&&(a(m,v.interaction),g&&g(m)),x&&s(E);function C(P){const I=P.eventObject,B=I.__r3f,N=B==null?void 0:B.handlers;if(B!=null&&B.eventCount)if(x){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const U=Tg(P),H=v.hovered.get(U);H?H.stopped&&P.stopPropagation():(v.hovered.set(U,P),N.onPointerOver==null||N.onPointerOver(P),N.onPointerEnter==null||N.onPointerEnter(P))}N.onPointerMove==null||N.onPointerMove(P)}else{const U=N[d];U?(!w||v.initialHits.includes(I))&&(a(m,v.interaction.filter(H=>!v.initialHits.includes(H))),U(P)):w&&v.initialHits.includes(I)&&a(m,v.interaction.filter(H=>!v.initialHits.includes(H)))}}r(E,m,S,C)}}return{handlePointer:u}}const zA=n=>!!(n!=null&&n.render),BA=V.createContext(null),$k=(n,e)=>{const t=CA((u,d)=>{const h=new q,m=new q,g=new q;function v(S=d().camera,C=m,P=d().size){const{width:I,height:B,top:N,left:U}=P,H=I/B;C.isVector3?g.copy(C):g.set(...C);const O=S.getWorldPosition(h).distanceTo(g);if(LA(S))return{width:I/S.zoom,height:B/S.zoom,top:N,left:U,factor:1,distance:O,aspect:H};{const D=S.fov*Math.PI/180,W=2*Math.tan(D/2)*O,ee=W*(I/B);return{width:ee,height:W,top:N,left:U,factor:I/ee,distance:O,aspect:H}}}let x;const w=S=>u(C=>({performance:{...C.performance,current:S}})),b=new De;return{set:u,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(S=1)=>n(d(),S),advance:(S,C)=>e(S,C,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new n1,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=d();x&&clearTimeout(x),S.performance.current!==S.performance.min&&w(S.performance.min),x=setTimeout(()=>w(d().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>u(C=>({...C,events:{...C.events,...S}})),setSize:(S,C,P,I,B)=>{const N=d().camera,U={width:S,height:C,top:I||0,left:B||0,updateStyle:P};u(H=>({size:U,viewport:{...H.viewport,...v(N,m,U)}}))},setDpr:S=>u(C=>{const P=kA(S);return{viewport:{...C.viewport,dpr:P,initialDpr:C.viewport.initialDpr||P}}}),setFrameloop:(S="always")=>{const C=d().clock;C.stop(),C.elapsedTime=0,S!=="never"&&(C.start(),C.elapsedTime=0),u(()=>({frameloop:S}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:V.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(S,C,P)=>{const I=d().internal;return I.priority=I.priority+(C>0?1:0),I.subscribers.push({ref:S,priority:C,store:P}),I.subscribers=I.subscribers.sort((B,N)=>B.priority-N.priority),()=>{const B=d().internal;B!=null&&B.subscribers&&(B.priority=B.priority-(C>0?1:0),B.subscribers=B.subscribers.filter(N=>N.ref!==S))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:u,size:d,viewport:h,gl:m,set:g}=t.getState();if(d.width!==r.width||d.height!==r.height||h.dpr!==s){var v;r=d,s=h.dpr,Vk(u,d),m.setPixelRatio(h.dpr);const x=(v=d.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(d.width,d.height,x)}u!==a&&(a=u,g(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};let Ag,Xk=new Set,jk=new Set,qk=new Set;function Qy(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ih(n,e){switch(n){case"before":return Qy(Xk,e);case"after":return Qy(jk,e);case"tail":return Qy(qk,e)}}let e_,t_;function n_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),e_=e.internal.subscribers,Ag=0;Ag<e_.length;Ag++)t_=e_[Ag],t_.ref.current(t_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Yk(n){let e=!1,t=!1,i,r,s;function a(h){r=requestAnimationFrame(a),e=!0,i=0,Ih("before",h),t=!0;for(const g of n.values()){var m;s=g.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((m=s.gl.xr)!=null&&m.isPresenting)&&(i+=n_(h,s))}if(t=!1,Ih("after",h),i===0)return Ih("tail",h),e=!1,cancelAnimationFrame(r)}function u(h,m=1){var g;if(!h)return n.forEach(v=>u(v.store.getState(),m));(g=h.gl.xr)!=null&&g.isPresenting||!h.internal.active||h.frameloop==="never"||(m>1?h.internal.frames=Math.min(60,h.internal.frames+m):t?h.internal.frames=2:h.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function d(h,m=!0,g,v){if(m&&Ih("before",h),g)n_(h,g,v);else for(const x of n.values())n_(h,x.store.getState());m&&Ih("after",h)}return{loop:a,invalidate:u,advance:d}}function VA(){const n=V.useContext(BA);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function HA(n=t=>t,e){return VA()(n,e)}function Kk(n,e=0){const t=VA(),i=t.getState().internal.subscribe,r=DA(n);return Op(()=>i(r,e,t),[e,i,t]),null}const iM=new WeakMap;function WA(n,e){return function(t,...i){let r=iM.get(t);return r||(r=new t,iM.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((a,u)=>r.load(s,d=>{d.scene&&Object.assign(d,zk(d.scene)),a(d)},e,d=>u(new Error(`Could not load ${s}: ${d==null?void 0:d.message}`))))))}}function lc(n,e,t,i){const r=Array.isArray(e)?e:[e],s=Mk(WA(t,i),[n,...r],{equal:On.equ});return Array.isArray(e)?s:s[0]}lc.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Ek(WA(t),[n,...i])};lc.clear=function(n,e){const t=Array.isArray(e)?e:[e];return bk([n,...t])};const ud=new Map,{invalidate:rM,advance:sM}=Yk(ud),{reconciler:b0,applyProps:Uf}=Ok(ud,Hk),Ff={objects:"shallow",strict:!1},Zk=(n,e)=>{const t=typeof n=="function"?n(e):n;return zA(t)?t:new AA({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Jk(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:a,updateStyle:u=t}=e;return{width:i,height:r,top:s,left:a,updateStyle:u}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:a}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Qk(n){const e=ud.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||$k(rM,sM),a=t||b0.createContainer(s,Qf.ConcurrentRoot,null,!1,null,"",r,null);e||ud.set(n,{fiber:a,store:s});let u,d=!1,h;return{configure(m={}){let{gl:g,size:v,scene:x,events:w,onCreated:b,shadows:E=!1,linear:S=!1,flat:C=!1,legacy:P=!1,orthographic:I=!1,frameloop:B="always",dpr:N=[1,2],performance:U,raycaster:H,camera:O,onPointerMissed:D}=m,W=s.getState(),ee=W.gl;W.gl||W.set({gl:ee=Zk(g,n)});let ne=W.raycaster;ne||W.set({raycaster:ne=new yA});const{params:le,...pe}=H||{};if(On.equ(pe,ne,Ff)||Uf(ne,{...pe}),On.equ(le,ne.params,Ff)||Uf(ne,{params:{...ne.params,...le}}),!W.camera||W.camera===h&&!On.equ(h,O,Ff)){h=O;const Z=O instanceof Tp,$=Z?O:I?new Np(0,0,0,0,.1,1e3):new Bi(75,0,.1,1e3);Z||($.position.z=5,O&&(Uf($,O),("aspect"in O||"left"in O||"right"in O||"bottom"in O||"top"in O)&&($.manual=!0,$.updateProjectionMatrix())),!W.camera&&!(O!=null&&O.rotation)&&$.lookAt(0,0,0)),W.set({camera:$}),ne.camera=$}if(!W.scene){let Z;x!=null&&x.isScene?Z=x:(Z=new kx,x&&Uf(Z,x)),W.set({scene:Xf(Z)})}if(!W.xr){var de;const Z=(Ne,he)=>{const Te=s.getState();Te.frameloop!=="never"&&sM(Ne,!0,Te,he)},$=()=>{const Ne=s.getState();Ne.gl.xr.enabled=Ne.gl.xr.isPresenting,Ne.gl.xr.setAnimationLoop(Ne.gl.xr.isPresenting?Z:null),Ne.gl.xr.isPresenting||rM(Ne)},re={connect(){const Ne=s.getState().gl;Ne.xr.addEventListener("sessionstart",$),Ne.xr.addEventListener("sessionend",$)},disconnect(){const Ne=s.getState().gl;Ne.xr.removeEventListener("sessionstart",$),Ne.xr.removeEventListener("sessionend",$)}};typeof((de=ee.xr)==null?void 0:de.addEventListener)=="function"&&re.connect(),W.set({xr:re})}if(ee.shadowMap){const Z=ee.shadowMap.enabled,$=ee.shadowMap.type;if(ee.shadowMap.enabled=!!E,On.boo(E))ee.shadowMap.type=Gh;else if(On.str(E)){var _e;const re={basic:Rb,percentage:B0,soft:Gh,variance:uo};ee.shadowMap.type=(_e=re[E])!=null?_e:Gh}else On.obj(E)&&Object.assign(ee.shadowMap,E);(Z!==ee.shadowMap.enabled||$!==ee.shadowMap.type)&&(ee.shadowMap.needsUpdate=!0)}const F=IA();F&&("enabled"in F?F.enabled=!P:"legacyMode"in F&&(F.legacyMode=P)),d||Uf(ee,{outputEncoding:S?3e3:3001,toneMapping:C?Uo:xx}),W.legacy!==P&&W.set(()=>({legacy:P})),W.linear!==S&&W.set(()=>({linear:S})),W.flat!==C&&W.set(()=>({flat:C})),g&&!On.fun(g)&&!zA(g)&&!On.equ(g,ee,Ff)&&Uf(ee,g),w&&!W.events.handlers&&W.set({events:w(s)});const J=Jk(n,v);return On.equ(J,W.size,Ff)||W.setSize(J.width,J.height,J.updateStyle,J.top,J.left),N&&W.viewport.dpr!==kA(N)&&W.setDpr(N),W.frameloop!==B&&W.setFrameloop(B),W.onPointerMissed||W.set({onPointerMissed:D}),U&&!On.equ(U,W.performance,Ff)&&W.set(Z=>({performance:{...Z.performance,...U}})),u=b,d=!0,this},render(m){return d||this.configure(),b0.updateContainer(kn.jsx(eU,{store:s,children:m,onCreated:u,rootElement:n}),a,null,()=>{}),s},unmount(){GA(n)}}}function eU({store:n,children:e,onCreated:t,rootElement:i}){return Op(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),kn.jsx(BA.Provider,{value:n,children:e})}function GA(n,e){const t=ud.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),b0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,u,d;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(u=r.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(d=r.gl)!=null&&d.xr&&r.xr.disconnect(),Bk(r),ud.delete(n)}catch{}},500)})}}b0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version});const i_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function tU(n){const{handlePointer:e}=Gk(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(i_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([a,u])=>{const[d,h]=i_[a];t.addEventListener(d,u,{passive:h})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,a])=>{if(i&&i.connected instanceof HTMLElement){const[u]=i_[s];i.connected.removeEventListener(u,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function oM(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function nU({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,h=n?typeof n=="number"?n:n.resize:null,m=V.useRef(!1);V.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,v,x]=V.useMemo(()=>{const S=()=>{if(!u.current.element)return;const{left:C,top:P,width:I,height:B,bottom:N,right:U,x:H,y:O}=u.current.element.getBoundingClientRect(),D={left:C,top:P,width:I,height:B,bottom:N,right:U,x:H,y:O};u.current.element instanceof HTMLElement&&i&&(D.height=u.current.element.offsetHeight,D.width=u.current.element.offsetWidth),Object.freeze(D),m.current&&!oU(u.current.lastBounds,D)&&a(u.current.lastBounds=D)};return[S,h?oM(S,h):S,d?oM(S,d):S]},[a,i,d,h]);function w(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",x,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function b(){u.current.element&&(u.current.resizeObserver=new r(x),u.current.resizeObserver.observe(u.current.element),e&&u.current.scrollContainers&&u.current.scrollContainers.forEach(S=>S.addEventListener("scroll",x,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const E=S=>{!S||S===u.current.element||(w(),u.current.element=S,u.current.scrollContainers=$A(S),b())};return rU(x,!!e),iU(v),V.useEffect(()=>{w(),b()},[e,x,v]),V.useEffect(()=>w,[]),[E,s,g]}function iU(n){V.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function rU(n,e){V.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function $A(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...$A(n.parentElement)]}const sU=["x","y","top","bottom","left","right","width","height"],oU=(n,e)=>sU.every(t=>n[t]===e[t]);var aU=Object.defineProperty,lU=Object.defineProperties,uU=Object.getOwnPropertyDescriptors,aM=Object.getOwnPropertySymbols,cU=Object.prototype.hasOwnProperty,fU=Object.prototype.propertyIsEnumerable,lM=(n,e,t)=>e in n?aU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uM=(n,e)=>{for(var t in e||(e={}))cU.call(e,t)&&lM(n,t,e[t]);if(aM)for(var t of aM(e))fU.call(e,t)&&lM(n,t,e[t]);return n},dU=(n,e)=>lU(n,uU(e)),cM,fM;typeof window<"u"&&((cM=window.document)!=null&&cM.createElement||((fM=window.navigator)==null?void 0:fM.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function XA(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=XA(i,e,t);if(r)return r;i=i.sibling}}function jA(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const dM=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=dM;return}return dM.apply(this,arguments)};const u1=jA(V.createContext(null));class qA extends V.Component{render(){return V.createElement(u1.Provider,{value:this._reactInternals},this.props.children)}}function hU(){const n=V.useContext(u1);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=XA(i,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[n,e])}function pU(){const n=hU(),[e]=V.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==u1&&!e.has(r)&&e.set(r,V.useContext(jA(r)))}t=t.return}return e}function mU(){const n=pU();return V.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>V.createElement(e,null,V.createElement(t.Provider,dU(uM({},i),{value:n.get(t)}))),e=>V.createElement(qA,uM({},e))),[n])}const gU=V.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:a=tU,eventSource:u,eventPrefix:d,shadows:h,linear:m,flat:g,legacy:v,orthographic:x,frameloop:w,dpr:b,performance:E,raycaster:S,camera:C,scene:P,onPointerMissed:I,onCreated:B,...N},U){V.useMemo(()=>Nk(vk),[]);const H=mU(),[O,D]=nU({scroll:!0,debounce:{scroll:50,resize:0},...i}),W=V.useRef(null),ee=V.useRef(null);V.useImperativeHandle(U,()=>W.current);const ne=DA(I),[le,pe]=V.useState(!1),[de,_e]=V.useState(!1);if(le)throw le;if(de)throw de;const F=V.useRef(null);Op(()=>{const Z=W.current;D.width>0&&D.height>0&&Z&&(F.current||(F.current=Qk(Z)),F.current.configure({gl:s,events:a,shadows:h,linear:m,flat:g,legacy:v,orthographic:x,frameloop:w,dpr:b,performance:E,raycaster:S,camera:C,scene:P,size:D,onPointerMissed:(...$)=>ne.current==null?void 0:ne.current(...$),onCreated:$=>{$.events.connect==null||$.events.connect(u?kk(u)?u.current:u:ee.current),d&&$.setEvents({compute:(re,Ne)=>{const he=re[d+"X"],Te=re[d+"Y"];Ne.pointer.set(he/Ne.size.width*2-1,-(Te/Ne.size.height)*2+1),Ne.raycaster.setFromCamera(Ne.pointer,Ne.camera)}}),B==null||B($)}}),F.current.render(kn.jsx(H,{children:kn.jsx(NA,{set:_e,children:kn.jsx(V.Suspense,{fallback:kn.jsx(Uk,{set:pe}),children:e})})})))}),V.useEffect(()=>{const Z=W.current;if(Z)return()=>GA(Z)},[]);const J=u?"none":"auto";return kn.jsx("div",{ref:ee,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...r},...N,children:kn.jsx("div",{ref:O,style:{width:"100%",height:"100%"},children:kn.jsx("canvas",{ref:W,style:{display:"block"},children:t})})})}),vU=V.forwardRef(function(e,t){return kn.jsx(qA,{children:kn.jsx(gU,{...e,ref:t})})});function gi(){return gi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gi.apply(null,arguments)}function yU(n,e,t){return Math.max(e,Math.min(n,t))}const fr={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function hM(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function pM(n,e,t,i=.15){return i===0?yU(n,e,t):n<e?-hM(e-n,t-e,i)+e:n>t?+hM(n-t,t-e,i)+t:n}function _U(n,[e,t],[i,r]){const[[s,a],[u,d]]=n;return[pM(e,s,a,i),pM(t,u,d,r)]}function xU(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function SU(n){var e=xU(n,"string");return typeof e=="symbol"?e:String(e)}function Yr(n,e,t){return e=SU(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mM(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Kn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mM(Object(t),!0).forEach(function(i){Yr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mM(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const YA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function gM(n){return n?n[0].toUpperCase()+n.slice(1):""}const wU=["enter","leave"];function MU(n=!1,e){return n&&!wU.includes(e)}function EU(n,e="",t=!1){const i=YA[n],r=i&&i[e]||e;return"on"+gM(n)+gM(r)+(MU(t,r)?"Capture":"")}const bU=["gotpointercapture","lostpointercapture"];function TU(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=bU.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function AU(n,e=""){const t=YA[n],i=t&&t[e]||e;return n+i}function yv(n){return"touches"in n}function KA(n){return yv(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function CU(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function RU(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function ZA(n){return yv(n)?RU(n)[0]:n}function PU(n){return CU(n).map(e=>e.identifier)}function r_(n){const e=ZA(n);return yv(n)?e.identifier:e.pointerId}function vM(n){const e=ZA(n);return[e.clientX,e.clientY]}function IU(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function T0(n,...e){return typeof n=="function"?n(...e):n}function LU(){}function DU(...n){return n.length===0?LU:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function yM(n,e){return Object.assign({},e,n||{})}const NU=32;class OU{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?T0(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,IU(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const N=t._delta.map(Math.abs);fr.addTo(t._distance,N)}this.axisIntent&&this.axisIntent(e);const[a,u]=t._movement,[d,h]=i.threshold,{_step:m,values:g}=t;if(i.hasCustomTransform?(m[0]===!1&&(m[0]=Math.abs(a)>=d&&g[0]),m[1]===!1&&(m[1]=Math.abs(u)>=h&&g[1])):(m[0]===!1&&(m[0]=Math.abs(a)>=d&&Math.sign(a)*d),m[1]===!1&&(m[1]=Math.abs(u)>=h&&Math.sign(u)*h)),t.intentional=m[0]!==!1||m[1]!==!1,!t.intentional)return;const v=[0,0];if(i.hasCustomTransform){const[N,U]=g;v[0]=m[0]!==!1?N-m[0]:0,v[1]=m[1]!==!1?U-m[1]:0}else v[0]=m[0]!==!1?a-m[0]:0,v[1]=m[1]!==!1?u-m[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);const x=t.offset,w=t._active&&!t._blocked||t.active;w&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=T0(i.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));const[b,E]=t.offset,[[S,C],[P,I]]=t._bounds;t.overflow=[b<S?-1:b>C?1:0,E<P?-1:E>I?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const B=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=_U(t._bounds,t.offset,B),t.delta=fr.sub(t.offset,x),this.computeMovement(),w&&(!t.last||s>NU)){t.delta=fr.sub(t.offset,x);const N=t.delta.map(Math.abs);fr.addTo(t.distance,N),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[N[0]/s,N[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Kn(Kn(Kn({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function kU([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class UU extends OU{constructor(...e){super(...e),Yr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=fr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=fr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[KA(e)]:i.axisThreshold;t.axis=kU(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const FU=n=>n,_M=.15,JA={enabled(n=!0){return n},eventOptions(n,e,t){return Kn(Kn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[_M,_M];case!1:return[0,0];default:return fr.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return fr.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||FU},threshold(n){return fr.toVector(n,0)}},zU=0,kp=Kn(Kn({},JA),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=zU){return n},bounds(n={}){if(typeof n=="function")return s=>kp.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),xM={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class BU extends UU{constructor(...e){super(...e),Yr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=kp.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=r_(e),i._pointerActive=!0,this.computeValues(vM(e)),this.computeInitial(),t.preventScrollAxis&&KA(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=r_(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=vM(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=fr.sub(s,t._values),this.computeValues(s)),fr.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=r_(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=t._distance;if(t.tap=s<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[u,d]=t._delta,[h,m]=t._movement,[g,v]=i.swipe.velocity,[x,w]=i.swipe.distance,b=i.swipe.duration;if(t.elapsedTime<b){const E=Math.abs(u/t.timeDelta),S=Math.abs(d/t.timeDelta);E>g&&Math.abs(h)>x&&(t.swipe[0]=Math.sign(u)),S>v&&Math.abs(m)>w&&(t.swipe[1]=Math.sign(d))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,VU(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=xM[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,fr.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in xM&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function VU(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Up=typeof window<"u"&&window.document&&window.document.createElement;function QA(){return Up&&"ontouchstart"in window}function HU(){return QA()||Up&&window.navigator.maxTouchPoints>1}function WU(){return Up&&"onpointerdown"in window}function GU(){return Up&&"exitPointerLock"in window.document}function $U(){try{return"constructor"in GestureEvent}catch{return!1}}const Is={isBrowser:Up,gesture:$U(),touch:QA(),touchscreen:HU(),pointer:WU(),pointerLock:GU()},XU=250,jU=180,qU=.5,YU=50,KU=250,ZU=10,SM={mouse:0,touch:0,pen:8},JU=Kn(Kn({},kp),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Is.pointerLock,Is.touch&&t?"touch":this.pointerLock?"mouse":Is.pointer&&!r?"pointer":Is.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?XU:void 0,!(!Is.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=fr.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=qU,distance:e=YU,duration:t=KU}={}){return{velocity:this.transform(fr.toVector(n)),distance:this.transform(fr.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return jU;case!1:return 0;default:return n}},axisThreshold(n){return n?Kn(Kn({},SM),n):SM},keyboardDisplacement(n=ZU){return n}});Kn(Kn({},JA),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Is.touch&&Is.gesture)return"gesture";if(Is.touch&&i)return"touch";if(Is.touchscreen){if(Is.pointer)return"pointer";if(Is.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=a=>{const u=yM(T0(t,a),{min:-1/0,max:1/0});return[u.min,u.max]},s=a=>{const u=yM(T0(i,a),{min:-1/0,max:1/0});return[u.min,u.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:a=>[r(a),s(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",fr.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Kn(Kn({},kp),{},{mouseOnly:(n=!0)=>n});Kn(Kn({},kp),{},{mouseOnly:(n=!0)=>n});const eC=new Map,J_=new Map;function QU(n){eC.set(n.key,n.engine),J_.set(n.key,n.resolver)}const eF={key:"drag",engine:BU,resolver:JU};function tF(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function nF(n,e){if(n==null)return{};var t=tF(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const iF={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Is.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},rF=["target","eventOptions","window","enabled","transform"];function zg(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=zg(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function sF(n,e,t={}){const i=n,{target:r,eventOptions:s,window:a,enabled:u,transform:d}=i,h=nF(i,rF);if(t.shared=zg({target:r,eventOptions:s,window:a,enabled:u,transform:d},iF),e){const m=J_.get(e);t[e]=zg(Kn({shared:t.shared},h),m)}else for(const m in h){const g=J_.get(m);g&&(t[m]=zg(Kn({shared:t.shared},h[m]),g))}return t}class tC{constructor(e,t){Yr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const a=this._listeners,u=AU(t,i),d=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},h=Kn(Kn({},d),s);e.addEventListener(u,r,h);const m=()=>{e.removeEventListener(u,r,h),a.delete(m)};return a.add(m),m}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class oF{constructor(){Yr(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class aF{constructor(e){Yr(this,"gestures",new Set),Yr(this,"_targetEventStore",new tC(this)),Yr(this,"gestureEventStores",{}),Yr(this,"gestureTimeoutStores",{}),Yr(this,"handlers",{}),Yr(this,"config",{}),Yr(this,"pointerIds",new Set),Yr(this,"touchIds",new Set),Yr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),lF(this,e)}setEventIds(e){if(yv(e))return this.touchIds=new Set(PU(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=sF(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const a of this.gestures){const u=this.config[a],d=wM(i,u.eventOptions,!!r);if(u.enabled){const h=eC.get(a);new h(this,e,a).bind(d)}}const s=wM(i,t.eventOptions,!!r);for(const a in this.nativeHandlers)s(a,"",u=>this.nativeHandlers[a](Kn(Kn({},this.state.shared),{},{event:u,args:e})),void 0,!0)}for(const s in i)i[s]=DU(...i[s]);if(!r)return i;for(const s in i){const{device:a,capture:u,passive:d}=TU(s);this._targetEventStore.add(r,a,"",i[s],{capture:u,passive:d})}}}}function zf(n,e){n.gestures.add(e),n.gestureEventStores[e]=new tC(n,e),n.gestureTimeoutStores[e]=new oF}function lF(n,e){e.drag&&zf(n,"drag"),e.wheel&&zf(n,"wheel"),e.scroll&&zf(n,"scroll"),e.move&&zf(n,"move"),e.pinch&&zf(n,"pinch"),e.hover&&zf(n,"hover")}const wM=(n,e,t)=>(i,r,s,a={},u=!1)=>{var d,h;const m=(d=a.capture)!==null&&d!==void 0?d:e.capture,g=(h=a.passive)!==null&&h!==void 0?h:e.passive;let v=u?i:EU(i,r,m);t&&g&&(v+="Passive"),n[v]=n[v]||[],n[v].push(s)};function uF(n,e={},t,i){const r=te.useMemo(()=>new aF(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),te.useEffect(r.effect.bind(r)),te.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function cF(n,e){return QU(eF),uF({drag:n},e||{},"drag")}function ep(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function fF(n,e){if(n){if(typeof n=="string")return Q_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q_(n,e)}}function dF(n){if(Array.isArray(n))return Q_(n)}function hF(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mF(n){return dF(n)||hF(n)||fF(n)||pF()}new De;new De;function gF(n,e,t){return Math.max(e,Math.min(t,n))}function vF(n,e){return gF(n-Math.floor(n/e)*e,0,e)}function yF(n,e){var t=vF(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function nC(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Ps=function n(e,t,i){var r=this;nC(this,n),ep(this,"dot2",function(s,a){return r.x*s+r.y*a}),ep(this,"dot3",function(s,a,u){return r.x*s+r.y*a+r.z*u}),this.x=e,this.y=t,this.z=i},_F=[new Ps(1,1,0),new Ps(-1,1,0),new Ps(1,-1,0),new Ps(-1,-1,0),new Ps(1,0,1),new Ps(-1,0,1),new Ps(1,0,-1),new Ps(-1,0,-1),new Ps(0,1,1),new Ps(0,-1,1),new Ps(0,1,-1),new Ps(0,-1,-1)],MM=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],EM=new Array(512),bM=new Array(512),xF=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=MM[t]^e&255:i=MM[t]^e>>8&255,EM[t]=EM[t+256]=i,bM[t]=bM[t+256]=_F[i%12]}};xF(0);function SF(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function TM(n){var e=SF(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var wF=function n(e){var t=this;nC(this,n),ep(this,"seed",0),ep(this,"init",function(i){t.seed=i,t.value=TM(i)}),ep(this,"value",TM(this.seed)),this.init(e)};new wF(Math.random());var MF=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},iC=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},EF=function(e){return e},bF={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},TF={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},AF={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},CF={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},RF={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},PF={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Ci(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:iC,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,d="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[d]===void 0&&(n.__damp[d]=0),Math.abs(n[e]-t)<=u)return n[e]=t,!1;i=Math.max(1e-4,i);var h=2/i,m=a(h*r),g=n[e]-t,v=t,x=s*i;g=Math.min(Math.max(g,-x),x),t=n[e]-g;var w=(n.__damp[d]+h*g)*r;n.__damp[d]=(n.__damp[d]-h*w)*m;var b=t+(g+w)*m;return v-n[e]>0==b>v&&(b=v,n.__damp[d]=(b-v)/r),n[e]=b,!0}var IF=function(e){return e&&e.isCamera},LF=function(e){return e&&e.isLight},Lh=new q,AM=new Ri,CM=new Ri,Dh=new Ut,s_=new q;function DF(n,e,t,i,r,s,a){typeof e=="number"?Lh.setScalar(e):Array.isArray(e)?Lh.set(e[0],e[1],e[2]):Lh.copy(e);var u=n.parent;n.updateWorldMatrix(!0,!1),s_.setFromMatrixPosition(n.matrixWorld),IF(n)||LF(n)?Dh.lookAt(s_,Lh,n.up):Dh.lookAt(Lh,s_,n.up),A0(n.quaternion,CM.setFromRotationMatrix(Dh),t,i,r,s,a),u&&(Dh.extractRotation(u.matrixWorld),AM.setFromRotationMatrix(Dh),A0(n.quaternion,CM.copy(n.quaternion).premultiply(AM.invert()),t,i,r,s,a))}function nd(n,e,t,i,r,s,a,u){return Ci(n,e,n[e]+yF(n[e],t),i,r,s,a,u)}var Nh=new De,RM,PM;function NF(n,e,t,i,r,s,a){return typeof e=="number"?Nh.setScalar(e):Array.isArray(e)?Nh.set(e[0],e[1]):Nh.copy(e),RM=Ci(n,"x",Nh.x,t,i,r,s,a),PM=Ci(n,"y",Nh.y,t,i,r,s,a),RM||PM}var Bf=new q,IM,LM,DM;function ex(n,e,t,i,r,s,a){return typeof e=="number"?Bf.setScalar(e):Array.isArray(e)?Bf.set(e[0],e[1],e[2]):Bf.copy(e),IM=Ci(n,"x",Bf.x,t,i,r,s,a),LM=Ci(n,"y",Bf.y,t,i,r,s,a),DM=Ci(n,"z",Bf.z,t,i,r,s,a),IM||LM||DM}var zu=new un,NM,OM,kM,UM;function OF(n,e,t,i,r,s,a){return typeof e=="number"?zu.setScalar(e):Array.isArray(e)?zu.set(e[0],e[1],e[2],e[3]):zu.copy(e),NM=Ci(n,"x",zu.x,t,i,r,s,a),OM=Ci(n,"y",zu.y,t,i,r,s,a),kM=Ci(n,"z",zu.z,t,i,r,s,a),UM=Ci(n,"w",zu.w,t,i,r,s,a),NM||OM||kM||UM}var Oh=new Qr,FM,zM,BM;function kF(n,e,t,i,r,s,a){return Array.isArray(e)?Oh.set(e[0],e[1],e[2],e[3]):Oh.copy(e),FM=nd(n,"x",Oh.x,t,i,r,s,a),zM=nd(n,"y",Oh.y,t,i,r,s,a),BM=nd(n,"z",Oh.z,t,i,r,s,a),FM||zM||BM}var Vf=new ct,VM,HM,WM;function UF(n,e,t,i,r,s,a){return e instanceof ct?Vf.copy(e):Array.isArray(e)?Vf.setRGB(e[0],e[1],e[2]):Vf.set(e),VM=Ci(n,"r",Vf.r,t,i,r,s,a),HM=Ci(n,"g",Vf.g,t,i,r,s,a),WM=Ci(n,"b",Vf.b,t,i,r,s,a),VM||HM||WM}var lo=new Ri,Pa=new un,GM=new un,kh=new un,$M,XM,jM,qM;function A0(n,e,t,i,r,s,a){var u=n;Array.isArray(e)?lo.set(e[0],e[1],e[2],e[3]):lo.copy(e);var d=n.dot(lo)>0?1:-1;return lo.x*=d,lo.y*=d,lo.z*=d,lo.w*=d,$M=Ci(n,"x",lo.x,t,i,r,s,a),XM=Ci(n,"y",lo.y,t,i,r,s,a),jM=Ci(n,"z",lo.z,t,i,r,s,a),qM=Ci(n,"w",lo.w,t,i,r,s,a),Pa.set(n.x,n.y,n.z,n.w).normalize(),GM.set(u.__damp.velocity_x,u.__damp.velocity_y,u.__damp.velocity_z,u.__damp.velocity_w),kh.copy(Pa).multiplyScalar(GM.dot(Pa)/Pa.dot(Pa)),u.__damp.velocity_x-=kh.x,u.__damp.velocity_y-=kh.y,u.__damp.velocity_z-=kh.z,u.__damp.velocity_w-=kh.w,n.set(Pa.x,Pa.y,Pa.z,Pa.w),$M||XM||jM||qM}var Uh=new _A,YM,KM,ZM;function FF(n,e,t,i,r,s,a){return Array.isArray(e)?Uh.set(e[0],e[1],e[2]):Uh.copy(e),YM=Ci(n,"radius",Uh.radius,t,i,r,s,a),KM=nd(n,"phi",Uh.phi,t,i,r,s,a),ZM=nd(n,"theta",Uh.theta,t,i,r,s,a),YM||KM||ZM}var Cg=new Ut,JM=new q,QM=new Ri,eE=new q,tE,nE,iE;function zF(n,e,t,i,r,s,a){var u=n;return u.__damp===void 0&&(u.__damp={position:new q,rotation:new Ri,scale:new q},n.decompose(u.__damp.position,u.__damp.rotation,u.__damp.scale)),Array.isArray(e)?Cg.set.apply(Cg,mF(e)):Cg.copy(e),Cg.decompose(JM,QM,eE),tE=ex(u.__damp.position,JM,t,i,r,s,a),nE=A0(u.__damp.rotation,QM,t,i,r,s,a),iE=ex(u.__damp.scale,eE,t,i,r,s,a),n.compose(u.__damp.position,u.__damp.rotation,u.__damp.scale),tE||nE||iE}var o_=Object.freeze({__proto__:null,rsqw:MF,exp:iC,linear:EF,sine:bF,cubic:TF,quint:AF,circ:CF,quart:RF,expo:PF,damp:Ci,dampLookAt:DF,dampAngle:nd,damp2:NF,damp3:ex,damp4:OF,dampE:kF,dampC:UF,dampQ:A0,dampS:FF,dampM:zF});const a_=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function c1(n,e){const t=HA(s=>s.gl),i=lc(ld,a_(n)?Object.values(n):n);return V.useLayoutEffect(()=>{e==null||e(i)},[e]),V.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(i)?s=i:i instanceof Wn?s=[i]:a_(i)&&(s=Object.values(i)),s.forEach(a=>{a instanceof Wn&&t.initTexture(a)})}},[t,i]),V.useMemo(()=>{if(a_(n)){const s={};let a=0;for(const u in n)s[u]=i[a++];return s}else return i},[n,i])}c1.preload=n=>lc.preload(ld,n);c1.clear=n=>lc.clear(ld,n);var l_={exports:{}},u_,rE;function BF(){if(rE)return u_;rE=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return u_=n,u_}var c_,sE;function VF(){if(sE)return c_;sE=1;var n=BF();function e(){}function t(){}return t.resetWarningCache=e,c_=function(){function i(a,u,d,h,m,g){if(g!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},c_}var oE;function HF(){return oE||(oE=1,l_.exports=VF()()),l_.exports}var WF=HF();const Nn=fd(WF);var GF=Tb();const rC=fd(GF);function $F(...n){return e=>n.forEach(t=>function(i,r){typeof i=="function"?i(r):i!=null&&(i.current=r)}(t,e))}const sC=V.forwardRef((n,e)=>{const{children:t,...i}=n;return V.Children.toArray(t).some(aE)?V.createElement(V.Fragment,null,V.Children.map(t,r=>aE(r)?V.createElement(tx,gi({},i,{ref:e}),r.props.children):r)):V.createElement(tx,gi({},i,{ref:e}),t)});sC.displayName="Slot";const tx=V.forwardRef((n,e)=>{const{children:t,...i}=n;return V.isValidElement(t)?V.cloneElement(t,{...jF(i,t.props),ref:$F(e,t.ref)}):V.Children.count(t)>1?V.Children.only(null):null});tx.displayName="SlotClone";const XF=({children:n})=>V.createElement(V.Fragment,null,n);function aE(n){return V.isValidElement(n)&&n.type===XF}function jF(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?t[i]=(...a)=>{s==null||s(...a),r==null||r(...a)}:i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const qF=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:V.forwardRef((t,i)=>{const{asChild:r,...s}=t,a=r?sC:e;return V.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),V.createElement(a,gi({},s,{ref:i}))})}),{}),YF=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{},KF=V.forwardRef((n,e)=>{var t,i;const{containerRef:r,style:s,...a}=n,u=(t=r==null?void 0:r.current)!==null&&t!==void 0?t:globalThis==null||(i=globalThis.document)===null||i===void 0?void 0:i.body,[,d]=V.useState({});return YF(()=>{d({})},[]),u?rC.createPortal(V.createElement(qF.div,gi({"data-radix-portal":""},a,{ref:e,style:u===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),u):null}),ZF=KF;var lE=Object.prototype.hasOwnProperty;function C0(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&C0(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(lE.call(n,t)&&++i&&!lE.call(e,t)||!(t in e)||!C0(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function oC(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var _v=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};_v.prototype._test=function(e){var t=this.fn;try{id(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return id(this.modifiers.slice(),t,this)(e)}catch{return!1}};_v.prototype._check=function(e){try{id(this.modifiers.slice(),this.fn,this)(e)}catch{if(id(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!id(this.modifiers.slice(),this.fn,this)(e))throw null};_v.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){lC(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):r(null)}).catch(function(s){return r(s)})})};function aC(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function id(n,e,t){if(n.length){var i=n.shift(),r=id(n,e,t);return i.perform(r,t)}else return aC(e)}function lC(n,e,t){if(n.length){var i=n.shift(),r=lC(n,e,t);return i.performAsync(r,t)}else return function(s){return Promise.resolve(aC(e,"async")(s))}}var JF=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},f1=function(n){function e(t,i,r,s){for(var a=[],u=arguments.length-4;u-- >0;)a[u]=arguments[u+4];n.call(this,a),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),Ho=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Ho.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new _v(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};Ho.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new JF(t,e.simple,e.async)),this};Ho.prototype._clone=function(){return new Ho(this.chain.slice(),this.nextRuleModifiers.slice())};Ho.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Ho.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new f1(i,e,r))}}),t};Ho.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new f1(t,e,i)}})};Ho.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){uC(e,t.chain.slice(),i,r)})};function uC(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){uC(n,e,t,i)},function(s){i(new f1(r,n,s))})}else t(n)}var uE=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function QF(n,e){return e===void 0&&(e=!1),{simple:function(t){return uE(t,e)||n.check(t)===void 0},async:function(t){return uE(t,e)||n.testAsync(t)}}}function Jr(){return typeof Proxy<"u"?cC(new Ho):nx(new Ho)}var wp={};Jr.extend=function(n){Object.assign(wp,n)};Jr.clearCustomRules=function(){wp={}};function cC(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=cC(n._clone());if(i in R0)return r._applyModifier(R0[i],i);if(i in wp)return r._applyRule(wp[i],i);if(i in ix)return r._applyRule(ix[i],i)}})}function nx(n){var e=function(r,s){return Object.keys(r).forEach(function(a){s[a]=function(){for(var u=[],d=arguments.length;d--;)u[d]=arguments[d];var h=nx(s._clone()),m=h._applyRule(r[a],a).apply(void 0,u);return m}}),s},t=e(ix,n),i=e(wp,t);return Object.keys(R0).forEach(function(r){Object.defineProperty(i,r,{get:function(){var s=nx(i._clone());return s._applyModifier(R0[r],r)}})}),i}var R0={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Rg(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Rg(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Rg(e).every(n)}},async:function(n){return function(e){return Promise.all(Rg(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return cE(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return cE(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function cE(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Rg(n){return typeof n=="string"?n.split(""):n}var ix={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||ez;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Hf("string")},boolean:function(){return Hf("boolean")},undefined:function(){return Hf("undefined")},null:function(){return Hf("null")},array:function(){return Hf("array")},object:function(){return Hf("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return tz(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:QF};function Hf(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function ez(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function tz(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var s=n[r];return s.testAsync((e||{})[r]).catch(function(a){a.target=r,t.push(a)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var An="colors",Tr="sizes",vt="space",nz={gap:vt,gridGap:vt,columnGap:vt,gridColumnGap:vt,rowGap:vt,gridRowGap:vt,inset:vt,insetBlock:vt,insetBlockEnd:vt,insetBlockStart:vt,insetInline:vt,insetInlineEnd:vt,insetInlineStart:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,marginBlock:vt,marginBlockEnd:vt,marginBlockStart:vt,marginInline:vt,marginInlineEnd:vt,marginInlineStart:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,paddingBlock:vt,paddingBlockEnd:vt,paddingBlockStart:vt,paddingInline:vt,paddingInlineEnd:vt,paddingInlineStart:vt,top:vt,right:vt,bottom:vt,left:vt,scrollMargin:vt,scrollMarginTop:vt,scrollMarginRight:vt,scrollMarginBottom:vt,scrollMarginLeft:vt,scrollMarginX:vt,scrollMarginY:vt,scrollMarginBlock:vt,scrollMarginBlockEnd:vt,scrollMarginBlockStart:vt,scrollMarginInline:vt,scrollMarginInlineEnd:vt,scrollMarginInlineStart:vt,scrollPadding:vt,scrollPaddingTop:vt,scrollPaddingRight:vt,scrollPaddingBottom:vt,scrollPaddingLeft:vt,scrollPaddingX:vt,scrollPaddingY:vt,scrollPaddingBlock:vt,scrollPaddingBlockEnd:vt,scrollPaddingBlockStart:vt,scrollPaddingInline:vt,scrollPaddingInlineEnd:vt,scrollPaddingInlineStart:vt,fontSize:"fontSizes",background:An,backgroundColor:An,backgroundImage:An,borderImage:An,border:An,borderBlock:An,borderBlockEnd:An,borderBlockStart:An,borderBottom:An,borderBottomColor:An,borderColor:An,borderInline:An,borderInlineEnd:An,borderInlineStart:An,borderLeft:An,borderLeftColor:An,borderRight:An,borderRightColor:An,borderTop:An,borderTopColor:An,caretColor:An,color:An,columnRuleColor:An,fill:An,outline:An,outlineColor:An,stroke:An,textDecorationColor:An,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Tr,minBlockSize:Tr,maxBlockSize:Tr,inlineSize:Tr,minInlineSize:Tr,maxInlineSize:Tr,width:Tr,minWidth:Tr,maxWidth:Tr,height:Tr,minHeight:Tr,maxHeight:Tr,flexBasis:Tr,gridTemplateColumns:Tr,gridTemplateRows:Tr,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},iz=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,yd=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,iz))(e);return r in n?n[r]:n[r]=t(e,...i)}},ec=Symbol.for("sxs.internal"),d1=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),fE=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:rz}=Object.prototype,rx=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),sz=/\s+(?![^()]*\))/,Wf=n=>e=>n(...typeof e=="string"?String(e).split(sz):[e]),dE={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Wf((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:Wf((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:Wf((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:Wf((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:Wf((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:Wf((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},f_=/([\d.]+)([^]*)/,oz=(n,e)=>n.length?n.reduce((t,i)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),t),[]):e,az=(n,e)=>n in lz&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${rx(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${rx(n)}:${i}fit-content`)+s):String(e),lz={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Wa=n=>n?n+"-":"",fC=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,s,a,u)=>a=="$"==!!s?i:(r||a=="--"?"calc(":"")+"var(--"+(a==="$"?Wa(e)+(u.includes("$")?"":Wa(t))+u.replace(/\$/g,"-"):u)+")"+(r||a=="--"?"*"+(r||"")+(s||"1")+")":"")),uz=/\s*,\s*(?![^()]*\))/,cz=Object.prototype.toString,ed=(n,e,t,i,r)=>{let s,a,u;const d=(h,m,g)=>{let v,x;const w=b=>{for(v in b){const C=v.charCodeAt(0)===64,P=C&&Array.isArray(b[v])?b[v]:[b[v]];for(x of P){const I=/[A-Z]/.test(S=v)?S:S.replace(/-[^]/g,N=>N[1].toUpperCase()),B=typeof x=="object"&&x&&x.toString===cz&&(!i.utils[I]||!m.length);if(I in i.utils&&!B){const N=i.utils[I];if(N!==a){a=N,w(N(x)),a=null;continue}}else if(I in dE){const N=dE[I];if(N!==u){u=N,w(N(x)),u=null;continue}}if(C&&(E=v.slice(1)in i.media?"@media "+i.media[v.slice(1)]:v,v=E.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(N,U,H,O,D,W)=>{const ee=f_.test(U),ne=.0625*(ee?-1:1),[le,pe]=ee?[O,U]:[U,O];return"("+(H[0]==="="?"":H[0]===">"===ee?"max-":"min-")+le+":"+(H[0]!=="="&&H.length===1?pe.replace(f_,(de,_e,F)=>Number(_e)+ne*(H===">"?1:-1)+F):pe)+(D?") and ("+(D[0]===">"?"min-":"max-")+le+":"+(D.length===1?W.replace(f_,(de,_e,F)=>Number(_e)+ne*(D===">"?-1:1)+F):W):"")+")"})),B){const N=C?g.concat(v):[...g],U=C?[...m]:oz(m,v.split(uz));s!==void 0&&r(hE(...s)),s=void 0,d(x,U,N)}else s===void 0&&(s=[[],m,g]),v=C||v.charCodeAt(0)!==36?v:`--${Wa(i.prefix)}${v.slice(1).replace(/\$/g,"-")}`,x=B?x:typeof x=="number"?x&&I in fz?String(x)+"px":String(x):fC(az(I,x??""),i.prefix,i.themeMap[I]),s[0].push(`${C?`${v} `:`${rx(v)}:`}${x}`)}}var E,S};w(h),s!==void 0&&r(hE(...s)),s=void 0};d(n,e,t)},hE=(n,e,t)=>`${t.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,fz={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},pE=n=>String.fromCharCode(n+(n>25?39:97)),tc=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=pE(t%52)+i;return pE(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Wh=["themed","global","styled","onevar","resonevar","allvar","inline"],dz=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},hz=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,a)=>{const{cssText:u}=s;let d="";if(u.startsWith("--sxs"))return"";if(r[a-1]&&(d=r[a-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const h in e.rules)if(e.rules[h].group===s)return`--sxs{--sxs:${[...e.rules[h].cache].join(" ")}}${u}`;return s.cssRules.length?`${d}${u}`:""}return u}).join("")},i=()=>{if(e){const{rules:u,sheet:d}=e;if(!d.deleteRule){for(;Object(Object(d.cssRules)[0]).type===3;)d.cssRules.splice(0,1);d.cssRules=[]}for(const h in u)delete u[h]}const r=Object(n).styleSheets||[];for(const u of r)if(dz(u)){for(let d=0,h=u.cssRules;h[d];++d){const m=Object(h[d]);if(m.type!==1)continue;const g=Object(h[d+1]);if(g.type!==4)continue;++d;const{cssText:v}=m;if(!v.startsWith("--sxs"))continue;const x=v.slice(14,-3).trim().split(/\s+/),w=Wh[x[0]];w&&(e||(e={sheet:u,reset:i,rules:{},toString:t}),e.rules[w]={group:g,index:d,cache:new Set(x)})}if(e)break}if(!e){const u=(d,h)=>({type:h,cssRules:[],insertRule(m,g){this.cssRules.splice(g,0,u(m,{import:3,undefined:1}[(m.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return d==="@media{}"?`@media{${[].map.call(this.cssRules,m=>m.cssText).join("")}}`:d}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:a}=e;for(let u=Wh.length-1;u>=0;--u){const d=Wh[u];if(!a[d]){const h=Wh[u+1],m=a[h]?a[h].index:s.cssRules.length;s.insertRule("@media{}",m),s.insertRule(`--sxs{--sxs:${u}}`,m),a[d]={group:s.cssRules[m+1],index:m,cache:new Set([u])}}pz(a[d])}};return i(),e},pz=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},Fh=Symbol(),mz=yd(),mE=(n,e)=>mz(n,()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[ec]){i.type==null&&(i.type=r[ec].type);for(const s of r[ec].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(gz(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),vz(n,i,e)}),gz=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${Wa(r.prefix)}c-${tc(i)}`,a=[],u=[],d=Object.create(null),h=[];for(const v in t)d[v]=String(t[v]);if(typeof n=="object"&&n)for(const v in n){m=d,g=v,rz.call(m,g)||(d[v]="undefined");const x=n[v];for(const w in x){const b={[v]:String(w)};String(w)==="undefined"&&h.push(v);const E=x[w],S=[b,E,!fE(E)];a.push(S)}}var m,g;if(typeof e=="object"&&e)for(const v of e){let{css:x,...w}=v;x=typeof x=="object"&&x||{};for(const E in w)w[E]=String(w[E]);const b=[w,x,!fE(x)];u.push(b)}return[s,i,a,u,d,h]},vz=(n,e,t)=>{const[i,r,s,a]=yz(e.composers),u=typeof e.type=="function"||e.type.$$typeof?(g=>{function v(){for(let x=0;x<v[Fh].length;x++){const[w,b]=v[Fh][x];g.rules[w].apply(b)}return v[Fh]=[],null}return v[Fh]=[],v.rules={},Wh.forEach(x=>v.rules[x]={apply:w=>v[Fh].push([x,w])}),v})(t):null,d=(u||t).rules,h=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,m=g=>{g=typeof g=="object"&&g||_z;const{css:v,...x}=g,w={};for(const S in s)if(delete x[S],S in g){let C=g[S];typeof C=="object"&&C?w[S]={"@initial":s[S],...C}:(C=String(C),w[S]=C!=="undefined"||a.has(S)?C:s[S])}else w[S]=s[S];const b=new Set([...r]);for(const[S,C,P,I]of e.composers){t.rules.styled.cache.has(S)||(t.rules.styled.cache.add(S),ed(C,[`.${S}`],[],n,U=>{d.styled.apply(U)}));const B=gE(P,w,n.media),N=gE(I,w,n.media,!0);for(const U of B)if(U!==void 0)for(const[H,O,D]of U){const W=`${S}-${tc(O)}-${H}`;b.add(W);const ee=(D?t.rules.resonevar:t.rules.onevar).cache,ne=D?d.resonevar:d.onevar;ee.has(W)||(ee.add(W),ed(O,[`.${W}`],[],n,le=>{ne.apply(le)}))}for(const U of N)if(U!==void 0)for(const[H,O]of U){const D=`${S}-${tc(O)}-${H}`;b.add(D),t.rules.allvar.cache.has(D)||(t.rules.allvar.cache.add(D),ed(O,[`.${D}`],[],n,W=>{d.allvar.apply(W)}))}}if(typeof v=="object"&&v){const S=`${i}-i${tc(v)}-css`;b.add(S),t.rules.inline.cache.has(S)||(t.rules.inline.cache.add(S),ed(v,[`.${S}`],[],n,C=>{d.inline.apply(C)}))}for(const S of String(g.className||"").trim().split(/\s+/))S&&b.add(S);const E=x.className=[...b].join(" ");return{type:e.type,className:E,selector:h,props:x,toString:()=>E,deferredInjector:u}};return d1(m,{className:i,selector:h,[ec]:e,toString:()=>(t.rules.styled.cache.has(i)||m(),i)})},yz=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,a,u]of n){e===""&&(e=s),t.push(s),r.push(...u);for(const d in a){const h=a[d];(i[d]===void 0||h!=="undefined"||u.includes(h))&&(i[d]=h)}}return[e,t,i,new Set(r)]},gE=(n,e,t,i)=>{const r=[];e:for(let[s,a,u]of n){if(u)continue;let d,h=0,m=!1;for(d in s){const g=s[d];let v=e[d];if(v!==g){if(typeof v!="object"||!v)continue e;{let x,w,b=0;for(const E in v){if(g===String(v[E])){if(E!=="@initial"){const S=E.slice(1);(w=w||[]).push(S in t?t[S]:E.replace(/^@media ?/,"")),m=!0}h+=b,x=!0}++b}if(w&&w.length&&(a={["@media "+w.join(", ")]:a}),!x)continue e}}}(r[h]=r[h]||[]).push([i?"cv":`${d}-${s[d]}`,a,m])}return r},_z={},xz=yd(),Sz=(n,e)=>xz(n,()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=tc(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let a=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let u of[].concat(r["@import"]))u=u.includes('"')||u.includes("'")?u:`"${u}"`,e.sheet.insertRule(`@import ${u};`,a++);delete r["@import"]}ed(r,[],[],n,a=>{e.rules.global.apply(a)})}}return""};return d1(i,{toString:i})}),wz=yd(),Mz=(n,e)=>wz(n,()=>t=>{const i=`${Wa(n.prefix)}k-${tc(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];ed(t,[],[],n,u=>s.push(u));const a=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(a)}return i};return d1(r,{get name(){return r()},toString:r})}),Ez=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Wa(this.prefix)+Wa(this.scale)+this.token}toString(){return this.computedValue}},bz=yd(),Tz=(n,e)=>bz(n,()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${Wa(n.prefix)}t-${tc(i)}`}`,s={},a=[];for(const d in i){s[d]={};for(const h in i[d]){const m=`--${Wa(n.prefix)}${d}-${h}`,g=fC(String(i[d][h]),n.prefix,d);s[d][h]=new Ez(h,g,d,n.prefix),a.push(`${m}:${g}`)}}const u=()=>{if(a.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const d=`${i===n.theme?":root,":""}.${t}{${a.join(";")}}`;e.rules.themed.apply(d)}return t};return{...s,get className(){return u()},selector:r,toString:u}}),Az=yd(),Cz=yd(),Rz=n=>{const e=(t=>{let i=!1;const r=Az(t,s=>{i=!0;const a="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",u=typeof s.media=="object"&&s.media||{},d=typeof s.root=="object"?s.root||null:globalThis.document||null,h=typeof s.theme=="object"&&s.theme||{},m={prefix:a,media:u,theme:h,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...nz},utils:typeof s.utils=="object"&&s.utils||{}},g=hz(d),v={css:mE(m,g),globalCss:Sz(m,g),keyframes:Mz(m,g),createTheme:Tz(m,g),reset(){g.reset(),v.theme.toString()},theme:{},sheet:g,config:m,prefix:a,getCssText:g.toString,toString:g.toString};return String(v.theme=v.createTheme(h)),v});return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>Cz(t,()=>{const r=mE(t,i);return(...s)=>{const a=r(...s),u=a[ec].type,d=te.forwardRef((h,m)=>{const g=h&&h.as||u,{props:v,deferredInjector:x}=a(h);return delete v.as,v.ref=m,x?te.createElement(te.Fragment,null,te.createElement(g,v),te.createElement(x,null)):te.createElement(g,v)});return d.className=a.className,d.displayName=`Styled.${u.displayName||u.name||u}`,d.selector=a.selector,d.toString=()=>a.selector,d[ec]=a[ec],d}}))(e),e};const Pz=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{},Iz=e2.useId||(()=>{});let Lz=0;function Dz(n){const[e,t]=V.useState(Iz());return Pz(()=>{t(i=>i??String(Lz++))},[n]),e?`radix-${e}`:""}function dC(...n){return e=>n.forEach(t=>function(i,r){typeof i=="function"?i(r):i!=null&&(i.current=r)}(t,e))}function h1(...n){return V.useCallback(dC(...n),n)}const hC=V.forwardRef((n,e)=>{const{children:t,...i}=n;return V.Children.toArray(t).some(vE)?V.createElement(V.Fragment,null,V.Children.map(t,r=>vE(r)?V.createElement(sx,gi({},i,{ref:e}),r.props.children):r)):V.createElement(sx,gi({},i,{ref:e}),t)});hC.displayName="Slot";const sx=V.forwardRef((n,e)=>{const{children:t,...i}=n;return V.isValidElement(t)?V.cloneElement(t,{...Nz(i,t.props),ref:dC(e,t.ref)}):V.Children.count(t)>1?V.Children.only(null):null});sx.displayName="SlotClone";const pC=({children:n})=>V.createElement(V.Fragment,null,n);function vE(n){return V.isValidElement(n)&&n.type===pC}function Nz(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?t[i]=(...a)=>{s==null||s(...a),r==null||r(...a)}:i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const _d=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:V.forwardRef((t,i)=>{const{asChild:r,...s}=t,a=r?hC:e;return V.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.as&&console.error(Oz),V.createElement(a,gi({},s,{ref:i}))})}),{}),Oz="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",kz=V.forwardRef((n,e)=>V.createElement(_d.span,gi({},n,{ref:e,style:{...n.style,position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}}))),Uz=kz,Fz=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{},zz=V.forwardRef((n,e)=>{var t,i;const{containerRef:r,style:s,...a}=n,u=(t=r==null?void 0:r.current)!==null&&t!==void 0?t:globalThis==null||(i=globalThis.document)===null||i===void 0?void 0:i.body,[,d]=V.useState({});return Fz(()=>{d({})},[]),u?rC.createPortal(V.createElement(_d.div,gi({"data-radix-portal":""},a,{ref:e,style:u===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),u):null}),Bz=V.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...s}=n;return V.createElement(_d.svg,gi({},s,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:V.createElement("polygon",{points:"0,0 30,0 15,10"}))}),Vz=Bz;function yE(n){const[e,t]=V.useState(void 0);return V.useEffect(()=>{if(n){const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,u;if("borderBoxSize"in s){const d=s.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,u=h.blockSize}else{const d=n.getBoundingClientRect();a=d.width,u=d.height}t({width:a,height:u})});return i.observe(n,{box:"border-box"}),()=>{t(void 0),i.unobserve(n)}}},[n]),e}function Hz(n,e){const t=Hu.get(n);return t===void 0?(Hu.set(n,{rect:{},callbacks:[e]}),Hu.size===1&&(ox=requestAnimationFrame(mC))):(t.callbacks.push(e),e(n.getBoundingClientRect())),()=>{const i=Hu.get(n);if(i===void 0)return;const r=i.callbacks.indexOf(e);r>-1&&i.callbacks.splice(r,1),i.callbacks.length===0&&(Hu.delete(n),Hu.size===0&&cancelAnimationFrame(ox))}}let ox;const Hu=new Map;function mC(){const n=[];Hu.forEach((e,t)=>{const i=t.getBoundingClientRect();var r,s;r=e.rect,s=i,(r.width!==s.width||r.height!==s.height||r.top!==s.top||r.right!==s.right||r.bottom!==s.bottom||r.left!==s.left)&&(e.rect=i,n.push(e))}),n.forEach(e=>{e.callbacks.forEach(t=>t(e.rect))}),ox=requestAnimationFrame(mC)}function gC(n){const[e,t]=V.useState();return V.useEffect(()=>{if(n){const i=Hz(n,t);return()=>{t(void 0),i()}}},[n]),e}function vC(n,e=[]){let t=[];const i=()=>{const r=t.map(s=>V.createContext(s));return function(s){const a=(s==null?void 0:s[n])||r;return V.useMemo(()=>({[`__scope${n}`]:{...s,[n]:a}}),[s,a])}};return i.scopeName=n,[function(r,s){const a=V.createContext(s),u=t.length;function d(h){const{scope:m,children:g,...v}=h,x=(m==null?void 0:m[n][u])||a,w=V.useMemo(()=>v,Object.values(v));return V.createElement(x.Provider,{value:w},g)}return t=[...t,s],d.displayName=r+"Provider",[d,function(h,m){const g=(m==null?void 0:m[n][u])||a,v=V.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${r}\``)}]},Wz(i,...e)]}function Wz(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(r){const s=i.reduce((a,{useScope:u,scopeName:d})=>({...a,...u(r)[`__scope${d}`]}),{});return V.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function Gz({anchorRect:n,popperSize:e,arrowSize:t,arrowOffset:i=0,side:r,sideOffset:s=0,align:a,alignOffset:u=0,shouldAvoidCollisions:d=!0,collisionBoundariesRect:h,collisionTolerance:m=0}){if(!n||!e||!h)return{popperStyles:$z,arrowStyles:d_};const g=function(U,H,O=0,D=0,W){const ee=W?W.height:0,ne=_E(H,U,"x"),le=_E(H,U,"y"),pe=le.before-O-ee,de=le.after+O+ee,_e=ne.before-O-ee,F=ne.after+O+ee;return{top:{start:{x:ne.start+D,y:pe},center:{x:ne.center,y:pe},end:{x:ne.end-D,y:pe}},right:{start:{x:F,y:le.start+D},center:{x:F,y:le.center},end:{x:F,y:le.end-D}},bottom:{start:{x:ne.start+D,y:de},center:{x:ne.center,y:de},end:{x:ne.end-D,y:de}},left:{start:{x:_e,y:le.start+D},center:{x:_e,y:le.center},end:{x:_e,y:le.end-D}}}}(e,n,s,u,t),v=g[r][a];if(d===!1){const U=xE(v);let H=d_;return t&&(H=wE({popperSize:e,arrowSize:t,arrowOffset:i,side:r,align:a})),{popperStyles:{...U,"--radix-popper-transform-origin":SE(e,r,a,i,t)},arrowStyles:H,placedSide:r,placedAlign:a}}const x=DOMRect.fromRect({...e,...v}),w=(b=h,E=m,DOMRect.fromRect({width:b.width-2*E,height:b.height-2*E,x:b.left+E,y:b.top+E}));var b,E;const S=EE(x,w),C=g[ME(r)][a],P=function(U,H,O){const D=ME(U);return H[U]&&!O[D]?D:U}(r,S,EE(DOMRect.fromRect({...e,...C}),w)),I=function(U,H,O,D,W){const ee=O==="top"||O==="bottom",ne=ee?"left":"top",le=ee?"right":"bottom",pe=ee?"width":"height",de=H[pe]>U[pe];return(D==="start"||D==="center")&&(W[ne]&&de||W[le]&&!de)?"end":(D==="end"||D==="center")&&(W[le]&&de||W[ne]&&!de)?"start":D}(e,n,r,a,S),B=xE(g[P][I]);let N=d_;return t&&(N=wE({popperSize:e,arrowSize:t,arrowOffset:i,side:P,align:I})),{popperStyles:{...B,"--radix-popper-transform-origin":SE(e,P,I,i,t)},arrowStyles:N,placedSide:P,placedAlign:I}}function _E(n,e,t){const i=n[t==="x"?"left":"top"],r=t==="x"?"width":"height",s=n[r],a=e[r];return{before:i-a,start:i,center:i+(s-a)/2,end:i+s-a,after:i+s}}function xE(n){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(n.x+window.scrollX)}px, ${Math.round(n.y+window.scrollY)}px, 0)`}}function SE(n,e,t,i,r){const s=e==="top"||e==="bottom",a=r?r.width:0,u=r?r.height:0,d=a/2+i;let h="",m="";return s?(h={start:`${d}px`,center:"center",end:n.width-d+"px"}[t],m=e==="top"?`${n.height+u}px`:-u+"px"):(h=e==="left"?`${n.width+u}px`:-u+"px",m={start:`${d}px`,center:"center",end:n.height-d+"px"}[t]),`${h} ${m}`}const $z={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},d_={position:"absolute",opacity:0};function wE({popperSize:n,arrowSize:e,arrowOffset:t,side:i,align:r}){const s=(n.width-e.width)/2,a=(n.height-e.width)/2,u={top:0,right:90,bottom:180,left:-90}[i],d=Math.max(e.width,e.height),h={width:`${d}px`,height:`${d}px`,transform:`rotate(${u}deg)`,willChange:"transform",position:"absolute",[i]:"100%",direction:Xz(i,r)};return i!=="top"&&i!=="bottom"||(r==="start"&&(h.left=`${t}px`),r==="center"&&(h.left=`${s}px`),r==="end"&&(h.right=`${t}px`)),i!=="left"&&i!=="right"||(r==="start"&&(h.top=`${t}px`),r==="center"&&(h.top=`${a}px`),r==="end"&&(h.bottom=`${t}px`)),h}function Xz(n,e){return(n!=="top"&&n!=="right"||e!=="end")&&(n!=="bottom"&&n!=="left"||e==="end")?"ltr":"rtl"}function ME(n){return{top:"bottom",right:"left",bottom:"top",left:"right"}[n]}function EE(n,e){return{top:n.top<e.top,right:n.right>e.right,bottom:n.bottom>e.bottom,left:n.left<e.left}}const[yC,_C]=vC("Popper"),[jz,xC]=yC("Popper"),qz=n=>{const{__scopePopper:e,children:t}=n,[i,r]=V.useState(null);return V.createElement(jz,{scope:e,anchor:i,onAnchorChange:r},t)},Yz=V.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,s=xC("PopperAnchor",t),a=V.useRef(null),u=h1(e,a);return V.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||a.current)}),i?null:V.createElement(_d.div,gi({},r,{ref:u}))}),[Kz,Zz]=yC("PopperContent"),Jz=V.forwardRef((n,e)=>{const{__scopePopper:t,side:i="bottom",sideOffset:r,align:s="center",alignOffset:a,collisionTolerance:u,avoidCollisions:d=!0,...h}=n,m=xC("PopperContent",t),[g,v]=V.useState(),x=gC(m.anchor),[w,b]=V.useState(null),E=yE(w),[S,C]=V.useState(null),P=yE(S),I=h1(e,ee=>b(ee)),B=function(){const[ee,ne]=V.useState(void 0);return V.useEffect(()=>{let le;function pe(){ne({width:window.innerWidth,height:window.innerHeight})}function de(){window.clearTimeout(le),le=window.setTimeout(pe,100)}return pe(),window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[]),ee}(),N=B?DOMRect.fromRect({...B,x:0,y:0}):void 0,{popperStyles:U,arrowStyles:H,placedSide:O,placedAlign:D}=Gz({anchorRect:x,popperSize:E,arrowSize:P,arrowOffset:g,side:i,sideOffset:r,align:s,alignOffset:a,shouldAvoidCollisions:d,collisionBoundariesRect:N,collisionTolerance:u}),W=O!==void 0;return V.createElement("div",{style:U,"data-radix-popper-content-wrapper":""},V.createElement(Kz,{scope:t,arrowStyles:H,onArrowChange:C,onArrowOffsetChange:v},V.createElement(_d.div,gi({"data-side":O,"data-align":D},h,{style:{...h.style,animation:W?void 0:"none"},ref:I}))))}),Qz=V.forwardRef(function(n,e){const{__scopePopper:t,offset:i,...r}=n,s=Zz("PopperArrow",t),{onArrowOffsetChange:a}=s;return V.useEffect(()=>a(i),[a,i]),V.createElement("span",{style:{...s.arrowStyles,pointerEvents:"none"}},V.createElement("span",{ref:s.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},V.createElement(Vz,gi({},r,{ref:e,style:{...r.style,display:"block"}}))))}),e4=qz,t4=Yz,n4=Jz,i4=Qz,bE=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{};function r4(...n){return e=>n.forEach(t=>function(i,r){typeof i=="function"?i(r):i!=null&&(i.current=r)}(t,e))}function s4(...n){return V.useCallback(r4(...n),n)}const SC=n=>{const{present:e,children:t}=n,i=function(a){const[u,d]=V.useState(),h=V.useRef({}),m=V.useRef(a),g=V.useRef("none"),v=a?"mounted":"unmounted",[x,w]=function(b,E){return V.useReducer((S,C)=>{const P=E[S][C];return P??S},b)}(v,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return V.useEffect(()=>{const b=Pg(h.current);g.current=x==="mounted"?b:"none"},[x]),bE(()=>{const b=h.current,E=m.current;if(E!==a){const S=g.current,C=Pg(b);a?w("MOUNT"):C==="none"||(b==null?void 0:b.display)==="none"?w("UNMOUNT"):w(E&&S!==C?"ANIMATION_OUT":"UNMOUNT"),m.current=a}},[a,w]),bE(()=>{if(u){const b=S=>{const C=Pg(h.current).includes(S.animationName);S.target===u&&C&&w("ANIMATION_END")},E=S=>{S.target===u&&(g.current=Pg(h.current))};return u.addEventListener("animationstart",E),u.addEventListener("animationcancel",b),u.addEventListener("animationend",b),()=>{u.removeEventListener("animationstart",E),u.removeEventListener("animationcancel",b),u.removeEventListener("animationend",b)}}},[u,w]),{isPresent:["mounted","unmountSuspended"].includes(x),ref:V.useCallback(b=>{b&&(h.current=getComputedStyle(b)),d(b)},[])}}(e),r=typeof t=="function"?t({present:i.isPresent}):V.Children.only(t),s=s4(i.ref,r.ref);return typeof t=="function"||i.isPresent?V.cloneElement(r,{ref:s}):null};function Pg(n){return(n==null?void 0:n.animationName)||"none"}SC.displayName="Presence";function TE(n){const e=V.useRef(n);return V.useEffect(()=>{e.current=n},[n]),e.current}function o4(n){const e=V.useRef(n);return V.useEffect(()=>{e.current=n}),V.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function a4(n){const e=o4(n);V.useEffect(()=>{const t=i=>{i.key==="Escape"&&e(i)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}function AE(n){const e=V.useRef(n);return V.useEffect(()=>{e.current=n}),V.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function l4({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=function({defaultProp:d,onChange:h}){const m=V.useState(d),[g]=m,v=V.useRef(g),x=AE(h);return V.useEffect(()=>{v.current!==g&&(x(g),v.current=g)},[g,v,x]),m}({defaultProp:e,onChange:t}),s=n!==void 0,a=s?n:i,u=AE(t);return[a,V.useCallback(d=>{if(s){const h=d,m=typeof d=="function"?h(n):d;m!==n&&u(m)}else r(d)},[s,n,r,u])]}function Gf(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}const[wC,r8]=vC("Tooltip",[_C]),xv=_C(),u4=700,[s8,c4]=wC("TooltipProvider",{isOpenDelayed:!0,delayDuration:u4,onOpen:()=>{},onClose:()=>{}}),[f4,Sv]=wC("Tooltip"),d4=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:s,delayDuration:a}=n,u=c4("Tooltip",e),d=xv(e),[h,m]=V.useState(null),g=Dz(),v=V.useRef(0),x=a??u.delayDuration,w=V.useRef(!1),{onOpen:b,onClose:E}=u,[S=!1,C]=l4({prop:i,defaultProp:r,onChange:N=>{N&&(document.dispatchEvent(new CustomEvent("tooltip.open")),b()),s==null||s(N)}}),P=V.useMemo(()=>S?w.current?"delayed-open":"instant-open":"closed",[S]),I=V.useCallback(()=>{window.clearTimeout(v.current),w.current=!1,C(!0)},[C]),B=V.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{w.current=!0,C(!0)},x)},[x,C]);return V.useEffect(()=>()=>window.clearTimeout(v.current),[]),V.createElement(e4,d,V.createElement(f4,{scope:e,contentId:g,open:S,stateAttribute:P,trigger:h,onTriggerChange:m,onTriggerEnter:V.useCallback(()=>{u.isOpenDelayed?B():I()},[u.isOpenDelayed,B,I]),onOpen:V.useCallback(I,[I]),onClose:V.useCallback(()=>{window.clearTimeout(v.current),C(!1),E()},[C,E])},t))},h4=V.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=Sv("TooltipTrigger",t),s=xv(t),a=h1(e,r.onTriggerChange),u=V.useRef(!1),d=V.useCallback(()=>u.current=!1,[]);return V.useEffect(()=>()=>document.removeEventListener("mouseup",d),[d]),V.createElement(t4,gi({asChild:!0},s),V.createElement(_d.button,gi({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:a,onMouseEnter:Gf(n.onMouseEnter,r.onTriggerEnter),onMouseLeave:Gf(n.onMouseLeave,r.onClose),onMouseDown:Gf(n.onMouseDown,()=>{r.onClose(),u.current=!0,document.addEventListener("mouseup",d,{once:!0})}),onFocus:Gf(n.onFocus,()=>{u.current||r.onOpen()}),onBlur:Gf(n.onBlur,r.onClose),onClick:Gf(n.onClick,r.onClose)})))}),p4=V.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=Sv("TooltipContent",n.__scopeTooltip);return V.createElement(SC,{present:t||r.open},V.createElement(m4,gi({ref:e},i)))}),m4=V.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,portalled:s=!0,...a}=n,u=Sv("TooltipContent",t),d=xv(t),h=s?zz:V.Fragment,{onClose:m}=u;return a4(()=>m()),V.useEffect(()=>(document.addEventListener("tooltip.open",m),()=>document.removeEventListener("tooltip.open",m)),[m]),V.createElement(h,null,V.createElement(v4,{__scopeTooltip:t}),V.createElement(n4,gi({"data-state":u.stateAttribute},d,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"}}),V.createElement(pC,null,i),V.createElement(Uz,{id:u.contentId,role:"tooltip"},r||i)))}),g4=V.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=xv(t);return V.createElement(i4,gi({},r,i,{ref:e}))});function v4(n){const{__scopeTooltip:e}=n,t=Sv("CheckTriggerMoved",e),i=gC(t.trigger),r=i==null?void 0:i.left,s=TE(r),a=i==null?void 0:i.top,u=TE(a),d=t.onClose;return V.useEffect(()=>{(s!==void 0&&s!==r||u!==void 0&&u!==a)&&d()},[d,s,u,r,a]),null}const y4=d4,_4=h4,x4=p4,S4=g4;function w4(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Un(n,e){if(n==null)return{};var t=w4(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let qn;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(qn||(qn={}));const M4={[qn.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[qn.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[qn.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[qn.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[qn.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[qn.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[qn.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[qn.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[qn.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[qn.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[qn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function MC(n,e,...t){const[i,...r]=M4[e](...t);console[n]("LEVA: "+i,...r)}const Na=MC.bind(null,"warn"),E4=MC.bind(null,"log"),b4=["value"],T4=["schema"],A4=["value"],EC=[],uc={};function CE(n){let{value:e}=n,t=Un(n,b4);for(let i of EC){const r=i(e,t);if(r)return r}}function Ga(n,e){let{schema:t}=e,i=Un(e,T4);if(n in uc){Na(qn.ALREADY_REGISTERED_TYPE,n);return}EC.push((r,s)=>t(r,s)&&n),uc[n]=i}function h_(n,e,t,i){const{normalize:r}=uc[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,a=Un(e,A4);return{value:s,settings:a}}function C4(n,e,t,i,r,s){const{sanitize:a}=uc[n];return a?a(e,t,i,r,s):e}function RE(n,e,t){const{format:i}=uc[n];return i?i(e,t):e}function R4(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function qt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PE(Object(t),!0).forEach(function(i){R4(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PE(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const kl=(n,e,t)=>n>t?t:n<e?e:n,P4=n=>{if(n===""||typeof n=="number")return n;try{const e=Il(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},I4=Math.log(10);function IE(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/I4)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const P0=(n,e,t)=>t===e?0:(kl(n,e,t)-e)/(t-e),I0=(n,e,t)=>n*(t-e)+e,L4=()=>"_"+Math.random().toString(36).substr(2,9),LE=/\(([0-9+\-*/^ .]+)\)/,DE=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,NE=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,OE=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,kE=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,UE=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Il(n){if(isNaN(Number(n)))if(LE.test(n)){const e=n.replace(LE,(t,i)=>String(Il(i)));return Il(e)}else if(DE.test(n)){const e=n.replace(DE,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return Il(e)}else if(NE.test(n)){const e=n.replace(NE,(t,i,r)=>String(Number(i)*Number(r)));return Il(e)}else if(OE.test(n)){const e=n.replace(OE,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return Il(e)}else if(kE.test(n)){const e=n.replace(kE,(t,i,r)=>String(Number(i)+Number(r)));return Il(e)}else if(UE.test(n)){const e=n.replace(UE,(t,i,r)=>String(Number(i)-Number(r)));return Il(e)}else return Number(n);return Number(n)}function D4(n,e){const t=qt({},n);return e.forEach(i=>i in n&&delete t[i]),t}function N4(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function bC(n){return Object.prototype.toString.call(n)==="[object Object]"}const O4=n=>bC(n)&&Object.keys(n).length===0;let Bo;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Bo||(Bo={}));let mo;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(mo||(mo={}));const k4=["type","__customInput"],U4=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],F4=["type"];function TC(n,e,t={},i){var r,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:qt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:B,__customInput:N}=n,U=Un(n,k4);return TC(N,e,U,B)}const{render:a,label:u,optional:d,order:h=0,disabled:m,hint:g,onChange:v,onEditStart:x,onEditEnd:w,transient:b}=n,E=Un(n,U4),S=qt({render:a,key:e,label:u??e,hint:g,transient:b??!!v,onEditStart:x,onEditEnd:w,disabled:m,optional:d,order:h},t);let{type:C}=E,P=Un(E,F4);if(C=i??C,C in Bo)return{type:C,input:P,options:S};let I;return i&&bC(P)&&"value"in P?I=P.value:I=O4(P)?void 0:P,{type:C,input:I,options:qt(qt({},S),{},{onChange:v,optional:(r=S.optional)!==null&&r!==void 0?r:!1,disabled:(s=S.disabled)!==null&&s!==void 0?s:!1})}}function z4(n,e,t,i){const r=TC(n,e),{type:s,input:a,options:u}=r;if(s)return s in Bo?r:{type:s,input:h_(s,a,t,i),options:u};let d=CE(a);return d?{type:d,input:h_(d,a,t,i),options:u}:(d=CE({value:a}),d?{type:d,input:h_(d,{value:a},t,i),options:u}:!1)}function FE(n,e,t,i,r){const{value:s,type:a,settings:u}=n;n.value=AC({type:a,value:s,settings:u},e,t,i),n.fromPanel=r}const B4=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function AC({type:n,value:e,settings:t},i,r,s){const a=n!=="SELECT"&&typeof i=="function"?i(e):i;let u;try{u=C4(n,a,t,e,r,s)}catch(d){throw new B4(`The value \`${i}\` did not result in a correct value.`,e,d)}return C0(u,e)?e:u}const CC=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,s=t&&!i,a=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(a,e),s&&a()}},RC=n=>n.shiftKey?5:n.altKey?1/5:1,V4=["value"],H4=["min","max"],W4=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},PC=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const s=kl(r,e,t);return i?s+i:s},G4=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},IC=n=>{let{value:e}=n,t=Un(n,V4);const{min:i=-1/0,max:r=1/0}=t,s=Un(t,H4);let a=parseFloat(e);const u=typeof e=="string"?e.substring((""+a).length):void 0;a=kl(a,i,r);let d=t.step;d||(Number.isFinite(i)?Number.isFinite(r)?d=+(Math.abs(r-i)/100).toPrecision(1):d=+(Math.abs(a-i)/100).toPrecision(1):Number.isFinite(r)&&(d=+(Math.abs(r-a)/100).toPrecision(1)));const h=d?IE(d)*10:IE(a);d=d||h/10;const m=Math.round(kl(Math.log10(1/h),0,2));return{value:u?a+u:a,settings:qt({initialValue:a,step:d,pad:m,min:i,max:r,suffix:u},s)}},LC=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var DC=Object.freeze({__proto__:null,schema:W4,sanitize:PC,format:G4,normalize:IC,sanitizeStep:LC});function vi(){return vi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vi.apply(this,arguments)}const NC=V.createContext({});function pr(){return V.useContext(NC)}const OC=V.createContext(null),kC=V.createContext(null),UC=V.createContext(null);function Fp(){return V.useContext(kC)}function $4(){return V.useContext(UC)}const X4=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Ig(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const zh={$inputStyle:()=>n=>Ig(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Ig(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Ig(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Ig(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Dt,css:o8,createTheme:a8,globalCss:j4,keyframes:l8}=Rz({prefix:"leva",theme:X4(),utils:qt(qt({},zh),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":zh.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":zh.$focusStyle()(n)}),$hover:n=>({"&:hover":zh.$hoverStyle()(n)}),$active:n=>({"&:active":zh.$activeStyle()(n)})})}),q4=j4({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Fa(n,e){const{theme:t}=V.useContext(OC);if(!(n in t)||!(e in t[n]))return Na(qn.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const FC=Dt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),zC=Dt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${FC}`]:{paddingLeft:0}}),Y4=Dt(zC,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),K4=Dt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),Z4=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],J4=["onUpdate"];function p1(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:s,type:a,id:u,inputType:d="text",rows:h=0}=n,m=Un(n,Z4);const{id:g,emitOnEditStart:v,emitOnEditEnd:x,disabled:w}=pr(),b=u||g,E=V.useRef(null),S=h>0,C=S?"textarea":"input",P=V.useCallback(N=>U=>{const H=U.currentTarget.value;N(H)},[]);te.useEffect(()=>{const N=E.current,U=P(H=>{i(H),x()});return N==null||N.addEventListener("blur",U),()=>N==null?void 0:N.removeEventListener("blur",U)},[P,i,x]);const I=V.useCallback(N=>{N.key==="Enter"&&P(i)(N)},[P,i]),B=Object.assign({as:C},S?{rows:h}:{},m);return te.createElement(K4,{textArea:S},e&&typeof e=="string"?te.createElement(zC,null,e):e,te.createElement(FC,vi({levaType:a,ref:E,id:b,type:d,autoComplete:"off",spellCheck:"false",value:t,onChange:P(r),onFocus:()=>v(),onKeyPress:I,onKeyDown:s,disabled:w},B)))}function Q4(n){let{onUpdate:e}=n,t=Un(n,J4);const i=V.useCallback(s=>e(P4(s)),[e]),r=V.useCallback(s=>{const a=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(a){s.preventDefault();const u=s.altKey?.1:s.shiftKey?10:1;e(d=>parseFloat(d)+a*u)}},[e]);return te.createElement(p1,vi({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const L0=Dt("div",{}),ax=Dt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),eB=Dt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${ax}::after`]:{opacity:.6},[`${L0}:hover > & + ${ax}::after`]:{opacity:.6},[`${L0}:hover > & > svg`]:{opacity:1}}),BC=Dt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${L0}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),VC=Dt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${BC} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),HC=Dt(VC,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),tB=Dt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),nB=Dt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),lx=Dt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),iB=Dt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${lx}`]:{pointerEvents:"auto"}}}}}),WC=Dt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),rB=Dt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),sB=Dt(S4,{fill:"$toolTipBackground"});function m1({children:n}){const{className:e}=V.useContext(OC);return te.createElement(ZF,{className:e},n)}const oB=["align"];function aB(){const{id:n,disable:e,disabled:t}=pr();return te.createElement(te.Fragment,null,te.createElement(nB,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),te.createElement("label",{htmlFor:n+"__disable"}))}function lB(n){const{id:e,optional:t,hint:i}=pr(),r=n.htmlFor||(e?{htmlFor:e}:null),s=!i&&typeof n.children=="string"?{title:n.children}:null;return te.createElement(te.Fragment,null,t&&te.createElement(aB,null),i!==void 0?te.createElement(y4,null,te.createElement(_4,{asChild:!0},te.createElement(lx,vi({},r,n))),te.createElement(x4,{side:"top",sideOffset:2},te.createElement(rB,null,i,te.createElement(sB,null)))):te.createElement(lx,vi({},r,s,n)))}function yo(n){let{align:e}=n,t=Un(n,oB);const{value:i,label:r,key:s,disabled:a}=pr(),{hideCopyButton:u}=$4(),d=!u&&s!==void 0,[h,m]=V.useState(!1),g=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),m(!0)}catch{Na(qn.CLIPBOARD_ERROR,{[s]:i})}};return te.createElement(tB,{align:e,onPointerLeave:()=>m(!1)},te.createElement(lB,t),d&&!a&&te.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},h?te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},te.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),te.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):te.createElement("svg",{onClick:g,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},te.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),te.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const uB=["toggled"],cB=Dt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function g1(n){let{toggled:e}=n,t=Un(n,uB);return te.createElement(cB,vi({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),te.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const fB=["input"];function Ns(n){let{input:e}=n,t=Un(n,fB);return e?te.createElement(HC,t):te.createElement(VC,t)}function GC({value:n,type:e,settings:t,setValue:i}){const[r,s]=V.useState(RE(e,n,t)),a=V.useRef(n),u=V.useRef(t);u.current=t;const d=V.useCallback(m=>s(RE(e,m,u.current)),[e]),h=V.useCallback(m=>{try{i(m)}catch(g){const{type:v,previousValue:x}=g;if(v!=="LEVA_ERROR")throw g;d(x)}},[d,i]);return V.useEffect(()=>{C0(n,a.current)||d(n),a.current=n},[n,d]),{displayValue:r,onChange:s,onUpdate:h}}function zp(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=pr();return cF(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),s},e)}function dB(n){const e=V.useRef(null),t=V.useRef(null),i=V.useRef(!1);return V.useEffect(()=>{const r=CC(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),V.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function $C(){const n=V.useRef(null),e=V.useRef({x:0,y:0}),t=V.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const hB=["__refCount"],p_=(n,e)=>{if(!n[e])return null;const t=n[e];return Un(t,hB)};function pB(n){const e=Fp(),[t,i]=V.useState(p_(e.getData(),n)),r=V.useCallback(h=>e.setValueAtPath(n,h,!0),[n,e]),s=V.useCallback(h=>e.setSettingsAtPath(n,h),[n,e]),a=V.useCallback(h=>e.disableInputAtPath(n,h),[n,e]),u=V.useCallback(()=>e.emitOnEditStart(n),[n,e]),d=V.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return V.useEffect(()=>{i(p_(e.getData(),n));const h=e.useStore.subscribe(m=>p_(m.data,n),i,{equalityFn:oC});return()=>h()},[e,n]),[t,{set:r,setSettings:s,disable:a,storeId:e.storeId,emitOnEditStart:u,emitOnEditEnd:d}]}const mB=Dt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),XC=Dt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),ux=Dt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),jC=Dt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),qC=Dt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function gB({value:n,min:e,max:t,onDrag:i,step:r,initialValue:s}){const a=V.useRef(null),u=V.useRef(null),d=V.useRef(0),h=Fa("sizes","scrubberWidth"),m=zp(({event:v,first:x,xy:[w],movement:[b],memo:E})=>{if(x){const{width:C,left:P}=a.current.getBoundingClientRect();d.current=C-parseFloat(h),E=(v==null?void 0:v.target)===u.current?n:I0((w-P)/C,e,t)}const S=E+I0(b/d.current,0,t-e);return i(LC(S,{step:r,initialValue:s})),E}),g=P0(n,e,t);return te.createElement(jC,vi({ref:a},m()),te.createElement(XC,null,te.createElement(qC,{style:{left:0,right:`${(1-g)*100}%`}})),te.createElement(ux,{ref:u,style:{left:`calc(${g} * (100% - ${h}))`}}))}const vB=te.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,s]=V.useState(!1),a=zp(({active:u,delta:[d],event:h,memo:m=0})=>(s(u),m+=d/2,Math.abs(m)>=1&&(e(g=>parseFloat(g)+Math.floor(m)*t*RC(h)),m=0),m));return te.createElement(Y4,vi({dragging:r,title:n.length>1?n:""},a()),n.slice(0,i))});function YC({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:s,innerLabelTrim:a=1}){const u=a>0&&te.createElement(vB,{label:n,step:s.step,onUpdate:i,innerLabelTrim:a});return te.createElement(Q4,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:u})}function yB(){const n=pr(),{label:e,value:t,onUpdate:i,settings:r,id:s}=n,{min:a,max:u}=r,d=u!==1/0&&a!==-1/0;return te.createElement(Ns,{input:!0},te.createElement(yo,null,e),te.createElement(mB,{hasRange:d},d&&te.createElement(gB,vi({value:parseFloat(t),onDrag:i},r)),te.createElement(YC,vi({},n,{id:s,label:"value",innerLabelTrim:d?0:1}))))}const{sanitizeStep:_B}=DC,xB=Un(DC,["sanitizeStep"]);var SB=qt({component:yB},xB);const wB=(n,e)=>Jr().schema({options:Jr().passesAnyOf(Jr().object(),Jr().array())}).test(e),MB=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},EB=(n,{values:e})=>e.indexOf(n),bB=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(s=>String(s))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var TB=Object.freeze({__proto__:null,schema:wB,sanitize:MB,format:EB,normalize:bB});const AB=Dt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),cx=Dt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),CB=Dt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${cx}:focus + &`]:{$focusStyle:""},[`${cx}:hover + &`]:{$hoverStyle:""}});function RB({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:s}){const{keys:a,values:u}=r,d=V.useRef();return e===u[n]&&(d.current=a[n]),te.createElement(AB,null,te.createElement(cx,{id:i,value:n,onChange:h=>t(u[Number(h.currentTarget.value)]),disabled:s},a.map((h,m)=>te.createElement("option",{key:h,value:m},h))),te.createElement(CB,null,d.current),te.createElement(g1,{toggled:!0}))}function PB(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:s,settings:a}=pr();return te.createElement(Ns,{input:!0},te.createElement(yo,null,n),te.createElement(RB,{id:r,value:e,displayValue:t,onUpdate:i,settings:a,disabled:s}))}var IB=qt({component:PB},TB);const LB=n=>Jr().string().test(n),DB=n=>{if(typeof n!="string")throw Error("Invalid string");return n},NB=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var OB=Object.freeze({__proto__:null,schema:LB,sanitize:DB,normalize:NB});const kB=["displayValue","onUpdate","onChange","editable"],UB=Dt("div",{whiteSpace:"pre-wrap"});function FB(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,s=Un(n,kB);return r?te.createElement(p1,vi({value:e,onUpdate:t,onChange:i},s)):te.createElement(UB,null,e)}function zB(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=pr();return te.createElement(Ns,{input:!0},te.createElement(yo,null,n),te.createElement(FB,vi({displayValue:t,onUpdate:i,onChange:r},e)))}var BB=qt({component:zB},OB);const VB=n=>Jr().boolean().test(n),HB=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var WB=Object.freeze({__proto__:null,schema:VB,sanitize:HB});const GB=Dt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function $B({value:n,onUpdate:e,id:t,disabled:i}){return te.createElement(GB,null,te.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),te.createElement("label",{htmlFor:t},te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},te.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function XB(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=pr();return te.createElement(Ns,{input:!0},te.createElement(yo,null,n),te.createElement($B,{value:e,onUpdate:t,id:r,disabled:i}))}var jB=qt({component:XB},WB);const qB=["locked"];function YB({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:s}){const a=V.useRef(n[t]);a.current=n[t];const u=V.useCallback(h=>r({[t]:AC({type:"NUMBER",value:a.current,settings:i},h)}),[r,i,t]),d=GC({type:"NUMBER",value:n[t],settings:i,setValue:u});return te.createElement(YC,{id:e,label:t,value:n[t],displayValue:d.displayValue,onUpdate:d.onUpdate,onChange:d.onChange,settings:i,innerLabelTrim:s})}const KB=Dt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function ZB(n){let{locked:e}=n,t=Un(n,qB);return te.createElement("svg",vi({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?te.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):te.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function v1({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:s}=pr(),{lock:a,locked:u}=t;return te.createElement(KB,{withLock:a},a&&te.createElement(ZB,{locked:u,onClick:()=>s({locked:!u})}),Object.keys(n).map((d,h)=>te.createElement(YB,{id:h===0?r:`${r}.${d}`,key:d,valueKey:d,value:n,settings:t[d],onUpdate:e,innerLabelTrim:i})))}const KC=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([s,a])=>{t[s]=IC(qt({value:a},e[s])).settings,i=Math.max(i,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:a,min:u,max:d}=e[s]||{};!isFinite(a)&&(!isFinite(u)||!isFinite(d))&&(t[s].step=i,t[s].pad=r)}return t},JB=["lock"],QB=["value"];function e5(n){const e=Jr().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function t5(n){return Array.isArray(n)?"array":"object"}function tp(n,e,t){return t5(n)===e?n:e==="array"?Object.values(n):N4(n,t)}const n5=(n,e,t)=>{const i=tp(n,"object",e.keys);for(let a in i)i[a]=PC(i[a],e[a]);const r=Object.keys(i);let s={};if(r.length===e.keys.length)s=i;else{const a=tp(t,"object",e.keys);if(r.length===1&&e.locked){const u=r[0],d=i[u],h=a[u],m=h!==0?d/h:1;for(let g in a)g===u?s[u]=d:s[g]=a[g]*m}else s=qt(qt({},a),i)}return tp(s,e.format,e.keys)},i5=(n,e)=>tp(n,"object",e.keys),r5=n=>!!n&&("step"in n||"min"in n||"max"in n);function s5(n,e,t=[]){const{lock:i=!1}=e,r=Un(e,JB),s=Array.isArray(n)?"array":"object",a=s==="object"?Object.keys(n):t,u=tp(n,"object",a),d=r5(r)?a.reduce((m,g)=>Object.assign(m,{[g]:r}),{}):r,h=KC(u,d);return{value:s==="array"?n:u,settings:qt(qt({},h),{},{format:s,keys:a,lock:i,locked:!1})}}function ZC(n){return{schema:e5(n.length),normalize:e=>{let{value:t}=e,i=Un(e,QB);return s5(t,i,n)},format:(e,t)=>i5(e,t),sanitize:(e,t,i)=>n5(e,t,i)}}var o5={grad:.9,turn:360,rad:360/(2*Math.PI)},Ia=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},zi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Ds=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},JC=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},zE=function(n){return{r:Ds(n.r,0,255),g:Ds(n.g,0,255),b:Ds(n.b,0,255),a:Ds(n.a)}},m_=function(n){return{r:zi(n.r),g:zi(n.g),b:zi(n.b),a:zi(n.a,3)}},a5=/^#([0-9a-f]{3,8})$/i,Lg=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},QC=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),a=s-Math.min(e,t,i),u=a?s===e?(t-i)/a:s===t?2+(i-e)/a:4+(e-t)/a:0;return{h:60*(u<0?u+6:u),s:s?a/s*100:0,v:s/255*100,a:r}},eR=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),a=i*(1-t),u=i*(1-(e-s)*t),d=i*(1-(1-e+s)*t),h=s%6;return{r:255*[i,u,a,a,d,i][h],g:255*[d,i,i,u,a,a][h],b:255*[a,a,d,i,i,u][h],a:r}},BE=function(n){return{h:JC(n.h),s:Ds(n.s,0,100),l:Ds(n.l,0,100),a:Ds(n.a)}},VE=function(n){return{h:zi(n.h),s:zi(n.s),l:zi(n.l),a:zi(n.a,3)}},HE=function(n){return eR((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},np=function(n){return{h:(e=QC(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},l5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,u5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,c5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,f5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fx={string:[[function(n){var e=a5.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?zi(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?zi(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=c5.exec(n)||f5.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:zE({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=l5.exec(n)||u5.exec(n);if(!e)return null;var t,i,r=BE({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(o5[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return HE(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return Ia(e)&&Ia(t)&&Ia(i)?zE({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!Ia(e)||!Ia(t)||!Ia(i))return null;var a=BE({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return HE(a)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!Ia(e)||!Ia(t)||!Ia(i))return null;var a=function(u){return{h:JC(u.h),s:Ds(u.s,0,100),v:Ds(u.v,0,100),a:Ds(u.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return eR(a)},"hsv"]]},WE=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},tR=function(n){return typeof n=="string"?WE(n.trim(),fx.string):typeof n=="object"&&n!==null?WE(n,fx.object):[null,void 0]},d5=function(n){return tR(n)[1]},g_=function(n,e){var t=np(n);return{h:t.h,s:Ds(t.s+100*e,0,100),l:t.l,a:t.a}},v_=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},GE=function(n,e){var t=np(n);return{h:t.h,s:t.s,l:Ds(t.l+100*e,0,100),a:t.a}},dx=function(){function n(e){this.parsed=tR(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return zi(v_(this.rgba),2)},n.prototype.isDark=function(){return v_(this.rgba)<.5},n.prototype.isLight=function(){return v_(this.rgba)>=.5},n.prototype.toHex=function(){return e=m_(this.rgba),t=e.r,i=e.g,r=e.b,a=(s=e.a)<1?Lg(zi(255*s)):"","#"+Lg(t)+Lg(i)+Lg(r)+a;var e,t,i,r,s,a},n.prototype.toRgb=function(){return m_(this.rgba)},n.prototype.toRgbString=function(){return e=m_(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return VE(np(this.rgba))},n.prototype.toHslString=function(){return e=VE(np(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=QC(this.rgba),{h:zi(e.h),s:zi(e.s),v:zi(e.v),a:zi(e.a,3)};var e},n.prototype.invert=function(){return Cr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Cr(g_(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Cr(g_(this.rgba,-e))},n.prototype.grayscale=function(){return Cr(g_(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Cr(GE(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Cr(GE(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Cr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):zi(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=np(this.rgba);return typeof e=="number"?Cr({h:e,s:t.s,l:t.l,a:t.a}):zi(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Cr(e).toHex()},n}(),Cr=function(n){return n instanceof dx?n:new dx(n)},$E=[],h5=function(n){n.forEach(function(e){$E.indexOf(e)<0&&(e(dx,fx),$E.push(e))})};function p5(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,d,h=i[this.toHex()];if(h)return h;if(a!=null&&a.closest){var m=this.toRgb(),g=1/0,v="black";if(!s.length)for(var x in t)s[x]=new n(t[x]).toRgb();for(var w in t){var b=(u=m,d=s[w],Math.pow(u.r-d.r,2)+Math.pow(u.g-d.g,2)+Math.pow(u.b-d.b,2));b<g&&(g=b,v=w)}return v}},e.string.push([function(a){var u=a.toLowerCase(),d=u==="transparent"?"#0000":t[u];return d?new n(d).toRgb():null},"name"])}function xd(){return(xd=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function y1(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function hx(n){var e=V.useRef(n),t=V.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var cd=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},ip=function(n){return"touches"in n},px=function(n){return n&&n.ownerDocument.defaultView||self},XE=function(n,e,t){var i=n.getBoundingClientRect(),r=ip(e)?function(s,a){for(var u=0;u<s.length;u++)if(s[u].identifier===a)return s[u];return s[0]}(e.touches,t):e;return{left:cd((r.pageX-(i.left+px(n).pageXOffset))/i.width),top:cd((r.pageY-(i.top+px(n).pageYOffset))/i.height)}},jE=function(n){!ip(n)&&n.preventDefault()},_1=te.memo(function(n){var e=n.onMove,t=n.onKey,i=y1(n,["onMove","onKey"]),r=V.useRef(null),s=hx(e),a=hx(t),u=V.useRef(null),d=V.useRef(!1),h=V.useMemo(function(){var x=function(E){jE(E),(ip(E)?E.touches.length>0:E.buttons>0)&&r.current?s(XE(r.current,E,u.current)):b(!1)},w=function(){return b(!1)};function b(E){var S=d.current,C=px(r.current),P=E?C.addEventListener:C.removeEventListener;P(S?"touchmove":"mousemove",x),P(S?"touchend":"mouseup",w)}return[function(E){var S=E.nativeEvent,C=r.current;if(C&&(jE(S),!function(I,B){return B&&!ip(I)}(S,d.current)&&C)){if(ip(S)){d.current=!0;var P=S.changedTouches||[];P.length&&(u.current=P[0].identifier)}C.focus(),s(XE(C,S,u.current)),b(!0)}},function(E){var S=E.which||E.keyCode;S<37||S>40||(E.preventDefault(),a({left:S===39?.05:S===37?-.05:0,top:S===40?.05:S===38?-.05:0}))},b]},[a,s]),m=h[0],g=h[1],v=h[2];return V.useEffect(function(){return v},[v]),te.createElement("div",xd({},i,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:r,onKeyDown:g,tabIndex:0,role:"slider"}))}),Bp=function(n){return n.filter(Boolean).join(" ")},x1=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=Bp(["react-colorful__pointer",n.className]);return te.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},te.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Ir=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},nR=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:Ir(n.h),s:Ir(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:Ir(r/2),a:Ir(i,2)}},mx=function(n){var e=nR(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},y_=function(n){var e=nR(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},iR=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),a=i*(1-t),u=i*(1-(e-s)*t),d=i*(1-(1-e+s)*t),h=s%6;return{r:Ir(255*[i,u,a,a,d,i][h]),g:Ir(255*[d,i,i,u,a,a][h]),b:Ir(255*[a,a,d,i,i,u][h]),a:Ir(r,2)}},rR=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),a=s-Math.min(e,t,i),u=a?s===e?(t-i)/a:s===t?2+(i-e)/a:4+(e-t)/a:0;return{h:Ir(60*(u<0?u+6:u)),s:Ir(s?a/s*100:0),v:Ir(s/255*100),a:r}},sR=te.memo(function(n){var e=n.hue,t=n.onChange,i=Bp(["react-colorful__hue",n.className]);return te.createElement("div",{className:i},te.createElement(_1,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:cd(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":Ir(e),"aria-valuemax":"360","aria-valuemin":"0"},te.createElement(x1,{className:"react-colorful__hue-pointer",left:e/360,color:mx({h:e,s:100,v:100,a:1})})))}),oR=te.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:mx({h:e.h,s:100,v:100,a:1})};return te.createElement("div",{className:"react-colorful__saturation",style:i},te.createElement(_1,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:cd(e.s+100*r.left,0,100),v:cd(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Ir(e.s)+"%, Brightness "+Ir(e.v)+"%"},te.createElement(x1,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:mx(e)})))}),S1=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function aR(n,e,t){var i=hx(t),r=V.useState(function(){return n.toHsva(e)}),s=r[0],a=r[1],u=V.useRef({color:e,hsva:s});V.useEffect(function(){if(!n.equal(e,u.current.color)){var h=n.toHsva(e);u.current={hsva:h,color:e},a(h)}},[e,n]),V.useEffect(function(){var h;S1(s,u.current.hsva)||n.equal(h=n.fromHsva(s),u.current.color)||(u.current={hsva:s,color:h},i(h))},[s,n,i]);var d=V.useCallback(function(h){a(function(m){return Object.assign({},m,h)})},[]);return[s,d]}var m5=typeof window<"u"?V.useLayoutEffect:V.useEffect,g5=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},qE=new Map,lR=function(n){m5(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!qE.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,qE.set(e,t);var i=g5();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},v5=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,a=y1(n,["className","colorModel","color","onChange"]),u=V.useRef(null);lR(u);var d=aR(t,r,s),h=d[0],m=d[1],g=Bp(["react-colorful",e]);return te.createElement("div",xd({},a,{ref:u,className:g}),te.createElement(oR,{hsva:h,onChange:m}),te.createElement(sR,{hue:h.h,onChange:m,className:"react-colorful__last-control"}))},y5=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+y_(Object.assign({},t,{a:0}))+", "+y_(Object.assign({},t,{a:1}))+")"},s=Bp(["react-colorful__alpha",e]),a=Ir(100*t.a);return te.createElement("div",{className:s},te.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),te.createElement(_1,{onMove:function(u){i({a:u.left})},onKey:function(u){i({a:cd(t.a+u.left)})},"aria-label":"Alpha","aria-valuetext":a+"%","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"},te.createElement(x1,{className:"react-colorful__alpha-pointer",left:t.a,color:y_(t)})))},_5=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,a=y1(n,["className","colorModel","color","onChange"]),u=V.useRef(null);lR(u);var d=aR(t,r,s),h=d[0],m=d[1],g=Bp(["react-colorful",e]);return te.createElement("div",xd({},a,{ref:u,className:g}),te.createElement(oR,{hsva:h,onChange:m}),te.createElement(sR,{hue:h.h,onChange:m}),te.createElement(y5,{hsva:h,onChange:m,className:"react-colorful__last-control"}))},x5={defaultColor:{r:0,g:0,b:0,a:1},toHsva:rR,fromHsva:iR,equal:S1},S5=function(n){return te.createElement(_5,xd({},n,{colorModel:x5}))},w5={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return rR({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=iR(n)).r,g:e.g,b:e.b};var e},equal:S1},M5=function(n){return te.createElement(v5,xd({},n,{colorModel:w5}))};function Sd(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(m){try{h(i.next(m))}catch(g){a(g)}}function d(m){try{h(i.throw(m))}catch(g){a(g)}}function h(m){m.done?s(m.value):r(m.value).then(u,d)}h((i=i.apply(n,e||[])).next())})}function wd(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(m){return d([h,m])}}function d(h){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(t=0)),t;)try{if(i=1,r&&(s=h[0]&2?r.return:h[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,h[1])).done)return s;switch(r=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){t.label=h[1];break}if(h[0]===6&&t.label<s[1]){t.label=s[1],s=h;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(h);break}s[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(m){h=[6,m],r=0}finally{i=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function E5(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],a;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(u){a={error:u}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s}function b5(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(E5(arguments[e]));return n}var T5=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Vp(n,e){var t=A5(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function A5(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=T5.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var C5=[".DS_Store","Thumbs.db"];function R5(n){return Sd(this,void 0,void 0,function(){return wd(this,function(e){return D0(n)&&P5(n)?[2,N5(n.dataTransfer,n.type)]:I5(n)?[2,L5(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,D5(n)]:[2,[]]})})}function P5(n){return D0(n.dataTransfer)}function I5(n){return D0(n)&&D0(n.target)}function D0(n){return typeof n=="object"&&n!==null}function L5(n){return gx(n.target.files).map(function(e){return Vp(e)})}function D5(n){return Sd(this,void 0,void 0,function(){var e;return wd(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return Vp(i)})]}})})}function N5(n,e){return Sd(this,void 0,void 0,function(){var t,i;return wd(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=gx(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(O5))]):[3,2];case 1:return i=r.sent(),[2,YE(uR(i))];case 2:return[2,YE(gx(n.files).map(function(s){return Vp(s)}))]}})})}function YE(n){return n.filter(function(e){return C5.indexOf(e.name)===-1})}function gx(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function O5(n){if(typeof n.webkitGetAsEntry!="function")return KE(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?cR(e):KE(n)}function uR(n){return n.reduce(function(e,t){return b5(e,Array.isArray(t)?uR(t):[t])},[])}function KE(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=Vp(e);return Promise.resolve(t)}function k5(n){return Sd(this,void 0,void 0,function(){return wd(this,function(e){return[2,n.isDirectory?cR(n):U5(n)]})})}function cR(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function s(){var a=this;e.readEntries(function(u){return Sd(a,void 0,void 0,function(){var d,h,m;return wd(this,function(g){switch(g.label){case 0:if(u.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return d=g.sent(),t(d),[3,4];case 3:return h=g.sent(),i(h),[3,4];case 4:return[3,6];case 5:m=Promise.all(u.map(k5)),r.push(m),s(),g.label=6;case 6:return[2]}})})},function(u){i(u)})}s()})}function U5(n){return Sd(this,void 0,void 0,function(){return wd(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var s=Vp(r,n.fullPath);t(s)},function(r){i(r)})})]})})}var Dg={},ZE;function F5(){return ZE||(ZE=1,Dg.__esModule=!0,Dg.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(a){var u=a.trim().toLowerCase();return u.charAt(0)==="."?i.toLowerCase().endsWith(u):u.endsWith("/*")?s===u.replace(/\/.*$/,""):r===u})}return!0}),Dg}var z5=F5();const B5=fd(z5);function JE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function QE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JE(Object(t),!0).forEach(function(i){fR(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):JE(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function fR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eb(n,e){return G5(n)||W5(n,e)||H5(n,e)||V5()}function V5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H5(n,e){if(n){if(typeof n=="string")return tb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tb(n,e)}}function tb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function W5(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,u;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(d){s=!0,u=d}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw u}}return i}}function G5(n){if(Array.isArray(n))return n}var $5="file-invalid-type",X5="file-too-large",j5="file-too-small",q5="too-many-files",Y5=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:$5,message:"File type must be ".concat(t)}},nb=function(e){return{code:X5,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},ib=function(e){return{code:j5,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},K5={code:q5,message:"Too many files"};function dR(n,e){var t=n.type==="application/x-moz-file"||B5(n,e);return[t,t?null:Y5(e)]}function hR(n,e,t){if(Bh(n.size))if(Bh(e)&&Bh(t)){if(n.size>t)return[!1,nb(t)];if(n.size<e)return[!1,ib(e)]}else{if(Bh(e)&&n.size<e)return[!1,ib(e)];if(Bh(t)&&n.size>t)return[!1,nb(t)]}return[!0,null]}function Bh(n){return n!=null}function Z5(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,a=n.maxFiles;return!s&&e.length>1||s&&a>=1&&e.length>a?!1:e.every(function(u){var d=dR(u,t),h=eb(d,1),m=h[0],g=hR(u,i,r),v=eb(g,1),x=v[0];return m&&x})}function N0(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Ng(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function rb(n){n.preventDefault()}function J5(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Q5(n){return n.indexOf("Edge/")!==-1}function eV(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return J5(n)||Q5(n)}function No(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return e.some(function(u){return!N0(i)&&u&&u.apply(void 0,[i].concat(s)),N0(i)})}}function tV(){return"showOpenFilePicker"in window}function nV(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return QE(QE({},e),{},fR({},t,[]))},{}):{}}]}function iV(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function rV(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var sV=["children"],oV=["open"],aV=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],lV=["refKey","onChange","onClick"];function uV(n){return dV(n)||fV(n)||pR(n)||cV()}function cV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fV(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dV(n){if(Array.isArray(n))return vx(n)}function __(n,e){return mV(n)||pV(n,e)||pR(n,e)||hV()}function hV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pR(n,e){if(n){if(typeof n=="string")return vx(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vx(n,e)}}function vx(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function pV(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,u;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(d){s=!0,u=d}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw u}}return i}}function mV(n){if(Array.isArray(n))return n}function sb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function jn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sb(Object(t),!0).forEach(function(i){yx(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sb(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function yx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O0(n,e){if(n==null)return{};var t=gV(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function gV(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var w1=V.forwardRef(function(n,e){var t=n.children,i=O0(n,sV),r=gR(i),s=r.open,a=O0(r,oV);return V.useImperativeHandle(e,function(){return{open:s}},[s]),te.createElement(V.Fragment,null,t(jn(jn({},a),{},{open:s})))});w1.displayName="Dropzone";var mR={disabled:!1,getFilesFromEvent:R5,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};w1.defaultProps=mR;w1.propTypes={children:Nn.func,accept:Nn.oneOfType([Nn.string,Nn.arrayOf(Nn.string)]),multiple:Nn.bool,preventDropOnDocument:Nn.bool,noClick:Nn.bool,noKeyboard:Nn.bool,noDrag:Nn.bool,noDragEventsBubbling:Nn.bool,minSize:Nn.number,maxSize:Nn.number,maxFiles:Nn.number,disabled:Nn.bool,getFilesFromEvent:Nn.func,onFileDialogCancel:Nn.func,onFileDialogOpen:Nn.func,useFsAccessApi:Nn.bool,onDragEnter:Nn.func,onDragLeave:Nn.func,onDragOver:Nn.func,onDrop:Nn.func,onDropAccepted:Nn.func,onDropRejected:Nn.func,validator:Nn.func};var _x={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function gR(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=jn(jn({},mR),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,a=e.minSize,u=e.multiple,d=e.maxFiles,h=e.onDragEnter,m=e.onDragLeave,g=e.onDragOver,v=e.onDrop,x=e.onDropAccepted,w=e.onDropRejected,b=e.onFileDialogCancel,E=e.onFileDialogOpen,S=e.useFsAccessApi,C=e.preventDropOnDocument,P=e.noClick,I=e.noKeyboard,B=e.noDrag,N=e.noDragEventsBubbling,U=e.validator,H=V.useMemo(function(){return typeof E=="function"?E:ob},[E]),O=V.useMemo(function(){return typeof b=="function"?b:ob},[b]),D=V.useRef(null),W=V.useRef(null),ee=V.useReducer(vV,_x),ne=__(ee,2),le=ne[0],pe=ne[1],de=le.isFocused,_e=le.isFileDialogActive,F=le.draggedFiles,J=V.useRef(typeof window<"u"&&window.isSecureContext&&S&&tV()),Z=function(){!J.current&&_e&&setTimeout(function(){if(W.current){var me=W.current.files;me.length||(pe({type:"closeDialog"}),O())}},300)};V.useEffect(function(){return window.addEventListener("focus",Z,!1),function(){window.removeEventListener("focus",Z,!1)}},[W,_e,O,J]);var $=V.useRef([]),re=function(me){D.current&&D.current.contains(me.target)||(me.preventDefault(),$.current=[])};V.useEffect(function(){return C&&(document.addEventListener("dragover",rb,!1),document.addEventListener("drop",re,!1)),function(){C&&(document.removeEventListener("dragover",rb),document.removeEventListener("drop",re))}},[D,C]);var Ne=V.useCallback(function(Q){Q.preventDefault(),Q.persist(),Ue(Q),$.current=[].concat(uV($.current),[Q.target]),Ng(Q)&&Promise.resolve(r(Q)).then(function(me){N0(Q)&&!N||(pe({draggedFiles:me,isDragActive:!0,type:"setDraggedFiles"}),h&&h(Q))})},[r,h,N]),he=V.useCallback(function(Q){Q.preventDefault(),Q.persist(),Ue(Q);var me=Ng(Q);if(me&&Q.dataTransfer)try{Q.dataTransfer.dropEffect="copy"}catch{}return me&&g&&g(Q),!1},[g,N]),Te=V.useCallback(function(Q){Q.preventDefault(),Q.persist(),Ue(Q);var me=$.current.filter(function(Ee){return D.current&&D.current.contains(Ee)}),Pe=me.indexOf(Q.target);Pe!==-1&&me.splice(Pe,1),$.current=me,!(me.length>0)&&(pe({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Ng(Q)&&m&&m(Q))},[D,m,N]),Ie=V.useCallback(function(Q,me){var Pe=[],Ee=[];Q.forEach(function(et){var je=dR(et,t),Je=__(je,2),Ft=Je[0],Fe=Je[1],lt=hR(et,a,s),bt=__(lt,2),Rt=bt[0],ut=bt[1],Wt=U?U(et):null;if(Ft&&Rt&&!Wt)Pe.push(et);else{var Ot=[Fe,ut];Wt&&(Ot=Ot.concat(Wt)),Ee.push({file:et,errors:Ot.filter(function(hn){return hn})})}}),(!u&&Pe.length>1||u&&d>=1&&Pe.length>d)&&(Pe.forEach(function(et){Ee.push({file:et,errors:[K5]})}),Pe.splice(0)),pe({acceptedFiles:Pe,fileRejections:Ee,type:"setFiles"}),v&&v(Pe,Ee,me),Ee.length>0&&w&&w(Ee,me),Pe.length>0&&x&&x(Pe,me)},[pe,u,t,a,s,d,v,x,w,U]),Ce=V.useCallback(function(Q){Q.preventDefault(),Q.persist(),Ue(Q),$.current=[],Ng(Q)&&Promise.resolve(r(Q)).then(function(me){N0(Q)&&!N||Ie(me,Q)}),pe({type:"reset"})},[r,Ie,N]),He=V.useCallback(function(){if(J.current){pe({type:"openDialog"}),H();var Q={multiple:u,types:nV(t)};window.showOpenFilePicker(Q).then(function(me){return r(me)}).then(function(me){Ie(me,null),pe({type:"closeDialog"})}).catch(function(me){iV(me)?(O(me),pe({type:"closeDialog"})):rV(me)&&(J.current=!1,W.current&&(W.current.value=null,W.current.click()))});return}W.current&&(pe({type:"openDialog"}),H(),W.current.value=null,W.current.click())},[pe,H,O,S,Ie,t,u]),gt=V.useCallback(function(Q){!D.current||!D.current.isEqualNode(Q.target)||(Q.key===" "||Q.key==="Enter"||Q.keyCode===32||Q.keyCode===13)&&(Q.preventDefault(),He())},[D,He]),Ze=V.useCallback(function(){pe({type:"focus"})},[]),Nt=V.useCallback(function(){pe({type:"blur"})},[]),Oe=V.useCallback(function(){P||(eV()?setTimeout(He,0):He())},[P,He]),Re=function(me){return i?null:me},j=function(me){return I?null:Re(me)},pt=function(me){return B?null:Re(me)},Ue=function(me){N&&me.stopPropagation()},st=V.useMemo(function(){return function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},me=Q.refKey,Pe=me===void 0?"ref":me,Ee=Q.role,et=Q.onKeyDown,je=Q.onFocus,Je=Q.onBlur,Ft=Q.onClick,Fe=Q.onDragEnter,lt=Q.onDragOver,bt=Q.onDragLeave,Rt=Q.onDrop,ut=O0(Q,aV);return jn(jn(yx({onKeyDown:j(No(et,gt)),onFocus:j(No(je,Ze)),onBlur:j(No(Je,Nt)),onClick:Re(No(Ft,Oe)),onDragEnter:pt(No(Fe,Ne)),onDragOver:pt(No(lt,he)),onDragLeave:pt(No(bt,Te)),onDrop:pt(No(Rt,Ce)),role:typeof Ee=="string"&&Ee!==""?Ee:"button"},Pe,D),!i&&!I?{tabIndex:0}:{}),ut)}},[D,gt,Ze,Nt,Oe,Ne,he,Te,Ce,I,B,i]),Ge=V.useCallback(function(Q){Q.stopPropagation()},[]),At=V.useMemo(function(){return function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},me=Q.refKey,Pe=me===void 0?"ref":me,Ee=Q.onChange,et=Q.onClick,je=O0(Q,lV),Je=yx({accept:t,multiple:u,type:"file",style:{display:"none"},onChange:Re(No(Ee,Ce)),onClick:Re(No(et,Ge)),tabIndex:-1},Pe,W);return jn(jn({},Je),je)}},[W,t,u,Ce,i]),qe=F.length,X=qe>0&&Z5({files:F,accept:t,minSize:a,maxSize:s,multiple:u,maxFiles:d}),z=qe>0&&!X;return jn(jn({},le),{},{isDragAccept:X,isDragReject:z,isFocused:de&&!i,getRootProps:st,getInputProps:At,rootRef:D,inputRef:W,open:Re(He)})}function vV(n,e){switch(e.type){case"focus":return jn(jn({},n),{},{isFocused:!0});case"blur":return jn(jn({},n),{},{isFocused:!1});case"openDialog":return jn(jn({},_x),{},{isFileDialogActive:!0});case"closeDialog":return jn(jn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return jn(jn({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return jn(jn({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return jn({},_x);default:return n}}function ob(){}const yV=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(a,u,d)=>{let h=a;if(u){const m=(d==null?void 0:d.equalityFn)||Object.is;let g=a(i.getState());h=v=>{const x=a(v);if(!m(g,x)){const w=g;u(g=x,w)}},d!=null&&d.fireImmediately&&u(g,g)}return r(h)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var x_,ab;function _V(){return ab||(ab=1,x_=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),x_}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var S_,lb;function vR(){if(lb)return S_;lb=1;var n=_V();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return S_=function(i){var r,s;return!(e(i)===!1||(r=i.constructor,typeof r!="function")||(s=r.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},S_}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var w_,ub;function M1(){if(ub)return w_;ub=1;var n=vR();return w_=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},w_}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var M_,cb;function xV(){return cb||(cb=1,M_=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break}),M_}var E_,fb;function SV(){if(fb)return E_;fb=1;var n=M1(),e=xV();function t(a,u){for(var d=arguments.length,h=0;++h<d;){var m=arguments[h];r(m)&&e(m,i,a)}return a}function i(a,u){if(s(u)){var d=this[u];r(a)&&r(d)?t(d,a):this[u]=a}}function r(a){return n(a)&&!Array.isArray(a)}function s(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return E_=t,E_}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var b_,db;function wV(){if(db)return b_;db=1,b_=function(t,i,r,s,a){if(!n(t)||!i)return t;if(i=e(i),r&&(i+="."+e(r)),s&&(i+="."+e(s)),a&&(i+="."+e(a)),i in t)return t[i];for(var u=i.split("."),d=u.length,h=-1;t&&++h<d;){for(var m=u[h];m[m.length-1]==="\\";)m=m.slice(0,-1)+"."+u[++h];t=t[m]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return b_}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var T_,hb;function MV(){return hb||(hb=1,T_=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,s=0;++s<r;)for(var a=Object(arguments[s]),u=Object.getOwnPropertySymbols(a),d=0;d<u.length;d++){var h=u[d];t.call(a,h)&&(i[h]=a[h])}return i}),T_}var A_,pb;function EV(){if(pb)return A_;pb=1;var n=M1(),e=MV();A_=Object.assign||function(u){if(u===null||typeof u>"u")throw new TypeError("Cannot convert undefined or null to object");s(u)||(u={});for(var d=1;d<arguments.length;d++){var h=arguments[d];i(h)&&(h=r(h)),s(h)&&(t(u,h),e(u,h))}return u};function t(u,d){for(var h in d)a(d,h)&&(u[h]=d[h])}function i(u){return u&&typeof u=="string"}function r(u){var d={};for(var h in u)d[h]=u[h];return d}function s(u){return u&&typeof u=="object"||n(u)}function a(u,d){return Object.prototype.hasOwnProperty.call(u,d)}return A_}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var C_,mb;function bV(){if(mb)return C_;mb=1;var n=EV();C_=function(r,s,a){if(typeof r!="string")throw new TypeError("expected a string");typeof s=="function"&&(a=s,s=null),typeof s=="string"&&(s={sep:s});var u=n({sep:"."},s),d=u.quotes||['"',"'","`"],h;u.brackets===!0?h={"<":">","(":")","[":"]","{":"}"}:u.brackets&&(h=u.brackets);var m=[],g=[],v=[""],x=u.sep,w=r.length,b=-1,E;function S(){if(h&&g.length)return h[g[g.length-1]]}for(;++b<w;){var C=r[b],P=r[b+1],I={val:C,idx:b,arr:v,str:r};if(m.push(I),C==="\\"){I.val=i(u,r,b)===!0?C+P:P,I.escaped=!0,typeof a=="function"&&a(I),v[v.length-1]+=I.val,b++;continue}if(h&&h[C]){g.push(C);var B=S(),N=b+1;if(r.indexOf(B,N+1)!==-1)for(;g.length&&N<w;){var U=r[++N];if(U==="\\"){U++;continue}if(d.indexOf(U)!==-1){N=e(r,U,N+1);continue}if(B=S(),g.length&&r.indexOf(B,N+1)===-1)break;if(h[U]){g.push(U);continue}B===U&&g.pop()}if(E=N,E===-1){v[v.length-1]+=C;continue}C=r.slice(b,E+1),I.val=C,I.idx=b=E}if(d.indexOf(C)!==-1){if(E=e(r,C,b+1),E===-1){v[v.length-1]+=C;continue}t(C,u)===!0?C=r.slice(b,E+1):C=r.slice(b+1,E),I.val=C,I.idx=b=E}if(typeof a=="function"&&(a(I,m),C=I.val,b=I.idx),I.val===x&&I.split!==!1){v.push("");continue}v[v.length-1]+=I.val}return v};function e(r,s,a,u){var d=r.indexOf(s,a);return r.charAt(d-1)==="\\"?e(r,s,d+1):d}function t(r,s){return s.keepDoubleQuotes===!0&&r==='"'||s.keepSingleQuotes===!0&&r==="'"?!0:s.keepQuotes}function i(r,s,a){return typeof r.keepEscaping=="function"?r.keepEscaping(s,a):r.keepEscaping===!0||s[a+1]==="\\"}return C_}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var R_,gb;function TV(){return gb||(gb=1,R_=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),R_}var P_,vb;function AV(){if(vb)return P_;vb=1;var n=TV();P_=function(r){n(r)||(r={});for(var s=arguments.length,a=1;a<s;a++){var u=arguments[a];n(u)&&e(r,u)}return r};function e(i,r){for(var s in r)t(r,s)&&(i[s]=r[s])}function t(i,r){return Object.prototype.hasOwnProperty.call(i,r)}return P_}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var I_,yb;function CV(){return yb||(yb=1,I_=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),I_}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var L_,_b;function RV(){if(_b)return L_;_b=1;var n=bV(),e=AV(),t=vR(),i=CV();L_=function(s,a,u){if(!i(s)||(Array.isArray(a)&&(a=[].concat.apply([],a).join(".")),typeof a!="string"))return s;for(var d=n(a,{sep:".",brackets:!0}).filter(r),h=d.length,m=-1,g=s;++m<h;){var v=d[m];if(m!==h-1){i(g[v])||(g[v]={}),g=g[v];continue}t(g[v])&&t(u)?g[v]=e({},g[v],u):g[v]=u}return s};function r(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return L_}var D_,xb;function PV(){if(xb)return D_;xb=1;var n=M1(),e=SV(),t=wV(),i=RV();return D_=function(s,a,u){if(!n(s))throw new TypeError("expected an object");if(typeof a!="string"||u==null)return e.apply(null,arguments);if(typeof u=="string")return i(s,a,u),s;var d=t(s,a);return n(u)&&n(d)&&(u=e({},d,u)),i(s,a,u),s},D_}var IV=PV();const LV=fd(IV),E1=(...n)=>n.filter(Boolean).join(".");function DV(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function NV(n){const e=V.useRef(null),t=V.useRef(null),i=V.useRef(!0);return V.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),V.useEffect(()=>{if(i.current){i.current=!1;return}let r;const s=e.current,a=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",a,{once:!0});const{height:u}=t.current.getBoundingClientRect();return s.style.height=u+"px",n||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",a),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const OV=n=>{const[e,t]=V.useState(n.getVisiblePaths());return V.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:oC});return()=>i()},[n]),e};function yR(n=3){const e=V.useRef(null),t=V.useRef(null),[i,r]=V.useState(!1),s=V.useCallback(()=>r(!0),[]),a=V.useCallback(()=>r(!1),[]);return V.useLayoutEffect(()=>{if(i){const{bottom:u,top:d,left:h}=e.current.getBoundingClientRect(),{height:m}=t.current.getBoundingClientRect(),g=u+m>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=h+"px",g==="down"?t.current.style.top=u+n+"px":t.current.style.bottom=window.innerHeight-d+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:a}}h5([p5]);const kV={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Jr.extend({color:()=>n=>Cr(n).isValid()});const UV=n=>Jr().color().test(n);function _R(n,{format:e,hasAlpha:t,isString:i}){const r=kV[e]+(i&&e!=="hex"?"String":""),s=n[r]();return typeof s=="object"&&!t?D4(s,["a"]):s}const xR=(n,e)=>{const t=Cr(n);if(!t.isValid())throw Error("Invalid color");return _R(t,e)},FV=(n,e)=>_R(Cr(n),qt(qt({},e),{},{isString:!0,format:"hex"})),zV=({value:n})=>{const e=d5(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:xR(n,r),settings:r}};var BV=Object.freeze({__proto__:null,schema:UV,sanitize:xR,format:FV,normalize:zV});const VV=Dt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),HV=Dt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),WV=Dt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function Sb(n,e){return e!=="rgb"?Cr(n).toRgb():n}function GV({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:s}=pr(),{format:a,hasAlpha:u}=t,{popinRef:d,wrapperRef:h,shown:m,show:g,hide:v}=yR(),x=V.useRef(0),[w,b]=V.useState(()=>Sb(n,a)),E=u?S5:M5,S=()=>{b(Sb(n,a)),g(),r()},C=()=>{v(),s(),window.clearTimeout(x.current)},P=()=>{x.current=window.setTimeout(C,500)};return V.useEffect(()=>()=>window.clearTimeout(x.current),[]),te.createElement(te.Fragment,null,te.createElement(VV,{ref:d,active:m,onClick:()=>S(),style:{color:e}}),m&&te.createElement(m1,null,te.createElement(WC,{onPointerUp:C}),te.createElement(WV,{ref:h,onMouseEnter:()=>window.clearTimeout(x.current),onMouseLeave:I=>I.buttons===0&&P()},te.createElement(E,{color:w,onChange:i}))))}function $V(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:s}=pr();return te.createElement(Ns,{input:!0},te.createElement(yo,null,t),te.createElement(HV,null,te.createElement(GV,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:s}),te.createElement(p1,{value:e,onChange:i,onUpdate:r})))}var XV=qt({component:$V},BV);function jV(){const{label:n,displayValue:e,onUpdate:t,settings:i}=pr();return te.createElement(Ns,{input:!0},te.createElement(yo,null,n),te.createElement(v1,{value:e,settings:i,onUpdate:t}))}var qV=qt({component:jV},ZC(["x","y","z"]));const YV=Dt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),KV=Dt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function ZV({value:n,settings:e,onUpdate:t}){const i=V.useRef(),r=V.useRef(0),s=V.useRef(0),a=V.useRef(1),[u,d]=V.useState(!1),[h,m]=V.useState(!1),[g,v]=$C(),x=V.useRef(null),w=V.useRef(null);V.useLayoutEffect(()=>{if(u){const{top:ee,left:ne,width:le,height:pe}=x.current.getBoundingClientRect();w.current.style.left=ne+le/2+"px",w.current.style.top=ee+pe/2+"px"}},[u]);const{keys:[b,E],joystick:S}=e,C=S==="invertY"?1:-1,{[b]:{step:P},[E]:{step:I}}=e,B=Fa("sizes","joystickWidth"),N=Fa("sizes","joystickHeight"),U=parseFloat(B)*.8/2,H=parseFloat(N)*.8/2,O=V.useCallback(()=>{i.current||(m(!0),r.current&&v({x:r.current*U}),s.current&&v({y:s.current*-H}),i.current=window.setInterval(()=>{t(ee=>{const ne=P*r.current*a.current,le=C*I*s.current*a.current;return Array.isArray(ee)?{[b]:ee[0]+ne,[E]:ee[1]+le}:{[b]:ee[b]+ne,[E]:ee[E]+le}})},16))},[U,H,t,v,P,I,b,E,C]),D=V.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,m(!1)},[]);V.useEffect(()=>{function ee(ne){a.current=RC(ne)}return window.addEventListener("keydown",ee),window.addEventListener("keyup",ee),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",ee),window.removeEventListener("keyup",ee)}},[]);const W=zp(({first:ee,active:ne,delta:[le,pe],movement:[de,_e]})=>{ee&&d(!0);const F=kl(de,-U,U),J=kl(_e,-H,H);r.current=Math.abs(de)>Math.abs(F)?Math.sign(de-F):0,s.current=Math.abs(_e)>Math.abs(J)?Math.sign(J-_e):0;let Z=n[b],$=n[E];ne?(r.current||(Z+=le*P*a.current,v({x:F})),s.current||($-=C*pe*I*a.current,v({y:J})),r.current||s.current?O():D(),t({[b]:Z,[E]:$})):(d(!1),r.current=0,s.current=0,v({x:0,y:0}),D())});return te.createElement(YV,vi({ref:x},W()),u&&te.createElement(m1,null,te.createElement(KV,{ref:w,isOutOfBounds:h},te.createElement("div",null),te.createElement("span",{ref:g}))))}const JV=Dt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function QV(){const{label:n,displayValue:e,onUpdate:t,settings:i}=pr();return te.createElement(Ns,{input:!0},te.createElement(yo,null,n),te.createElement(JV,{withJoystick:!!i.joystick},i.joystick&&te.createElement(ZV,{value:e,settings:i,onUpdate:t}),te.createElement(v1,{value:e,settings:i,onUpdate:t})))}const eH=["joystick"],SR=ZC(["x","y"]),tH=n=>{let{joystick:e=!0}=n,t=Un(n,eH);const{value:i,settings:r}=SR.normalize(t);return{value:i,settings:qt(qt({},r),{},{joystick:e})}};var nH=qt(qt({component:QV},SR),{},{normalize:tH});const iH=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},rH=(n,e)=>typeof e=="object"&&"image"in e,sH=({image:n})=>({value:n});var oH=Object.freeze({__proto__:null,sanitize:iH,schema:rH,normalize:sH});const aH=Dt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),lH=Dt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),uH=Dt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),cH=Dt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),fH=Dt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),dH=Dt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function hH(){const{label:n,value:e,onUpdate:t,disabled:i}=pr(),{popinRef:r,wrapperRef:s,shown:a,show:u,hide:d}=yR(),h=V.useCallback(w=>{w.length&&t(w[0])},[t]),m=V.useCallback(w=>{w.stopPropagation(),t(void 0)},[t]),{getRootProps:g,getInputProps:v,isDragAccept:x}=gR({maxFiles:1,accept:"image/*",onDrop:h,disabled:i});return te.createElement(Ns,{input:!0},te.createElement(yo,null,n),te.createElement(aH,null,te.createElement(uH,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&u(),onPointerUp:d,style:{backgroundImage:e?`url(${e})`:"none"}}),a&&!!e&&te.createElement(m1,null,te.createElement(WC,{onPointerUp:d,style:{cursor:"pointer"}}),te.createElement(cH,{ref:s,style:{backgroundImage:`url(${e})`}})),te.createElement(lH,g({isDragAccept:x}),te.createElement("input",v()),te.createElement(fH,null,x?"drop image":"click or drop")),te.createElement(dH,{onClick:m,disabled:!e})))}var pH=qt({component:hH},oH);const wb=Jr().number(),mH=(n,e)=>Jr().array().length(2).every.number().test(n)&&Jr().schema({min:wb,max:wb}).test(e),k0=n=>({min:n[0],max:n[1]}),wR=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?k0(n):n,s={min:i[0],max:i[1]},{min:a,max:u}=qt(qt({},s),r);return[kl(Number(a),e,Math.max(e,u)),kl(Number(u),Math.min(t,a),t)]},gH=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=KC(k0(n),{min:i,max:i}),s=[e,t],a=qt(qt({},r),{},{bounds:s});return{value:wR(k0(n),a,n),settings:a}};var vH=Object.freeze({__proto__:null,schema:mH,format:k0,sanitize:wR,normalize:gH});const yH=["value","bounds","onDrag"],_H=["bounds"],xH=Dt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function SH(n){let{value:e,bounds:[t,i],onDrag:r}=n,s=Un(n,yH);const a=V.useRef(null),u=V.useRef(null),d=V.useRef(null),h=V.useRef(0),m=Fa("sizes","scrubberWidth"),g=zp(({event:w,first:b,xy:[E],movement:[S],memo:C={}})=>{if(b){const{width:I,left:B}=a.current.getBoundingClientRect();h.current=I-parseFloat(m);const N=(w==null?void 0:w.target)===u.current||(w==null?void 0:w.target)===d.current;C.pos=I0((E-B)/I,t,i);const U=Math.abs(C.pos-e.min)-Math.abs(C.pos-e.max);C.key=U<0||U===0&&C.pos<=e.min?"min":"max",N&&(C.pos=e[C.key])}const P=C.pos+I0(S/h.current,0,i-t);return r({[C.key]:_B(P,s[C.key])}),C}),v=`calc(${P0(e.min,t,i)} * (100% - ${m} - 8px) + 4px)`,x=`calc(${1-P0(e.max,t,i)} * (100% - ${m} - 8px) + 4px)`;return te.createElement(jC,vi({ref:a},g()),te.createElement(XC,null,te.createElement(qC,{style:{left:v,right:x}})),te.createElement(ux,{position:"left",ref:u,style:{left:v}}),te.createElement(ux,{position:"right",ref:d,style:{right:x}}))}function wH(){const{label:n,displayValue:e,onUpdate:t,settings:i}=pr(),r=Un(i,_H);return te.createElement(te.Fragment,null,te.createElement(Ns,{input:!0},te.createElement(yo,null,n),te.createElement(xH,null,te.createElement(SH,vi({value:e},i,{onDrag:t})),te.createElement(v1,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var MH=qt({component:wH},vH);const EH=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},bH=["type","value"],TH=["onChange","transient","onEditStart","onEditEnd"],AH=function(){const e=CA(yV(()=>({data:{}}))),t=EH();this.storeId=L4(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const a=this.getData(),u=Object.keys(a),d=[];Object.entries(i).forEach(([m,g])=>{g.render&&u.some(v=>v.indexOf(m)===0)&&!g.render(this.get)&&d.push(m+".")});const h=[];return r.forEach(m=>{m in a&&a[m].__refCount>0&&d.every(g=>m.indexOf(g)===-1)&&(!a[m].render||a[m].render(this.get))&&h.push(m)}),h},this.setOrderedPaths=a=>{a.forEach(u=>r.add(u))},this.orderPaths=a=>(this.setOrderedPaths(a),a),this.disposePaths=a=>{e.setState(u=>{const d=u.data;return a.forEach(h=>{if(h in d){const m=d[h];m.__refCount--,m.__refCount===0&&m.type in Bo&&delete d[h]}}),{data:d}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=a=>i[a]||{},this.getData=()=>e.getState().data,this.addData=(a,u)=>{e.setState(d=>{const h=d.data;return Object.entries(a).forEach(([m,g])=>{let v=h[m];if(v){const{type:x,value:w}=g,b=Un(g,bH);x!==v.type?Na(qn.INPUT_TYPE_OVERRIDE,x):((v.__refCount===0||u)&&Object.assign(v,b),v.__refCount++)}else h[m]=qt(qt({},g),{},{__refCount:1})}),{data:h}})},this.setValueAtPath=(a,u,d)=>{e.setState(h=>{const m=h.data;return FE(m[a],u,a,this,d),{data:m}})},this.setSettingsAtPath=(a,u)=>{e.setState(d=>{const h=d.data;return h[a].settings=qt(qt({},h[a].settings),u),{data:h}})},this.disableInputAtPath=(a,u)=>{e.setState(d=>{const h=d.data;return h[a].disabled=u,{data:h}})},this.set=(a,u)=>{e.setState(d=>{const h=d.data;return Object.entries(a).forEach(([m,g])=>{try{FE(h[m],g,void 0,void 0,u)}catch{}}),{data:h}})},this.getInput=a=>{try{return this.getData()[a]}catch{Na(qn.PATH_DOESNT_EXIST,a)}},this.get=a=>{var u;return(u=this.getInput(a))===null||u===void 0?void 0:u.value},this.emitOnEditStart=a=>{t.emit(`onEditStart:${a}`,this.get(a),a,qt(qt({},this.getInput(a)),{},{get:this.get}))},this.emitOnEditEnd=a=>{t.emit(`onEditEnd:${a}`,this.get(a),a,qt(qt({},this.getInput(a)),{},{get:this.get}))},this.subscribeToEditStart=(a,u)=>{const d=`onEditStart:${a}`;return t.on(d,u),()=>t.off(d,u)},this.subscribeToEditEnd=(a,u)=>{const d=`onEditEnd:${a}`;return t.on(d,u),()=>t.off(d,u)};const s=(a,u,d)=>{const h={};return Object.entries(a).forEach(([m,g])=>{if(m==="")return Na(qn.EMPTY_KEY);let v=E1(u,m);if(g.type===Bo.FOLDER){const x=s(g.schema,v,d);Object.assign(h,x),v in i||(i[v]=g.settings)}else if(m in d)Na(qn.DUPLICATE_KEYS,m,v,d[m].path);else{const x=z4(g,m,v,h);if(x){const{type:w,options:b,input:E}=x,{onChange:S,transient:C,onEditStart:P,onEditEnd:I}=b,B=Un(b,TH);h[v]=qt(qt(qt({type:w},B),E),{},{fromPanel:!0}),d[m]={path:v,onChange:S,transient:C,onEditStart:P,onEditEnd:I}}else Na(qn.UNKNOWN_INPUT,v,g)}}),h};this.getDataFromSchema=a=>{const u={};return[s(a,"",u),u]}};new AH;const Mb=n=>"__levaInput"in n,CH=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[s,a]=DV(r);(!i||s.toLowerCase().indexOf(i)>-1)&&LV(t,a,{[s]:{__levaInput:!0,path:r}})}),t},RH=["type","label","path","valueKey","value","settings","setValue","disabled"];function PH(n){let{type:e,label:t,path:i,valueKey:r,value:s,settings:a,setValue:u,disabled:d}=n,h=Un(n,RH);const{displayValue:m,onChange:g,onUpdate:v}=GC({type:e,value:s,settings:a,setValue:u}),x=uc[e].component;return x?te.createElement(NC.Provider,{value:qt({key:r,path:i,id:""+i,label:t,displayValue:m,value:s,onChange:g,onUpdate:v,settings:a,setValue:u,disabled:d},h)},te.createElement(iB,{disabled:d},te.createElement(x,null))):(Na(qn.NO_COMPONENT_FOR_TYPE,e,i),null)}const IH=Dt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function LH({onClick:n,settings:e,label:t}){const i=Fp();return te.createElement(Ns,null,te.createElement(IH,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const DH=Dt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),NH=Dt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),OH=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function kH(n){const{label:e,opts:t}=OH(n),i=Fp();return te.createElement(Ns,{input:!!e},e&&te.createElement(yo,null,e),te.createElement(DH,null,Object.entries(t).map(([r,s])=>te.createElement(NH,{key:r,onClick:()=>s(i.get)},r))))}const UH=Dt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),MR=100;function FH(n,e){n.push(e),n.length>MR&&n.shift()}const zH=V.forwardRef(function({initialValue:n},e){const t=Fa("colors","highlight3"),i=Fa("colors","elevation2"),r=Fa("colors","highlight1"),[s,a]=V.useMemo(()=>[Cr(r).alpha(.4).toRgbString(),Cr(r).alpha(.1).toRgbString()],[r]),u=V.useRef([n]),d=V.useRef(n),h=V.useRef(n),m=V.useRef(),g=V.useCallback((w,b)=>{if(!w)return;const{width:E,height:S}=w,C=new Path2D,P=E/MR,I=S*.05;for(let U=0;U<u.current.length;U++){const H=P0(u.current[U],d.current,h.current),O=P*U,D=S-H*(S-I*2)-I;C.lineTo(O,D)}b.clearRect(0,0,E,S);const B=new Path2D(C);B.lineTo(P*(u.current.length+1),S),B.lineTo(0,S),B.lineTo(0,0);const N=b.createLinearGradient(0,0,0,S);N.addColorStop(0,s),N.addColorStop(1,a),b.fillStyle=N,b.fill(B),b.strokeStyle=i,b.lineJoin="round",b.lineWidth=14,b.stroke(C),b.strokeStyle=t,b.lineWidth=2,b.stroke(C)},[t,i,s,a]),[v,x]=dB(g);return V.useImperativeHandle(e,()=>({frame:w=>{(d.current===void 0||w<d.current)&&(d.current=w),(h.current===void 0||w>h.current)&&(h.current=w),FH(u.current,w),m.current=requestAnimationFrame(()=>g(v.current,x.current))}}),[v,x,g]),V.useEffect(()=>()=>cancelAnimationFrame(m.current),[]),te.createElement(UH,{ref:v})}),Eb=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),BH=V.forwardRef(function({initialValue:n},e){const[t,i]=V.useState(Eb(n));return V.useImperativeHandle(e,()=>({frame:r=>i(Eb(r))}),[]),te.createElement("div",null,t)});function bb(n){return typeof n=="function"?n():n.current}function VH({label:n,objectOrFn:e,settings:t}){const i=V.useRef(),r=V.useRef(bb(e));return V.useEffect(()=>{const s=window.setInterval(()=>{var a;document.hidden||(a=i.current)===null||a===void 0||a.frame(bb(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),te.createElement(Ns,{input:!0},te.createElement(yo,{align:"top"},n),t.graph?te.createElement(zH,{ref:i,initialValue:r.current}):te.createElement(BH,{ref:i,initialValue:r.current}))}const HH=["type","label","key"],WH={[Bo.BUTTON]:LH,[Bo.BUTTON_GROUP]:kH,[Bo.MONITOR]:VH},GH=te.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:s,emitOnEditStart:a,emitOnEditEnd:u}]=pB(n);if(!e)return null;const{type:d,label:h,key:m}=e,g=Un(e,HH);if(d in Bo){const v=WH[d];return te.createElement(v,vi({label:h,path:n},g))}return d in uc?te.createElement(PH,vi({key:s+n,type:d,label:h,storeId:s,path:n,valueKey:m,setValue:t,setSettings:i,disable:r,emitOnEditStart:a,emitOnEditEnd:u},g)):(E4(qn.UNSUPPORTED_INPUT,d,n),null)});function $H({toggle:n,toggled:e,name:t}){return te.createElement(eB,{onClick:()=>n()},te.createElement(g1,{toggled:e}),te.createElement("div",null,t))}const XH=({name:n,path:e,tree:t})=>{const i=Fp(),r=E1(e,n),{collapsed:s,color:a}=i.getFolderSettings(r),[u,d]=V.useState(!s),h=V.useRef(null),m=Fa("colors","folderWidgetColor"),g=Fa("colors","folderTextColor");return V.useLayoutEffect(()=>{h.current.style.setProperty("--leva-colors-folderWidgetColor",a||m),h.current.style.setProperty("--leva-colors-folderTextColor",a||g)},[a,m,g]),te.createElement(L0,{ref:h},te.createElement($H,{name:n,toggled:u,toggle:()=>d(v=>!v)}),te.createElement(ER,{parent:r,tree:t,toggled:u}))},ER=te.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:s})=>{const{wrapperRef:a,contentRef:u}=NV(s),d=Fp(),h=([g,v])=>{var x;return(Mb(v)?(x=d.getInput(v.path))===null||x===void 0?void 0:x.order:d.getFolderSettings(E1(i,g)).order)||0},m=Object.entries(r).sort((g,v)=>h(g)-h(v));return te.createElement(ax,{ref:a,isRoot:n,fill:e,flat:t},te.createElement(BC,{ref:u,isRoot:n,toggled:s},m.map(([g,v])=>Mb(v)?te.createElement(GH,{key:v.path,valueKey:v.valueKey,path:v.path}):te.createElement(XH,{key:g,name:g,path:i,tree:v}))))}),jH=Dt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${HC}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),bR=40,U0=Dt("i",{$flexCenter:"",width:bR,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),qH=Dt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),YH=Dt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${U0}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),KH=Dt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),ZH=Dt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:bR}}}}),JH=te.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=V.useState(""),s=V.useMemo(()=>CC(n,250),[n]),a=()=>{n(""),r("")},u=d=>{const h=d.currentTarget.value;e(!0),r(h)};return V.useEffect(()=>{s(i)},[i,s]),te.createElement(te.Fragment,null,te.createElement(KH,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:d=>d.stopPropagation(),onChange:u}),te.createElement(U0,{onClick:()=>a(),style:{visibility:i?"visible":"hidden"}},te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function QH({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:s,title:a,drag:u,filterEnabled:d,from:h}){const[m,g]=V.useState(!1),v=V.useRef(null);V.useEffect(()=>{var w,b;m?(w=v.current)===null||w===void 0||w.focus():(b=v.current)===null||b===void 0||b.blur()},[m]);const x=zp(({offset:[w,b],first:E,last:S})=>{e({x:w,y:b}),E&&t({x:w,y:b}),S&&i({x:w,y:b})},{filterTaps:!0,from:({offset:[w,b]})=>[(h==null?void 0:h.x)||w,(h==null?void 0:h.y)||b]});return V.useEffect(()=>{const w=b=>{b.key==="L"&&b.shiftKey&&b.metaKey&&g(E=>!E)};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[]),te.createElement(te.Fragment,null,te.createElement(qH,{mode:u?"drag":void 0},te.createElement(U0,{active:!s,onClick:()=>r()},te.createElement(g1,{toggled:s,width:12,height:8})),te.createElement(ZH,vi({},u?x():{},{drag:u,filterEnabled:d}),a===void 0&&u?te.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},te.createElement("circle",{cx:"2",cy:"2",r:"2"}),te.createElement("circle",{cx:"14",cy:"2",r:"2"}),te.createElement("circle",{cx:"26",cy:"2",r:"2"}),te.createElement("circle",{cx:"2",cy:"12",r:"2"}),te.createElement("circle",{cx:"14",cy:"12",r:"2"}),te.createElement("circle",{cx:"26",cy:"12",r:"2"})):a),d&&te.createElement(U0,{active:m,onClick:()=>g(w=>!w)},te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},te.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),te.createElement(YH,{toggled:m},te.createElement(JH,{ref:v,setFilter:n,toggle:r})))}te.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:a={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:u=!1,toggled:d,setToggle:h})=>{var m,g;const v=OV(n),[x,w]=V.useState(""),b=V.useMemo(()=>CH(v,x),[v,x]),[E,S]=$C(),C=r||v.length>0,P=typeof a=="object"&&a.title||void 0,I=typeof a=="object"&&(m=a.drag)!==null&&m!==void 0?m:!0,B=typeof a=="object"&&(g=a.filter)!==null&&g!==void 0?g:!0,N=typeof a=="object"&&a.position||void 0,U=typeof a=="object"&&a.onDrag||void 0,H=typeof a=="object"&&a.onDragStart||void 0,O=typeof a=="object"&&a.onDragEnd||void 0;return te.useEffect(()=>{S({x:N==null?void 0:N.x,y:N==null?void 0:N.y})},[N,S]),q4(),te.createElement(UC.Provider,{value:{hideCopyButton:u}},te.createElement(jH,{ref:E,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!a,style:{display:C?"block":"none"}},a&&te.createElement(QH,{onDrag:D=>{S(D),U==null||U(D)},onDragStart:D=>H==null?void 0:H(D),onDragEnd:D=>O==null?void 0:O(D),setFilter:w,toggle:D=>h(W=>D??!W),toggled:d,title:P,drag:I,filterEnabled:B,from:N}),C&&te.createElement(kC.Provider,{value:n},te.createElement(ER,{isRoot:!0,fill:t,flat:i,tree:b,toggled:d}))))});Ga(mo.SELECT,IB);Ga(mo.IMAGE,pH);Ga(mo.NUMBER,SB);Ga(mo.COLOR,XV);Ga(mo.STRING,BB);Ga(mo.BOOLEAN,jB);Ga(mo.INTERVAL,MH);Ga(mo.VECTOR3D,qV);Ga(mo.VECTOR2D,nH);function e8({url:n,descriptorUrl:e,enlargedHeight:t,isActive:i,startPosition:r,onClick:s,defaultHeight:a}){const u=V.useRef(),d=lc(ld,n),h=lc(ld,e),m=d.image.width/d.image.height;h.image.width/h.image.height;const[g,v]=V.useState(!1),x=V.useRef(0);return Kk((w,b)=>{let E=i?t:a,S=E*m;const C=i?[-2,0,1]:r;o_.damp3(u.current.position,C,.2,b),o_.damp3(u.current.scale,[S,E,1],.2,b);const P=u.current.position.distanceTo({x:C[0],y:C[1],z:C[2]});i&&P<.1?v(!0):(v(!1),x.current=0),g&&o_.damp(x,"current",1,.2,b)}),kn.jsxs(kn.Fragment,{children:[kn.jsxs("mesh",{ref:u,position:r,onClick:s,children:[kn.jsx("planeGeometry",{args:[1,1,64,64]}),kn.jsx("meshPhongMaterial",{map:d,transparent:!0})]}),i&&kn.jsxs("mesh",{position:[2,0,1],children:[kn.jsx("planeGeometry",{args:[1,1,64,64]}),kn.jsx("meshPhongMaterial",{map:h,transparent:!0})]})]})}function t8(){const{scene:n}=HA(),e=c1("/background.png");e.colorSpace=Rr,n.background=e}function n8(){const[n,e]=V.useState(null),t=[{id:1,url:"/no_background.png",descriptorUrl:"/speech-bubble.png",position:[-2,2,0],defaultHeight:2,enlargedHeight:6},{id:2,url:"/background.png",descriptorUrl:"/speech-bubble.png",position:[2,2,0],defaultHeight:1,enlargedHeight:5}];return kn.jsx("div",{id:"canvas-container",children:kn.jsxs(vU,{children:[t.map((i,r)=>kn.jsx(e8,{descriptorUrl:i.descriptorUrl,defaultHeight:i.defaultHeight,enlargedHeight:i.enlargedHeight,url:i.url,startPosition:i.position,isActive:n===i.id,onClick:()=>e(n===i.id?null:i.id)},r)),kn.jsx("ambientLight",{intensity:3}),kn.jsx(t8,{})]})})}s2.createRoot(document.getElementById("root")).render(kn.jsx(V.StrictMode,{children:kn.jsx(n8,{})}));
